(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8792],{1076:(Nt,le,F)=>{"use strict";F.d(le,{$L:()=>ot,$g:()=>nn,A4:()=>X,Am:()=>Rn,As:()=>ut,Bd:()=>$,Cv:()=>mn,FA:()=>he,Fy:()=>Fe,HN:()=>qn,Hk:()=>C,I9:()=>Jt,Im:()=>Me,K3:()=>H,KA:()=>ie,Ku:()=>ua,Ll:()=>S,OE:()=>fs,T9:()=>Oe,Uj:()=>Ce,XA:()=>Ge,ZQ:()=>k,bD:()=>Qt,cY:()=>_e,dI:()=>wi,eX:()=>B,g:()=>Ie,gR:()=>Be,gz:()=>$n,hp:()=>_r,jZ:()=>O,kH:()=>At,kj:()=>Ki,lT:()=>nt,lV:()=>se,nr:()=>Ve,oD:()=>ni,od:()=>qi,qc:()=>Ht,sr:()=>K,tD:()=>Qr,u:()=>ee,vA:()=>V,yU:()=>be,yw:()=>De,zW:()=>q,zw:()=>de});const _={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},V=function(Z,U){if(!Z)throw C(U)},C=function(Z){return new Error("Firebase Database ("+_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Z)},L=function(Z){const U=[];let te=0;for(let Le=0;Le<Z.length;Le++){let ue=Z.charCodeAt(Le);ue<128?U[te++]=ue:ue<2048?(U[te++]=ue>>6|192,U[te++]=63&ue|128):55296==(64512&ue)&&Le+1<Z.length&&56320==(64512&Z.charCodeAt(Le+1))?(ue=65536+((1023&ue)<<10)+(1023&Z.charCodeAt(++Le)),U[te++]=ue>>18|240,U[te++]=ue>>12&63|128,U[te++]=ue>>6&63|128,U[te++]=63&ue|128):(U[te++]=ue>>12|224,U[te++]=ue>>6&63|128,U[te++]=63&ue|128)}return U},H={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Z,U){if(!Array.isArray(Z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const te=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,Le=[];for(let ue=0;ue<Z.length;ue+=3){const _t=Z[ue],Rt=ue+1<Z.length,Bt=Rt?Z[ue+1]:0,di=ue+2<Z.length,xt=di?Z[ue+2]:0;let Ue=(15&Bt)<<2|xt>>6,hi=63&xt;di||(hi=64,Rt||(Ue=64)),Le.push(te[_t>>2],te[(3&_t)<<4|Bt>>4],te[Ue],te[hi])}return Le.join("")},encodeString(Z,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa(Z):this.encodeByteArray(L(Z),U)},decodeString(Z,U){return this.HAS_NATIVE_SUPPORT&&!U?atob(Z):function(Z){const U=[];let te=0,Le=0;for(;te<Z.length;){const ue=Z[te++];if(ue<128)U[Le++]=String.fromCharCode(ue);else if(ue>191&&ue<224){const _t=Z[te++];U[Le++]=String.fromCharCode((31&ue)<<6|63&_t)}else if(ue>239&&ue<365){const di=((7&ue)<<18|(63&Z[te++])<<12|(63&Z[te++])<<6|63&Z[te++])-65536;U[Le++]=String.fromCharCode(55296+(di>>10)),U[Le++]=String.fromCharCode(56320+(1023&di))}else{const _t=Z[te++],Rt=Z[te++];U[Le++]=String.fromCharCode((15&ue)<<12|(63&_t)<<6|63&Rt)}}return U.join("")}(this.decodeStringToByteArray(Z,U))},decodeStringToByteArray(Z,U){this.init_();const te=U?this.charToByteMapWebSafe_:this.charToByteMap_,Le=[];for(let ue=0;ue<Z.length;){const _t=te[Z.charAt(ue++)],Bt=ue<Z.length?te[Z.charAt(ue)]:0;++ue;const xt=ue<Z.length?te[Z.charAt(ue)]:64;++ue;const dn=ue<Z.length?te[Z.charAt(ue)]:64;if(++ue,null==_t||null==Bt||null==xt||null==dn)throw new M;Le.push(_t<<2|Bt>>4),64!==xt&&(Le.push(Bt<<4&240|xt>>2),64!==dn&&Le.push(xt<<6&192|dn))}return Le},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Z=0;Z<this.ENCODED_VALS.length;Z++)this.byteToCharMap_[Z]=this.ENCODED_VALS.charAt(Z),this.charToByteMap_[this.byteToCharMap_[Z]]=Z,this.byteToCharMapWebSafe_[Z]=this.ENCODED_VALS_WEBSAFE.charAt(Z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Z]]=Z,Z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Z)]=Z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Z)]=Z)}}};class M extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ie=function(Z){const U=L(Z);return H.encodeByteArray(U,!0)},Ce=function(Z){return ie(Z).replace(/\./g,"")},ee=function(Z){try{return H.decodeString(Z,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function X(Z){return de(void 0,Z)}function de(Z,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===Z&&(Z={});break;case Array:Z=[];break;default:return U}for(const te in U)!U.hasOwnProperty(te)||!oe(te)||(Z[te]=de(Z[te],U[te]));return Z}function oe(Z){return"__proto__"!==Z}const Y=()=>{try{return function pe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Z=process.env.__FIREBASE_DEFAULTS__;return Z?JSON.parse(Z):void 0})()||(()=>{if(typeof document>"u")return;let Z;try{Z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const U=Z&&ee(Z[1]);return U&&JSON.parse(U)})()}catch(Z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Z}`)}},be=Z=>{const U=(Z=>{var U,te;return null===(te=null===(U=Y())||void 0===U?void 0:U.emulatorHosts)||void 0===te?void 0:te[Z]})(Z);if(!U)return;const te=U.lastIndexOf(":");if(te<=0||te+1===U.length)throw new Error(`Invalid host ${U} with no separate hostname and port!`);const Le=parseInt(U.substring(te+1),10);return"["===U[0]?[U.substring(1,te-1),Le]:[U.substring(0,te),Le]},Oe=()=>{var Z;return null===(Z=Y())||void 0===Z?void 0:Z.config},Ge=Z=>{var U;return null===(U=Y())||void 0===U?void 0:U[`_${Z}`]};class _e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,te)=>{this.resolve=U,this.reject=te})}wrapCallback(U){return(te,Le)=>{te?this.reject(te):this.resolve(Le),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(te):U(te,Le))}}}function Fe(Z,U){if(Z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Le=U||"demo-project",ue=Z.iat||0,_t=Z.sub||Z.user_id;if(!_t)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Rt=Object.assign({iss:`https://securetoken.google.com/${Le}`,aud:Le,iat:ue,exp:ue+3600,auth_time:ue,sub:_t,user_id:_t,firebase:{sign_in_provider:"custom",identities:{}}},Z);return[Ce(JSON.stringify({alg:"none",type:"JWT"})),Ce(JSON.stringify(Rt)),""].join(".")}function k(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function O(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(k())}function S(){var Z;const U=null===(Z=Y())||void 0===Z?void 0:Z.forceEnvironment;if("node"===U)return!0;if("browser"===U)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function $(){return"object"==typeof self&&self.self===self}function K(){const Z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Z&&void 0!==Z.id}function se(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function nt(){const Z=k();return Z.indexOf("MSIE ")>=0||Z.indexOf("Trident/")>=0}function nn(){return!0===_.NODE_CLIENT||!0===_.NODE_ADMIN}function Ve(){return!S()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q(){try{return"object"==typeof indexedDB}catch{return!1}}function B(){return new Promise((Z,U)=>{try{let te=!0;const Le="validate-browser-context-for-indexeddb-analytics-module",ue=self.indexedDB.open(Le);ue.onsuccess=()=>{ue.result.close(),te||self.indexedDB.deleteDatabase(Le),Z(!0)},ue.onupgradeneeded=()=>{te=!1},ue.onerror=()=>{var _t;U((null===(_t=ue.error)||void 0===_t?void 0:_t.message)||"")}}catch(te){U(te)}})}class Ie extends Error{constructor(U,te,Le){super(te),this.code=U,this.customData=Le,this.name="FirebaseError",Object.setPrototypeOf(this,Ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,he.prototype.create)}}class he{constructor(U,te,Le){this.service=U,this.serviceName=te,this.errors=Le}create(U,...te){const Le=te[0]||{},ue=`${this.service}/${U}`,_t=this.errors[U],Rt=_t?function it(Z,U){return Z.replace(gt,(te,Le)=>{const ue=U[Le];return null!=ue?String(ue):`<${Le}?>`})}(_t,Le):"Error";return new Ie(ue,`${this.serviceName}: ${Rt} (${ue}).`,Le)}}const gt=/\{\$([^}]+)}/g;function ot(Z){return JSON.parse(Z)}function ut(Z){return JSON.stringify(Z)}const Vt=function(Z){let U={},te={},Le={},ue="";try{const _t=Z.split(".");U=ot(ee(_t[0])||""),te=ot(ee(_t[1])||""),ue=_t[2],Le=te.d||{},delete te.d}catch{}return{header:U,claims:te,data:Le,signature:ue}},mn=function(Z){const te=Vt(Z).claims;return!!te&&"object"==typeof te&&te.hasOwnProperty("iat")},Ht=function(Z){const U=Vt(Z).claims;return"object"==typeof U&&!0===U.admin};function Be(Z,U){return Object.prototype.hasOwnProperty.call(Z,U)}function De(Z,U){if(Object.prototype.hasOwnProperty.call(Z,U))return Z[U]}function Me(Z){for(const U in Z)if(Object.prototype.hasOwnProperty.call(Z,U))return!1;return!0}function At(Z,U,te){const Le={};for(const ue in Z)Object.prototype.hasOwnProperty.call(Z,ue)&&(Le[ue]=U.call(te,Z[ue],ue,Z));return Le}function Qt(Z,U){if(Z===U)return!0;const te=Object.keys(Z),Le=Object.keys(U);for(const ue of te){if(!Le.includes(ue))return!1;const _t=Z[ue],Rt=U[ue];if(In(_t)&&In(Rt)){if(!Qt(_t,Rt))return!1}else if(_t!==Rt)return!1}for(const ue of Le)if(!te.includes(ue))return!1;return!0}function In(Z){return null!==Z&&"object"==typeof Z}function Rn(Z){const U=[];for(const[te,Le]of Object.entries(Z))Array.isArray(Le)?Le.forEach(ue=>{U.push(encodeURIComponent(te)+"="+encodeURIComponent(ue))}):U.push(encodeURIComponent(te)+"="+encodeURIComponent(Le));return U.length?"&"+U.join("&"):""}function Jt(Z){const U={};return Z.replace(/^\?/,"").split("&").forEach(Le=>{if(Le){const[ue,_t]=Le.split("=");U[decodeURIComponent(ue)]=decodeURIComponent(_t)}}),U}function _r(Z){const U=Z.indexOf("?");if(!U)return"";const te=Z.indexOf("#",U);return Z.substring(U,te>0?te:void 0)}class $n{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let U=1;U<this.blockSize;++U)this.pad_[U]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(U,te){te||(te=0);const Le=this.W_;if("string"==typeof U)for(let dn=0;dn<16;dn++)Le[dn]=U.charCodeAt(te)<<24|U.charCodeAt(te+1)<<16|U.charCodeAt(te+2)<<8|U.charCodeAt(te+3),te+=4;else for(let dn=0;dn<16;dn++)Le[dn]=U[te]<<24|U[te+1]<<16|U[te+2]<<8|U[te+3],te+=4;for(let dn=16;dn<80;dn++){const Ue=Le[dn-3]^Le[dn-8]^Le[dn-14]^Le[dn-16];Le[dn]=4294967295&(Ue<<1|Ue>>>31)}let xt,Hr,ue=this.chain_[0],_t=this.chain_[1],Rt=this.chain_[2],Bt=this.chain_[3],di=this.chain_[4];for(let dn=0;dn<80;dn++){dn<40?dn<20?(xt=Bt^_t&(Rt^Bt),Hr=1518500249):(xt=_t^Rt^Bt,Hr=1859775393):dn<60?(xt=_t&Rt|Bt&(_t|Rt),Hr=2400959708):(xt=_t^Rt^Bt,Hr=3395469782);const Ue=(ue<<5|ue>>>27)+xt+di+Hr+Le[dn]&4294967295;di=Bt,Bt=Rt,Rt=4294967295&(_t<<30|_t>>>2),_t=ue,ue=Ue}this.chain_[0]=this.chain_[0]+ue&4294967295,this.chain_[1]=this.chain_[1]+_t&4294967295,this.chain_[2]=this.chain_[2]+Rt&4294967295,this.chain_[3]=this.chain_[3]+Bt&4294967295,this.chain_[4]=this.chain_[4]+di&4294967295}update(U,te){if(null==U)return;void 0===te&&(te=U.length);const Le=te-this.blockSize;let ue=0;const _t=this.buf_;let Rt=this.inbuf_;for(;ue<te;){if(0===Rt)for(;ue<=Le;)this.compress_(U,ue),ue+=this.blockSize;if("string"==typeof U){for(;ue<te;)if(_t[Rt]=U.charCodeAt(ue),++Rt,++ue,Rt===this.blockSize){this.compress_(_t),Rt=0;break}}else for(;ue<te;)if(_t[Rt]=U[ue],++Rt,++ue,Rt===this.blockSize){this.compress_(_t),Rt=0;break}}this.inbuf_=Rt,this.total_+=te}digest(){const U=[];let te=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ue=this.blockSize-1;ue>=56;ue--)this.buf_[ue]=255&te,te/=256;this.compress_(this.buf_);let Le=0;for(let ue=0;ue<5;ue++)for(let _t=24;_t>=0;_t-=8)U[Le]=this.chain_[ue]>>_t&255,++Le;return U}}function Qr(Z,U){const te=new Si(Z,U);return te.subscribe.bind(te)}class Si{constructor(U,te){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=te,this.task.then(()=>{U(this)}).catch(Le=>{this.error(Le)})}next(U){this.forEachObserver(te=>{te.next(U)})}error(U){this.forEachObserver(te=>{te.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,te,Le){let ue;if(void 0===U&&void 0===te&&void 0===Le)throw new Error("Missing Observer.");ue=function lo(Z,U){if("object"!=typeof Z||null===Z)return!1;for(const te of U)if(te in Z&&"function"==typeof Z[te])return!0;return!1}(U,["next","error","complete"])?U:{next:U,error:te,complete:Le},void 0===ue.next&&(ue.next=Ri),void 0===ue.error&&(ue.error=Ri),void 0===ue.complete&&(ue.complete=Ri);const _t=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ue.error(this.finalError):ue.complete()}catch{}}),this.observers.push(ue),_t}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let te=0;te<this.observers.length;te++)this.sendOne(te,U)}sendOne(U,te){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{te(this.observers[U])}catch(Le){typeof console<"u"&&console.error&&console.error(Le)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ri(){}const qi=function(Z,U,te,Le){let ue;if(Le<U?ue="at least "+U:Le>te&&(ue=0===te?"none":"no more than "+te),ue)throw new Error(Z+" failed: Was called with "+Le+(1===Le?" argument.":" arguments.")+" Expects "+ue+".")};function wi(Z,U){return`${Z} failed: ${U} argument `}function ni(Z,U,te,Le){if((!Le||te)&&"function"!=typeof te)throw new Error(wi(Z,U)+"must be a valid function.")}function qn(Z,U,te,Le){if((!Le||te)&&("object"!=typeof te||null===te))throw new Error(wi(Z,U)+"must be a valid context object.")}const Ki=function(Z){const U=[];let te=0;for(let Le=0;Le<Z.length;Le++){let ue=Z.charCodeAt(Le);if(ue>=55296&&ue<=56319){const _t=ue-55296;Le++,V(Le<Z.length,"Surrogate pair missing trail surrogate."),ue=65536+(_t<<10)+(Z.charCodeAt(Le)-56320)}ue<128?U[te++]=ue:ue<2048?(U[te++]=ue>>6|192,U[te++]=63&ue|128):ue<65536?(U[te++]=ue>>12|224,U[te++]=ue>>6&63|128,U[te++]=63&ue|128):(U[te++]=ue>>18|240,U[te++]=ue>>12&63|128,U[te++]=ue>>6&63|128,U[te++]=63&ue|128)}return U},fs=function(Z){let U=0;for(let te=0;te<Z.length;te++){const Le=Z.charCodeAt(te);Le<128?U++:Le<2048?U+=2:Le>=55296&&Le<=56319?(U+=4,te++):U+=3}return U};function ua(Z){return Z&&Z._delegate?Z._delegate:Z}},1656:(Nt,le,F)=>{"use strict";F.d(le,{c:()=>C,r:()=>X});const C=(k,O)=>{k.componentOnReady?k.componentOnReady().then(S=>O(S)):X(()=>O(k))},X=k=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(k):"function"==typeof requestAnimationFrame?requestAnimationFrame(k):setTimeout(k)},6031:(Nt,le,F)=>{"use strict";F.d(le,{L:()=>_,a:()=>V,b:()=>C,c:()=>L,d:()=>G,g:()=>k});const _="ionViewWillEnter",V="ionViewDidEnter",C="ionViewWillLeave",L="ionViewDidLeave",G="ionViewWillUnload",k=O=>O.classList.contains("ion-page")?O:O.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||O},3503:(Nt,le,F)=>{"use strict";F.d(le,{c:()=>ke});var _=F(8476),V=F(5638);let C;const G=ne=>ne.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),H=ne=>(void 0===C&&(C=void 0===ne.style.animationName&&void 0!==ne.style.webkitAnimationName?"-webkit-":""),C),M=(ne,Y,re)=>{const be=Y.startsWith("animation")?H(ne):"";ne.style.setProperty(be+Y,re)},ie=(ne,Y)=>{const re=Y.startsWith("animation")?H(ne):"";ne.style.removeProperty(re+Y)},X=[],ye=(ne=[],Y)=>{if(void 0!==Y){const re=Array.isArray(Y)?Y:[Y];return[...ne,...re]}return ne},ke=ne=>{let Y,re,be,Oe,Ge,_e,$,q,B,j,ce,gt,ot,Fe=[],k=[],O=[],S=!1,K={},se=[],fe=[],nt={},wt=0,nn=!1,Ve=!1,Ie=!0,he=!1,it=!0,ut=!1;const Vt=ne,un=[],Dt=[],mn=[],Ht=[],Be=[],De=[],Me=[],At=[],Qt=[],In=[],sn=[],Rn="function"==typeof AnimationEffect||void 0!==_.w&&"function"==typeof _.w.AnimationEffect,Jt="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Rn,$n=()=>sn,Ri=(Se,I)=>{const D=I.findIndex(J=>J.c===Se);D>-1&&I.splice(D,1)},wi=(Se,I)=>((null!=I&&I.oneTimeCallback?Dt:un).push({c:Se,o:I}),ot),ni=()=>{if(Jt)sn.forEach(Se=>{Se.cancel()}),sn.length=0;else{const Se=Ht.slice();(0,V.r)(()=>{Se.forEach(I=>{ie(I,"animation-name"),ie(I,"animation-duration"),ie(I,"animation-timing-function"),ie(I,"animation-iteration-count"),ie(I,"animation-delay"),ie(I,"animation-play-state"),ie(I,"animation-fill-mode"),ie(I,"animation-direction")})})}},qn=()=>{De.forEach(Se=>{null!=Se&&Se.parentNode&&Se.parentNode.removeChild(Se)}),De.length=0},U=()=>void 0!==Ge?Ge:$?$.getFill():"both",te=()=>void 0!==B?B:void 0!==_e?_e:$?$.getDirection():"normal",Le=()=>nn?"linear":void 0!==be?be:$?$.getEasing():"linear",ue=()=>Ve?0:void 0!==j?j:void 0!==re?re:$?$.getDuration():0,_t=()=>void 0!==Oe?Oe:$?$.getIterations():1,Rt=()=>void 0!==ce?ce:void 0!==Y?Y:$?$.getDelay():0,$t=()=>{0!==wt&&(wt--,0===wt&&((()=>{ms(),Qt.forEach(ae=>ae()),In.forEach(ae=>ae());const Se=Ie?1:0,I=se,D=fe,J=nt;Ht.forEach(ae=>{const ve=ae.classList;I.forEach(xe=>ve.add(xe)),D.forEach(xe=>ve.remove(xe));for(const xe in J)J.hasOwnProperty(xe)&&M(ae,xe,J[xe])}),j=void 0,B=void 0,ce=void 0,un.forEach(ae=>ae.c(Se,ot)),Dt.forEach(ae=>ae.c(Se,ot)),Dt.length=0,it=!0,Ie&&(he=!0),Ie=!0})(),$&&$.animationFinish()))},fn=(Se=!0)=>{qn();const I=(ne=>(ne.forEach(Y=>{for(const re in Y)if(Y.hasOwnProperty(re)){const be=Y[re];if("easing"===re)Y["animation-timing-function"]=be,delete Y[re];else{const Oe=G(re);Oe!==re&&(Y[Oe]=be,delete Y[re])}}}),ne))(Fe);Ht.forEach(D=>{if(I.length>0){const J=((ne=[])=>ne.map(Y=>{const re=Y.offset,be=[];for(const Oe in Y)Y.hasOwnProperty(Oe)&&"offset"!==Oe&&be.push(`${Oe}: ${Y[Oe]};`);return`${100*re}% { ${be.join(" ")} }`}).join(" "))(I);gt=void 0!==ne?ne:(ne=>{let Y=X.indexOf(ne);return Y<0&&(Y=X.push(ne)-1),`ion-animation-${Y}`})(J);const ae=((ne,Y,re)=>{var be;const Oe=(ne=>{const Y=void 0!==ne.getRootNode?ne.getRootNode():ne;return Y.head||Y})(re),Ge=H(re),_e=Oe.querySelector("#"+ne);if(_e)return _e;const Fe=(null!==(be=re.ownerDocument)&&void 0!==be?be:document).createElement("style");return Fe.id=ne,Fe.textContent=`@${Ge}keyframes ${ne} { ${Y} } @${Ge}keyframes ${ne}-alt { ${Y} }`,Oe.appendChild(Fe),Fe})(gt,J,D);De.push(ae),M(D,"animation-duration",`${ue()}ms`),M(D,"animation-timing-function",Le()),M(D,"animation-delay",`${Rt()}ms`),M(D,"animation-fill-mode",U()),M(D,"animation-direction",te());const ve=_t()===1/0?"infinite":_t().toString();M(D,"animation-iteration-count",ve),M(D,"animation-play-state","paused"),Se&&M(D,"animation-name",`${ae.id}-alt`),(0,V.r)(()=>{M(D,"animation-name",ae.id||null)})}})},Kn=(Se=!0)=>{(()=>{Me.forEach(J=>J()),At.forEach(J=>J());const Se=k,I=O,D=K;Ht.forEach(J=>{const ae=J.classList;Se.forEach(ve=>ae.add(ve)),I.forEach(ve=>ae.remove(ve));for(const ve in D)D.hasOwnProperty(ve)&&M(J,ve,D[ve])})})(),Fe.length>0&&(Jt?(Ht.forEach(Se=>{const I=Se.animate(Fe,{id:Vt,delay:Rt(),duration:ue(),easing:Le(),iterations:_t(),fill:U(),direction:te()});I.pause(),sn.push(I)}),sn.length>0&&(sn[0].onfinish=()=>{$t()})):fn(Se)),S=!0},nr=Se=>{if(Se=Math.min(Math.max(Se,0),.9999),Jt)sn.forEach(I=>{I.currentTime=I.effect.getComputedTiming().delay+ue()*Se,I.pause()});else{const I=`-${ue()*Se}ms`;Ht.forEach(D=>{Fe.length>0&&(M(D,"animation-delay",I),M(D,"animation-play-state","paused"))})}},gs=Se=>{sn.forEach(I=>{I.effect.updateTiming({delay:Rt(),duration:ue(),easing:Le(),iterations:_t(),fill:U(),direction:te()})}),void 0!==Se&&nr(Se)},xn=(Se=!0,I)=>{(0,V.r)(()=>{Ht.forEach(D=>{M(D,"animation-name",gt||null),M(D,"animation-duration",`${ue()}ms`),M(D,"animation-timing-function",Le()),M(D,"animation-delay",void 0!==I?`-${I*ue()}ms`:`${Rt()}ms`),M(D,"animation-fill-mode",U()||null),M(D,"animation-direction",te()||null);const J=_t()===1/0?"infinite":_t().toString();M(D,"animation-iteration-count",J),Se&&M(D,"animation-name",`${gt}-alt`),(0,V.r)(()=>{M(D,"animation-name",gt||null)})})})},fi=(Se=!1,I=!0,D)=>(Se&&Be.forEach(J=>{J.update(Se,I,D)}),Jt?gs(D):xn(I,D),ot),Yt=()=>{S&&(Jt?sn.forEach(Se=>{Se.pause()}):Ht.forEach(Se=>{M(Se,"animation-play-state","paused")}),ut=!0)},ku=()=>{q=void 0,$t()},ms=()=>{q&&clearTimeout(q)},dc=Se=>new Promise(I=>{null!=Se&&Se.sync&&(Ve=!0,wi(()=>Ve=!1,{oneTimeCallback:!0})),S||Kn(),he&&(Jt?(nr(0),gs()):xn(),he=!1),it&&(wt=Be.length+1,it=!1);const D=()=>{Ri(J,Dt),I()},J=()=>{Ri(D,mn),I()};wi(J,{oneTimeCallback:!0}),((Se,I)=>{mn.push({c:Se,o:{oneTimeCallback:!0}})})(D),Be.forEach(ae=>{ae.play()}),Jt?(sn.forEach(Se=>{Se.play()}),(0===Fe.length||0===Ht.length)&&$t()):(()=>{if(ms(),(0,V.r)(()=>{Ht.forEach(Se=>{Fe.length>0&&M(Se,"animation-play-state","running")})}),0===Fe.length||0===Ht.length)$t();else{const Se=Rt()||0,I=ue()||0,D=_t()||1;isFinite(D)&&(q=setTimeout(ku,Se+I*D+100)),((ne,Y)=>{let re;const be={passive:!0},Ge=_e=>{ne===_e.target&&(re&&re(),ms(),(0,V.r)(()=>{Ht.forEach(Se=>{ie(Se,"animation-duration"),ie(Se,"animation-delay"),ie(Se,"animation-play-state")}),(0,V.r)($t)}))};ne&&(ne.addEventListener("webkitAnimationEnd",Ge,be),ne.addEventListener("animationend",Ge,be),re=()=>{ne.removeEventListener("webkitAnimationEnd",Ge,be),ne.removeEventListener("animationend",Ge,be)})})(Ht[0])}})(),ut=!1}),Rl=(Se,I)=>{const D=Fe[0];return void 0===D||void 0!==D.offset&&0!==D.offset?Fe=[{offset:0,[Se]:I},...Fe]:D[Se]=I,ot};return ot={parentAnimation:$,elements:Ht,childAnimations:Be,id:Vt,animationFinish:$t,from:Rl,to:(Se,I)=>{const D=Fe[Fe.length-1];return void 0===D||void 0!==D.offset&&1!==D.offset?Fe=[...Fe,{offset:1,[Se]:I}]:D[Se]=I,ot},fromTo:(Se,I,D)=>Rl(Se,I).to(Se,D),parent:Se=>($=Se,ot),play:dc,pause:()=>(Be.forEach(Se=>{Se.pause()}),Yt(),ot),stop:()=>{Be.forEach(Se=>{Se.stop()}),S&&(ni(),S=!1),nn=!1,Ve=!1,it=!0,B=void 0,j=void 0,ce=void 0,wt=0,he=!1,Ie=!0,ut=!1,mn.forEach(Se=>Se.c(0,ot)),mn.length=0},destroy:Se=>(Be.forEach(I=>{I.destroy(Se)}),(Se=>{ni(),Se&&qn()})(Se),Ht.length=0,Be.length=0,Fe.length=0,un.length=0,Dt.length=0,S=!1,it=!0,ot),keyframes:Se=>{const I=Fe!==Se;return Fe=Se,I&&(Se=>{Jt?$n().forEach(I=>{const D=I.effect;if(D.setKeyframes)D.setKeyframes(Se);else{const J=new KeyframeEffect(D.target,Se,D.getTiming());I.effect=J}}):fn()})(Fe),ot},addAnimation:Se=>{if(null!=Se)if(Array.isArray(Se))for(const I of Se)I.parent(ot),Be.push(I);else Se.parent(ot),Be.push(Se);return ot},addElement:Se=>{if(null!=Se)if(1===Se.nodeType)Ht.push(Se);else if(Se.length>=0)for(let I=0;I<Se.length;I++)Ht.push(Se[I]);else console.error("Invalid addElement value");return ot},update:fi,fill:Se=>(Ge=Se,fi(!0),ot),direction:Se=>(_e=Se,fi(!0),ot),iterations:Se=>(Oe=Se,fi(!0),ot),duration:Se=>(!Jt&&0===Se&&(Se=1),re=Se,fi(!0),ot),easing:Se=>(be=Se,fi(!0),ot),delay:Se=>(Y=Se,fi(!0),ot),getWebAnimations:$n,getKeyframes:()=>Fe,getFill:U,getDirection:te,getDelay:Rt,getIterations:_t,getEasing:Le,getDuration:ue,afterAddRead:Se=>(Qt.push(Se),ot),afterAddWrite:Se=>(In.push(Se),ot),afterClearStyles:(Se=[])=>{for(const I of Se)nt[I]="";return ot},afterStyles:(Se={})=>(nt=Se,ot),afterRemoveClass:Se=>(fe=ye(fe,Se),ot),afterAddClass:Se=>(se=ye(se,Se),ot),beforeAddRead:Se=>(Me.push(Se),ot),beforeAddWrite:Se=>(At.push(Se),ot),beforeClearStyles:(Se=[])=>{for(const I of Se)K[I]="";return ot},beforeStyles:(Se={})=>(K=Se,ot),beforeRemoveClass:Se=>(O=ye(O,Se),ot),beforeAddClass:Se=>(k=ye(k,Se),ot),onFinish:wi,isRunning:()=>0!==wt&&!ut,progressStart:(Se=!1,I)=>(Be.forEach(D=>{D.progressStart(Se,I)}),Yt(),nn=Se,S||Kn(),fi(!1,!0,I),ot),progressStep:Se=>(Be.forEach(I=>{I.progressStep(Se)}),nr(Se),ot),progressEnd:(Se,I,D)=>(nn=!1,Be.forEach(J=>{J.progressEnd(Se,I,D)}),void 0!==D&&(j=D),he=!1,Ie=!0,0===Se?(B="reverse"===te()?"normal":"reverse","reverse"===B&&(Ie=!1),Jt?(fi(),nr(1-I)):(ce=(1-I)*ue()*-1,fi(!1,!1))):1===Se&&(Jt?(fi(),nr(I)):(ce=I*ue()*-1,fi(!1,!1))),void 0!==Se&&!$&&dc(),ot)}}},464:(Nt,le,F)=>{"use strict";F.d(le,{E:()=>ee,a:()=>_,s:()=>ie});const _=X=>{try{if(X instanceof M)return X.value;if(!L()||"string"!=typeof X||""===X)return X;if(X.includes("onload="))return"";const de=document.createDocumentFragment(),oe=document.createElement("div");de.appendChild(oe),oe.innerHTML=X,H.forEach(ne=>{const Y=de.querySelectorAll(ne);for(let re=Y.length-1;re>=0;re--){const be=Y[re];be.parentNode?be.parentNode.removeChild(be):de.removeChild(be);const Oe=C(be);for(let Ge=0;Ge<Oe.length;Ge++)V(Oe[Ge])}});const pe=C(de);for(let ne=0;ne<pe.length;ne++)V(pe[ne]);const ye=document.createElement("div");ye.appendChild(de);const ke=ye.querySelector("div");return null!==ke?ke.innerHTML:ye.innerHTML}catch(de){return console.error(de),""}},V=X=>{if(X.nodeType&&1!==X.nodeType)return;if(typeof NamedNodeMap<"u"&&!(X.attributes instanceof NamedNodeMap))return void X.remove();for(let oe=X.attributes.length-1;oe>=0;oe--){const pe=X.attributes.item(oe),ye=pe.name;if(!G.includes(ye.toLowerCase())){X.removeAttribute(ye);continue}const ke=pe.value,ne=X[ye];(null!=ke&&ke.toLowerCase().includes("javascript:")||null!=ne&&ne.toLowerCase().includes("javascript:"))&&X.removeAttribute(ye)}const de=C(X);for(let oe=0;oe<de.length;oe++)V(de[oe])},C=X=>null!=X.children?X.children:X.childNodes,L=()=>{var X;const de=window,oe=null===(X=null==de?void 0:de.Ionic)||void 0===X?void 0:X.config;return!oe||(oe.get?oe.get("sanitizerEnabled",!0):!0===oe.sanitizerEnabled||void 0===oe.sanitizerEnabled)},G=["class","id","href","src","name","slot"],H=["script","style","iframe","meta","link","object","embed"];class M{constructor(de){this.value=de}}const ie=X=>{const de=window,oe=de.Ionic;if(!oe||!oe.config||"Object"===oe.config.constructor.name)return de.Ionic=de.Ionic||{},de.Ionic.config=Object.assign(Object.assign({},de.Ionic.config),X),de.Ionic.config},ee=!1},5938:(Nt,le,F)=>{"use strict";F.d(le,{C:()=>G,a:()=>C,d:()=>L});var _=F(467),V=F(5638);const C=function(){var H=(0,_.A)(function*(M,ie,Ce,ee,X,de){var oe;if(M)return M.attachViewToDom(ie,Ce,X,ee);if(!(de||"string"==typeof Ce||Ce instanceof HTMLElement))throw new Error("framework delegate is missing");const pe="string"==typeof Ce?null===(oe=ie.ownerDocument)||void 0===oe?void 0:oe.createElement(Ce):Ce;return ee&&ee.forEach(ye=>pe.classList.add(ye)),X&&Object.assign(pe,X),ie.appendChild(pe),yield new Promise(ye=>(0,V.c)(pe,ye)),pe});return function(ie,Ce,ee,X,de,oe){return H.apply(this,arguments)}}(),L=(H,M)=>{if(M){if(H)return H.removeViewFromDom(M.parentElement,M);M.remove()}return Promise.resolve()},G=()=>{let H,M;return{attachViewToDom:function(){var ee=(0,_.A)(function*(X,de,oe={},pe=[]){var ye,ke;let ne;if(H=X,de){const re="string"==typeof de?null===(ye=H.ownerDocument)||void 0===ye?void 0:ye.createElement(de):de;pe.forEach(be=>re.classList.add(be)),Object.assign(re,oe),H.appendChild(re),ne=re,yield new Promise(be=>(0,V.c)(re,be))}else if(H.children.length>0&&("ION-MODAL"===H.tagName||"ION-POPOVER"===H.tagName)&&!(ne=H.children[0]).classList.contains("ion-delegate-host")){const be=null===(ke=H.ownerDocument)||void 0===ke?void 0:ke.createElement("div");be.classList.add("ion-delegate-host"),pe.forEach(Oe=>be.classList.add(Oe)),be.append(...H.children),H.appendChild(be),ne=be}const Y=document.querySelector("ion-app")||document.body;return M=document.createComment("ionic teleport"),H.parentNode.insertBefore(M,H),Y.appendChild(H),null!=ne?ne:H});return function(de,oe){return ee.apply(this,arguments)}}(),removeViewFromDom:()=>(H&&M&&(M.parentNode.insertBefore(H,M),M.remove()),Promise.resolve())}}},8221:(Nt,le,F)=>{"use strict";F.d(le,{G:()=>G});class V{constructor(M,ie,Ce,ee,X){this.id=ie,this.name=Ce,this.disableScroll=X,this.priority=1e6*ee+ie,this.ctrl=M}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const M=this.ctrl.capture(this.name,this.id,this.priority);return M&&this.disableScroll&&this.ctrl.disableScroll(this.id),M}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class C{constructor(M,ie,Ce,ee){this.id=ie,this.disable=Ce,this.disableScroll=ee,this.ctrl=M}block(){if(this.ctrl){if(this.disable)for(const M of this.disable)this.ctrl.disableGesture(M,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const M of this.disable)this.ctrl.enableGesture(M,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const L="backdrop-no-scroll",G=new class _{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(M){var ie;return new V(this,this.newID(),M.name,null!==(ie=M.priority)&&void 0!==ie?ie:0,!!M.disableScroll)}createBlocker(M={}){return new C(this,this.newID(),M.disable,!!M.disableScroll)}start(M,ie,Ce){return this.canStart(M)?(this.requestedStart.set(ie,Ce),!0):(this.requestedStart.delete(ie),!1)}capture(M,ie,Ce){if(!this.start(M,ie,Ce))return!1;const ee=this.requestedStart;let X=-1e4;if(ee.forEach(de=>{X=Math.max(X,de)}),X===Ce){this.capturedId=ie,ee.clear();const de=new CustomEvent("ionGestureCaptured",{detail:{gestureName:M}});return document.dispatchEvent(de),!0}return ee.delete(ie),!1}release(M){this.requestedStart.delete(M),this.capturedId===M&&(this.capturedId=void 0)}disableGesture(M,ie){let Ce=this.disabledGestures.get(M);void 0===Ce&&(Ce=new Set,this.disabledGestures.set(M,Ce)),Ce.add(ie)}enableGesture(M,ie){const Ce=this.disabledGestures.get(M);void 0!==Ce&&Ce.delete(ie)}disableScroll(M){this.disabledScroll.add(M),1===this.disabledScroll.size&&document.body.classList.add(L)}enableScroll(M){this.disabledScroll.delete(M),0===this.disabledScroll.size&&document.body.classList.remove(L)}canStart(M){return!(void 0!==this.capturedId||this.isDisabled(M))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(M){const ie=this.disabledGestures.get(M);return!!(ie&&ie.size>0)}newID(){return this.gestureId++,this.gestureId}}},9457:(Nt,le,F)=>{"use strict";F.r(le),F.d(le,{MENU_BACK_BUTTON_PRIORITY:()=>Ce,OVERLAY_BACK_BUTTON_PRIORITY:()=>ie,blockHardwareBackButton:()=>H,shouldUseCloseWatcher:()=>G,startHardwareBackButton:()=>M});var _=F(467),V=F(8476),C=F(8436);F(9081);const G=()=>C.c.get("experimentalCloseWatcher",!1)&&void 0!==V.w&&"CloseWatcher"in V.w,H=()=>{document.addEventListener("backbutton",()=>{})},M=()=>{const ee=document;let X=!1;const de=()=>{if(X)return;let oe=0,pe=[];const ye=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(Y,re){pe.push({priority:Y,handler:re,id:oe++})}}});ee.dispatchEvent(ye);const ke=function(){var Y=(0,_.A)(function*(re){try{if(null!=re&&re.handler){const be=re.handler(ne);null!=be&&(yield be)}}catch(be){console.error(be)}});return function(be){return Y.apply(this,arguments)}}(),ne=()=>{if(pe.length>0){let Y={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};pe.forEach(re=>{re.priority>=Y.priority&&(Y=re)}),X=!0,pe=pe.filter(re=>re.id!==Y.id),ke(Y).then(()=>X=!1)}};ne()};if(G()){let oe;const pe=()=>{null==oe||oe.destroy(),oe=new V.w.CloseWatcher,oe.onclose=()=>{de(),pe()}};pe()}else ee.addEventListener("backbutton",de)},ie=100,Ce=99},5638:(Nt,le,F)=>{"use strict";F.d(le,{a:()=>ie,b:()=>Ce,c:()=>C,d:()=>ke,e:()=>ye,f:()=>pe,g:()=>ee,h:()=>oe,i:()=>M,j:()=>Ge,k:()=>G,l:()=>ne,m:()=>L,n:()=>de,o:()=>Y,p:()=>Oe,q:()=>_e,r:()=>X,s:()=>Fe,t:()=>_,u:()=>re,v:()=>be});const _=(k,O=0)=>new Promise(S=>{V(k,O,S)}),V=(k,O=0,S)=>{let $,K;const se={passive:!0},nt=()=>{$&&$()},wt=nn=>{(void 0===nn||k===nn.target)&&(nt(),S(nn))};return k&&(k.addEventListener("webkitTransitionEnd",wt,se),k.addEventListener("transitionend",wt,se),K=setTimeout(wt,O+500),$=()=>{void 0!==K&&(clearTimeout(K),K=void 0),k.removeEventListener("webkitTransitionEnd",wt,se),k.removeEventListener("transitionend",wt,se)}),nt},C=(k,O)=>{k.componentOnReady?k.componentOnReady().then(S=>O(S)):X(()=>O(k))},L=k=>void 0!==k.componentOnReady,G=(k,O=[])=>{const S={};return O.forEach($=>{k.hasAttribute($)&&(null!==k.getAttribute($)&&(S[$]=k.getAttribute($)),k.removeAttribute($))}),S},H=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],M=(k,O)=>{let S=H;return O&&O.length>0&&(S=S.filter($=>!O.includes($))),G(k,S)},ie=(k,O,S,$)=>{var K;if(typeof window<"u"){const se=window,fe=null===(K=null==se?void 0:se.Ionic)||void 0===K?void 0:K.config;if(fe){const nt=fe.get("_ael");if(nt)return nt(k,O,S,$);if(fe._ael)return fe._ael(k,O,S,$)}}return k.addEventListener(O,S,$)},Ce=(k,O,S,$)=>{var K;if(typeof window<"u"){const se=window,fe=null===(K=null==se?void 0:se.Ionic)||void 0===K?void 0:K.config;if(fe){const nt=fe.get("_rel");if(nt)return nt(k,O,S,$);if(fe._rel)return fe._rel(k,O,S,$)}}return k.removeEventListener(O,S,$)},ee=(k,O=k)=>k.shadowRoot||O,X=k=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(k):"function"==typeof requestAnimationFrame?requestAnimationFrame(k):setTimeout(k),de=k=>!!k.shadowRoot&&!!k.attachShadow,oe=k=>{const O=k.closest("ion-item");return O?O.querySelector("ion-label"):null},pe=k=>{if(k.focus(),k.classList.contains("ion-focusable")){const O=k.closest("ion-app");O&&O.setFocus([k])}},ye=(k,O)=>{let S;const $=k.getAttribute("aria-labelledby"),K=k.id;let se=null!==$&&""!==$.trim()?$:O+"-lbl",fe=null!==$&&""!==$.trim()?document.getElementById($):oe(k);return fe?(null===$&&(fe.id=se),S=fe.textContent,fe.setAttribute("aria-hidden","true")):""!==K.trim()&&(fe=document.querySelector(`label[for="${K}"]`),fe&&(""!==fe.id?se=fe.id:fe.id=se=`${K}-lbl`,S=fe.textContent)),{label:fe,labelId:se,labelText:S}},ke=(k,O,S,$,K)=>{if(k||de(O)){let se=O.querySelector("input.aux-input");se||(se=O.ownerDocument.createElement("input"),se.type="hidden",se.classList.add("aux-input"),O.appendChild(se)),se.disabled=K,se.name=S,se.value=$||""}},ne=(k,O,S)=>Math.max(k,Math.min(O,S)),Y=(k,O)=>{if(!k){const S="ASSERT: "+O;throw console.error(S),new Error(S)}},re=k=>k.timeStamp||Date.now(),be=k=>{if(k){const O=k.changedTouches;if(O&&O.length>0){const S=O[0];return{x:S.clientX,y:S.clientY}}if(void 0!==k.pageX)return{x:k.pageX,y:k.pageY}}return{x:0,y:0}},Oe=k=>{const O="rtl"===document.dir;switch(k){case"start":return O;case"end":return!O;default:throw new Error(`"${k}" is not a valid value for [side]. Use "start" or "end" instead.`)}},Ge=(k,O)=>{const S=k._original||k;return{_original:k,emit:_e(S.emit.bind(S),O)}},_e=(k,O=0)=>{let S;return(...$)=>{clearTimeout(S),S=setTimeout(k,O,...$)}},Fe=(k,O)=>{if(null!=k||(k={}),null!=O||(O={}),k===O)return!0;const S=Object.keys(k);if(S.length!==Object.keys(O).length)return!1;for(const $ of S)if(!($ in O)||k[$]!==O[$])return!1;return!0}},405:(Nt,le,F)=>{"use strict";F.r(le),F.d(le,{GESTURE_CONTROLLER:()=>_.G,createGesture:()=>Ce});var _=F(8221);const V=(oe,pe,ye,ke)=>{const ne=C(oe)?{capture:!!ke.capture,passive:!!ke.passive}:!!ke.capture;let Y,re;return oe.__zone_symbol__addEventListener?(Y="__zone_symbol__addEventListener",re="__zone_symbol__removeEventListener"):(Y="addEventListener",re="removeEventListener"),oe[Y](pe,ye,ne),()=>{oe[re](pe,ye,ne)}},C=oe=>{if(void 0===L)try{const pe=Object.defineProperty({},"passive",{get:()=>{L=!0}});oe.addEventListener("optsTest",()=>{},pe)}catch{L=!1}return!!L};let L;const M=oe=>oe instanceof Document?oe:oe.ownerDocument,Ce=oe=>{let pe=!1,ye=!1,ke=!0,ne=!1;const Y=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},oe),re=Y.canStart,be=Y.onWillStart,Oe=Y.onStart,Ge=Y.onEnd,_e=Y.notCaptured,Fe=Y.onMove,k=Y.threshold,O=Y.passive,S=Y.blurOnStart,$={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},K=((oe,pe,ye)=>{const ke=ye*(Math.PI/180),ne="x"===oe,Y=Math.cos(ke),re=pe*pe;let be=0,Oe=0,Ge=!1,_e=0;return{start(Fe,k){be=Fe,Oe=k,_e=0,Ge=!0},detect(Fe,k){if(!Ge)return!1;const O=Fe-be,S=k-Oe,$=O*O+S*S;if($<re)return!1;const K=Math.sqrt($),se=(ne?O:S)/K;return _e=se>Y?1:se<-Y?-1:0,Ge=!1,!0},isGesture:()=>0!==_e,getDirection:()=>_e}})(Y.direction,Y.threshold,Y.maxAngle),se=_.G.createGesture({name:oe.gestureName,priority:oe.gesturePriority,disableScroll:oe.disableScroll}),wt=()=>{pe&&(ne=!1,Fe&&Fe($))},nn=()=>!!se.capture()&&(pe=!0,ke=!1,$.startX=$.currentX,$.startY=$.currentY,$.startTime=$.currentTime,be?be($).then(q):q(),!0),q=()=>{S&&(()=>{if(typeof document<"u"){const he=document.activeElement;null!=he&&he.blur&&he.blur()}})(),Oe&&Oe($),ke=!0},B=()=>{pe=!1,ye=!1,ne=!1,ke=!0,se.release()},j=he=>{const it=pe,gt=ke;if(B(),gt){if(ee($,he),it)return void(Ge&&Ge($));_e&&_e($)}},ce=((oe,pe,ye,ke,ne)=>{let Y,re,be,Oe,Ge,_e,Fe,k=0;const O=Ve=>{k=Date.now()+2e3,pe(Ve)&&(!re&&ye&&(re=V(oe,"touchmove",ye,ne)),be||(be=V(Ve.target,"touchend",$,ne)),Oe||(Oe=V(Ve.target,"touchcancel",$,ne)))},S=Ve=>{k>Date.now()||pe(Ve)&&(!_e&&ye&&(_e=V(M(oe),"mousemove",ye,ne)),Fe||(Fe=V(M(oe),"mouseup",K,ne)))},$=Ve=>{se(),ke&&ke(Ve)},K=Ve=>{fe(),ke&&ke(Ve)},se=()=>{re&&re(),be&&be(),Oe&&Oe(),re=be=Oe=void 0},fe=()=>{_e&&_e(),Fe&&Fe(),_e=Fe=void 0},nt=()=>{se(),fe()},wt=(Ve=!0)=>{Ve?(Y||(Y=V(oe,"touchstart",O,ne)),Ge||(Ge=V(oe,"mousedown",S,ne))):(Y&&Y(),Ge&&Ge(),Y=Ge=void 0,nt())};return{enable:wt,stop:nt,destroy:()=>{wt(!1),ke=ye=pe=void 0}}})(Y.el,he=>{const it=de(he);return!(ye||!ke||(X(he,$),$.startX=$.currentX,$.startY=$.currentY,$.startTime=$.currentTime=it,$.velocityX=$.velocityY=$.deltaX=$.deltaY=0,$.event=he,re&&!1===re($))||(se.release(),!se.start()))&&(ye=!0,0===k?nn():(K.start($.startX,$.startY),!0))},he=>{pe?!ne&&ke&&(ne=!0,ee($,he),requestAnimationFrame(wt)):(ee($,he),K.detect($.currentX,$.currentY)&&(!K.isGesture()||!nn())&&Ie())},j,{capture:!1,passive:O}),Ie=()=>{B(),ce.stop(),_e&&_e($)};return{enable(he=!0){he||(pe&&j(void 0),B()),ce.enable(he)},destroy(){se.destroy(),ce.destroy()}}},ee=(oe,pe)=>{if(!pe)return;const ye=oe.currentX,ke=oe.currentY,ne=oe.currentTime;X(pe,oe);const Y=oe.currentX,re=oe.currentY,Oe=(oe.currentTime=de(pe))-ne;if(Oe>0&&Oe<100){const _e=(re-ke)/Oe;oe.velocityX=(Y-ye)/Oe*.7+.3*oe.velocityX,oe.velocityY=.7*_e+.3*oe.velocityY}oe.deltaX=Y-oe.startX,oe.deltaY=re-oe.startY,oe.event=pe},X=(oe,pe)=>{let ye=0,ke=0;if(oe){const ne=oe.changedTouches;if(ne&&ne.length>0){const Y=ne[0];ye=Y.clientX,ke=Y.clientY}else void 0!==oe.pageX&&(ye=oe.pageX,ke=oe.pageY)}pe.currentX=ye,pe.currentY=ke},de=oe=>oe.timeStamp||Date.now()},7818:(Nt,le,F)=>{"use strict";F.d(le,{m:()=>oe});var _=F(467),V=F(8476),C=F(9457),L=F(4929),G=F(5638),H=F(8436),M=F(3503);const ie=pe=>(0,M.c)().duration(pe?400:300),Ce=pe=>{let ye,ke;const ne=pe.width+8,Y=(0,M.c)(),re=(0,M.c)();pe.isEndSide?(ye=ne+"px",ke="0px"):(ye=-ne+"px",ke="0px"),Y.addElement(pe.menuInnerEl).fromTo("transform",`translateX(${ye})`,`translateX(${ke})`);const Oe="ios"===(0,H.b)(pe),Ge=Oe?.2:.25;return re.addElement(pe.backdropEl).fromTo("opacity",.01,Ge),ie(Oe).addAnimation([Y,re])},ee=pe=>{let ye,ke;const ne=(0,H.b)(pe),Y=pe.width;pe.isEndSide?(ye=-Y+"px",ke=Y+"px"):(ye=Y+"px",ke=-Y+"px");const re=(0,M.c)().addElement(pe.menuInnerEl).fromTo("transform",`translateX(${ke})`,"translateX(0px)"),be=(0,M.c)().addElement(pe.contentEl).fromTo("transform","translateX(0px)",`translateX(${ye})`),Oe=(0,M.c)().addElement(pe.backdropEl).fromTo("opacity",.01,.32);return ie("ios"===ne).addAnimation([re,be,Oe])},X=pe=>{const ye=(0,H.b)(pe),ke=pe.width*(pe.isEndSide?-1:1)+"px",ne=(0,M.c)().addElement(pe.contentEl).fromTo("transform","translateX(0px)",`translateX(${ke})`);return ie("ios"===ye).addAnimation(ne)},oe=(()=>{const pe=new Map,ye=[],ke=function(){var B=(0,_.A)(function*(j){const ce=yield _e(j,!0);return!!ce&&ce.open()});return function(ce){return B.apply(this,arguments)}}(),ne=function(){var B=(0,_.A)(function*(j){const ce=yield void 0!==j?_e(j,!0):Fe();return void 0!==ce&&ce.close()});return function(ce){return B.apply(this,arguments)}}(),Y=function(){var B=(0,_.A)(function*(j){const ce=yield _e(j,!0);return!!ce&&ce.toggle()});return function(ce){return B.apply(this,arguments)}}(),re=function(){var B=(0,_.A)(function*(j,ce){const Ie=yield _e(ce);return Ie&&(Ie.disabled=!j),Ie});return function(ce,Ie){return B.apply(this,arguments)}}(),be=function(){var B=(0,_.A)(function*(j,ce){const Ie=yield _e(ce);return Ie&&(Ie.swipeGesture=j),Ie});return function(ce,Ie){return B.apply(this,arguments)}}(),Oe=function(){var B=(0,_.A)(function*(j){if(null!=j){const ce=yield _e(j);return void 0!==ce&&ce.isOpen()}return void 0!==(yield Fe())});return function(ce){return B.apply(this,arguments)}}(),Ge=function(){var B=(0,_.A)(function*(j){const ce=yield _e(j);return!!ce&&!ce.disabled});return function(ce){return B.apply(this,arguments)}}(),_e=function(){var B=(0,_.A)(function*(j,ce=!1){if(yield q(),"start"===j||"end"===j){const he=ye.filter(gt=>gt.side===j&&!gt.disabled);if(he.length>=1)return he.length>1&&ce&&(0,L.p)(`menuController queried for a menu on the "${j}" side, but ${he.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,he.map(gt=>gt.el)),he[0].el;const it=ye.filter(gt=>gt.side===j);if(it.length>=1)return it.length>1&&ce&&(0,L.p)(`menuController queried for a menu on the "${j}" side, but ${it.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,it.map(gt=>gt.el)),it[0].el}else if(null!=j)return Ve(he=>he.menuId===j);return Ve(he=>!he.disabled)||(ye.length>0?ye[0].el:void 0)});return function(ce){return B.apply(this,arguments)}}(),Fe=function(){var B=(0,_.A)(function*(){return yield q(),nt()});return function(){return B.apply(this,arguments)}}(),k=function(){var B=(0,_.A)(function*(){return yield q(),wt()});return function(){return B.apply(this,arguments)}}(),O=function(){var B=(0,_.A)(function*(){return yield q(),nn()});return function(){return B.apply(this,arguments)}}(),S=(B,j)=>{pe.set(B,j)},se=function(){var B=(0,_.A)(function*(j,ce,Ie){if(nn())return!1;if(ce){const he=yield Fe();he&&j.el!==he&&(yield he.setOpen(!1,!1))}return j._setOpen(ce,Ie)});return function(ce,Ie,he){return B.apply(this,arguments)}}(),nt=()=>Ve(B=>B._isOpen),wt=()=>ye.map(B=>B.el),nn=()=>ye.some(B=>B.isAnimating),Ve=B=>{const j=ye.find(B);if(void 0!==j)return j.el},q=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(B=>new Promise(j=>(0,G.c)(B,j))));return S("reveal",X),S("push",ee),S("overlay",Ce),null==V.d||V.d.addEventListener("ionBackButton",B=>{const j=nt();j&&B.detail.register(C.MENU_BACK_BUTTON_PRIORITY,()=>j.close())}),{registerAnimation:S,get:_e,getMenus:k,getOpen:Fe,isEnabled:Ge,swipeGesture:be,isAnimating:O,isOpen:Oe,enable:re,toggle:Y,close:ne,open:ke,_getOpenSync:nt,_createAnimation:(B,j)=>{const ce=pe.get(B);if(!ce)throw new Error("animation not registered");return ce(j)},_register:B=>{ye.indexOf(B)<0&&ye.push(B)},_unregister:B=>{const j=ye.indexOf(B);j>-1&&ye.splice(j,1)},_setOpen:se}})()},1497:(Nt,le,F)=>{"use strict";F.d(le,{b:()=>H,c:()=>M,d:()=>ie,e:()=>k,g:()=>$,l:()=>_e,s:()=>O,t:()=>X,w:()=>Fe});var _=F(467),V=F(9081),C=F(5638);const H="ionViewWillLeave",M="ionViewDidLeave",ie="ionViewWillUnload",X=K=>new Promise((se,fe)=>{(0,V.w)(()=>{de(K),oe(K).then(nt=>{nt.animation&&nt.animation.destroy(),pe(K),se(nt)},nt=>{pe(K),fe(nt)})})}),de=K=>{const se=K.enteringEl,fe=K.leavingEl;S(se,fe,K.direction),K.showGoBack?se.classList.add("can-go-back"):se.classList.remove("can-go-back"),O(se,!1),se.style.setProperty("pointer-events","none"),fe&&(O(fe,!1),fe.style.setProperty("pointer-events","none"))},oe=function(){var K=(0,_.A)(function*(se){const fe=yield ye(se);return fe&&V.B.isBrowser?ke(fe,se):ne(se)});return function(fe){return K.apply(this,arguments)}}(),pe=K=>{const se=K.enteringEl,fe=K.leavingEl;se.classList.remove("ion-page-invisible"),se.style.removeProperty("pointer-events"),void 0!==fe&&(fe.classList.remove("ion-page-invisible"),fe.style.removeProperty("pointer-events"))},ye=function(){var K=(0,_.A)(function*(se){return se.leavingEl&&se.animated&&0!==se.duration?se.animationBuilder?se.animationBuilder:"ios"===se.mode?(yield Promise.resolve().then(F.bind(F,2604))).iosTransitionAnimation:(yield Promise.resolve().then(F.bind(F,3003))).mdTransitionAnimation:void 0});return function(fe){return K.apply(this,arguments)}}(),ke=function(){var K=(0,_.A)(function*(se,fe){yield Y(fe,!0);const nt=se(fe.baseEl,fe);Oe(fe.enteringEl,fe.leavingEl);const wt=yield be(nt,fe);return fe.progressCallback&&fe.progressCallback(void 0),wt&&Ge(fe.enteringEl,fe.leavingEl),{hasCompleted:wt,animation:nt}});return function(fe,nt){return K.apply(this,arguments)}}(),ne=function(){var K=(0,_.A)(function*(se){const fe=se.enteringEl,nt=se.leavingEl;return yield Y(se,!1),Oe(fe,nt),Ge(fe,nt),{hasCompleted:!0}});return function(fe){return K.apply(this,arguments)}}(),Y=function(){var K=(0,_.A)(function*(se,fe){(void 0!==se.deepWait?se.deepWait:fe)&&(yield Promise.all([k(se.enteringEl),k(se.leavingEl)])),yield re(se.viewIsReady,se.enteringEl)});return function(fe,nt){return K.apply(this,arguments)}}(),re=function(){var K=(0,_.A)(function*(se,fe){se&&(yield se(fe))});return function(fe,nt){return K.apply(this,arguments)}}(),be=(K,se)=>{const fe=se.progressCallback,nt=new Promise(wt=>{K.onFinish(nn=>wt(1===nn))});return fe?(K.progressStart(!0),fe(K)):K.play(),nt},Oe=(K,se)=>{_e(se,H),_e(K,"ionViewWillEnter")},Ge=(K,se)=>{_e(K,"ionViewDidEnter"),_e(se,M)},_e=(K,se)=>{if(K){const fe=new CustomEvent(se,{bubbles:!1,cancelable:!1});K.dispatchEvent(fe)}},Fe=()=>new Promise(K=>(0,C.r)(()=>(0,C.r)(()=>K()))),k=function(){var K=(0,_.A)(function*(se){const fe=se;if(fe){if(null!=fe.componentOnReady){if(null!=(yield fe.componentOnReady()))return}else if(null!=fe.__registerHost)return void(yield new Promise(wt=>(0,C.r)(wt)));yield Promise.all(Array.from(fe.children).map(k))}});return function(fe){return K.apply(this,arguments)}}(),O=(K,se)=>{se?(K.setAttribute("aria-hidden","true"),K.classList.add("ion-page-hidden")):(K.hidden=!1,K.removeAttribute("aria-hidden"),K.classList.remove("ion-page-hidden"))},S=(K,se,fe)=>{void 0!==K&&(K.style.zIndex="back"===fe?"99":"101"),void 0!==se&&(se.style.zIndex="100")},$=K=>K.classList.contains("ion-page")?K:K.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||K},4929:(Nt,le,F)=>{"use strict";F.d(le,{a:()=>V,b:()=>C,p:()=>_});const _=(L,...G)=>console.warn(`[Ionic Warning]: ${L}`,...G),V=(L,...G)=>console.error(`[Ionic Error]: ${L}`,...G),C=(L,...G)=>console.error(`<${L.tagName.toLowerCase()}> must be used inside ${G.join(" or ")}.`)},8476:(Nt,le,F)=>{"use strict";F.d(le,{d:()=>V,w:()=>_});const _=typeof window<"u"?window:void 0,V=typeof document<"u"?document:void 0},9081:(Nt,le,F)=>{"use strict";F.d(le,{B:()=>de,H:()=>nn,a:()=>Gn,b:()=>Qi,c:()=>gt,d:()=>un,e:()=>ch,f:()=>Vt,g:()=>ot,h:()=>nt,i:()=>U,j:()=>oe,r:()=>fn,w:()=>Se});var _=F(467);let L,G,H,M=!1,ie=!1,Ce=!1,ee=!1,X=!1;const de={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},oe=I=>{const D=new URL(I,Yt.$resourcesUrl$);return D.origin!==wn.location.origin?D.href:D.pathname},be="s-id",Oe="sty-id",Fe="slot-fb{display:contents}slot-fb[hidden]{display:none}",k="http://www.w3.org/1999/xlink",O={},se=I=>"object"==(I=typeof I)||"function"===I;function fe(I){var D,J,ae;return null!==(ae=null===(J=null===(D=I.head)||void 0===D?void 0:D.querySelector('meta[name="csp-nonce"]'))||void 0===J?void 0:J.getAttribute("content"))&&void 0!==ae?ae:void 0}const nt=(I,D,...J)=>{let ae=null,ve=null,xe=null,je=!1,Re=!1;const at=[],st=Mt=>{for(let Lt=0;Lt<Mt.length;Lt++)ae=Mt[Lt],Array.isArray(ae)?st(ae):null!=ae&&"boolean"!=typeof ae&&((je="function"!=typeof I&&!se(ae))&&(ae=String(ae)),je&&Re?at[at.length-1].$text$+=ae:at.push(je?wt(null,ae):ae),Re=je)};if(st(J),D){D.key&&(ve=D.key),D.name&&(xe=D.name);{const Mt=D.className||D.class;Mt&&(D.class="object"!=typeof Mt?Mt:Object.keys(Mt).filter(Lt=>Mt[Lt]).join(" "))}}if("function"==typeof I)return I(null===D?{}:D,at,q);const dt=wt(I,null);return dt.$attrs$=D,at.length>0&&(dt.$children$=at),dt.$key$=ve,dt.$name$=xe,dt},wt=(I,D)=>({$flags$:0,$tag$:I,$text$:D,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),nn={},q={forEach:(I,D)=>I.map(B).forEach(D),map:(I,D)=>I.map(B).map(D).map(j)},B=I=>({vattrs:I.$attrs$,vchildren:I.$children$,vkey:I.$key$,vname:I.$name$,vtag:I.$tag$,vtext:I.$text$}),j=I=>{if("function"==typeof I.vtag){const J=Object.assign({},I.vattrs);return I.vkey&&(J.key=I.vkey),I.vname&&(J.name=I.vname),nt(I.vtag,J,...I.vchildren||[])}const D=wt(I.vtag,I.vtext);return D.$attrs$=I.vattrs,D.$children$=I.vchildren,D.$key$=I.vkey,D.$name$=I.vname,D},Ie=(I,D,J,ae,ve,xe,je)=>{let Re,at,st,dt;if(1===xe.nodeType){for(Re=xe.getAttribute("c-id"),Re&&(at=Re.split("."),(at[0]===je||"0"===at[0])&&(st={$flags$:0,$hostId$:at[0],$nodeId$:at[1],$depth$:at[2],$index$:at[3],$tag$:xe.tagName.toLowerCase(),$elm$:xe,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},D.push(st),xe.removeAttribute("c-id"),I.$children$||(I.$children$=[]),I.$children$[st.$index$]=st,I=st,ae&&"0"===st.$depth$&&(ae[st.$index$]=st.$elm$))),dt=xe.childNodes.length-1;dt>=0;dt--)Ie(I,D,J,ae,ve,xe.childNodes[dt],je);if(xe.shadowRoot)for(dt=xe.shadowRoot.childNodes.length-1;dt>=0;dt--)Ie(I,D,J,ae,ve,xe.shadowRoot.childNodes[dt],je)}else if(8===xe.nodeType)at=xe.nodeValue.split("."),(at[1]===je||"0"===at[1])&&(Re=at[0],st={$flags$:0,$hostId$:at[1],$nodeId$:at[2],$depth$:at[3],$index$:at[4],$elm$:xe,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===Re?(st.$elm$=xe.nextSibling,st.$elm$&&3===st.$elm$.nodeType&&(st.$text$=st.$elm$.textContent,D.push(st),xe.remove(),I.$children$||(I.$children$=[]),I.$children$[st.$index$]=st,ae&&"0"===st.$depth$&&(ae[st.$index$]=st.$elm$))):st.$hostId$===je&&("s"===Re?(st.$tag$="slot",xe["s-sn"]=at[5]?st.$name$=at[5]:"",xe["s-sr"]=!0,ae&&(st.$elm$=xr.createElement(st.$tag$),st.$name$&&st.$elm$.setAttribute("name",st.$name$),xe.parentNode.insertBefore(st.$elm$,xe),xe.remove(),"0"===st.$depth$&&(ae[st.$index$]=st.$elm$)),J.push(st),I.$children$||(I.$children$=[]),I.$children$[st.$index$]=st):"r"===Re&&(ae?xe.remove():(ve["s-cr"]=xe,xe["s-cn"]=!0))));else if(I&&"style"===I.$tag$){const Mt=wt(null,xe.textContent);Mt.$elm$=xe,Mt.$index$="0",I.$children$=[Mt]}},he=(I,D)=>{if(1===I.nodeType){let J=0;for(;J<I.childNodes.length;J++)he(I.childNodes[J],D);if(I.shadowRoot)for(J=0;J<I.shadowRoot.childNodes.length;J++)he(I.shadowRoot.childNodes[J],D)}else if(8===I.nodeType){const J=I.nodeValue.split(".");"o"===J[0]&&(D.set(J[1]+"."+J[2],I),I.nodeValue="",I["s-en"]=J[3])}},gt=I=>Dl.push(I),ot=I=>$t(I).$modeName$,Vt=I=>$t(I).$hostElement$,un=(I,D,J)=>{const ae=Vt(I);return{emit:ve=>Dt(ae,D,{bubbles:!!(4&J),composed:!!(2&J),cancelable:!!(1&J),detail:ve})}},Dt=(I,D,J)=>{const ae=Yt.ce(D,J);return I.dispatchEvent(ae),ae},mn=new WeakMap,Ht=(I,D,J)=>{let ae=fi.get(I);qt&&J?(ae=ae||new CSSStyleSheet,"string"==typeof ae?ae=D:ae.replaceSync(D)):ae=D,fi.set(I,ae)},Be=(I,D,J)=>{var ae;const ve=Me(D,J),xe=fi.get(ve);if(I=11===I.nodeType?I:xr,xe)if("string"==typeof xe){let Re,je=mn.get(I=I.head||I);if(je||mn.set(I,je=new Set),!je.has(ve)){if(I.host&&(Re=I.querySelector(`[${Oe}="${ve}"]`)))Re.innerHTML=xe;else{Re=xr.createElement("style"),Re.innerHTML=xe;const at=null!==(ae=Yt.$nonce$)&&void 0!==ae?ae:fe(xr);null!=at&&Re.setAttribute("nonce",at),I.insertBefore(Re,I.querySelector("link"))}4&D.$flags$&&(Re.innerHTML+=Fe),je&&je.add(ve)}}else I.adoptedStyleSheets.includes(xe)||(I.adoptedStyleSheets=[...I.adoptedStyleSheets,xe]);return ve},Me=(I,D)=>"sc-"+(D&&32&I.$flags$?I.$tagName$+"-"+D:I.$tagName$),At=I=>I.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Qt=(I,D,J,ae,ve,xe)=>{if(J!==ae){let je=Kn(I,D),Re=D.toLowerCase();if("class"===D){const at=I.classList,st=sn(J),dt=sn(ae);at.remove(...st.filter(Mt=>Mt&&!dt.includes(Mt))),at.add(...dt.filter(Mt=>Mt&&!st.includes(Mt)))}else if("style"===D){for(const at in J)(!ae||null==ae[at])&&(at.includes("-")?I.style.removeProperty(at):I.style[at]="");for(const at in ae)(!J||ae[at]!==J[at])&&(at.includes("-")?I.style.setProperty(at,ae[at]):I.style[at]=ae[at])}else if("key"!==D)if("ref"===D)ae&&ae(I);else if(je||"o"!==D[0]||"n"!==D[1]){const at=se(ae);if((je||at&&null!==ae)&&!ve)try{if(I.tagName.includes("-"))I[D]=ae;else{const dt=null==ae?"":ae;"list"===D?je=!1:(null==J||I[D]!=dt)&&(I[D]=dt)}}catch{}let st=!1;Re!==(Re=Re.replace(/^xlink\:?/,""))&&(D=Re,st=!0),null==ae||!1===ae?(!1!==ae||""===I.getAttribute(D))&&(st?I.removeAttributeNS(k,D):I.removeAttribute(D)):(!je||4&xe||ve)&&!at&&(ae=!0===ae?"":ae,st?I.setAttributeNS(k,D,ae):I.setAttribute(D,ae))}else if(D="-"===D[2]?D.slice(3):Kn(wn,Re)?Re.slice(2):Re[2]+D.slice(3),J||ae){const at=D.endsWith(Rn);D=D.replace(Jt,""),J&&Yt.rel(I,D,J,at),ae&&Yt.ael(I,D,ae,at)}}},In=/\s/,sn=I=>I?I.split(In):[],Rn="Capture",Jt=new RegExp(Rn+"$"),_r=(I,D,J,ae)=>{const ve=11===D.$elm$.nodeType&&D.$elm$.host?D.$elm$.host:D.$elm$,xe=I&&I.$attrs$||O,je=D.$attrs$||O;for(ae in xe)ae in je||Qt(ve,ae,xe[ae],void 0,J,D.$flags$);for(ae in je)Qt(ve,ae,xe[ae],je[ae],J,D.$flags$)},$n=(I,D,J,ae)=>{const ve=D.$children$[J];let je,Re,at,xe=0;if(M||(Ce=!0,"slot"===ve.$tag$&&(L&&ae.classList.add(L+"-s"),ve.$flags$|=ve.$children$?2:1)),null!==ve.$text$)je=ve.$elm$=xr.createTextNode(ve.$text$);else if(1&ve.$flags$)je=ve.$elm$=xr.createTextNode("");else{if(ee||(ee="svg"===ve.$tag$),je=ve.$elm$=xr.createElementNS(ee?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&ve.$flags$?"slot-fb":ve.$tag$),ee&&"foreignObject"===ve.$tag$&&(ee=!1),_r(null,ve,ee),(I=>null!=I)(L)&&je["s-si"]!==L&&je.classList.add(je["s-si"]=L),ve.$children$)for(xe=0;xe<ve.$children$.length;++xe)Re=$n(I,ve,xe,je),Re&&je.appendChild(Re);"svg"===ve.$tag$?ee=!1:"foreignObject"===je.tagName&&(ee=!0)}return je["s-hn"]=H,3&ve.$flags$&&(je["s-sr"]=!0,je["s-cr"]=G,je["s-sn"]=ve.$name$||"",at=I&&I.$children$&&I.$children$[J],at&&at.$tag$===ve.$tag$&&I.$elm$&&Qr(I.$elm$,!1)),je},Qr=(I,D)=>{Yt.$flags$|=1;const J=I.childNodes;for(let ae=J.length-1;ae>=0;ae--){const ve=J[ae];ve["s-hn"]!==H&&ve["s-ol"]&&(wi(ve).insertBefore(ve,qi(ve)),ve["s-ol"].remove(),ve["s-ol"]=void 0,ve["s-sh"]=void 0,Ce=!0),D&&Qr(ve,D)}Yt.$flags$&=-2},Si=(I,D,J,ae,ve,xe)=>{let Re,je=I["s-cr"]&&I["s-cr"].parentNode||I;for(je.shadowRoot&&je.tagName===H&&(je=je.shadowRoot);ve<=xe;++ve)ae[ve]&&(Re=$n(null,J,ve,I),Re&&(ae[ve].$elm$=Re,je.insertBefore(Re,qi(D))))},zr=(I,D,J)=>{for(let ae=D;ae<=J;++ae){const ve=I[ae];if(ve){const xe=ve.$elm$;ps(ve),xe&&(ie=!0,xe["s-ol"]?xe["s-ol"].remove():Qr(xe,!0),xe.remove())}}},Ri=(I,D,J=!1)=>I.$tag$===D.$tag$&&("slot"===I.$tag$?I.$name$===D.$name$:!!J||I.$key$===D.$key$),qi=I=>I&&I["s-ol"]||I,wi=I=>(I["s-ol"]?I["s-ol"]:I).parentNode,ui=(I,D,J=!1)=>{const ae=D.$elm$=I.$elm$,ve=I.$children$,xe=D.$children$,je=D.$tag$,Re=D.$text$;let at;null===Re?(ee="svg"===je||"foreignObject"!==je&&ee,"slot"===je&&!M||_r(I,D,ee),null!==ve&&null!==xe?((I,D,J,ae,ve=!1)=>{let zn,sr,xe=0,je=0,Re=0,at=0,st=D.length-1,dt=D[0],Mt=D[st],Lt=ae.length-1,Qe=ae[0],dr=ae[Lt];for(;xe<=st&&je<=Lt;)if(null==dt)dt=D[++xe];else if(null==Mt)Mt=D[--st];else if(null==Qe)Qe=ae[++je];else if(null==dr)dr=ae[--Lt];else if(Ri(dt,Qe,ve))ui(dt,Qe,ve),dt=D[++xe],Qe=ae[++je];else if(Ri(Mt,dr,ve))ui(Mt,dr,ve),Mt=D[--st],dr=ae[--Lt];else if(Ri(dt,dr,ve))("slot"===dt.$tag$||"slot"===dr.$tag$)&&Qr(dt.$elm$.parentNode,!1),ui(dt,dr,ve),I.insertBefore(dt.$elm$,Mt.$elm$.nextSibling),dt=D[++xe],dr=ae[--Lt];else if(Ri(Mt,Qe,ve))("slot"===dt.$tag$||"slot"===dr.$tag$)&&Qr(Mt.$elm$.parentNode,!1),ui(Mt,Qe,ve),I.insertBefore(Mt.$elm$,dt.$elm$),Mt=D[--st],Qe=ae[++je];else{for(Re=-1,at=xe;at<=st;++at)if(D[at]&&null!==D[at].$key$&&D[at].$key$===Qe.$key$){Re=at;break}Re>=0?(sr=D[Re],sr.$tag$!==Qe.$tag$?zn=$n(D&&D[je],J,Re,I):(ui(sr,Qe,ve),D[Re]=void 0,zn=sr.$elm$),Qe=ae[++je]):(zn=$n(D&&D[je],J,je,I),Qe=ae[++je]),zn&&wi(dt.$elm$).insertBefore(zn,qi(dt.$elm$))}xe>st?Si(I,null==ae[Lt+1]?null:ae[Lt+1].$elm$,J,ae,je,Lt):je>Lt&&zr(D,xe,st)})(ae,ve,D,xe,J):null!==xe?(null!==I.$text$&&(ae.textContent=""),Si(ae,null,D,xe,0,xe.length-1)):null!==ve&&zr(ve,0,ve.length-1),ee&&"svg"===je&&(ee=!1)):(at=ae["s-cr"])?at.parentNode.textContent=Re:I.$text$!==Re&&(ae.data=Re)},ni=I=>{const D=I.childNodes;for(const J of D)if(1===J.nodeType){if(J["s-sr"]){const ae=J["s-sn"];J.hidden=!1;for(const ve of D)if(ve!==J)if(ve["s-hn"]!==J["s-hn"]||""!==ae){if(1===ve.nodeType&&(ae===ve.getAttribute("slot")||ae===ve["s-sn"])){J.hidden=!0;break}}else if(1===ve.nodeType||3===ve.nodeType&&""!==ve.textContent.trim()){J.hidden=!0;break}}ni(J)}},qn=[],Ki=I=>{let D,J,ae;for(const ve of I.childNodes){if(ve["s-sr"]&&(D=ve["s-cr"])&&D.parentNode){J=D.parentNode.childNodes;const xe=ve["s-sn"];for(ae=J.length-1;ae>=0;ae--)if(D=J[ae],!D["s-cn"]&&!D["s-nr"]&&D["s-hn"]!==ve["s-hn"])if(fs(D,xe)){let je=qn.find(Re=>Re.$nodeToRelocate$===D);ie=!0,D["s-sn"]=D["s-sn"]||xe,je?(je.$nodeToRelocate$["s-sh"]=ve["s-hn"],je.$slotRefNode$=ve):(D["s-sh"]=ve["s-hn"],qn.push({$slotRefNode$:ve,$nodeToRelocate$:D})),D["s-sr"]&&qn.map(Re=>{fs(Re.$nodeToRelocate$,D["s-sn"])&&(je=qn.find(at=>at.$nodeToRelocate$===D),je&&!Re.$slotRefNode$&&(Re.$slotRefNode$=je.$slotRefNode$))})}else qn.some(je=>je.$nodeToRelocate$===D)||qn.push({$nodeToRelocate$:D})}1===ve.nodeType&&Ki(ve)}},fs=(I,D)=>1===I.nodeType?null===I.getAttribute("slot")&&""===D||I.getAttribute("slot")===D:I["s-sn"]===D||""===D,ps=I=>{I.$attrs$&&I.$attrs$.ref&&I.$attrs$.ref(null),I.$children$&&I.$children$.map(ps)},xi=(I,D)=>{D&&!I.$onRenderResolve$&&D["s-p"]&&D["s-p"].push(new Promise(J=>I.$onRenderResolve$=J))},Rr=(I,D)=>{if(I.$flags$|=16,!(4&I.$flags$))return xi(I,I.$ancestorComponent$),Se(()=>Yo(I,D));I.$flags$|=512},Yo=(I,D)=>{const ae=I.$lazyInstance$;let ve;return D&&(I.$flags$|=256,I.$queuedListeners$&&(I.$queuedListeners$.map(([xe,je])=>Le(ae,xe,je)),I.$queuedListeners$=void 0),ve=Le(ae,"componentWillLoad")),ve=Xo(ve,()=>Le(ae,"componentWillRender")),Xo(ve,()=>Ls(I,ae,D))},Xo=(I,D)=>Un(I)?I.then(D):D(),Un=I=>I instanceof Promise||I&&I.then&&"function"==typeof I.then,Ls=function(){var I=(0,_.A)(function*(D,J,ae){var ve;const xe=D.$hostElement$,Re=xe["s-rc"];ae&&(I=>{const D=I.$cmpMeta$,J=I.$hostElement$,ae=D.$flags$,xe=Be(J.shadowRoot?J.shadowRoot:J.getRootNode(),D,I.$modeName$);10&ae&&(J["s-sc"]=xe,J.classList.add(xe+"-h"),2&ae&&J.classList.add(xe+"-s"))})(D);ua(D,J,xe,ae),Re&&(Re.map(st=>st()),xe["s-rc"]=void 0);{const st=null!==(ve=xe["s-p"])&&void 0!==ve?ve:[],dt=()=>Z(D);0===st.length?dt():(Promise.all(st).then(dt),D.$flags$|=4,st.length=0)}});return function(J,ae,ve){return I.apply(this,arguments)}}(),ua=(I,D,J,ae)=>{try{D=D.render&&D.render(),I.$flags$&=-17,I.$flags$|=2,((I,D,J=!1)=>{var ae,ve,xe,je;const Re=I.$hostElement$,at=I.$cmpMeta$,st=I.$vnode$||wt(null,null),dt=(I=>I&&I.$tag$===nn)(D)?D:nt(null,null,D);if(H=Re.tagName,at.$attrsToReflect$&&(dt.$attrs$=dt.$attrs$||{},at.$attrsToReflect$.map(([Mt,Lt])=>dt.$attrs$[Lt]=Re[Mt])),J&&dt.$attrs$)for(const Mt of Object.keys(dt.$attrs$))Re.hasAttribute(Mt)&&!["key","ref","style","class"].includes(Mt)&&(dt.$attrs$[Mt]=Re[Mt]);if(dt.$tag$=null,dt.$flags$|=4,I.$vnode$=dt,dt.$elm$=st.$elm$=Re.shadowRoot||Re,L=Re["s-sc"],M=!!(1&at.$flags$),G=Re["s-cr"],ie=!1,ui(st,dt,J),Yt.$flags$|=1,Ce){Ki(dt.$elm$);for(const Mt of qn){const Lt=Mt.$nodeToRelocate$;if(!Lt["s-ol"]){const Qe=xr.createTextNode("");Qe["s-nr"]=Lt,Lt.parentNode.insertBefore(Lt["s-ol"]=Qe,Lt)}}for(const Mt of qn){const Lt=Mt.$nodeToRelocate$,Qe=Mt.$slotRefNode$;if(Qe){const dr=Qe.parentNode;let zn=Qe.nextSibling;{let sr=null===(ae=Lt["s-ol"])||void 0===ae?void 0:ae.previousSibling;for(;sr;){let gi=null!==(ve=sr["s-nr"])&&void 0!==ve?ve:null;if(gi&&gi["s-sn"]===Lt["s-sn"]&&dr===gi.parentNode&&(gi=gi.nextSibling,!gi||!gi["s-nr"])){zn=gi;break}sr=sr.previousSibling}}(!zn&&dr!==Lt.parentNode||Lt.nextSibling!==zn)&&Lt!==zn&&(!Lt["s-hn"]&&Lt["s-ol"]&&(Lt["s-hn"]=Lt["s-ol"].parentNode.nodeName),dr.insertBefore(Lt,zn),1===Lt.nodeType&&(Lt.hidden=null!==(xe=Lt["s-ih"])&&void 0!==xe&&xe))}else 1===Lt.nodeType&&(J&&(Lt["s-ih"]=null!==(je=Lt.hidden)&&void 0!==je&&je),Lt.hidden=!0)}}ie&&ni(dt.$elm$),Yt.$flags$&=-2,qn.length=0,G=void 0})(I,D,ae)}catch(ve){nr(ve,I.$hostElement$)}return null},Z=I=>{const J=I.$hostElement$,ve=I.$lazyInstance$,xe=I.$ancestorComponent$;Le(ve,"componentDidRender"),64&I.$flags$?Le(ve,"componentDidUpdate"):(I.$flags$|=64,ue(J),Le(ve,"componentDidLoad"),I.$onReadyResolve$(J),xe||te()),I.$onInstanceResolve$(J),I.$onRenderResolve$&&(I.$onRenderResolve$(),I.$onRenderResolve$=void 0),512&I.$flags$&&So(()=>Rr(I,!1)),I.$flags$&=-517},U=I=>{{const D=$t(I),J=D.$hostElement$.isConnected;return J&&2==(18&D.$flags$)&&Rr(D,!1),J}},te=I=>{ue(xr.documentElement),So(()=>Dt(wn,"appload",{detail:{namespace:"ionic"}}))},Le=(I,D,J)=>{if(I&&I[D])try{return I[D](J)}catch(ae){nr(ae)}},ue=I=>I.classList.add("hydrated"),Bt=(I,D,J)=>{var ae;const ve=I.prototype;if(D.$members$){I.watchers&&(D.$watchers$=I.watchers);const xe=Object.entries(D.$members$);if(xe.map(([je,[Re]])=>{31&Re||2&J&&32&Re?Object.defineProperty(ve,je,{get(){return((I,D)=>$t(this).$instanceValues$.get(D))(0,je)},set(at){((I,D,J,ae)=>{const ve=$t(I),xe=ve.$hostElement$,je=ve.$instanceValues$.get(D),Re=ve.$flags$,at=ve.$lazyInstance$;J=((I,D)=>null==I||se(I)?I:4&D?"false"!==I&&(""===I||!!I):2&D?parseFloat(I):1&D?String(I):I)(J,ae.$members$[D][0]);const st=Number.isNaN(je)&&Number.isNaN(J);if((!(8&Re)||void 0===je)&&J!==je&&!st&&(ve.$instanceValues$.set(D,J),at)){if(ae.$watchers$&&128&Re){const Mt=ae.$watchers$[D];Mt&&Mt.map(Lt=>{try{at[Lt](J,je,D)}catch(Qe){nr(Qe,xe)}})}2==(18&Re)&&Rr(ve,!1)}})(this,je,at,D)},configurable:!0,enumerable:!0}):1&J&&64&Re&&Object.defineProperty(ve,je,{value(...at){var st;const dt=$t(this);return null===(st=null==dt?void 0:dt.$onInstancePromise$)||void 0===st?void 0:st.then(()=>{var Mt;return null===(Mt=dt.$lazyInstance$)||void 0===Mt?void 0:Mt[je](...at)})}})}),1&J){const je=new Map;ve.attributeChangedCallback=function(Re,at,st){Yt.jmp(()=>{var dt;const Mt=je.get(Re);if(this.hasOwnProperty(Mt))st=this[Mt],delete this[Mt];else{if(ve.hasOwnProperty(Mt)&&"number"==typeof this[Mt]&&this[Mt]==st)return;if(null==Mt){const Lt=$t(this),Qe=null==Lt?void 0:Lt.$flags$;if(Qe&&!(8&Qe)&&128&Qe&&st!==at){const dr=Lt.$lazyInstance$,zn=null===(dt=D.$watchers$)||void 0===dt?void 0:dt[Re];null==zn||zn.forEach(sr=>{null!=dr[sr]&&dr[sr].call(dr,st,at,Re)})}return}}this[Mt]=(null!==st||"boolean"!=typeof this[Mt])&&st})},I.observedAttributes=Array.from(new Set([...Object.keys(null!==(ae=D.$watchers$)&&void 0!==ae?ae:{}),...xe.filter(([Re,at])=>15&at[0]).map(([Re,at])=>{var st;const dt=at[1]||Re;return je.set(dt,Re),512&at[0]&&(null===(st=D.$attrsToReflect$)||void 0===st||st.push([Re,dt])),dt})]))}}return I},di=function(){var I=(0,_.A)(function*(D,J,ae,ve){let xe;if(!(32&J.$flags$)){if(J.$flags$|=32,ae.$lazyBundleId$){if(xe=xn(ae),xe.then){const dt=()=>{};xe=yield xe,dt()}xe.isProxied||(ae.$watchers$=xe.watchers,Bt(xe,ae,2),xe.isProxied=!0);const st=()=>{};J.$flags$|=8;try{new xe(J)}catch(dt){nr(dt)}J.$flags$&=-9,J.$flags$|=128,st(),xt(J.$lazyInstance$)}else xe=D.constructor,customElements.whenDefined(ae.$tagName$).then(()=>J.$flags$|=128);if(xe.style){let st=xe.style;"string"!=typeof st&&(st=st[J.$modeName$=(I=>Dl.map(D=>D(I)).find(D=>!!D))(D)]);const dt=Me(ae,J.$modeName$);if(!fi.has(dt)){const Mt=()=>{};Ht(dt,st,!!(1&ae.$flags$)),Mt()}}}const je=J.$ancestorComponent$,Re=()=>Rr(J,!0);je&&je["s-rc"]?je["s-rc"].push(Re):Re()});return function(J,ae,ve,xe){return I.apply(this,arguments)}}(),xt=I=>{Le(I,"connectedCallback")},dn=I=>{const D=I["s-cr"]=xr.createComment("");D["s-cn"]=!0,I.insertBefore(D,I.firstChild)},Ue=I=>{Le(I,"disconnectedCallback")},hi=function(){var I=(0,_.A)(function*(D){if(!(1&Yt.$flags$)){const J=$t(D);J.$rmListeners$&&(J.$rmListeners$.map(ae=>ae()),J.$rmListeners$=void 0),null!=J&&J.$lazyInstance$?Ue(J.$lazyInstance$):null!=J&&J.$onReadyPromise$&&J.$onReadyPromise$.then(()=>Ue(J.$lazyInstance$))}});return function(J){return I.apply(this,arguments)}}(),Qi=(I,D={})=>{var J;const ve=[],xe=D.exclude||[],je=wn.customElements,Re=xr.head,at=Re.querySelector("meta[charset]"),st=xr.createElement("style"),dt=[],Mt=xr.querySelectorAll(`[${Oe}]`);let Lt,Qe=!0,dr=0;for(Object.assign(Yt,D),Yt.$resourcesUrl$=new URL(D.resourcesUrl||"./",xr.baseURI).href,Yt.$flags$|=2;dr<Mt.length;dr++)Ht(Mt[dr].getAttribute(Oe),At(Mt[dr].innerHTML),!0);let zn=!1;if(I.map(sr=>{sr[1].map(gi=>{var Ua;const Ro={$flags$:gi[0],$tagName$:gi[1],$members$:gi[2],$listeners$:gi[3]};4&Ro.$flags$&&(zn=!0),Ro.$members$=gi[2],Ro.$listeners$=gi[3],Ro.$attrsToReflect$=[],Ro.$watchers$=null!==(Ua=gi[4])&&void 0!==Ua?Ua:{};const _s=Ro.$tagName$,hc=class extends HTMLElement{constructor($s){super($s),Ir($s=this,Ro),1&Ro.$flags$&&$s.attachShadow({mode:"open",delegatesFocus:!!(16&Ro.$flags$)})}connectedCallback(){Lt&&(clearTimeout(Lt),Lt=null),Qe?dt.push(this):Yt.jmp(()=>(I=>{if(!(1&Yt.$flags$)){const D=$t(I),J=D.$cmpMeta$,ae=()=>{};if(1&D.$flags$)Vs(I,D,J.$listeners$),null!=D&&D.$lazyInstance$?xt(D.$lazyInstance$):null!=D&&D.$onReadyPromise$&&D.$onReadyPromise$.then(()=>xt(D.$lazyInstance$));else{let ve;if(D.$flags$|=1,ve=I.getAttribute(be),ve){if(1&J.$flags$){const xe=Be(I.shadowRoot,J,I.getAttribute("s-mode"));I.classList.remove(xe+"-h",xe+"-s")}((I,D,J,ae)=>{const xe=I.shadowRoot,je=[],at=xe?[]:null,st=ae.$vnode$=wt(D,null);Yt.$orgLocNodes$||he(xr.body,Yt.$orgLocNodes$=new Map),I[be]=J,I.removeAttribute(be),Ie(st,je,[],at,I,I,J),je.map(dt=>{const Mt=dt.$hostId$+"."+dt.$nodeId$,Lt=Yt.$orgLocNodes$.get(Mt),Qe=dt.$elm$;Lt&&ku&&""===Lt["s-en"]&&Lt.parentNode.insertBefore(Qe,Lt.nextSibling),xe||(Qe["s-hn"]=D,Lt&&(Qe["s-ol"]=Lt,Qe["s-ol"]["s-nr"]=Qe)),Yt.$orgLocNodes$.delete(Mt)}),xe&&at.map(dt=>{dt&&xe.appendChild(dt)})})(I,J.$tagName$,ve,D)}ve||12&J.$flags$&&dn(I);{let xe=I;for(;xe=xe.parentNode||xe.host;)if(1===xe.nodeType&&xe.hasAttribute("s-id")&&xe["s-p"]||xe["s-p"]){xi(D,D.$ancestorComponent$=xe);break}}J.$members$&&Object.entries(J.$members$).map(([xe,[je]])=>{if(31&je&&I.hasOwnProperty(xe)){const Re=I[xe];delete I[xe],I[xe]=Re}}),di(I,D,J)}ae()}})(this))}disconnectedCallback(){Yt.jmp(()=>hi(this))}componentOnReady(){return $t(this).$onReadyPromise$}};Ro.$lazyBundleId$=sr[0],!xe.includes(_s)&&!je.get(_s)&&(ve.push(_s),je.define(_s,Bt(hc,Ro,1)))})}),ve.length>0&&(zn&&(st.textContent+=Fe),st.textContent+=ve+"{visibility:hidden}.hydrated{visibility:inherit}",st.innerHTML.length)){st.setAttribute("data-styles","");const sr=null!==(J=Yt.$nonce$)&&void 0!==J?J:fe(xr);null!=sr&&st.setAttribute("nonce",sr),Re.insertBefore(st,at?at.nextSibling:Re.firstChild)}Qe=!1,dt.length?dt.map(sr=>sr.connectedCallback()):Yt.jmp(()=>Lt=setTimeout(te,30))},Vs=(I,D,J,ae)=>{J&&J.map(([ve,xe,je])=>{const Re=we(I,ve),at=Ne(D,je),st=qe(ve);Yt.ael(Re,xe,at,st),(D.$rmListeners$=D.$rmListeners$||[]).push(()=>Yt.rel(Re,xe,at,st))})},Ne=(I,D)=>J=>{try{256&I.$flags$?I.$lazyInstance$[D](J):(I.$queuedListeners$=I.$queuedListeners$||[]).push([D,J])}catch(ae){nr(ae)}},we=(I,D)=>4&D?xr:8&D?wn:16&D?xr.body:I,qe=I=>ms?{passive:!!(1&I),capture:!!(2&I)}:!!(2&I),Gt=new WeakMap,$t=I=>Gt.get(I),fn=(I,D)=>Gt.set(D.$lazyInstance$=I,D),Ir=(I,D)=>{const J={$flags$:0,$hostElement$:I,$cmpMeta$:D,$instanceValues$:new Map};return J.$onInstancePromise$=new Promise(ae=>J.$onInstanceResolve$=ae),J.$onReadyPromise$=new Promise(ae=>J.$onReadyResolve$=ae),I["s-p"]=[],I["s-rc"]=[],Vs(I,J,D.$listeners$),Gt.set(I,J)},Kn=(I,D)=>D in I,nr=(I,D)=>(0,console.error)(I,D),gs=new Map,xn=(I,D,J)=>{const ae=I.$tagName$.replace(/-/g,"_"),ve=I.$lazyBundleId$,xe=gs.get(ve);return xe?xe[ae]:F(8996)(`./${ve}.entry.js`).then(je=>(gs.set(ve,je),je[ae]),nr)},fi=new Map,Dl=[],wn=typeof window<"u"?window:{},xr=wn.document||{head:{}},Yt={$flags$:0,$resourcesUrl$:"",jmp:I=>I(),raf:I=>requestAnimationFrame(I),ael:(I,D,J,ae)=>I.addEventListener(D,J,ae),rel:(I,D,J,ae)=>I.removeEventListener(D,J,ae),ce:(I,D)=>new CustomEvent(I,D)},Gn=I=>{Object.assign(Yt,I)},ku=!0,ms=(()=>{let I=!1;try{xr.addEventListener("e",null,Object.defineProperty({},"passive",{get(){I=!0}}))}catch{}return I})(),qt=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),Bs=[],pi=[],dc=(I,D)=>J=>{I.push(J),X||(X=!0,D&&4&Yt.$flags$?So(Rl):Yt.raf(Rl))},Sl=I=>{for(let D=0;D<I.length;D++)try{I[D](performance.now())}catch(J){nr(J)}I.length=0},Rl=()=>{Sl(Bs),Sl(pi),(X=Bs.length>0)&&Yt.raf(Rl)},So=I=>Promise.resolve(void 0).then(I),ch=dc(Bs,!1),Se=dc(pi,!0)},8436:(Nt,le,F)=>{"use strict";F.d(le,{a:()=>X,b:()=>wt,c:()=>C,i:()=>nn});var _=F(9081);class V{constructor(){this.m=new Map}reset(q){this.m=new Map(Object.entries(q))}get(q,B){const j=this.m.get(q);return void 0!==j?j:B}getBoolean(q,B=!1){const j=this.m.get(q);return void 0===j?B:"string"==typeof j?"true"===j:!!j}getNumber(q,B){const j=parseFloat(this.m.get(q));return isNaN(j)?void 0!==B?B:NaN:j}set(q,B){this.m.set(q,B)}}const C=new V,Ce="ionic-persist-config",X=(Ve,q)=>("string"==typeof Ve&&(q=Ve,Ve=void 0),(Ve=>de(Ve))(Ve).includes(q)),de=(Ve=window)=>{if(typeof Ve>"u")return[];Ve.Ionic=Ve.Ionic||{};let q=Ve.Ionic.platforms;return null==q&&(q=Ve.Ionic.platforms=oe(Ve),q.forEach(B=>Ve.document.documentElement.classList.add(`plt-${B}`))),q},oe=Ve=>{const q=C.get("platform");return Object.keys(fe).filter(B=>{const j=null==q?void 0:q[B];return"function"==typeof j?j(Ve):fe[B](Ve)})},ye=Ve=>!!(K(Ve,/iPad/i)||K(Ve,/Macintosh/i)&&Ge(Ve)),Y=Ve=>K(Ve,/android|sink/i),Ge=Ve=>se(Ve,"(any-pointer:coarse)"),Fe=Ve=>k(Ve)||O(Ve),k=Ve=>!!(Ve.cordova||Ve.phonegap||Ve.PhoneGap),O=Ve=>{const q=Ve.Capacitor;return!(null==q||!q.isNative)},K=(Ve,q)=>q.test(Ve.navigator.userAgent),se=(Ve,q)=>{var B;return null===(B=Ve.matchMedia)||void 0===B?void 0:B.call(Ve,q).matches},fe={ipad:ye,iphone:Ve=>K(Ve,/iPhone/i),ios:Ve=>K(Ve,/iPhone|iPod/i)||ye(Ve),android:Y,phablet:Ve=>{const q=Ve.innerWidth,B=Ve.innerHeight,j=Math.min(q,B),ce=Math.max(q,B);return j>390&&j<520&&ce>620&&ce<800},tablet:Ve=>{const q=Ve.innerWidth,B=Ve.innerHeight,j=Math.min(q,B),ce=Math.max(q,B);return ye(Ve)||(Ve=>Y(Ve)&&!K(Ve,/mobile/i))(Ve)||j>460&&j<820&&ce>780&&ce<1400},cordova:k,capacitor:O,electron:Ve=>K(Ve,/electron/i),pwa:Ve=>{var q;return!!(null!==(q=Ve.matchMedia)&&void 0!==q&&q.call(Ve,"(display-mode: standalone)").matches||Ve.navigator.standalone)},mobile:Ge,mobileweb:Ve=>Ge(Ve)&&!Fe(Ve),desktop:Ve=>!Ge(Ve),hybrid:Fe};let nt;const wt=Ve=>Ve&&(0,_.g)(Ve)||nt,nn=(Ve={})=>{if(typeof window>"u")return;const q=window.document,B=window,j=B.Ionic=B.Ionic||{},ce={};Ve._ael&&(ce.ael=Ve._ael),Ve._rel&&(ce.rel=Ve._rel),Ve._ce&&(ce.ce=Ve._ce),(0,_.a)(ce);const Ie=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Ve=>{try{const q=Ve.sessionStorage.getItem(Ce);return null!==q?JSON.parse(q):{}}catch{return{}}})(B)),{persistConfig:!1}),j.config),(Ve=>{const q={};return Ve.location.search.slice(1).split("&").map(B=>B.split("=")).map(([B,j])=>[decodeURIComponent(B),decodeURIComponent(j)]).filter(([B])=>((Ve,q)=>Ve.substr(0,q.length)===q)(B,"ionic:")).map(([B,j])=>[B.slice(6),j]).forEach(([B,j])=>{q[B]=j}),q})(B)),Ve);C.reset(Ie),C.getBoolean("persistConfig")&&((Ve,q)=>{try{Ve.sessionStorage.setItem(Ce,JSON.stringify(q))}catch{return}})(B,Ie),de(B),j.config=C,j.mode=nt=C.get("mode",q.documentElement.getAttribute("mode")||(X(B,"ios")?"ios":"md")),C.set("mode",nt),q.documentElement.setAttribute("mode",nt),q.documentElement.classList.add(nt),C.getBoolean("_testing")&&C.set("animated",!1);const he=gt=>{var ot;return null===(ot=gt.tagName)||void 0===ot?void 0:ot.startsWith("ION-")},it=gt=>["ios","md"].includes(gt);(0,_.c)(gt=>{for(;gt;){const ot=gt.mode||gt.getAttribute("mode");if(ot){if(it(ot))return ot;he(gt)&&console.warn('Invalid ionic mode: "'+ot+'", expected: "ios" or "md"')}gt=gt.parentElement}return nt})}},2604:(Nt,le,F)=>{"use strict";F.r(le),F.d(le,{iosTransitionAnimation:()=>oe,shadow:()=>M});var _=F(3503),V=F(1497);F(8476),F(9081);const H=ye=>document.querySelector(`${ye}.ion-cloned-element`),M=ye=>ye.shadowRoot||ye,ie=ye=>{const ke="ION-TABS"===ye.tagName?ye:ye.querySelector("ion-tabs"),ne="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=ke){const Y=ke.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Y?Y.querySelector(ne):null}return ye.querySelector(ne)},Ce=(ye,ke)=>{const ne="ION-TABS"===ye.tagName?ye:ye.querySelector("ion-tabs");let Y=[];if(null!=ne){const re=ne.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=re&&(Y=re.querySelectorAll("ion-buttons"))}else Y=ye.querySelectorAll("ion-buttons");for(const re of Y){const be=re.closest("ion-header"),Oe=be&&!be.classList.contains("header-collapse-condense-inactive"),Ge=re.querySelector("ion-back-button"),_e=re.classList.contains("buttons-collapse");if(null!==Ge&&("start"===re.slot||""===re.slot)&&(_e&&Oe&&ke||!_e))return Ge}return null},X=(ye,ke,ne,Y,re,be,Oe,Ge,_e)=>{var Fe,k;const O=ke?`calc(100% - ${re.right+4}px)`:re.left-4+"px",S=ke?"right":"left",$=ke?"left":"right",K=ke?"right":"left",se=(null===(Fe=be.textContent)||void 0===Fe?void 0:Fe.trim())===(null===(k=Ge.textContent)||void 0===k?void 0:k.trim()),nt=(_e.height-pe)/Oe.height,wt=se?`scale(${_e.width/Oe.width}, ${nt})`:`scale(${nt})`,nn="scale(1)",q=M(Y).querySelector("ion-icon").getBoundingClientRect(),B=ke?q.width/2-(q.right-re.right)+"px":re.left-q.width/2+"px",j=ke?`-${window.innerWidth-re.right}px`:`${re.left}px`,ce=`${_e.top}px`,Ie=`${re.top}px`,gt=ne?[{offset:0,transform:`translate3d(${j}, ${Ie}, 0)`},{offset:1,transform:`translate3d(${B}, ${ce}, 0)`}]:[{offset:0,transform:`translate3d(${B}, ${ce}, 0)`},{offset:1,transform:`translate3d(${j}, ${Ie}, 0)`}],Vt=ne?[{offset:0,opacity:1,transform:nn},{offset:1,opacity:0,transform:wt}]:[{offset:0,opacity:0,transform:wt},{offset:1,opacity:1,transform:nn}],mn=ne?[{offset:0,opacity:1,transform:"scale(1)"},{offset:.2,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:0,transform:"scale(0.6)"}]:[{offset:0,opacity:0,transform:"scale(0.6)"},{offset:.6,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:1,transform:"scale(1)"}],Ht=(0,_.c)(),Be=(0,_.c)(),De=(0,_.c)(),Me=H("ion-back-button"),At=M(Me).querySelector(".button-text"),Qt=M(Me).querySelector("ion-icon");Me.text=Y.text,Me.mode=Y.mode,Me.icon=Y.icon,Me.color=Y.color,Me.disabled=Y.disabled,Me.style.setProperty("display","block"),Me.style.setProperty("position","fixed"),Be.addElement(Qt),Ht.addElement(At),De.addElement(Me),De.beforeStyles({position:"absolute",top:"0px",[K]:"0px"}).keyframes(gt),Ht.beforeStyles({"transform-origin":`${S} top`}).beforeAddWrite(()=>{Y.style.setProperty("display","none"),Me.style.setProperty(S,O)}).afterAddWrite(()=>{Y.style.setProperty("display",""),Me.style.setProperty("display","none"),Me.style.removeProperty(S)}).keyframes(Vt),Be.beforeStyles({"transform-origin":`${$} center`}).keyframes(mn),ye.addAnimation([Ht,Be,De])},de=(ye,ke,ne,Y,re,be,Oe,Ge)=>{var _e,Fe;const k=ke?"right":"left",O=ke?`calc(100% - ${re.right}px)`:`${re.left}px`,$=`${re.top}px`,se=ke?`-${window.innerWidth-Ge.right-8}px`:Ge.x-8+"px",nt=Ge.y-2+"px",wt=(null===(_e=Oe.textContent)||void 0===_e?void 0:_e.trim())===(null===(Fe=Y.textContent)||void 0===Fe?void 0:Fe.trim()),Ve=Ge.height/(be.height-pe),q="scale(1)",B=wt?`scale(${Ge.width/be.width}, ${Ve})`:`scale(${Ve})`,Ie=ne?[{offset:0,opacity:0,transform:`translate3d(${se}, ${nt}, 0) ${B}`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0px, ${$}, 0) ${q}`}]:[{offset:0,opacity:.99,transform:`translate3d(0px, ${$}, 0) ${q}`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${se}, ${nt}, 0) ${B}`}],he=H("ion-title"),it=(0,_.c)();he.innerText=Y.innerText,he.size=Y.size,he.color=Y.color,it.addElement(he),it.beforeStyles({"transform-origin":`${k} top`,height:`${re.height}px`,display:"",position:"relative",[k]:O}).beforeAddWrite(()=>{Y.style.setProperty("opacity","0")}).afterAddWrite(()=>{Y.style.setProperty("opacity",""),he.style.setProperty("display","none")}).keyframes(Ie),ye.addAnimation(it)},oe=(ye,ke)=>{var ne;try{const Y="cubic-bezier(0.32,0.72,0,1)",re="opacity",be="transform",Oe="0%",_e="rtl"===ye.ownerDocument.dir,Fe=_e?"-99.5%":"99.5%",k=_e?"33%":"-33%",O=ke.enteringEl,S=ke.leavingEl,$="back"===ke.direction,K=O.querySelector(":scope > ion-content"),se=O.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),fe=O.querySelectorAll(":scope > ion-header > ion-toolbar"),nt=(0,_.c)(),wt=(0,_.c)();if(nt.addElement(O).duration((null!==(ne=ke.duration)&&void 0!==ne?ne:0)||540).easing(ke.easing||Y).fill("both").beforeRemoveClass("ion-page-invisible"),S&&null!=ye){const B=(0,_.c)();B.addElement(ye),nt.addAnimation(B)}if(K||0!==fe.length||0!==se.length?(wt.addElement(K),wt.addElement(se)):wt.addElement(O.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),nt.addAnimation(wt),$?wt.beforeClearStyles([re]).fromTo("transform",`translateX(${k})`,`translateX(${Oe})`).fromTo(re,.8,1):wt.beforeClearStyles([re]).fromTo("transform",`translateX(${Fe})`,`translateX(${Oe})`),K){const B=M(K).querySelector(".transition-effect");if(B){const j=B.querySelector(".transition-cover"),ce=B.querySelector(".transition-shadow"),Ie=(0,_.c)(),he=(0,_.c)(),it=(0,_.c)();Ie.addElement(B).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),he.addElement(j).beforeClearStyles([re]).fromTo(re,0,.1),it.addElement(ce).beforeClearStyles([re]).fromTo(re,.03,.7),Ie.addAnimation([he,it]),wt.addAnimation([Ie])}}const nn=O.querySelector("ion-header.header-collapse-condense"),{forward:Ve,backward:q}=((ye,ke,ne,Y,re)=>{const be=Ce(Y,ne),Oe=ie(re),Ge=ie(Y),_e=Ce(re,ne),Fe=null!==be&&null!==Oe&&!ne,k=null!==Ge&&null!==_e&&ne;if(Fe){const O=Oe.getBoundingClientRect(),S=be.getBoundingClientRect(),$=M(be).querySelector(".button-text"),K=$.getBoundingClientRect(),fe=M(Oe).querySelector(".toolbar-title").getBoundingClientRect();de(ye,ke,ne,Oe,O,fe,$,K),X(ye,ke,ne,be,S,$,K,Oe,fe)}else if(k){const O=Ge.getBoundingClientRect(),S=_e.getBoundingClientRect(),$=M(_e).querySelector(".button-text"),K=$.getBoundingClientRect(),fe=M(Ge).querySelector(".toolbar-title").getBoundingClientRect();de(ye,ke,ne,Ge,O,fe,$,K),X(ye,ke,ne,_e,S,$,K,Ge,fe)}return{forward:Fe,backward:k}})(nt,_e,$,O,S);if(fe.forEach(B=>{const j=(0,_.c)();j.addElement(B),nt.addAnimation(j);const ce=(0,_.c)();ce.addElement(B.querySelector("ion-title"));const Ie=(0,_.c)(),he=Array.from(B.querySelectorAll("ion-buttons,[menuToggle]")),it=B.closest("ion-header"),gt=null==it?void 0:it.classList.contains("header-collapse-condense-inactive");let ot;ot=he.filter($?mn=>{const Ht=mn.classList.contains("buttons-collapse");return Ht&&!gt||!Ht}:mn=>!mn.classList.contains("buttons-collapse")),Ie.addElement(ot);const ut=(0,_.c)();ut.addElement(B.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Vt=(0,_.c)();Vt.addElement(M(B).querySelector(".toolbar-background"));const un=(0,_.c)(),Dt=B.querySelector("ion-back-button");if(Dt&&un.addElement(Dt),j.addAnimation([ce,Ie,ut,Vt,un]),Ie.fromTo(re,.01,1),ut.fromTo(re,.01,1),$)gt||ce.fromTo("transform",`translateX(${k})`,`translateX(${Oe})`).fromTo(re,.01,1),ut.fromTo("transform",`translateX(${k})`,`translateX(${Oe})`),un.fromTo(re,.01,1);else if(nn||ce.fromTo("transform",`translateX(${Fe})`,`translateX(${Oe})`).fromTo(re,.01,1),ut.fromTo("transform",`translateX(${Fe})`,`translateX(${Oe})`),Vt.beforeClearStyles([re,"transform"]),(null==it?void 0:it.translucent)?Vt.fromTo("transform",_e?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Vt.fromTo(re,.01,"var(--opacity)"),Ve||un.fromTo(re,.01,1),Dt&&!Ve){const Ht=(0,_.c)();Ht.addElement(M(Dt).querySelector(".button-text")).fromTo("transform",_e?"translateX(-100px)":"translateX(100px)","translateX(0px)"),j.addAnimation(Ht)}}),S){const B=(0,_.c)(),j=S.querySelector(":scope > ion-content"),ce=S.querySelectorAll(":scope > ion-header > ion-toolbar"),Ie=S.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(j||0!==ce.length||0!==Ie.length?(B.addElement(j),B.addElement(Ie)):B.addElement(S.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),nt.addAnimation(B),$){B.beforeClearStyles([re]).fromTo("transform",`translateX(${Oe})`,_e?"translateX(-100%)":"translateX(100%)");const he=(0,V.g)(S);nt.afterAddWrite(()=>{"normal"===nt.getDirection()&&he.style.setProperty("display","none")})}else B.fromTo("transform",`translateX(${Oe})`,`translateX(${k})`).fromTo(re,1,.8);if(j){const he=M(j).querySelector(".transition-effect");if(he){const it=he.querySelector(".transition-cover"),gt=he.querySelector(".transition-shadow"),ot=(0,_.c)(),ut=(0,_.c)(),Vt=(0,_.c)();ot.addElement(he).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),ut.addElement(it).beforeClearStyles([re]).fromTo(re,.1,0),Vt.addElement(gt).beforeClearStyles([re]).fromTo(re,.7,.03),ot.addAnimation([ut,Vt]),B.addAnimation([ot])}}ce.forEach(he=>{const it=(0,_.c)();it.addElement(he);const gt=(0,_.c)();gt.addElement(he.querySelector("ion-title"));const ot=(0,_.c)(),ut=he.querySelectorAll("ion-buttons,[menuToggle]"),Vt=he.closest("ion-header"),un=null==Vt?void 0:Vt.classList.contains("header-collapse-condense-inactive"),Dt=Array.from(ut).filter(At=>{const Qt=At.classList.contains("buttons-collapse");return Qt&&!un||!Qt});ot.addElement(Dt);const mn=(0,_.c)(),Ht=he.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Ht.length>0&&mn.addElement(Ht);const Be=(0,_.c)();Be.addElement(M(he).querySelector(".toolbar-background"));const De=(0,_.c)(),Me=he.querySelector("ion-back-button");if(Me&&De.addElement(Me),it.addAnimation([gt,ot,mn,De,Be]),nt.addAnimation(it),De.fromTo(re,.99,0),ot.fromTo(re,.99,0),mn.fromTo(re,.99,0),$){if(un||gt.fromTo("transform",`translateX(${Oe})`,_e?"translateX(-100%)":"translateX(100%)").fromTo(re,.99,0),mn.fromTo("transform",`translateX(${Oe})`,_e?"translateX(-100%)":"translateX(100%)"),Be.beforeClearStyles([re,"transform"]),(null==Vt?void 0:Vt.translucent)?Be.fromTo("transform","translateX(0px)",_e?"translateX(-100%)":"translateX(100%)"):Be.fromTo(re,"var(--opacity)",0),Me&&!q){const Qt=(0,_.c)();Qt.addElement(M(Me).querySelector(".button-text")).fromTo("transform",`translateX(${Oe})`,`translateX(${(_e?-124:124)+"px"})`),it.addAnimation(Qt)}}else un||gt.fromTo("transform",`translateX(${Oe})`,`translateX(${k})`).fromTo(re,.99,0).afterClearStyles([be,re]),mn.fromTo("transform",`translateX(${Oe})`,`translateX(${k})`).afterClearStyles([be,re]),De.afterClearStyles([re]),gt.afterClearStyles([re]),ot.afterClearStyles([re])})}return nt}catch(Y){throw Y}},pe=10},3003:(Nt,le,F)=>{"use strict";F.r(le),F.d(le,{mdTransitionAnimation:()=>G});var _=F(3503),V=F(1497);F(8476),F(9081);const G=(H,M)=>{var ie,Ce,ee;const X="40px",oe="back"===M.direction,ye=M.leavingEl,ke=(0,V.g)(M.enteringEl),ne=ke.querySelector("ion-toolbar"),Y=(0,_.c)();if(Y.addElement(ke).fill("both").beforeRemoveClass("ion-page-invisible"),oe?Y.duration((null!==(ie=M.duration)&&void 0!==ie?ie:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Y.duration((null!==(Ce=M.duration)&&void 0!==Ce?Ce:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform",`translateY(${X})`,"translateY(0px)").fromTo("opacity",.01,1),ne){const re=(0,_.c)();re.addElement(ne),Y.addAnimation(re)}if(ye&&oe){Y.duration((null!==(ee=M.duration)&&void 0!==ee?ee:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const re=(0,_.c)();re.addElement((0,V.g)(ye)).onFinish(be=>{1===be&&re.elements.length>0&&re.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)",`translateY(${X})`).fromTo("opacity",1,0),Y.addAnimation(re)}return Y}},4133:(Nt,le,F)=>{"use strict";F.d(le,{B:()=>ot,G:()=>ut,O:()=>Vt,a:()=>de,b:()=>oe,c:()=>ne,d:()=>un,e:()=>Dt,f:()=>nn,g:()=>q,h:()=>ce,i:()=>he,j:()=>re,k:()=>be,m:()=>ye,n:()=>Fe,o:()=>nt,s:()=>gt});var _=F(467),V=F(8476),C=F(9457),L=F(8436),G=F(5938),H=F(5638),M=F(4929);let ie=0,Ce=0;const ee=new WeakMap,X=Be=>({create:De=>Oe(Be,De),dismiss:(De,Me,At)=>K(document,De,Me,Be,At),getTop:()=>(0,_.A)(function*(){return nt(document,Be)})()}),de=X("ion-alert"),oe=X("ion-action-sheet"),ye=X("ion-modal"),ne=X("ion-popover"),re=Be=>{typeof document<"u"&&$(document);const De=ie++;Be.overlayIndex=De},be=Be=>(Be.hasAttribute("id")||(Be.id="ion-overlay-"+ ++Ce),Be.id),Oe=(Be,De)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(Be).then(()=>{const Me=document.createElement(Be);return Me.classList.add("overlay-hidden"),Object.assign(Me,Object.assign(Object.assign({},De),{hasController:!0})),B(document).appendChild(Me),new Promise(At=>(0,H.c)(Me,At))}):Promise.resolve(),Ge='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',Fe=(Be,De)=>{const Me=Be.querySelector(Ge);O(Me,De)},k=(Be,De)=>{const Me=Array.from(Be.querySelectorAll(Ge));O(Me.length>0?Me[Me.length-1]:null,De)},O=(Be,De)=>{let Me=Be;const At=null==Be?void 0:Be.shadowRoot;At&&(Me=At.querySelector(Ge)||Be),Me?(0,H.f)(Me):De.focus()},$=Be=>{0===ie&&(ie=1,Be.addEventListener("focus",De=>{((Be,De)=>{const Me=nt(De,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),At=Be.target;Me&&At&&!Me.classList.contains("ion-disable-focus-trap")&&(Me.shadowRoot?(()=>{if(Me.contains(At))Me.lastFocus=At;else if("ION-TOAST"===At.tagName)O(Me.lastFocus,Me);else{const sn=Me.lastFocus;Fe(Me,Me),sn===De.activeElement&&k(Me,Me),Me.lastFocus=De.activeElement}})():(()=>{if(Me===At)Me.lastFocus=void 0;else if("ION-TOAST"===At.tagName)O(Me.lastFocus,Me);else{const sn=(0,H.g)(Me);if(!sn.contains(At))return;const Rn=sn.querySelector(".ion-overlay-wrapper");if(!Rn)return;if(Rn.contains(At)||At===sn.querySelector("ion-backdrop"))Me.lastFocus=At;else{const Jt=Me.lastFocus;Fe(Rn,Me),Jt===De.activeElement&&k(Rn,Me),Me.lastFocus=De.activeElement}}})())})(De,Be)},!0),Be.addEventListener("ionBackButton",De=>{const Me=nt(Be);null!=Me&&Me.backdropDismiss&&De.detail.register(C.OVERLAY_BACK_BUTTON_PRIORITY,()=>{Me.dismiss(void 0,ot)})}),(0,C.shouldUseCloseWatcher)()||Be.addEventListener("keydown",De=>{if("Escape"===De.key){const Me=nt(Be);null!=Me&&Me.backdropDismiss&&Me.dismiss(void 0,ot)}}))},K=(Be,De,Me,At,Qt)=>{const In=nt(Be,At,Qt);return In?In.dismiss(De,Me):Promise.reject("overlay does not exist")},fe=(Be,De)=>((Be,De)=>(void 0===De&&(De="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(Be.querySelectorAll(De)).filter(Me=>Me.overlayIndex>0)))(Be,De).filter(Me=>!(Be=>Be.classList.contains("overlay-hidden"))(Me)),nt=(Be,De,Me)=>{const At=fe(Be,De);return void 0===Me?At[At.length-1]:At.find(Qt=>Qt.id===Me)},wt=(Be=!1)=>{const Me=B(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");Me&&(Be?Me.setAttribute("aria-hidden","true"):Me.removeAttribute("aria-hidden"))},nn=function(){var Be=(0,_.A)(function*(De,Me,At,Qt,In){var sn,Rn;if(De.presented)return;wt(!0),mn(De.el),De.presented=!0,De.willPresent.emit(),null===(sn=De.willPresentShorthand)||void 0===sn||sn.emit();const Jt=(0,L.b)(De),_r=De.enterAnimation?De.enterAnimation:L.c.get(Me,"ios"===Jt?At:Qt);(yield j(De,_r,De.el,In))&&(De.didPresent.emit(),null===(Rn=De.didPresentShorthand)||void 0===Rn||Rn.emit()),"ION-TOAST"!==De.el.tagName&&Ve(De.el),De.keyboardClose&&(null===document.activeElement||!De.el.contains(document.activeElement))&&De.el.focus(),De.el.removeAttribute("aria-hidden")});return function(Me,At,Qt,In,sn){return Be.apply(this,arguments)}}(),Ve=function(){var Be=(0,_.A)(function*(De){let Me=document.activeElement;if(!Me)return;const At=null==Me?void 0:Me.shadowRoot;At&&(Me=At.querySelector(Ge)||Me),yield De.onDidDismiss(),(null===document.activeElement||document.activeElement===document.body)&&Me.focus()});return function(Me){return Be.apply(this,arguments)}}(),q=function(){var Be=(0,_.A)(function*(De,Me,At,Qt,In,sn,Rn){var Jt,_r;if(!De.presented)return!1;void 0!==V.d&&1===fe(V.d).length&&wt(!1),De.presented=!1;try{De.el.style.setProperty("pointer-events","none"),De.willDismiss.emit({data:Me,role:At}),null===(Jt=De.willDismissShorthand)||void 0===Jt||Jt.emit({data:Me,role:At});const $n=(0,L.b)(De),Qr=De.leaveAnimation?De.leaveAnimation:L.c.get(Qt,"ios"===$n?In:sn);At!==ut&&(yield j(De,Qr,De.el,Rn)),De.didDismiss.emit({data:Me,role:At}),null===(_r=De.didDismissShorthand)||void 0===_r||_r.emit({data:Me,role:At}),(ee.get(De)||[]).forEach(zr=>zr.destroy()),ee.delete(De),De.el.classList.add("overlay-hidden"),De.el.style.removeProperty("pointer-events"),void 0!==De.el.lastFocus&&(De.el.lastFocus=void 0)}catch($n){console.error($n)}return De.el.remove(),Ht(),!0});return function(Me,At,Qt,In,sn,Rn,Jt){return Be.apply(this,arguments)}}(),B=Be=>Be.querySelector("ion-app")||Be.body,j=function(){var Be=(0,_.A)(function*(De,Me,At,Qt){At.classList.remove("overlay-hidden");const sn=Me(De.el,Qt);(!De.animated||!L.c.getBoolean("animated",!0))&&sn.duration(0),De.keyboardClose&&sn.beforeAddWrite(()=>{const Jt=At.ownerDocument.activeElement;null!=Jt&&Jt.matches("input,ion-input, ion-textarea")&&Jt.blur()});const Rn=ee.get(De)||[];return ee.set(De,[...Rn,sn]),yield sn.play(),!0});return function(Me,At,Qt,In){return Be.apply(this,arguments)}}(),ce=(Be,De)=>{let Me;const At=new Promise(Qt=>Me=Qt);return Ie(Be,De,Qt=>{Me(Qt.detail)}),At},Ie=(Be,De,Me)=>{const At=Qt=>{(0,H.b)(Be,De,At),Me(Qt)};(0,H.a)(Be,De,At)},he=Be=>"cancel"===Be||Be===ot,it=Be=>Be(),gt=(Be,De)=>{if("function"==typeof Be)return L.c.get("_zoneGate",it)(()=>{try{return Be(De)}catch(At){throw At}})},ot="backdrop",ut="gesture",Vt=39,un=Be=>{let Me,De=!1;const At=(0,G.C)(),Qt=(Rn=!1)=>{if(Me&&!Rn)return{delegate:Me,inline:De};const{el:Jt,hasController:_r,delegate:$n}=Be;return De=null!==Jt.parentNode&&!_r,Me=De?$n||At:$n,{inline:De,delegate:Me}};return{attachViewToDom:function(){var Rn=(0,_.A)(function*(Jt){const{delegate:_r}=Qt(!0);if(_r)return yield _r.attachViewToDom(Be.el,Jt);const{hasController:$n}=Be;if($n&&void 0!==Jt)throw new Error("framework delegate is missing");return null});return function(_r){return Rn.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:Rn}=Qt();Rn&&void 0!==Be.el&&Rn.removeViewFromDom(Be.el.parentElement,Be.el)}}},Dt=()=>{let Be;const De=()=>{Be&&(Be(),Be=void 0)};return{addClickListener:(At,Qt)=>{De();const In=void 0!==Qt?document.getElementById(Qt):null;In?Be=((Rn,Jt)=>{const _r=()=>{Jt.present()};return Rn.addEventListener("click",_r),()=>{Rn.removeEventListener("click",_r)}})(In,At):(0,M.p)(`A trigger element with the ID "${Qt}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,At)},removeClickListener:De}},mn=Be=>{var De;if(void 0===V.d)return;const Me=fe(V.d);for(let At=Me.length-1;At>=0;At--){const Qt=Me[At],In=null!==(De=Me[At+1])&&void 0!==De?De:Be;(In.hasAttribute("aria-hidden")||"ION-TOAST"!==In.tagName)&&Qt.setAttribute("aria-hidden","true")}},Ht=()=>{if(void 0===V.d)return;const Be=fe(V.d);for(let De=Be.length-1;De>=0;De--){const Me=Be[De];if(Me.removeAttribute("aria-hidden"),"ION-TOAST"!==Me.tagName)break}}},4984:(Nt,le,F)=>{"use strict";var _=F(467);let C=null,G=1;const H=Symbol("SIGNAL");function M(t){const e=C;return C=t,e}function pe(t){if((!Fe(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==G)){if(!t.producerMustRecompute(t)&&!be(t))return t.dirty=!1,void(t.lastCleanEpoch=G);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=G}}function be(t){k(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(pe(n),r!==n.version))return!0}return!1}function _e(t,e){if(function O(t){var e,n;null!==(e=t.liveConsumerNode)&&void 0!==e||(t.liveConsumerNode=[]),null!==(n=t.liveConsumerIndexOfThis)&&void 0!==n||(t.liveConsumerIndexOfThis=[])}(t),k(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)_e(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];k(i),i.producerIndexOfThis[r]=e}}function Fe(t){var e,n;return t.consumerIsAlwaysLive||(null!==(e=null==t||null===(n=t.liveConsumerNode)||void 0===n?void 0:n.length)&&void 0!==e?e:0)>0}function k(t){var e,n,r;null!==(e=t.producerNode)&&void 0!==e||(t.producerNode=[]),null!==(n=t.producerIndexOfThis)&&void 0!==n||(t.producerIndexOfThis=[]),null!==(r=t.producerLastReadVersion)&&void 0!==r||(t.producerLastReadVersion=[])}let wt=null;function Dt(t){return"function"==typeof t}function mn(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Ht=mn(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Be(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class De{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Dt(r))try{r()}catch(o){e=o instanceof Ht?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{Qt(o)}catch(s){e=null!=e?e:[],s instanceof Ht?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ht(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Qt(e);else{if(e instanceof De){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Be(n,e)}remove(e){const{_finalizers:n}=this;n&&Be(n,e),e instanceof De&&e._removeParent(this)}}De.EMPTY=(()=>{const t=new De;return t.closed=!0,t})();const Me=De.EMPTY;function At(t){return t instanceof De||t&&"closed"in t&&Dt(t.remove)&&Dt(t.add)&&Dt(t.unsubscribe)}function Qt(t){Dt(t)?t():t.unsubscribe()}const In={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},sn={setTimeout(t,e,...n){const{delegate:r}=sn;return null!=r&&r.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=sn;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Rn(t){sn.setTimeout(()=>{const{onUnhandledError:e}=In;if(!e)throw t;e(t)})}function Jt(){}const _r=Si("C",void 0,void 0);function Si(t,e,n){return{kind:t,value:e,error:n}}let zr=null;function lo(t){if(In.useDeprecatedSynchronousErrorHandling){const e=!zr;if(e&&(zr={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=zr;if(zr=null,n)throw r}}else t()}class qi extends De{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,At(e)&&e.add(this)):this.destination=Fs}static create(e,n,r){return new qn(e,n,r)}next(e){this.isStopped?ps(function Qr(t){return Si("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ps(function $n(t){return Si("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ps(_r,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const wi=Function.prototype.bind;function ui(t,e){return wi.call(t,e)}class ni{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ki(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ki(r)}else Ki(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ki(n)}}}class qn extends qi{constructor(e,n,r){let i;if(super(),Dt(e)||!e)i={next:null!=e?e:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0};else{let o;this&&In.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ui(e.next,o),error:e.error&&ui(e.error,o),complete:e.complete&&ui(e.complete,o)}):i=e}this.destination=new ni(i)}}function Ki(t){In.useDeprecatedSynchronousErrorHandling?function Ri(t){In.useDeprecatedSynchronousErrorHandling&&zr&&(zr.errorThrown=!0,zr.error=t)}(t):Rn(t)}function ps(t,e){const{onStoppedNotification:n}=In;n&&sn.setTimeout(()=>n(t,e))}const Fs={closed:!0,next:Jt,error:function fs(t){throw t},complete:Jt},xi="function"==typeof Symbol&&Symbol.observable||"@@observable";function Rr(t){return t}function Xo(t){return 0===t.length?Rr:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let Un=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function Z(t){return t&&t instanceof qi||function ua(t){return t&&Dt(t.next)&&Dt(t.error)&&Dt(t.complete)}(t)&&At(t)}(n)?n:new qn(n,r,i);return lo(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Ls(r))((i,o)=>{const s=new qn({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[xi](){return this}pipe(...n){return Xo(n)(this)}toPromise(n){return new(n=Ls(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Ls(t){var e;return null!==(e=null!=t?t:In.Promise)&&void 0!==e?e:Promise}const U=mn(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let te=(()=>{class t extends Un{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Le(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new U}next(n){lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?Me:(this.currentObservers=null,o.push(n),new De(()=>{this.currentObservers=null,Be(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new Un;return n.source=this,n}}return t.create=(e,n)=>new Le(e,n),t})();class Le extends te{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:Me}}class ue extends te{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function _t(t){return Dt(null==t?void 0:t.lift)}function Rt(t){return e=>{if(_t(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Bt(t,e,n,r,i){return new di(t,e,n,r,i)}class di extends qi{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function xt(t,e){return Rt((n,r)=>{let i=0;n.subscribe(Bt(r,o=>{r.next(t.call(e,o,i++))}))})}const dn="https://g.co/ng/security#xss";class Ue extends Error{constructor(e,n){super(function hi(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function bt(t){return{toString:t}.toString()}const $t="__parameters__";function nr(t,e,n){return bt(()=>{const r=function Kn(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(l,c,h){const f=l.hasOwnProperty($t)?l[$t]:Object.defineProperty(l,$t,{value:[]})[$t];for(;f.length<=h;)f.push(null);return(f[h]=f[h]||[]).push(s),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const xn=globalThis;function wn(t){for(let e in t)if(t[e]===wn)return e;throw Error("Could not find renamed property on target object.")}function xr(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Yt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Yt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Gn(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const ms=wn({__forward_ref__:wn});function jn(t){return t.__forward_ref__=jn,t.toString=function(){return Yt(this())},t}function qt(t){return Bs(t)?t():t}function Bs(t){return"function"==typeof t&&t.hasOwnProperty(ms)&&t.__forward_ref__===jn}function Qe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function zn(t){return{providers:t.providers||[],imports:t.imports||[]}}function sr(t){return Ua(t,hc)||Ua(t,Nu)}function Ua(t,e){return t.hasOwnProperty(e)?t[e]:null}function _s(t){return t&&(t.hasOwnProperty($s)||t.hasOwnProperty(wg))?t[$s]:null}const hc=wn({\u0275prov:wn}),$s=wn({\u0275inj:wn}),Nu=wn({ngInjectableDef:wn}),wg=wn({ngInjectorDef:wn});class ft{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Qe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Fu(t){return t&&!!t.\u0275providers}const da=wn({\u0275cmp:wn}),vs=wn({\u0275dir:wn}),Lu=wn({\u0275pipe:wn}),zy=wn({\u0275mod:wn}),mi=wn({\u0275fac:wn}),Vu=wn({__NG_ELEMENT_ID__:wn}),dh=wn({__NG_ENV_ID__:wn});function rn(t){return"string"==typeof t?t:null==t?"":String(t)}function ha(t,e){throw new Ue(-201,!1)}var bn=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(bn||{});let Rg;function fc(){return Rg}function xo(t){const e=Rg;return Rg=t,e}function hh(t,e,n){const r=sr(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&bn.Optional?null:void 0!==e?e:void ha()}const Us={},fh="__NG_DI_FLAG__",$u="ngTempTokenPath",TC=/\n/gm,Gy="__source";let fa;function pa(t){const e=fa;return fa=t,e}function xg(t,e=bn.Default){if(void 0===fa)throw new Ue(-203,!1);return null===fa?hh(t,void 0,e):fa.get(t,e&bn.Optional?null:void 0,e)}function Ke(t,e=bn.Default){return(fc()||xg)(qt(t),e)}function Ye(t,e=bn.Default){return Ke(t,gc(e))}function gc(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function mc(t){const e=[];for(let n=0;n<t.length;n++){const r=qt(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Ue(900,!1);let i,o=bn.Default;for(let s=0;s<r.length;s++){const a=r[s],l=qy(a);"number"==typeof l?-1===l?i=a.token:o|=l:i=a}e.push(Ke(i,o))}else e.push(Ke(r))}return e}function _c(t,e){return t[fh]=e,t.prototype[fh]=e,t}function qy(t){return t[fh]}const xl=_c(nr("Optional"),8),vc=_c(nr("SkipSelf"),4);function ga(t,e){return t.hasOwnProperty(mi)?t[mi]:null}function ma(t,e){t.forEach(n=>Array.isArray(n)?ma(n,e):e(n))}function gh(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Uu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Po(t,e,n){let r=js(t,e);return r>=0?t[1|r]=n:(r=~r,function Xy(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function ju(t,e){const n=js(t,e);if(n>=0)return t[1|n]}function js(t,e){return function _h(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const Mo={},Pn=[],_a=new ft(""),e0=new ft("",-1),zu=new ft("");class vh{get(e,n=Us){if(n===Us){const r=new Error(`NullInjectorError: No provider for ${Yt(e)}!`);throw r.name="NullInjectorError",r}return n}}var Ic=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Ic||{}),ys=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ys||{}),ar=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(ar||{});function t0(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Hu(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];yh(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function n0(t){return 3===t||4===t||6===t}function yh(t){return 64===t.charCodeAt(0)}function Gu(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ih(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ih(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}const r0="ng-template";function DC(t,e,n,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==t0(e[i+1].toLowerCase(),n,0))return!0}else if(Wu(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&"string"==typeof(o=e[i]);)if(o.toLowerCase()===n)return!0}return!1}function Wu(t){return 4===t.type&&t.value!==r0}function SC(t,e,n){return e===(4!==t.type||n?t.value:r0)}function RC(t,e,n){let r=4;const i=t.attrs,o=null!==i?function Ng(t){for(let e=0;e<t.length;e++)if(n0(t[e]))return e;return t.length}(i):0;let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!SC(t,l,n)||""===l&&1===e.length){if(ko(r))return!1;s=!0}}else if(8&r){if(null===i||!DC(t,i,l,n)){if(ko(r))return!1;s=!0}}else{const c=e[++a],h=xC(l,i,Wu(t),n);if(-1===h){if(ko(r))return!1;s=!0;continue}if(""!==c){let f;if(f=h>o?"":i[h+1].toLowerCase(),2&r&&c!==f){if(ko(r))return!1;s=!0}}}}else{if(!s&&!ko(r)&&!ko(l))return!1;if(s&&ko(l))continue;s=!1,r=l|1&r}}return ko(r)||s}function ko(t){return!(1&t)}function xC(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function MC(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Eh(t,e,n=!1){for(let r=0;r<e.length;r++)if(RC(t,e[r],n))return!0;return!1}function Og(t,e){e:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function o0(t,e){return t?":not("+e.trim()+")":e}function Fg(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!ko(s)&&(e+=o0(o,i),i=""),r=s,o=o||!ko(r);n++}return""!==i&&(e+=o0(o,i)),e}function et(t){return bt(()=>{var e;const n=s0(t),r={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Ic.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:null!==(e=t.signals)&&void 0!==e&&e,data:t.data||{},encapsulation:t.encapsulation||ys.Emulated,styles:t.styles||Pn,_:null,schemas:t.schemas||null,tView:null,id:""};a0(r);const i=t.dependencies;return r.directiveDefs=$g(i,!1),r.pipeDefs=$g(i,!0),r.id=function yk(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(r),r})}function Vg(t){return an(t)||Yr(t)}function NC(t){return null!==t}function Jo(t){return bt(()=>({type:t.type,bootstrap:t.bootstrap||Pn,declarations:t.declarations||Pn,imports:t.imports||Pn,exports:t.exports||Pn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Bg(t,e){if(null==t)return Mo;const n={};for(const i in t)if(t.hasOwnProperty(i)){const o=t[i];let s,a,l=ar.None;var r;Array.isArray(o)?(l=o[0],s=o[1],a=null!==(r=o[2])&&void 0!==r?r:s):(s=o,a=o),e?(n[s]=l!==ar.None?[i,l]:i,e[s]=a):n[s]=i}return n}function Ot(t){return bt(()=>{const e=s0(t);return a0(e),e})}function co(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function an(t){return t[da]||null}function Yr(t){return t[vs]||null}function bi(t){return t[Lu]||null}function Mi(t,e){const n=t[zy]||null;if(!n&&!0===e)throw new Error(`Type ${Yt(t)} does not have '\u0275mod' property.`);return n}function s0(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Mo,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Pn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Bg(t.inputs,e),outputs:Bg(t.outputs),debugInfo:null}}function a0(t){var e;null===(e=t.features)||void 0===e||e.forEach(n=>n(t))}function $g(t,e){if(!t)return null;const n=e?bi:Vg;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(NC)}function OC(...t){return{\u0275providers:Ug(0,t),\u0275fromNgModule:!0}}function Ug(t,...e){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return ma(e,s=>{const a=s;jg(a,o,[],r)&&(i||(i=[]),i.push(a))}),void 0!==i&&FC(i,o),n}function FC(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];l0(i,o=>{e(o,r)})}}function jg(t,e,n,r){if(!(t=qt(t)))return!1;let i=null,o=_s(t);const s=!o&&an(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const l=t.ngModule;if(o=_s(l),!o)return!1;i=l}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)jg(c,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;r.add(i);try{ma(o.imports,h=>{jg(h,e,n,r)&&(c||(c=[]),c.push(h))})}finally{}void 0!==c&&FC(c,e)}if(!a){const c=ga(i)||(()=>new i);e({provide:i,useFactory:c,deps:Pn},i),e({provide:zu,useValue:i,multi:!0},i),e({provide:_a,useValue:()=>Ke(i),multi:!0},i)}const l=o.providers;if(null!=l&&!a){const c=t;l0(l,h=>{e(h,c)})}}}return i!==t&&void 0!==t.providers}function l0(t,e){for(let n of t)Fu(n)&&(n=n.\u0275providers),Array.isArray(n)?l0(n,e):e(n)}const Ik=wn({provide:String,useValue:wn});function c0(t){return null!==t&&"object"==typeof t&&Ik in t}function va(t){return"function"==typeof t}const zg=new ft(""),bh={},Ek={};let Hg;function Ch(){return void 0===Hg&&(Hg=new vh),Hg}class Xr{}class Ga extends Xr{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,h0(e,s=>this.processProvider(s)),this.records.set(e0,wc(void 0,this)),i.has("environment")&&this.records.set(Xr,wc(void 0,this));const o=this.records.get(zg);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(zu,Pn,bn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=M(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),M(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=pa(this),r=xo(void 0);try{return e()}finally{pa(n),xo(r)}}get(e,n=Us,r=bn.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(dh))return e[dh](this);r=gc(r);const o=pa(this),s=xo(void 0);try{if(!(r&bn.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function Ah(t){return"function"==typeof t||"object"==typeof t&&t instanceof ft}(e)&&sr(e);l=c&&this.injectableDefInScope(c)?wc(Gg(e),bh):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&bn.Self?Ch():this.parent).get(e,n=r&bn.Optional&&n===Us?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[$u]=a[$u]||[]).unshift(Yt(e)),o)throw a;return function AC(t,e,n,r){const i=t[$u];throw e[Gy]&&i.unshift(e[Gy]),t.message=function Mg(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Yt(e);if(Array.isArray(e))i=e.map(Yt).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Yt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(TC,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[$u]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{xo(s),pa(o)}}resolveInjectorInitializers(){const e=M(null),n=pa(this),r=xo(void 0);try{const o=this.get(_a,Pn,bn.Self);for(const s of o)s()}finally{pa(n),xo(r),M(e)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Yt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ue(205,!1)}processProvider(e){let n=va(e=qt(e))?e:qt(e&&e.provide);const r=function u0(t){return c0(t)?wc(void 0,t.useValue):wc(d0(t),bh)}(e);if(!va(e)&&!0===e.multi){let i=this.records.get(n);i||(i=wc(void 0,bh,!0),i.factory=()=>mc(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){const r=M(null);try{return n.value===bh&&(n.value=Ek,n.value=n.factory()),"object"==typeof n.value&&n.value&&function wk(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{M(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=qt(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function Gg(t){const e=sr(t),n=null!==e?e.factory:ga(t);if(null!==n)return n;if(t instanceof ft)throw new Ue(204,!1);if(t instanceof Function)return function Th(t){if(t.length>0)throw new Ue(204,!1);const n=function Ro(t){return t&&(t[hc]||t[Nu])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Ue(204,!1)}function d0(t,e,n){let r;if(va(t)){const i=qt(t);return ga(i)||Gg(i)}if(c0(t))r=()=>qt(t.useValue);else if(function Ha(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...mc(t.deps||[]));else if(function wh(t){return!(!t||!t.useExisting)}(t))r=()=>Ke(qt(t.useExisting));else{const i=qt(t&&(t.useClass||t.provide));if(!function VC(t){return!!t.deps}(t))return ga(i)||Gg(i);r=()=>new i(...mc(t.deps))}return r}function wc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function h0(t,e){for(const n of t)Array.isArray(n)?h0(n,e):n&&Fu(n)?h0(n.\u0275providers,e):e(n)}function ki(t,e){t instanceof Ga&&t.assertNotDestroyed();const r=pa(t),i=xo(void 0);try{return e()}finally{pa(r),xo(i)}}function f0(){return void 0!==fc()||null!=function Wy(){return fa}()}const Er=0,ct=1,jt=2,Pr=3,Is=4,_i=5,uo=6,bc=7,hr=8,Ni=9,Oi=10,Zt=11,qu=12,m0=13,Cc=14,Mr=15,Wa=16,Tc=17,Hs=18,Ku=19,xh=20,qa=21,Qu=22,Nl=23,on=25,Ph=1,Gs=7,Ka=9,Gr=10;var Xu=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Xu||{});function Fi(t){return Array.isArray(t)&&"object"==typeof t[Ph]}function vi(t){return Array.isArray(t)&&!0===t[Ph]}function Wg(t){return!!(4&t.flags)}function ya(t){return t.componentOffset>-1}function Ol(t){return!(1&~t.flags)}function No(t){return!!t.template}function qg(t){return!!(512&t[jt])}class WC{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Nh(t,e,n,r){null!==e?e.applyValueToInputSignal(e,r):t[n]=r}function Yi(){return Yg}function Yg(t){return t.type.prototype.ngOnChanges&&(t.setInput=KC),qC}function qC(){const t=A0(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Mo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function KC(t,e,n,r,i){const o=this.declaredInputs[r],s=A0(t)||function QC(t,e){return t[Oh]=e}(t,{previous:Mo,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new WC(c&&c.currentValue,n,l===Mo),Nh(t,e,i,n)}Yi.ngInherit=!0;const Oh="__ngSimpleChanges__";function A0(t){return t[Oh]||null}const Ws=function(t,e,n){};let Lh=!1;function Yn(t){for(;Array.isArray(t);)t=t[Er];return t}function td(t,e){return Yn(e[t])}function Li(t,e){return Yn(e[t.index])}function Dc(t,e){return t.data[e]}function ho(t,e){const n=e[t];return Fi(n)?n:n[Er]}function Jg(t){return!(128&~t[jt])}function qs(t,e){return null==e?null:t[e]}function Bh(t){t[Tc]=0}function JC(t){1024&t[jt]||(t[jt]|=1024,Jg(t)&&Qa(t))}function $h(t){var e;return!!(9216&t[jt]||null!==(e=t[Nl])&&void 0!==e&&e.dirty)}function Zg(t){var e;if(null===(e=t[Oi].changeDetectionScheduler)||void 0===e||e.notify(1),$h(t))Qa(t);else if(64&t[jt])if(function Vh(){return Lh}())t[jt]|=1024,Qa(t);else{var n;null===(n=t[Oi].changeDetectionScheduler)||void 0===n||n.notify()}}function Qa(t){var e;null===(e=t[Oi].changeDetectionScheduler)||void 0===e||e.notify();let n=Fl(t);for(;null!==n&&!(8192&n[jt])&&(n[jt]|=8192,Jg(n));)n=Fl(n)}function Uh(t,e){if(!(256&~t[jt]))throw new Ue(911,!1);null===t[qa]&&(t[qa]=[]),t[qa].push(e)}function Fl(t){const e=t[Pr];return vi(e)?e[Pr]:e}const en={lFrame:U0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function M0(){return en.bindingsEnabled}function Rc(){return null!==en.skipHydrationRootTNode}function $e(){return en.lFrame.lView}function Cn(){return en.lFrame.tView}function rr(t){return en.lFrame.contextLView=t,t[hr]}function ir(t){return en.lFrame.contextLView=null,t}function Wn(){let t=jh();for(;null!==t&&64===t.type;)t=t.parent;return t}function jh(){return en.lFrame.currentTNode}function Zo(t,e){const n=en.lFrame;n.currentTNode=t,n.isParent=e}function nm(){return en.lFrame.isParent}function zh(){en.lFrame.isParent=!1}function po(){return en.lFrame.bindingIndex++}function Ks(t){const e=en.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function oT(t,e){const n=en.lFrame;n.bindingIndex=n.bindingRootIndex=t,im(e)}function im(t){en.lFrame.currentDirectiveIndex=t}function Gh(t){en.lFrame.currentQueryIndex=t}function Pk(t){const e=t[ct];return 2===e.type?e.declTNode:1===e.type?t[_i]:null}function B0(t,e,n){if(n&bn.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&bn.Host||(i=Pk(o),null===i||(o=o[Cc],10&i.type))););if(null===i)return!1;e=i,t=o}const r=en.lFrame=$0();return r.currentTNode=e,r.lView=t,!0}function Ea(t){const e=$0(),n=t[ct];en.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function $0(){const t=en.lFrame,e=null===t?null:t.child;return null===e?U0(t):e}function U0(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Wh(){const t=en.lFrame;return en.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const j0=Wh;function rd(){const t=Wh();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Vi(){return en.lFrame.selectedIndex}function wa(t){en.lFrame.selectedIndex=t}function fr(){const t=en.lFrame;return Dc(t.tView,t.selectedIndex)}let H0=!0;function id(){return H0}function ws(t){H0=t}function qh(t,e){for(let c=e.directiveStart,h=e.directiveEnd;c<h;c++){const m=t.data[c].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:R,ngAfterViewChecked:N,ngOnDestroy:z}=m;var n,r,i,o,s,a,l;v&&(null!==(n=t.contentHooks)&&void 0!==n?n:t.contentHooks=[]).push(-c,v),w&&((null!==(r=t.contentHooks)&&void 0!==r?r:t.contentHooks=[]).push(c,w),(null!==(i=t.contentCheckHooks)&&void 0!==i?i:t.contentCheckHooks=[]).push(c,w)),R&&(null!==(o=t.viewHooks)&&void 0!==o?o:t.viewHooks=[]).push(-c,R),N&&((null!==(s=t.viewHooks)&&void 0!==s?s:t.viewHooks=[]).push(c,N),(null!==(a=t.viewCheckHooks)&&void 0!==a?a:t.viewCheckHooks=[]).push(c,N)),null!=z&&(null!==(l=t.destroyHooks)&&void 0!==l?l:t.destroyHooks=[]).push(c,z)}}function Kh(t,e,n){G0(t,e,3,n)}function xc(t,e,n,r){(3&t[jt])===n&&G0(t,e,n,r)}function od(t,e){let n=t[jt];(3&n)===e&&(n&=16383,n+=1,t[jt]=n)}function G0(t,e,n,r){const o=null!=r?r:-1,s=e.length-1;let a=0;for(let l=void 0!==r?65535&t[Tc]:0;l<s;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(t[Tc]+=65536),(a<o||-1==o)&&(Qh(t,n,e,l),t[Tc]=(4294901760&t[Tc])+l+2),l++}function W0(t,e){Ws(4,t,e);const n=M(null);try{e.call(t)}finally{M(n),Ws(5,t,e)}}function Qh(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[jt]>>14<t[Tc]>>16&&(3&t[jt])===e&&(t[jt]+=16384,W0(a,o)):W0(a,o)}const Pc=-1;class sd{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function lm(t){return t!==Pc}function Mc(t){return 32767&t}function ad(t,e){let n=function gT(t){return t>>16}(t),r=e;for(;n>0;)r=r[Cc],n--;return r}let cm=!0;function Jh(t){const e=cm;return cm=t,e}const Zh=255,ef=5;let q0=0;const Qs={};function tf(t,e){const n=kc(t,e);if(-1!==n)return n;const r=e[ct];r.firstCreatePass&&(t.injectorIndex=e.length,Xi(r.data,t),Xi(e,null),Xi(r.blueprint,null));const i=ld(t,e),o=t.injectorIndex;if(lm(i)){const s=Mc(i),a=ad(i,e),l=a[ct].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=i,o}function Xi(t,e){t.push(0,0,0,0,0,0,0,0,e)}function kc(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function ld(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=gm(i),null===r)return Pc;if(n++,i=i[Cc],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Pc}function dm(t,e,n){!function um(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Vu)&&(r=n[Vu]),null==r&&(r=n[Vu]=q0++);const i=r&Zh;e.data[t+(i>>ef)]|=1<<i}(t,e,n)}function nf(t,e,n){if(n&bn.Optional||void 0!==t)return t;ha()}function K0(t,e,n,r){if(n&bn.Optional&&void 0===r&&(r=null),!(n&(bn.Self|bn.Host))){const i=t[Ni],o=xo(void 0);try{return i?i.get(e,r,n&bn.Optional):hh(e,r,n&bn.Optional)}finally{xo(o)}}return nf(r,0,n)}function fm(t,e,n,r=bn.Default,i){if(null!==t){if(2048&e[jt]&&!(r&bn.Self)){const s=function X0(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[jt]&&!(512&s[jt]);){const a=Q0(o,s,n,r|bn.Self,Qs);if(a!==Qs)return a;let l=o.parent;if(!l){const c=s[xh];if(c){const h=c.get(n,Qs,r);if(h!==Qs)return h}l=gm(s),s=s[Cc]}o=l}return i}(t,e,n,r,Qs);if(s!==Qs)return s}const o=Q0(t,e,n,r,Qs);if(o!==Qs)return o}return K0(e,n,r,i)}function Q0(t,e,n,r,i){const o=function _T(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Vu)?t[Vu]:void 0;return"number"==typeof e?e>=0?e&Zh:vT:e}(n);if("function"==typeof o){if(!B0(e,t,r))return r&bn.Host?nf(i,0,r):K0(e,n,r,i);try{let s;if(s=o(r),null!=s||r&bn.Optional)return s;ha()}finally{j0()}}else if("number"==typeof o){let s=null,a=kc(t,e),l=Pc,c=r&bn.Host?e[Mr][_i]:null;for((-1===a||r&bn.SkipSelf)&&(l=-1===a?ld(t,e):e[a+8],l!==Pc&&pm(r,!1)?(s=e[ct],a=Mc(l),e=ad(l,e)):a=-1);-1!==a;){const h=e[ct];if(Y0(o,a,h.data)){const f=Ya(a,e,n,s,r,c);if(f!==Qs)return f}l=e[a+8],l!==Pc&&pm(r,e[ct].data[a+8]===c)&&Y0(o,a,e)?(s=h,a=Mc(l),e=ad(l,e)):a=-1}}return i}function Ya(t,e,n,r,i,o){const s=e[ct],a=s.data[t+8],h=function cd(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,l=t.directiveStart,h=o>>20,m=i?a+h:t.directiveEnd;for(let v=r?a:a+h;v<m;v++){const w=s[v];if(v<l&&n===w||v>=l&&w.type===n)return v}if(i){const v=s[l];if(v&&No(v)&&v.type===n)return l}return null}(a,s,n,null==r?ya(a)&&cm:r!=s&&!!(3&a.type),i&bn.Host&&o===a);return null!==h?Ll(e,s,h,a):Qs}function Ll(t,e,n,r){let i=t[n];const o=e.data;if(function dT(t){return t instanceof sd}(i)){const s=i;s.resolving&&function CC(t,e){throw e&&e.join(" > "),new Ue(-200,t)}(function Ln(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():rn(t)}(o[n]));const a=Jh(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?xo(s.injectImpl):null;B0(t,r,bn.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function am(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){var s,a;const f=Yg(e);(null!==(s=n.preOrderHooks)&&void 0!==s?s:n.preOrderHooks=[]).push(t,f),(null!==(a=n.preOrderCheckHooks)&&void 0!==a?a:n.preOrderCheckHooks=[]).push(t,f)}var l,c,h;i&&(null!==(l=n.preOrderHooks)&&void 0!==l?l:n.preOrderHooks=[]).push(0-t,i),o&&((null!==(c=n.preOrderHooks)&&void 0!==c?c:n.preOrderHooks=[]).push(t,o),(null!==(h=n.preOrderCheckHooks)&&void 0!==h?h:n.preOrderCheckHooks=[]).push(t,o))}(n,o[n],e)}finally{null!==c&&xo(c),Jh(a),s.resolving=!1,j0()}}return i}function Y0(t,e,n){return!!(n[e+(t>>ef)]&1<<t)}function pm(t,e){return!(t&bn.Self||t&bn.Host&&e)}class Wr{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return fm(this._tNode,this._lView,e,gc(r),n)}}function vT(){return new Wr(Wn(),$e())}function Vn(t){return bt(()=>{const e=t.prototype.constructor,n=e[mi]||Vl(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[mi]||Vl(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Vl(t){return Bs(t)?()=>{const e=Vl(qt(t));return e&&e()}:ga(t)}function gm(t){const e=t[ct],n=e.type;return 2===n?e.declTNode:1===n?t[_i]:null}function ba(t){return function hm(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(n0(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}}return null}(Wn(),t)}function yt(t,e=null,n=null,r){const i=kt(t,e,n,r);return i.resolveInjectorInitializers(),i}function kt(t,e=null,n=null,r,i=new Set){const o=[n||Pn,OC(t)];return r=r||("object"==typeof t?void 0:Yt(t)),new Ga(o,e||Ch(),r||null,i)}let lt=(()=>{var t;class e{static create(r,i){if(Array.isArray(r))return yt({name:""},i,r,"");{var o;const s=null!==(o=r.name)&&void 0!==o?o:"";return yt({name:s},r.parent,r.providers,s)}}}return(t=e).THROW_IF_NOT_FOUND=Us,t.NULL=new vh,t.\u0275prov=Qe({token:t,providedIn:"any",factory:()=>Ke(e0)}),t.__NG_ELEMENT_ID__=-1,e})();function sf(t){return t.ngOriginalError}class ts{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&sf(e);for(;n&&sf(n);)n=sf(n);return n||null}}const ym=new ft("",{providedIn:"root",factory:()=>Ye(ts).handleError.bind(void 0)});let Bl=(()=>{var t;class e{}return(t=e).__NG_ELEMENT_ID__=eI,t.__NG_ENV_ID__=n=>n,e})();class Im extends Bl{constructor(e){super(),this._lView=e}onDestroy(e){return Uh(this._lView,e),()=>function em(t,e){if(null===t[qa])return;const n=t[qa].indexOf(e);-1!==n&&t[qa].splice(n,1)}(this._lView,e)}}function eI(){return new Im($e())}function O9(){return af(Wn(),$e())}function af(t,e){return new tt(Li(t,e))}let tt=(()=>{class e{constructor(r){this.nativeElement=r}}return e.__NG_ELEMENT_ID__=O9,e})();function IT(t){return e=>{setTimeout(t,void 0,e)}}const pr=class F9 extends te{constructor(e=!1){var n;super(),this.destroyRef=void 0,this.__isAsync=e,f0()&&(this.destroyRef=null!==(n=Ye(Bl,{optional:!0}))&&void 0!==n?n:void 0)}emit(e){const n=M(null);try{super.next(e)}finally{M(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){var a,l,c;const f=e;i=null===(a=f.next)||void 0===a?void 0:a.bind(f),o=null===(l=f.error)||void 0===l?void 0:l.bind(f),s=null===(c=f.complete)||void 0===c?void 0:c.bind(f)}this.__isAsync&&(o=IT(o),i&&(i=IT(i)),s&&(s=IT(s)));const h=super.subscribe({next:i,error:o,complete:s});return e instanceof De&&e.add(h),h}};function rI(t){return!(128&~t.flags)}const wT=new Map;let B9=0;const CT="__ngContext__";function go(t,e){Fi(e)?(t[CT]=e[Ku],function U9(t){wT.set(t[Ku],t)}(e)):t[CT]=e}function Gk(t){return qk(t[qu])}function Wk(t){return qk(t[Is])}function qk(t){for(;null!==t&&!vi(t);)t=t[Is];return t}let TT;const sI=new ft("",{providedIn:"root",factory:()=>oG}),oG="ng",tN=new ft(""),Ca=new ft("",{providedIn:"platform",factory:()=>"unknown"}),nN=new ft("",{providedIn:"root",factory:()=>{var t;return(null===(t=function Nc(){if(void 0!==TT)return TT;if(typeof document<"u")return document;throw new Ue(210,!1)}().body)||void 0===t||null===(t=t.querySelector("[ngCspNonce]"))||void 0===t?void 0:t.getAttribute("ngCspNonce"))||null}});let rN=()=>null;function xT(t,e,n=!1){return rN(t,e,n)}const lN=new ft("",{providedIn:"root",factory:()=>!1});let gI;function hN(t){var e;return(null===(e=function OT(){if(void 0===gI&&(gI=null,xn.trustedTypes))try{gI=xn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return gI}())||void 0===e?void 0:e.createScriptURL(t))||t}class fN{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${dn})`}}function Oc(t){return t instanceof fN?t.changingThisBreaksApplicationSecurity:t}function Rm(t,e){const n=function CG(t){return t instanceof fN&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${dn})`)}return n===e}const SG=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var hf=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(hf||{});function rs(t){const e=Pm();return e?e.sanitize(hf.URL,t)||"":Rm(t,"URL")?Oc(t):function FT(t){return(t=String(t)).match(SG)?t:"unsafe:"+t}(rn(t))}function wN(t){const e=Pm();if(e)return hN(e.sanitize(hf.RESOURCE_URL,t)||"");if(Rm(t,"ResourceURL"))return hN(Oc(t));throw new Ue(904,!1)}function Pm(){const t=$e();return t&&t[Oi].sanitizer}function bs(t){return t instanceof Function?t():t}var Lc=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Lc||{});let zT;function HT(t,e){return zT(t,e)}function pf(t,e,n,r,i){if(null!=r){let o,s=!1;vi(r)?o=r:Fi(r)&&(s=!0,r=r[Er]);const a=Yn(r);0===t&&null!==n?null==i?ON(e,n,a):ud(e,n,a,i||null,!0):1===t&&null!==n?ud(e,n,a,i||null,!0):2===t?function Nm(t,e,n){const r=EI(t,e);r&&function dW(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function pW(t,e,n,r,i){const o=n[Gs];o!==Yn(n)&&pf(e,t,r,o,i);for(let a=Gr;a<n.length;a++){const l=n[a];bI(l[ct],l,t,e,r,o)}}(e,t,o,n,i)}}function yI(t,e,n){return t.createElement(e,n)}function MN(t,e){var n;null===(n=e[Oi].changeDetectionScheduler)||void 0===n||n.notify(1),bI(t,e,e[Zt],2,null,null)}function kN(t,e){const n=t[Ka],r=n.indexOf(e);n.splice(r,1)}function Mm(t,e){if(t.length<=Gr)return;const n=Gr+e,r=t[n];if(r){const i=r[Wa];null!==i&&i!==t&&kN(i,r),e>0&&(t[n-1][Is]=r[Is]);const o=Uu(t,Gr+e);!function iW(t,e){MN(t,e),e[Er]=null,e[_i]=null}(r[ct],r);const s=o[Hs];null!==s&&s.detachView(o[ct]),r[Pr]=null,r[Is]=null,r[jt]&=-129}return r}function II(t,e){if(!(256&e[jt])){const n=e[Zt];n.destroyNode&&bI(t,e,n,3,null,null),function sW(t){let e=t[qu];if(!e)return qT(t[ct],t);for(;e;){let n=null;if(Fi(e))n=e[qu];else{const r=e[Gr];r&&(n=r)}if(!n){for(;e&&!e[Is]&&e!==t;)Fi(e)&&qT(e[ct],e),e=e[Pr];null===e&&(e=t),Fi(e)&&qT(e[ct],e),n=e&&e[Is]}e=n}}(e)}}function qT(t,e){if(256&e[jt])return;const n=M(null);try{e[jt]&=-129,e[jt]|=256,e[Nl]&&function Oe(t){if(k(t),Fe(t))for(let e=0;e<t.producerNode.length;e++)_e(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}(e[Nl]),function uW(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof sd)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],l=o[s+1];Ws(4,a,l);try{l.call(a)}finally{Ws(5,a,l)}}else{Ws(4,i,o);try{o.call(i)}finally{Ws(5,i,o)}}}}}(t,e),function cW(t,e){const n=t.cleanup,r=e[bc];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(e[bc]=null);const i=e[qa];if(null!==i){e[qa]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(t,e),1===e[ct].type&&e[Zt].destroy();const r=e[Wa];if(null!==r&&vi(e[Pr])){r!==e[Pr]&&kN(r,e);const i=e[Hs];null!==i&&i.detachView(t)}!function j9(t){wT.delete(t[Ku])}(e)}finally{M(n)}}function KT(t,e,n){return function NN(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[Er];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=t.data[r.directiveStart+i];if(o===ys.None||o===ys.Emulated)return null}return Li(r,n)}}(t,e.parent,n)}function ud(t,e,n,r,i){t.insertBefore(e,n,r,i)}function ON(t,e,n){t.appendChild(e,n)}function FN(t,e,n,r,i){null!==r?ud(t,e,n,r,i):ON(t,e,n)}function EI(t,e){return t.parentNode(e)}function LN(t,e,n){return BN(t,e,n)}let QT,BN=function VN(t,e,n){return 40&t.type?Li(t,n):null};function wI(t,e,n,r){const i=KT(t,r,e),o=e[Zt],a=LN(r.parent||e[_i],r,e);if(null!=i)if(Array.isArray(n))for(let l=0;l<n.length;l++)FN(o,i,n[l],a,!1);else FN(o,i,n,a,!1);void 0!==QT&&QT(o,r,e,n,i)}function km(t,e){if(null!==e){const n=e.type;if(3&n)return Li(e,t);if(4&n)return YT(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return km(t,r);{const i=t[e.index];return vi(i)?YT(-1,i):Yn(i)}}if(32&n)return HT(e,t)()||Yn(t[e.index]);{const r=UN(t,e);return null!==r?Array.isArray(r)?r[0]:km(Fl(t[Mr]),r):km(t,e.next)}}return null}function UN(t,e){return null!==e?t[Mr][_i].projection[e.projection]:null}function YT(t,e){const n=Gr+t+1;if(n<e.length){const r=e[n],i=r[ct].firstChild;if(null!==i)return km(r,i)}return e[Gs]}function XT(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],l=n.type;if(s&&0===e&&(a&&go(Yn(a),r),n.flags|=2),32&~n.flags)if(8&l)XT(t,e,n.child,r,i,o,!1),pf(e,t,i,a,o);else if(32&l){const c=HT(n,r);let h;for(;h=c();)pf(e,t,i,h,o);pf(e,t,i,a,o)}else 16&l?zN(t,e,r,n,i,o):pf(e,t,i,a,o);n=s?n.projectionNext:n.next}}function bI(t,e,n,r,i,o){XT(n,r,t.firstChild,e,i,o,!1)}function zN(t,e,n,r,i,o){const s=n[Mr],l=s[_i].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)pf(e,t,i,l[c],o);else{let c=l;const h=s[Pr];rI(r)&&(c.flags|=128),XT(t,e,c,h,i,o,!0)}}function HN(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function GN(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&Hu(t,e,r),null!==i&&HN(t,e,i),null!==o&&function mW(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}const pn={};function We(t=1){WN(Cn(),$e(),Vi()+t,!1)}function WN(t,e,n,r){if(!r)if(3&~e[jt]){const o=t.preOrderHooks;null!==o&&xc(e,o,0,n)}else{const o=t.preOrderCheckHooks;null!==o&&Kh(e,o,n)}wa(n)}function E(t,e=bn.Default){const n=$e();return null===n?Ke(t,e):fm(Wn(),n,qt(t),e)}function KN(t,e,n,r,i,o){const s=M(null);try{let a=null;i&ar.SignalBased&&(a=e[r][H]),null!==a&&void 0!==a.transformFn&&(o=a.transformFn(o)),i&ar.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),null!==t.setInput?t.setInput(e,a,o,n,r):Nh(e,a,r,o)}finally{M(s)}}function CI(t,e,n,r,i,o,s,a,l,c,h){const f=e.blueprint.slice();return f[Er]=i,f[jt]=204|r,(null!==c||t&&2048&t[jt])&&(f[jt]|=2048),Bh(f),f[Pr]=f[Cc]=t,f[hr]=n,f[Oi]=s||t&&t[Oi],f[Zt]=a||t&&t[Zt],f[Ni]=l||t&&t[Ni]||null,f[_i]=o,f[Ku]=function $9(){return B9++}(),f[uo]=h,f[xh]=c,f[Mr]=2==e.type?t[Mr]:f,f}function gf(t,e,n,r,i){let o=t.data[e];if(null===o)o=function JT(t,e,n,r,i){const o=jh(),s=nm(),l=t.data[e]=function CW(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Rc()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l,l.prev=o)),l}(t,e,n,r,i),function L0(){return en.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function nd(){const t=en.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Zo(o,!0),o}function Om(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function QN(t,e,n,r,i){const o=Vi(),s=2&r;try{wa(-1),s&&e.length>on&&WN(t,e,on,!1),Ws(s?2:0,i),n(r,i)}finally{wa(o),Ws(s?3:1,i)}}function ZT(t,e,n){if(Wg(e)){const r=M(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{M(r)}}}function eA(t,e,n){M0()&&(function PW(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;ya(n)&&function VW(t,e,n){const r=Li(e,t),i=YN(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=TI(t,CI(t,i,null,s,r,e,null,t[Oi].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||tf(n,e),go(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const l=t.data[a],c=Ll(e,t,a,n);go(c,e),null!==s&&BW(0,a-i,c,l,0,s),No(l)&&(ho(n.index,e)[hr]=Ll(e,t,a,n))}}(t,e,n,Li(n,e)),!(64&~n.flags)&&tO(t,e,n))}function tA(t,e,n=Li){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function YN(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=nA(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function nA(t,e,n,r,i,o,s,a,l,c,h){const f=on+r,m=f+i,v=function vW(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:pn);return n}(f,m),w="function"==typeof c?c():c;return v[ct]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:w,incompleteFirstPass:!1,ssrId:h}}let XN=()=>null;function JN(t,e,n,r,i){for(let s in e){var o;if(!e.hasOwnProperty(s))continue;const a=e[s];if(void 0===a)continue;null!==(o=r)&&void 0!==o||(r={});let l,c=ar.None;Array.isArray(a)?(l=a[0],c=a[1]):l=a;let h=s;if(null!==i){if(!i.hasOwnProperty(s))continue;h=i[s]}0===t?ZN(r,n,h,l,c):ZN(r,n,h,l)}return r}function ZN(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],void 0!==i&&o.push(i)}function is(t,e,n,r,i,o,s,a){const l=Li(e,n);let h,c=e.inputs;!a&&null!=c&&(h=c[r])?(aA(t,n,h,r,i),ya(e)&&function DW(t,e){const n=ho(e,t);16&n[jt]||(n[jt]|=64)}(n,e.index)):3&e.type&&(r=function AW(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(l,r,i))}function rA(t,e,n,r){if(M0()){const i=null===r?null:{"":-1},o=function kW(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const a=n[s];if(Eh(e,a.selectors,!1))if(r||(r=[]),No(a))if(null!==a.findHostDirectiveDefs){const l=[];i=i||new Map,a.findHostDirectiveDefs(a,l,i),r.unshift(...l,a),iA(t,e,l.length)}else r.unshift(a),iA(t,e,0);else{var o;i=i||new Map,null===(o=a.findHostDirectiveDefs)||void 0===o||o.call(a,a,r,i),r.push(a)}}return null===r?null:[r,i]}(t,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&eO(t,e,n,s,i,a),i&&function NW(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new Ue(-301,!1);r.push(e[i],o)}}}(n,r,i)}n.mergedAttrs=Gu(n.mergedAttrs,n.attrs)}function eO(t,e,n,r,i,o){for(let f=0;f<r.length;f++)dm(tf(n,e),t,r[f].type);!function FW(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let f=0;f<r.length;f++){const m=r[f];m.providersResolver&&m.providersResolver(m)}let s=!1,a=!1,l=Om(t,e,r.length,null);for(let f=0;f<r.length;f++){const m=r[f];n.mergedAttrs=Gu(n.mergedAttrs,m.hostAttrs),LW(t,n,e,l,m),OW(l,m,i),null!==m.contentQueries&&(n.flags|=4),(null!==m.hostBindings||null!==m.hostAttrs||0!==m.hostVars)&&(n.flags|=64);const v=m.type.prototype;var c,h;!s&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((null!==(c=t.preOrderHooks)&&void 0!==c?c:t.preOrderHooks=[]).push(n.index),s=!0),a||!v.ngOnChanges&&!v.ngDoCheck||((null!==(h=t.preOrderCheckHooks)&&void 0!==h?h:t.preOrderCheckHooks=[]).push(n.index),a=!0),l++}!function TW(t,e,n){const i=e.directiveEnd,o=t.data,s=e.attrs,a=[];let l=null,c=null;for(let h=e.directiveStart;h<i;h++){const f=o[h],m=n?n.get(f):null,w=m?m.outputs:null;l=JN(0,f.inputs,h,l,m?m.inputs:null),c=JN(1,f.outputs,h,c,w);const R=null===l||null===s||Wu(e)?null:$W(l,h,s);a.push(R)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(t,n,o)}function tO(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function sT(){return en.lFrame.currentDirectiveIndex}();try{wa(o);for(let a=r;a<i;a++){const l=t.data[a],c=e[a];im(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&MW(l,c)}}finally{wa(-1),im(s)}}function MW(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function iA(t,e,n){var r;e.componentOffset=n,(null!==(r=t.components)&&void 0!==r?r:t.components=[]).push(e.index)}function OW(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;No(e)&&(n[""]=t)}}function LW(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=ga(i.type)),s=new sd(o,No(i),E);t.blueprint[r]=s,n[r]=s,function RW(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function xW(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,Om(t,n,i.hostVars,pn),i)}function Ja(t,e,n,r,i,o){const s=Li(t,e);!function oA(t,e,n,r,i,o,s){if(null==o)t.removeAttribute(e,i,n);else{const a=null==s?rn(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}(e[Zt],s,o,t.value,n,r,i)}function BW(t,e,n,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)KN(r,n,s[a++],s[a++],s[a++],s[a++])}function $W(t,e,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===r&&(r=[]);const s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function nO(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function rO(t,e){const n=t.contentQueries;if(null!==n){const r=M(null);try{for(let i=0;i<n.length;i+=2){const s=n[i+1];if(-1!==s){const a=t.data[s];Gh(n[i]),a.contentQueries(2,e[s],s)}}}finally{M(r)}}}function TI(t,e){return t[qu]?t[m0][Is]=e:t[qu]=e,t[m0]=e,e}function sA(t,e,n){Gh(0);const r=M(null);try{e(t,n)}finally{M(r)}}function AI(t,e){const n=t[Ni],r=n?n.get(ts,null):null;r&&r.handleError(e)}function aA(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],l=n[o++];KN(t.data[s],e[s],r,a,l,i)}}function Ul(t,e,n){const r=td(e,t);!function PN(t,e,n){t.setValue(e,n)}(t[Zt],r,n)}function UW(t,e){const n=ho(e,t),r=n[ct];!function jW(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[Er];null!==i&&null===n[uo]&&(n[uo]=xT(i,n[Ni])),lA(r,n,n[hr])}function lA(t,e,n){Ea(e);try{var r;const i=t.viewQuery;null!==i&&sA(1,i,n);const o=t.template;null!==o&&QN(t,e,o,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),null===(r=e[Hs])||void 0===r||r.finishViewCreation(t),t.staticContentQueries&&rO(t,e),t.staticViewQueries&&sA(2,t.viewQuery,n);const s=t.components;null!==s&&function zW(t,e){for(let n=0;n<e.length;n++)UW(t,e[n])}(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[jt]&=-5,rd()}}function mf(t,e){return!e||null===e.firstChild||rI(t)}function Lm(t,e,n,r=!0){const i=e[ct];if(function aW(t,e,n,r){const i=Gr+r,o=n.length;r>0&&(n[i-1][Is]=e),r<o-Gr?(e[Is]=n[i],gh(n,Gr+r,e)):(n.push(e),e[Is]=null),e[Pr]=n;const s=e[Wa];null!==s&&n!==s&&function lW(t,e){const n=t[Ka];e[Mr]!==e[Pr][Pr][Mr]&&(t[jt]|=Xu.HasTransplantedViews),null===n?t[Ka]=[e]:n.push(e)}(s,e);const a=e[Hs];null!==a&&a.insertView(t),Zg(e),e[jt]|=128}(i,e,t,n),r){const s=YT(n,t),a=e[Zt],l=EI(a,t[Gs]);null!==l&&function oW(t,e,n,r,i,o){r[Er]=i,r[_i]=e,bI(t,r,n,1,i,o)}(i,t[_i],a,e,l,s)}const o=e[uo];null!==o&&null!==o.firstChild&&(o.firstChild=null)}function Vm(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];null!==o&&r.push(Yn(o)),vi(o)&&lO(o,r);const s=n.type;if(8&s)Vm(t,e,n.child,r);else if(32&s){const a=HT(n,e);let l;for(;l=a();)r.push(l)}else if(16&s){const a=UN(e,n);if(Array.isArray(a))r.push(...a);else{const l=Fl(e[Mr]);Vm(l[ct],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function lO(t,e){for(let n=Gr;n<t.length;n++){const r=t[n],i=r[ct].firstChild;null!==i&&Vm(r[ct],r,i,e)}t[Gs]!==t[Er]&&e.push(t[Gs])}let cO=[];const qW={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Qa(t.lView)},consumerOnSignalRead(){this.lView[Nl]=this}},uO=100;function DI(t,e=!0,n=0){const r=t[Oi],i=r.rendererFactory;var s;null===(s=i.begin)||void 0===s||s.call(i);try{!function KW(t,e){uA(t,e);let n=0;for(;$h(t);){if(n===uO)throw new Ue(103,!1);n++,uA(t,1)}}(t,n)}catch(c){throw e&&AI(t,c),c}finally{var a,l;null===(a=i.end)||void 0===a||a.call(i),null===(l=r.inlineEffectRunner)||void 0===l||l.flush()}}function QW(t,e,n,r){var i;const o=e[jt];if(!(256&~o))return;null===(i=e[Oi].inlineEffectRunner)||void 0===i||i.flush(),Ea(e);let a=null,l=null;(function YW(t){return 2!==t.type})(t)&&(l=function HW(t){var e;return null!==(e=t[Nl])&&void 0!==e?e:function GW(t){var e;const n=null!==(e=cO.pop())&&void 0!==e?e:Object.create(qW);return n.lView=t,n}(t)}(e),a=function Y(t){return t&&(t.nextProducerIndex=0),M(t)}(l));try{Bh(e),function rm(t){return en.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&QN(t,e,n,2,r);const c=!(3&~o);if(c){const m=t.preOrderCheckHooks;null!==m&&Kh(e,m,null)}else{const m=t.preOrderHooks;null!==m&&xc(e,m,0,null),od(e,0)}if(function XW(t){for(let e=Gk(t);null!==e;e=Wk(e)){if(!(e[jt]&Xu.HasTransplantedViews))continue;const n=e[Ka];for(let r=0;r<n.length;r++){JC(n[r])}}}(e),dO(e,0),null!==t.contentQueries&&rO(t,e),c){const m=t.contentCheckHooks;null!==m&&Kh(e,m)}else{const m=t.contentHooks;null!==m&&xc(e,m,1),od(e,1)}!function _W(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)wa(~i);else{const o=i,s=n[++r],a=n[++r];oT(s,o),a(2,e[o])}}}finally{wa(-1)}}(t,e);const h=t.components;null!==h&&fO(e,h,0);const f=t.viewQuery;if(null!==f&&sA(2,f,r),c){const m=t.viewCheckHooks;null!==m&&Kh(e,m)}else{const m=t.viewHooks;null!==m&&xc(e,m,2),od(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[Qu]){for(const m of e[Qu])m();e[Qu]=null}e[jt]&=-73}catch(c){throw Qa(e),c}finally{null!==l&&(function re(t,e){if(M(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Fe(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)_e(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}(l,a),function WW(t){t.lView[Nl]!==t&&(t.lView=null,cO.push(t))}(l)),rd()}}function dO(t,e){for(let n=Gk(t);null!==n;n=Wk(n))for(let r=Gr;r<n.length;r++)hO(n[r],e)}function JW(t,e,n){hO(ho(e,t),n)}function hO(t,e){Jg(t)&&uA(t,e)}function uA(t,e){const r=t[ct],i=t[jt],o=t[Nl];let s=!!(0===e&&16&i);if(s||(s=!!(64&i&&0===e)),s||(s=!!(1024&i)),s||(s=!(null==o||!o.dirty||!be(o))),o&&(o.dirty=!1),t[jt]&=-9217,s)QW(r,t,r.template,t[hr]);else if(8192&i){dO(t,1);const a=r.components;null!==a&&fO(t,a,1)}}function fO(t,e,n){for(let r=0;r<e.length;r++)JW(t,e[r],n)}function Bm(t){var e;for(null===(e=t[Oi].changeDetectionScheduler)||void 0===e||e.notify();t;){t[jt]|=64;const n=Fl(t);if(qg(t)&&!n)return t;t=n}return null}class $m{get rootNodes(){const e=this._lView,n=e[ct];return Vm(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[hr]}set context(e){this._lView[hr]=e}get destroyed(){return!(256&~this._lView[jt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Pr];if(vi(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Mm(e,r),Uu(n,r))}this._attachedToViewContainer=!1}II(this._lView[ct],this._lView)}onDestroy(e){Uh(this._lView,e)}markForCheck(){Bm(this._cdRefInjectingView||this._lView)}detach(){this._lView[jt]&=-129}reattach(){Zg(this._lView),this._lView[jt]|=128}detectChanges(){this._lView[jt]|=1024,DI(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ue(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,MN(this._lView[ct],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ue(902,!1);this._appRef=e,Zg(this._lView)}}let Ta=(()=>{class e{}return e.__NG_ELEMENT_ID__=tq,e})();const ZW=Ta,eq=class extends ZW{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){var e;return(null===(e=this._declarationTContainer.tView)||void 0===e?void 0:e.ssrId)||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function Fm(t,e,n,r){const i=M(null);try{var o,s,a;const l=e.tView,f=CI(t,l,n,4096&t[jt]?4096:16,null,e,null,null,null!==(o=null==r?void 0:r.injector)&&void 0!==o?o:null,null!==(s=null==r?void 0:r.embeddedViewInjector)&&void 0!==s?s:null,null!==(a=null==r?void 0:r.dehydratedView)&&void 0!==a?a:null);f[Wa]=t[e.index];const v=t[Hs];return null!==v&&(f[Hs]=v.createEmbeddedView(l)),lA(l,f,n),f}finally{M(i)}}(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new $m(i)}};function tq(){return function SI(t,e){return 4&t.type?new eq(e,t,af(t,e)):null}(Wn(),$e())}class mA{}class Tq{}class IO{}class Dq{resolveComponentFactory(e){throw function Aq(t){const e=Error(`No component factory found for ${Yt(t)}.`);return e.ngComponent=t,e}(e)}}let kI=(()=>{class e{}return e.NULL=new Dq,e})();class wO{}let jl=(()=>{class e{constructor(){this.destroyNode=null}}return e.__NG_ELEMENT_ID__=()=>function Sq(){const t=$e(),n=ho(Wn().index,t);return(Fi(n)?n:t)[Zt]}(),e})(),Rq=(()=>{var t;class e{}return(t=e).\u0275prov=Qe({token:t,providedIn:"root",factory:()=>null}),e})();const _A={},bO=new Set;function Za(t){var e,n;bO.has(t)||(bO.add(t),null===(e=performance)||void 0===e||null===(n=e.mark)||void 0===n||n.call(e,"mark_feature_usage",{detail:{feature:t}}))}function CO(...t){}class ze{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pr(!1),this.onMicrotaskEmpty=new pr(!1),this.onStable=new pr(!1),this.onError=new pr(!1),typeof Zone>"u")throw new Ue(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function xq(){const t="function"==typeof xn.requestAnimationFrame;let e=xn[t?"requestAnimationFrame":"setTimeout"],n=xn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function kq(t){const e=()=>{!function Mq(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(xn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,yA(t),t.isCheckStableRunning=!0,vA(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),yA(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(function Nq(t){var e;return!(!Array.isArray(t)||1!==t.length)&&!0===(null===(e=t[0].data)||void 0===e?void 0:e.__ignore_ng_zone__)}(a))return n.invokeTask(i,o,s,a);try{return TO(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),AO(t)}},onInvoke:(n,r,i,o,s,a,l)=>{try{return TO(t),n.invoke(i,o,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),AO(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,yA(t),vA(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ze.isInAngularZone())throw new Ue(909,!1)}static assertNotInAngularZone(){if(ze.isInAngularZone())throw new Ue(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Pq,CO,CO);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const Pq={};function vA(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function yA(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function TO(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function AO(t){t._nesting--,vA(t)}class DO{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pr,this.onMicrotaskEmpty=new pr,this.onStable=new pr,this.onError=new pr}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}var dd=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(dd||{});const SO={destroy(){}};function RO(t,e){var n,r,i;!e&&function Dh(t){if(!f0())throw new Ue(-203,!1)}();const o=null!==(n=null==e?void 0:e.injector)&&void 0!==n?n:Ye(lt);if(!function Fc(t){return"browser"===(null!=t?t:Ye(lt)).get(Ca)}(o))return SO;Za("NgAfterNextRender");const s=o.get(Gm),a=null!==(r=s.handler)&&void 0!==r?r:s.handler=new PO,l=null!==(i=null==e?void 0:e.phase)&&void 0!==i?i:dd.MixedReadWrite,c=()=>{a.unregister(f),h()},h=o.get(Bl).onDestroy(c),f=ki(o,()=>new xO(l,()=>{c(),t()}));return a.register(f),{destroy:c}}class xO{constructor(e,n){var r;this.phase=e,this.callbackFn=n,this.zone=Ye(ze),this.errorHandler=Ye(ts,{optional:!0}),null===(r=Ye(mA,{optional:!0}))||void 0===r||r.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(n){var e;null===(e=this.errorHandler)||void 0===e||e.handleError(n)}}}class PO{constructor(){this.executingCallbacks=!1,this.buckets={[dd.EarlyRead]:new Set,[dd.Write]:new Set,[dd.MixedReadWrite]:new Set,[dd.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(const e of Object.values(this.buckets))for(const n of e)n.invoke();this.executingCallbacks=!1;for(const e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(const e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}}let Gm=(()=>{var t;class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){var r;this.executeInternalCallbacks(),null===(r=this.handler)||void 0===r||r.execute()}executeInternalCallbacks(){const r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const i of r)i()}ngOnDestroy(){var r;null===(r=this.handler)||void 0===r||r.destroy(),this.handler=null,this.internalCallbacks.length=0}}return(t=e).\u0275prov=Qe({token:t,providedIn:"root",factory:()=>new t}),e})();function OI(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=Gn(i,a):2==o&&(r=Gn(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}class NO extends kI{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=an(e);return new Km(n,this.ngModule)}}function OO(t){const e=[];for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n];void 0!==r&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}class $q{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=gc(r);const i=this.injector.get(e,_A,r);return i!==_A||n===_A?i:this.parentInjector.get(e,n,r)}}class Km extends IO{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=OO(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return OO(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function kC(t){return t.map(Fg).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){const o=M(null);try{var a;let l=(i=i||this.ngModule)instanceof Xr?i:null===(a=i)||void 0===a?void 0:a.injector;l&&null!==this.componentDef.getStandaloneInjector&&(l=this.componentDef.getStandaloneInjector(l)||l);const c=l?new $q(e,l):e,h=c.get(wO,null);if(null===h)throw new Ue(407,!1);const f=c.get(Rq,null),w={rendererFactory:h,sanitizer:f,inlineEffectRunner:null,afterRenderEventManager:c.get(Gm,null),changeDetectionScheduler:c.get(mA,null)},R=h.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",z=r?function yW(t,e,n,r){const o=r.get(lN,!1)||n===ys.ShadowDom,s=t.selectRootElement(e,o);return function IW(t){XN(t)}(s),s}(R,r,this.componentDef.encapsulation,c):yI(R,N,function Bq(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(N));let Q=512;this.componentDef.signals?Q|=4096:this.componentDef.onPush||(Q|=16);let Te=null;null!==z&&(Te=xT(z,c,!0));const Ae=nA(0,null,null,1,0,null,null,null,null,null,null),Je=CI(null,Ae,null,Q,null,null,w,R,c,null,Te);let mt,Xt;Ea(Je);try{const tn=this.componentDef;let Do,Mu=null;tn.findHostDirectiveDefs?(Do=[],Mu=new Map,tn.findHostDirectiveDefs(tn,Do,Mu),Do.push(tn)):Do=[tn];const hk=function jq(t,e){const n=t[ct],r=on;return t[r]=e,gf(n,r,2,"#host",null)}(Je,z),fk=function zq(t,e,n,r,i,o,s){const a=i[ct];!function Hq(t,e,n,r){for(const i of t)e.mergedAttrs=Gu(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(OI(e,e.mergedAttrs,!0),null!==n&&GN(r,n,e))}(r,t,e,s);let l=null;null!==e&&(l=xT(e,i[Ni]));const c=o.rendererFactory.createRenderer(e,n);let h=16;n.signals?h=4096:n.onPush&&(h=64);const f=CI(i,YN(n),null,h,i[t.index],t,o,c,null,null,l);return a.firstCreatePass&&iA(a,t,r.length-1),TI(i,f),i[t.index]=f}(hk,z,tn,Do,Je,w,R);Xt=Dc(Ae,on),z&&function Wq(t,e,n,r){if(r)Hu(t,n,["ng-version","17.3.1"]);else{const{attrs:i,classes:o}=function Lg(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!ko(i))break;i=o}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&Hu(t,n,i),o&&o.length>0&&HN(t,n,o.join(" "))}}(R,tn,z,r),void 0!==n&&function qq(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(Xt,this.ngContentSelectors,n),mt=function Gq(t,e,n,r,i,o){const s=Wn(),a=i[ct],l=Li(s,i);eO(a,i,s,n,null,r);for(let h=0;h<n.length;h++)go(Ll(i,a,s.directiveStart+h,s),i);tO(a,i,s),l&&go(l,i);const c=Ll(i,a,s.directiveStart+s.componentOffset,s);if(t[hr]=i[hr]=c,null!==o)for(const h of o)h(c,e);return ZT(a,s,i),c}(fk,tn,Do,Mu,Je,[Kq]),lA(Ae,Je,null)}finally{rd()}return new Uq(this.componentType,mt,af(Xt,Je),Je,Xt)}finally{M(o)}}}class Uq extends Tq{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new $m(i,void 0,!1),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){var o;if(null!==(o=this.previousInputValues)&&void 0!==o||(this.previousInputValues=new Map),this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;aA(s[ct],s,i,e,n),this.previousInputValues.set(e,n),Bm(ho(this._tNode.index,s))}}get injector(){return new Wr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Kq(){const t=Wn();qh($e()[ct],t)}let Ys=(()=>{class e{}return e.__NG_ELEMENT_ID__=Qq,e})();function Qq(){return function VO(t,e){let n;const r=e[t.index];return vi(r)?n=r:(n=nO(r,e,null,t),e[t.index]=n,TI(e,n)),BO(n,e,t,r),new FO(n,t,e)}(Wn(),$e())}const Yq=Ys,FO=class extends Yq{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return af(this._hostTNode,this._hostLView)}get injector(){return new Wr(this._hostTNode,this._hostLView)}get parentInjector(){const e=ld(this._hostTNode,this._hostLView);if(lm(e)){const n=ad(e,this._hostLView),r=Mc(e);return new Wr(n[ct].data[r+8],n)}return new Wr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=LO(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-Gr}createEmbeddedView(e,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,i,mf(this._hostTNode,null)),a}createComponent(e,n,r,i,o){var s,l;const c=e&&!function Pl(t){return"function"==typeof t}(e);let h;if(c)h=n;else{const z=n||{};h=z.index,r=z.injector,i=z.projectableNodes,o=z.environmentInjector||z.ngModuleRef}const f=c?e:new Km(an(e)),m=r||this.parentInjector;if(!o&&null==f.ngModule){const Q=(c?m:this.parentInjector).get(Xr,null);Q&&(o=Q)}const v=an(null!==(s=f.componentType)&&void 0!==s?s:{}),w=(null==v?void 0:v.id,null),R=null!==(l=null==w?void 0:w.firstChild)&&void 0!==l?l:null,N=f.create(m,i,R,o);return this.insertImpl(N.hostView,h,mf(this._hostTNode,w)),N}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){const i=e._lView;if(function XC(t){return vi(t[Pr])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const l=i[Pr],c=new FO(l,l[_i],l[Pr]);c.detach(c.indexOf(e))}}const o=this._adjustIndex(n),s=this._lContainer;return Lm(s,i,o,r),e.attachToViewContainerRef(),gh(bA(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=LO(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Mm(this._lContainer,n);r&&(Uu(bA(this._lContainer),n),II(r[ct],r))}detach(e){const n=this._adjustIndex(e,-1),r=Mm(this._lContainer,n);return r&&null!=Uu(bA(this._lContainer),n)?new $m(r):null}_adjustIndex(e,n=0){return null==e?this.length+n:e}};function LO(t){return t[8]}function bA(t){return t[8]||(t[8]=[])}let BO=function UO(t,e,n,r){if(t[Gs])return;let i;i=8&n.type?Yn(r):function Xq(t,e){const n=t[Zt],r=n.createComment(""),i=Li(e,t);return ud(n,EI(n,i),r,function hW(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[Gs]=i},CA=()=>!1;function XO(t){return function QO(t){return"function"==typeof t&&void 0!==t[H]}(t)&&"function"==typeof t.set}function gn(t){let e=function l2(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(No(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Ue(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const s=t;s.inputs=LI(t.inputs),s.inputTransforms=LI(t.inputTransforms),s.declaredInputs=LI(t.declaredInputs),s.outputs=LI(t.outputs);const a=i.hostBindings;a&&E7(t,a);const l=i.viewQuery,c=i.contentQueries;if(l&&y7(t,l),c&&I7(t,c),_7(t,i),xr(t.outputs,i.outputs),No(i)&&i.data.animation){const h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===gn&&(n=!1)}}e=Object.getPrototypeOf(e)}!function v7(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Gu(i.hostAttrs,n=Gu(n,i.hostAttrs))}}(r)}function _7(t,e){for(const r in e.inputs){if(!e.inputs.hasOwnProperty(r)||t.inputs.hasOwnProperty(r))continue;const i=e.inputs[r];if(void 0!==i&&(t.inputs[r]=i,t.declaredInputs[r]=e.declaredInputs[r],null!==e.inputTransforms)){var n;const o=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(o))continue;null!==(n=t.inputTransforms)&&void 0!==n||(t.inputTransforms={}),t.inputTransforms[o]=e.inputTransforms[o]}}}function LI(t){return t===Mo?{}:t===Pn?[]:t}function y7(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function I7(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,o)=>{e(r,i,o),n(r,i,o)}:e}function E7(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function h2(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}class hd{}class f2{}class kA extends hd{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new NO(this);const i=Mi(e);this._bootstrapComponents=bs(i.bootstrap),this._r3Injector=kt(e,n,[{provide:hd,useValue:this},{provide:kI,useValue:this.componentFactoryResolver},...r],Yt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class NA extends f2{constructor(e){super(),this.moduleType=e}create(e){return new kA(this.moduleType,e,[])}}class p2 extends hd{constructor(e){super(),this.componentFactoryResolver=new NO(this),this.instance=null;const n=new Ga([...e.providers,{provide:hd,useValue:this},{provide:kI,useValue:this.componentFactoryResolver}],e.parent||Ch(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function VI(t,e,n=null){return new p2({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let yf=(()=>{var t;class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ue(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function $I(t){return!!function OA(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function oi(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Mn(t,e,n,r,i,o,s,a){const l=$e(),c=Cn(),h=t+on,f=c.firstCreatePass?function N7(t,e,n,r,i,o,s,a,l){const c=e.consts,h=gf(e,t,4,s||null,qs(c,a));rA(e,n,h,qs(c,l)),qh(e,h);const f=h.tView=nA(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,h),f.queries=e.queries.embeddedTView(h)),h}(h,c,l,e,n,r,i,o,s):c.data[h];Zo(f,!1);const m=g2(c,l,f,t);id()&&wI(c,l,m,f),go(m,l);const v=nO(m,l,m,f);return l[h]=v,TI(l,v),function $O(t,e,n){return CA(t,e,n)}(v,f,l),Ol(f)&&eA(c,l,f),null!=s&&tA(l,f,a),Mn}let g2=function m2(t,e,n,r){return ws(!0),e[Zt].createComment("")};function Js(t,e,n,r){const i=$e();return oi(i,po(),e)&&(Cn(),Ja(fr(),i,t,e,n,r)),Js}function Df(t,e,n,r){return oi(t,po(),n)?e+rn(n)+r:pn}function Sf(t,e,n,r,i,o){const a=function fd(t,e,n,r){const i=oi(t,e,n);return oi(t,e+1,r)||i}(t,function Es(){return en.lFrame.bindingIndex}(),n,i);return Ks(2),a?e+rn(n)+r+rn(i)+o:pn}function qI(t,e){return t<<17|e<<2}function Uc(t){return t>>17&32767}function GA(t){return 2|t}function gd(t){return(131068&t)>>2}function WA(t,e){return-131069&t|e<<2}function qA(t){return 1|t}function q2(t,e,n,r){const i=t[n+1],o=null===e;let s=r?Uc(i):gd(i),a=!1;for(;0!==s&&(!1===a||o);){const c=t[s+1];vK(t[s],e)&&(a=!0,t[s+1]=r?qA(c):GA(c)),s=r?Uc(c):gd(c)}a&&(t[n+1]=r?GA(i):qA(i))}function vK(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&js(t,e)>=0}function ln(t,e,n){const r=$e();return oi(r,po(),e)&&is(Cn(),fr(),r,t,e,r[Zt],n,!1),ln}function KA(t,e,n,r,i){const s=i?"class":"style";aA(t,n,e.inputs[s],s,r)}function KI(t,e){return function Aa(t,e,n,r){const i=$e(),o=Cn(),s=Ks(2);o.firstUpdatePass&&function nF(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Vi()],s=function tF(t,e){return e>=t.expandoStartIndex}(t,n);(function sF(t,e){return!!(t.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function DK(t,e,n,r){const i=function om(t){const e=en.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=t_(n=QA(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=QA(i,t,e,n,r),null===o){let l=function SK(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==gd(r))return t[Uc(r)]}(t,e,r);void 0!==l&&Array.isArray(l)&&(l=QA(null,t,e,l[1],r),l=t_(l,e.attrs,r),function RK(t,e,n,r){t[Uc(n?e.classBindings:e.styleBindings)]=r}(t,e,r,l))}else o=function xK(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=t_(r,t[o].hostAttrs,n);return t_(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function mK(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Uc(s),l=gd(s);t[r]=n;let h,c=!1;if(Array.isArray(n)?(h=n[1],(null===h||js(n,h)>0)&&(c=!0)):h=n,i)if(0!==l){const m=Uc(t[a+1]);t[r+1]=qI(m,a),0!==m&&(t[m+1]=WA(t[m+1],r)),t[a+1]=function pK(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=qI(a,0),0!==a&&(t[a+1]=WA(t[a+1],r)),a=r;else t[r+1]=qI(l,0),0===a?a=r:t[l+1]=WA(t[l+1],r),l=r;c&&(t[r+1]=GA(t[r+1])),q2(t,h,r,!0),q2(t,h,r,!1),function _K(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&js(o,e)>=0&&(n[r+1]=qA(n[r+1]))}(e,h,t,r,o),s=qI(a,l),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==pn&&oi(i,s,e)&&function iF(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const l=t.data,c=l[a+1],h=function gK(t){return!(1&~t)}(c)?oF(l,e,n,i,gd(c),s):void 0;QI(h)||(QI(o)||function fK(t){return!(2&~t)}(c)&&(o=oF(l,null,n,i,a,s)),function gW(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:Lc.DashCase;null==i?t.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Lc.Important),t.setStyle(n,r,i,o))}}(r,s,td(Vi(),n),i,o))}(o,o.data[Vi()],i,i[Zt],t,i[s+1]=function NK(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Yt(Oc(t)))),t}(e,n),r,s)}(t,e,null,!0),KI}function QA(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=t_(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function t_(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Po(t,s,!!n||e[++o]))}return void 0===t?null:t}function oF(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const l=t[i],c=Array.isArray(l),h=c?l[1]:l,f=null===h;let m=n[i+1];m===pn&&(m=f?Pn:void 0);let v=f?ju(m,r):h===r?m:void 0;if(c&&!QI(v)&&(v=ju(l,r)),QI(v)&&(a=v,s))return a;const w=t[i+1];i=s?Uc(w):gd(w)}if(null!==e){let l=o?e.residualClasses:e.residualStyles;null!=l&&(a=ju(l,r))}return a}function QI(t){return void 0!==t}function b(t,e,n,r){const i=$e(),o=Cn(),s=on+t,a=i[Zt],l=o.firstCreatePass?function rQ(t,e,n,r,i,o){const s=e.consts,l=gf(e,t,2,r,qs(s,i));return rA(e,n,l,qs(s,o)),null!==l.attrs&&OI(l,l.attrs,!1),null!==l.mergedAttrs&&OI(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(s,o,i,e,n,r):o.data[s],c=uF(o,i,l,a,e,t);i[s]=c;const h=Ol(l);return Zo(l,!0),GN(a,c,l),!function Xm(t){return!(32&~t.flags)}(l)&&id()&&wI(o,i,c,l),0===function ZC(){return en.lFrame.elementDepthCount}()&&go(c,i),function eT(){en.lFrame.elementDepthCount++}(),h&&(eA(o,i,l),ZT(o,l,i)),null!==r&&tA(i,l),b}function T(){let t=Wn();nm()?zh():(t=t.parent,Zo(t,!1));const e=t;(function tT(t){return en.skipHydrationRootTNode===t})(e)&&function iT(){en.skipHydrationRootTNode=null}(),function tm(){en.lFrame.elementDepthCount--}();const n=Cn();return n.firstCreatePass&&(qh(n,t),Wg(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function fT(t){return!!(8&t.flags)}(e)&&KA(n,e,$e(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function pT(t){return!!(16&t.flags)}(e)&&KA(n,e,$e(),e.stylesWithoutHost,!1),T}function me(t,e,n,r){return b(t,e,n,r),T(),me}let uF=(t,e,n,r,i,o)=>(ws(!0),yI(r,i,function z0(){return en.lFrame.currentNamespace}()));function Ji(){return $e()}const Lf="en-US";let mF=Lf;function Ze(t,e,n,r){const i=$e(),o=Cn(),s=Wn();return iD(o,i,i[Zt],s,t,e,r),Ze}function iD(t,e,n,r,i,o,s){const a=Ol(r),c=t.firstCreatePass&&function oO(t){return t.cleanup||(t.cleanup=[])}(t),h=e[hr],f=function iO(t){return t[bc]||(t[bc]=[])}(e);let m=!0;if(3&r.type||s){const R=Li(r,e),N=s?s(R):R,z=f.length,Q=s?Ae=>s(Yn(Ae[r.index])):r.index;let Te=null;if(!s&&a&&(Te=function aY(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[bc],l=i[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(t,e,i,r.index)),null!==Te)(Te.__ngLastListenerFn__||Te).__ngNextListenerFn__=o,Te.__ngLastListenerFn__=o,m=!1;else{o=HF(r,e,h,o,!1);const Ae=n.listen(N,i,o);f.push(o,Ae),c&&c.push(i,Q,z,z+1)}}else o=HF(r,e,h,o,!1);const v=r.outputs;let w;if(m&&null!==v&&(w=v[i])){const R=w.length;if(R)for(let N=0;N<R;N+=2){const Je=e[w[N]][w[N+1]].subscribe(o),mt=f.length;f.push(o,Je),c&&c.push(i,r.index,mt,-(mt+1))}}}function zF(t,e,n,r){const i=M(null);try{return Ws(6,e,n),!1!==n(r)}catch(o){return AI(t,o),!1}finally{Ws(7,e,n),M(i)}}function HF(t,e,n,r,i){return function o(s){if(s===Function)return r;Bm(t.componentOffset>-1?ho(t.index,e):e);let l=zF(e,n,r,s),c=o.__ngNextListenerFn__;for(;c;)l=zF(e,n,c,s)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&s.preventDefault(),l}}function En(t=1){return function aT(t){return(en.lFrame.contextLView=function x0(t,e){for(;t>0;)e=e[Cc],t--;return e}(t,en.lFrame.contextLView))[hr]}(t)}function lY(t,e){let n=null;const r=function PC(t){const e=t.attrs;if(null!=e){const n=e.indexOf(5);if(!(1&n))return e[n+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?Eh(t,o,!0):Og(r,o))return i}else n=i}return n}function Vf(t,e,n){return tE(t,"",e,"",n),Vf}function tE(t,e,n,r,i){const o=$e(),s=Df(o,e,n,r);return s!==pn&&is(Cn(),fr(),o,t,s,o[Zt],i,!1),tE}function P(t,e=""){const n=$e(),r=Cn(),i=t+on,o=r.firstCreatePass?gf(r,i,1,e,null):r.data[i],s=lL(r,n,o,e,t);n[i]=s,id()&&wI(r,n,s,o),Zo(o,!1)}let lL=(t,e,n,r,i)=>(ws(!0),function GT(t,e){return t.createText(e)}(e[Zt],r));function Wt(t){return mo("",t,""),Wt}function mo(t,e,n){const r=$e(),i=Df(r,t,e,n);return i!==pn&&Ul(r,Vi(),i),mo}function l_(t,e,n,r,i){const o=$e(),s=Sf(o,t,e,n,r,i);return s!==pn&&Ul(o,Vi(),s),l_}function nE(t,e,n){XO(e)&&(e=e());const r=$e();return oi(r,po(),e)&&is(Cn(),fr(),r,t,e,r[Zt],n,!1),nE}function sD(t,e){const n=XO(t);return n&&t.set(e),n}function rE(t,e){const n=$e(),r=Cn(),i=Wn();return iD(r,n,n[Zt],i,t,e),rE}function aD(t,e,n,r,i){if(t=qt(t),Array.isArray(t))for(let o=0;o<t.length;o++)aD(t[o],e,n,r,i);else{const o=Cn(),s=$e(),a=Wn();let l=va(t)?t:qt(t.provide);const c=d0(t),h=1048575&a.providerIndexes,f=a.directiveStart,m=a.providerIndexes>>20;if(va(t)||!t.multi){const v=new sd(c,i,E),w=cD(l,e,i?h:h+m,f);-1===w?(dm(tf(a,s),o,l),lD(o,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),s.push(v)):(n[w]=v,s[w]=v)}else{const v=cD(l,e,h+m,f),w=cD(l,e,h,h+m),N=w>=0&&n[w];if(i&&!N||!i&&!(v>=0&&n[v])){dm(tf(a,s),o,l);const z=function SY(t,e,n,r,i){const o=new sd(t,n,E);return o.multi=[],o.index=e,o.componentProviders=0,mL(o,i,r&&!n),o}(i?DY:AY,n.length,i,r,c);!i&&N&&(n[w].providerFactory=z),lD(o,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(z),s.push(z)}else lD(o,t,v>-1?v:w,mL(n[i?w:v],c,!i&&r));!i&&r&&N&&n[w].componentProviders++}}}function lD(t,e,n,r){const i=va(e),o=function LC(t){return!!t.useClass}(e);if(i||o){const l=(o?qt(e.useClass):e).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const h=c.indexOf(n);-1===h?c.push(n,[r,l]):c[h+1].push(r,l)}else c.push(n,l)}}}function mL(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function cD(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function AY(t,e,n,r){return uD(this.multi,[])}function DY(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Ll(n,n[ct],this.providerFactory.index,r);o=a.slice(0,s),uD(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],uD(i,o);return o}function uD(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Xn(t,e=[]){return n=>{n.providersResolver=(r,i)=>function TY(t,e,n){const r=Cn();if(r.firstCreatePass){const i=No(t);aD(n,r.data,r.blueprint,i,!0),aD(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}let RY=(()=>{var t;class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){const i=Ug(0,r.type),o=i.length>0?VI([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(const r of this.cachedInjectors.values())null!==r&&r.destroy()}finally{this.cachedInjectors.clear()}}}return(t=e).\u0275prov=Qe({token:t,providedIn:"environment",factory:()=>new t(Ke(Xr))}),e})();function _L(t){Za("NgStandalone"),t.getStandaloneInjector=e=>e.get(RY).getOrCreateStandaloneInjector(t)}function yL(t,e,n,r,i,o){const s=e+n;return oi(t,s,i)?function el(t,e,n){return t[e]=n}(t,s+1,o?r.call(o,i):r(i)):function c_(t,e){const n=t[e];return n===pn?void 0:n}(t,s+1)}function _o(t,e){const n=Cn();let r;const i=t+on;var o;n.firstCreatePass?(r=function jY(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(null!==(o=n.destroyHooks)&&void 0!==o?o:n.destroyHooks=[]).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=ga(r.type)),l=xo(E);try{const c=Jh(!1),h=s();return Jh(c),function hY(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,$e(),i,h),h}finally{xo(l)}}function vo(t,e,n){const r=t+on,i=$e(),o=function Sc(t,e){return t[e]}(i,r);return function u_(t,e){return t[ct].data[e].pure}(i,r)?yL(i,function fo(){const t=en.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,o.transform,n,o):o.transform(n)}class jf{constructor(e){this.full=e;const n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}}const gX=new jf("17.3.1");let BL=(()=>{var t;class e{log(r){console.log(r)}warn(r){console.warn(r)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})();const zL=new ft(""),aE=new ft("");let yD,_D=(()=>{var t;class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,yD||(function UX(t){yD=t}(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ze.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(r)||(clearTimeout(i.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}}return(t=e).\u0275fac=function(r){return new(r||t)(Ke(ze),Ke(vD),Ke(aE))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),e})(),vD=(()=>{var t;class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){var o,s;return null!==(o=null===(s=yD)||void 0===s?void 0:s.findTestabilityInTree(this,r,i))&&void 0!==o?o:null}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})();function f_(t){return!!t&&"function"==typeof t.then}function HL(t){return!!t&&"function"==typeof t.subscribe}const lE=new ft("");let ID=(()=>{var t;class e{constructor(){var r;this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,o)=>{this.resolve=i,this.reject=o}),this.appInits=null!==(r=Ye(lE,{optional:!0}))&&void 0!==r?r:[]}runInitializers(){if(this.initialized)return;const r=[];for(const o of this.appInits){const s=o();if(f_(s))r.push(s);else if(HL(s)){const a=new Promise((l,c)=>{s.subscribe({complete:l,error:c})});r.push(a)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),0===r.length&&i(),this.initialized=!0}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const ED=new ft("");function qL(t,e){return Array.isArray(e)?e.reduce(qL,t):{...t,...e}}let zl=(()=>{var t;class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ye(ym),this.afterRenderEffectManager=Ye(Gm),this.externalTestViews=new Set,this.beforeRender=new te,this.afterTick=new te,this.componentTypes=[],this.components=[],this.isStable=Ye(yf).hasPendingTasks.pipe(xt(r=>!r)),this._injector=Ye(Xr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){const o=r instanceof IO;if(!this._injector.get(ID).done)throw!o&&function za(t){const e=an(t)||Yr(t)||bi(t);return null!==e&&e.standalone}(r),new Ue(405,!1);let a;a=o?r:this._injector.get(kI).resolveComponentFactory(r),this.componentTypes.push(a.componentType);const l=function jX(t){return t.isBoundToModule}(a)?void 0:this._injector.get(hd),h=a.create(lt.NULL,[],i||a.selector,l),f=h.location.nativeElement,m=h.injector.get(zL,null);return null==m||m.registerApplication(f),h.onDestroy(()=>{this.detachView(h.hostView),cE(this.components,h),null==m||m.unregisterApplication(f)}),this._loadComponent(h),h}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new Ue(101,!1);const i=M(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,M(i)}}detectChangesInAttachedViews(r){let i=0;const o=this.afterRenderEffectManager;for(;;){if(i===uO)throw new Ue(103,!1);if(r){const s=0===i;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:l}of this._views)HX(a,s,l)}if(i++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>wD(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>wD(s))))break}}attachView(r){const i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){const i=r;cE(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);const i=this._injector.get(ED,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>cE(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Ue(406,!1);const r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function cE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function HX(t,e,n){!e&&!wD(t)||function GX(t,e,n){let r;n?(r=0,t[jt]|=1024):r=64&t[jt]?0:1,DI(t,e,r)}(t,n,e)}function wD(t){return $h(t)}class WX{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let KL=(()=>{var t;class e{compileModuleSync(r){return new NA(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){const i=this.compileModuleSync(r),s=bs(Mi(r).declarations).reduce((a,l)=>{const c=an(l);return c&&a.push(new Km(c)),a},[]);return new WX(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),QX=(()=>{var t;class e{constructor(){this.zone=Ye(ze),this.applicationRef=Ye(zl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){var r;null===(r=this._onMicrotaskEmptySubscription)||void 0===r||r.unsubscribe()}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function YX(){const t=Ye(ze),e=Ye(ts);return n=>t.runOutsideAngular(()=>e.handleError(n))}let JX=(()=>{var t;class e{constructor(){this.subscription=new De,this.initialized=!1,this.zone=Ye(ze),this.pendingTasks=Ye(yf)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ze.assertNotInAngularZone(),queueMicrotask(()=>{null!==r&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{var i;ze.assertInAngularZone(),null!==(i=r)&&void 0!==i||(r=this.pendingTasks.add())}))}ngOnDestroy(){this.subscription.unsubscribe()}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const Hl=new ft("",{providedIn:"root",factory:()=>Ye(Hl,bn.Optional|bn.SkipSelf)||function ZX(){return typeof $localize<"u"&&$localize.locale||Lf}()}),bD=new ft("");let JL=(()=>{var t;class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){const o=function Oq(t="zone.js",e){return"noop"===t?new DO:"zone.js"===t?new ze(e):t}(null==i?void 0:i.ngZone,function XL(t){var e,n;return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:null!==(e=null==t?void 0:t.eventCoalescing)&&void 0!==e&&e,shouldCoalesceRunChangeDetection:null!==(n=null==t?void 0:t.runCoalescing)&&void 0!==n&&n}}({eventCoalescing:null==i?void 0:i.ngZoneEventCoalescing,runCoalescing:null==i?void 0:i.ngZoneRunCoalescing}));return o.run(()=>{const s=function S7(t,e,n){return new kA(t,e,n)}(r.moduleType,this.injector,function YL(t){return[{provide:ze,useFactory:t},{provide:_a,multi:!0,useFactory:()=>{const e=Ye(QX,{optional:!0});return()=>e.initialize()}},{provide:_a,multi:!0,useFactory:()=>{const e=Ye(JX);return()=>{e.initialize()}}},{provide:ym,useFactory:YX}]}(()=>o)),a=s.injector.get(ts,null);return o.runOutsideAngular(()=>{const l=o.onError.subscribe({next:c=>{a.handleError(c)}});s.onDestroy(()=>{cE(this._modules,s),l.unsubscribe()})}),function WL(t,e,n){try{const r=n();return f_(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(a,o,()=>{const l=s.injector.get(ID);return l.runInitializers(),l.donePromise.then(()=>(function _F(t){"string"==typeof t&&(mF=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Hl,Lf)||Lf),this._moduleDoBootstrap(s),s))})})}bootstrapModule(r,i=[]){const o=qL({},i);return function KX(t,e,n){const r=new NA(n);return Promise.resolve(r)}(0,0,r).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(r){const i=r.injector.get(zl);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else{if(!r.instance.ngDoBootstrap)throw new Ue(-403,!1);r.instance.ngDoBootstrap(i)}this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ue(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const r=this._injector.get(bD,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(t=e).\u0275fac=function(r){return new(r||t)(Ke(lt))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})(),Hc=null;const ZL=new ft("");function eV(t,e,n=[]){const r=`Platform: ${e}`,i=new ft(r);return(o=[])=>{let s=CD();if(!s||s.injector.get(ZL,!1)){const a=[...n,...o,{provide:i,useValue:!0}];t?t(a):function nJ(t){if(Hc&&!Hc.get(ZL,!1))throw new Ue(400,!1);(function GL(){!function Ve(t){wt=t}(()=>{throw new Ue(600,!1)})})(),Hc=t;const e=t.get(JL);(function nV(t){const e=t.get(tN,null);null==e||e.forEach(n=>n())})(t)}(function tV(t=[],e){return lt.create({name:e,providers:[{provide:zg,useValue:"platform"},{provide:bD,useValue:new Set([()=>Hc=null])},...t]})}(a,r))}return function rJ(t){const e=CD();if(!e)throw new Ue(401,!1);return e}()}}function CD(){var t,e;return null!==(t=null===(e=Hc)||void 0===e?void 0:e.get(JL))&&void 0!==t?t:null}let ht=(()=>{class e{}return e.__NG_ELEMENT_ID__=oJ,e})();function oJ(t){return function sJ(t,e,n){if(ya(t)&&!n){const r=ho(t.index,e);return new $m(r,r)}return 47&t.type?new $m(e[Mr],e):null}(Wn(),$e(),!(16&~t))}class lV{constructor(){}supports(e){return $I(e)}create(e){return new dJ(e)}}const uJ=(t,e)=>e;class dJ{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||uJ}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<uV(r,i,o)?n:r,a=uV(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const c=a-i,h=l-i;if(c!=h){for(let m=0;m<c;m++){const v=m<o.length?o[m]:o[m]=0,w=v+m;h<=w&&w<c&&(o[m]=v+1)}o[s.previousIndex]=h-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!$I(e))throw new Ue(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),r=!0),n=n._next}else i=0,function M7(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new hJ(n,r),o,i),e}_verifyReinsertion(e,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new cV),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new cV),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class hJ{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fJ{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class cV{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new fJ,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function uV(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function hV(){return new RD([new lV])}let RD=(()=>{var t;class e{constructor(r){this.factories=r}static create(r,i){if(null!=i){const o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||hV()),deps:[[e,new vc,new xl]]}}find(r){const i=this.factories.find(o=>o.supports(r));if(null!=i)return i;throw new Ue(901,!1)}}return(t=e).\u0275prov=Qe({token:t,providedIn:"root",factory:hV}),e})();const vJ=eV(null,"core",[]);let yJ=(()=>{var t;class e{constructor(r){}}return(t=e).\u0275fac=function(r){return new(r||t)(Ke(zl))},t.\u0275mod=Jo({type:t}),t.\u0275inj=zn({}),e})();function Hf(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function OV(t){const e=M(null);try{return t()}finally{M(e)}}function FV(t){const e=an(t);if(!e)return null;const n=new Km(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}let MD=null;function Gc(){return MD}class nZ{}const ss=new ft("");let kD=(()=>{var t;class e{historyGo(r){throw new Error("")}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:()=>Ye(iZ),providedIn:"platform"}),e})();const rZ=new ft("");let iZ=(()=>{var t;class e extends kD{constructor(){super(),this._doc=Ye(ss),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Gc().getBaseHref(this._doc)}onPopState(r){const i=Gc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){const i=Gc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:()=>new t,providedIn:"platform"}),e})();function ND(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function LV(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Gl(t){return t&&"?"!==t[0]?"?"+t:t}let Zs=(()=>{var t;class e{historyGo(r){throw new Error("")}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:()=>Ye(BV),providedIn:"root"}),e})();const VV=new ft("");let BV=(()=>{var t;class e extends Zs{constructor(r,i){var o,s,a;super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=null!==(o=null!==(s=null!=i?i:this._platformLocation.getBaseHrefFromDOM())&&void 0!==s?s:null===(a=Ye(ss).location)||void 0===a?void 0:a.origin)&&void 0!==o?o:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return ND(this._baseHref,r)}path(r=!1){const i=this._platformLocation.pathname+Gl(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){const a=this.prepareExternalUrl(o+Gl(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){const a=this.prepareExternalUrl(o+Gl(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){var i,o;null===(i=(o=this._platformLocation).historyGo)||void 0===i||i.call(o,r)}}return(t=e).\u0275fac=function(r){return new(r||t)(Ke(kD),Ke(VV,8))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),$V=(()=>{var t;class e extends Zs{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){var i;const o=null!==(i=this._platformLocation.hash)&&void 0!==i?i:"#";return o.length>0?o.substring(1):o}prepareExternalUrl(r){const i=ND(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Gl(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Gl(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){var i,o;null===(i=(o=this._platformLocation).historyGo)||void 0===i||i.call(o,r)}}return(t=e).\u0275fac=function(r){return new(r||t)(Ke(kD),Ke(VV,8))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),e})(),rl=(()=>{var t;class e{constructor(r){this._subject=new pr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;const i=this._locationStrategy.getBaseHref();this._basePath=function aZ(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(LV(UV(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){var r;null===(r=this._urlChangeSubscription)||void 0===r||r.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Gl(i))}normalize(r){return e.stripTrailingSlash(function sZ(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,UV(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Gl(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Gl(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){var i,o;null===(i=(o=this._locationStrategy).historyGo)||void 0===i||i.call(o,r)}onUrlChange(r){var i;return this._urlChangeListeners.push(r),null!==(i=this._urlChangeSubscription)&&void 0!==i||(this._urlChangeSubscription=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)})),()=>{const o=this._urlChangeListeners.indexOf(r);var s;this._urlChangeListeners.splice(o,1),0===this._urlChangeListeners.length&&(null===(s=this._urlChangeSubscription)||void 0===s||s.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}}return(t=e).normalizeQueryParams=Gl,t.joinWithSlash=ND,t.stripTrailingSlash=LV,t.\u0275fac=function(r){return new(r||t)(Ke(Zs))},t.\u0275prov=Qe({token:t,factory:()=>function oZ(){return new rl(Ke(Zs))}(),providedIn:"root"}),e})();function UV(t){return t.replace(/\/index.html$/,"")}class KZ{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wc=(()=>{var t;class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const r=this._ngForOf;!this._differ&&r&&(this._differ=this._differs.find(r).create(this.ngForTrackBy))}if(this._differ){const r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){const i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(null==o.previousIndex)i.createEmbeddedView(this._template,new KZ(o.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)i.remove(null===s?void 0:s);else if(null!==s){const l=i.get(s);i.move(l,a),JV(l,o)}});for(let o=0,s=i.length;o<s;o++){const l=i.get(o).context;l.index=o,l.count=s,l.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{JV(i.get(o.currentIndex),o)})}static ngTemplateContextGuard(r,i){return!0}}return(t=e).\u0275fac=function(r){return new(r||t)(E(Ys),E(Ta),E(RD))},t.\u0275dir=Ot({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function JV(t,e){t.context.$implicit=e.item}let il=(()=>{var t;class e{constructor(r,i){this._viewContainer=r,this._context=new QZ,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){ZV("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){ZV("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}}return(t=e).\u0275fac=function(r){return new(r||t)(E(Ys),E(Ta))},t.\u0275dir=Ot({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class QZ{constructor(){this.$implicit=null,this.ngIf=null}}function ZV(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Yt(e)}'.`)}class tee{createSubscription(e,n){return OV(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){OV(()=>e.unsubscribe())}}class nee{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}}const ree=new nee,iee=new tee;let qc=(()=>{var t;class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(f_(r))return ree;if(HL(r))return iee;throw function Ra(t,e){return new Ue(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){var o;r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate)&&(null===(o=this._ref)||void 0===o||o.markForCheck())}}return(t=e).\u0275fac=function(r){return new(r||t)(E(ht,16))},t.\u0275pipe=co({name:"async",type:t,pure:!1,standalone:!0}),e})(),nB=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Jo({type:t}),t.\u0275inj=zn({}),e})();const rB="browser";function SE(t){return"server"===t}let Aee=(()=>{var t;class e{}return(t=e).\u0275prov=Qe({token:t,providedIn:"root",factory:()=>function Tee(t){return t===rB}(Ye(Ca))?new Dee(Ye(ss),window):new Ree}),e})();class Dee{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const n=function See(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}}class Ree{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class ite extends nZ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class XD extends ite{static makeCurrent(){!function tZ(t){var e;null!==(e=MD)&&void 0!==e||(MD=t)}(new XD)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function ote(){return E_=E_||document.querySelector("base"),E_?E_.getAttribute("href"):null}();return null==n?null:function ste(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){E_=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function GZ(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let E_=null,lte=(()=>{var t;class e{build(){return new XMLHttpRequest}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),e})();const JD=new ft("");let hB=(()=>{var t;class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new Ue(5101,!1);return this._eventNameToPlugin.set(r,i),i}}return(t=e).\u0275fac=function(r){return new(r||t)(Ke(JD),Ke(ze))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),e})();class fB{constructor(e){this._doc=e}}const ZD="ng-app-id";let pB=(()=>{var t;class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=SE(s),this.resetHostNodes()}addStyles(r){for(const i of r)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(r){for(const i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(const i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(const i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){var i;const o=this.styleRef;null===(i=o.get(r))||void 0===i||null===(i=i.elements)||void 0===i||i.forEach(s=>s.remove()),o.delete(r)}collectServerRenderedStyles(){var r;const i=null===(r=this.doc.head)||void 0===r?void 0:r.querySelectorAll(`style[${ZD}="${this.appId}"]`);if(null!=i&&i.length){const o=new Map;return i.forEach(s=>{null!=s.textContent&&o.set(s.textContent,s)}),o}return null}changeUsageCount(r,i){const o=this.styleRef;if(o.has(r)){const s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){const o=this.styleNodesInDOM,s=null==o?void 0:o.get(i);if((null==s?void 0:s.parentNode)===r)return o.delete(i),s.removeAttribute(ZD),s;{const a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(ZD,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){var o;const s=this.getStyleElement(r,i),a=this.styleRef,l=null===(o=a.get(i))||void 0===o?void 0:o.elements;l?l.push(s):a.set(i,{elements:[s],usage:1})}resetHostNodes(){const r=this.hostNodes;r.clear(),r.add(this.doc.head)}}return(t=e).\u0275fac=function(r){return new(r||t)(Ke(ss),Ke(sI),Ke(nN,8),Ke(Ca))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),e})();const eS={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},tS=/%COMP%/g,hte=new ft("",{providedIn:"root",factory:()=>!0});function mB(t,e){return e.map(n=>n.replace(tS,t))}let _B=(()=>{var t;class e{constructor(r,i,o,s,a,l,c,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=SE(l),this.defaultRenderer=new nS(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ys.ShadowDom&&(i={...i,encapsulation:ys.Emulated});const o=this.getOrCreateRenderer(r,i);return o instanceof yB?o.applyToHost(r):o instanceof rS&&o.applyStyles(),o}getOrCreateRenderer(r,i){const o=this.rendererByCompId;let s=o.get(i.id);if(!s){const a=this.doc,l=this.ngZone,c=this.eventManager,h=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case ys.Emulated:s=new yB(c,h,i,this.appId,f,a,l,m);break;case ys.ShadowDom:return new mte(c,h,r,i,a,l,this.nonce,m);default:s=new rS(c,h,i,f,a,l,m)}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}}return(t=e).\u0275fac=function(r){return new(r||t)(Ke(hB),Ke(pB),Ke(sI),Ke(hte),Ke(ss),Ke(Ca),Ke(ze),Ke(nN))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),e})();class nS{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(eS[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(vB(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(vB(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new Ue(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=eS[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=eS[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Lc.DashCase|Lc.Important)?e.style.setProperty(n,r,i&Lc.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Lc.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){null!=e&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=Gc().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function vB(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class mte extends nS{constructor(e,n,r,i,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=mB(i.id,i.styles);for(const h of c){const f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class rS extends nS{constructor(e,n,r,i,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?mB(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class yB extends rS{constructor(e,n,r,i,o,s,a,l){const c=i+"-"+r.id;super(e,n,r,o,s,a,l,c),this.contentAttr=function fte(t){return"_ngcontent-%COMP%".replace(tS,t)}(c),this.hostAttr=function pte(t){return"_nghost-%COMP%".replace(tS,t)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let _te=(()=>{var t;class e extends fB{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}}return(t=e).\u0275fac=function(r){return new(r||t)(Ke(ss))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),e})();const IB=["alt","control","meta","shift"],vte={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yte={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Ite=(()=>{var t;class e extends fB{constructor(r){super(r)}supports(r){return null!=e.parseEventName(r)}addEventListener(r,i,o){const s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Gc().onAndCancel(r,s.domEventName,a))}static parseEventName(r){const i=r.toLowerCase().split("."),o=i.shift();if(0===i.length||"keydown"!==o&&"keyup"!==o)return null;const s=e._normalizeKey(i.pop());let a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),IB.forEach(h=>{const f=i.indexOf(h);f>-1&&(i.splice(f,1),a+=h+".")}),a+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=o,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let o=vte[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),IB.forEach(a=>{a!==o&&(0,yte[a])(r)&&(s+=a+".")}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return"esc"===r?"escape":r}}return(t=e).\u0275fac=function(r){return new(r||t)(Ke(ss))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),e})();const wB=[{provide:Ca,useValue:rB},{provide:tN,useValue:function Ete(){XD.makeCurrent()},multi:!0},{provide:ss,useFactory:function bte(){return function iG(t){TT=t}(document),document},deps:[]}],Cte=eV(vJ,"browser",wB),Tte=new ft(""),bB=[{provide:aE,useClass:class ate{addToWindow(e){xn.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Ue(5103,!1);return o},xn.getAllAngularTestabilities=()=>e.getAllTestabilities(),xn.getAllAngularRootElements=()=>e.getAllRootElements(),xn.frameworkStabilizers||(xn.frameworkStabilizers=[]),xn.frameworkStabilizers.push(r=>{const i=xn.getAllAngularTestabilities();let o=i.length;const s=function(){o--,0==o&&r()};i.forEach(a=>{a.whenStable(s)})})}findTestabilityInTree(e,n,r){if(null==n)return null;const i=e.getTestability(n);return null!=i?i:r?Gc().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null}},deps:[]},{provide:zL,useClass:_D,deps:[ze,vD,aE]},{provide:_D,useClass:_D,deps:[ze,vD,aE]}],CB=[{provide:zg,useValue:"root"},{provide:ts,useFactory:function wte(){return new ts},deps:[]},{provide:JD,useClass:_te,multi:!0,deps:[ss,ze,Ca]},{provide:JD,useClass:Ite,multi:!0,deps:[ss]},_B,pB,hB,{provide:wO,useExisting:_B},{provide:class xee{},useClass:lte,deps:[]},[]];let Ate=(()=>{var t;class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:sI,useValue:r.appId}]}}}return(t=e).\u0275fac=function(r){return new(r||t)(Ke(Tte,12))},t.\u0275mod=Jo({type:t}),t.\u0275inj=zn({providers:[...CB,...bB],imports:[nB,yJ]}),e})(),Dte=(()=>{var t;class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}}return(t=e).\u0275fac=function(r){return new(r||t)(Ke(ss))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();var pt=F(1635);const iS=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function SB(t){return Dt(null==t?void 0:t.then)}function RB(t){return Dt(t[xi])}function xB(t){return Symbol.asyncIterator&&Dt(null==t?void 0:t[Symbol.asyncIterator])}function PB(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const MB=function Pte(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function kB(t){return Dt(null==t?void 0:t[MB])}function NB(t){return(0,pt.AQ)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,pt.N3)(n.read());if(i)return yield(0,pt.N3)(void 0);yield yield(0,pt.N3)(r)}}finally{n.releaseLock()}})}function OB(t){return Dt(null==t?void 0:t.getReader)}function as(t){if(t instanceof Un)return t;if(null!=t){if(RB(t))return function Mte(t){return new Un(e=>{const n=t[xi]();if(Dt(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(iS(t))return function kte(t){return new Un(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(SB(t))return function Nte(t){return new Un(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Rn)})}(t);if(xB(t))return FB(t);if(kB(t))return function Ote(t){return new Un(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(OB(t))return function Fte(t){return FB(NB(t))}(t)}throw PB(t)}function FB(t){return new Un(e=>{(function Lte(t,e){var n,r,i,o;return(0,pt.sH)(this,void 0,void 0,function*(){try{for(n=(0,pt.xN)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Kl(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Kc(t,e=0){return Rt((n,r)=>{n.subscribe(Bt(r,i=>Kl(r,t,()=>r.next(i),e),()=>Kl(r,t,()=>r.complete(),e),i=>Kl(r,t,()=>r.error(i),e)))})}function Wf(t,e=0){return Rt((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function LB(t,e){if(!t)throw new Error("Iterable cannot be null");return new Un(n=>{Kl(n,e,()=>{const r=t[Symbol.asyncIterator]();Kl(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function er(t,e){return e?function zte(t,e){if(null!=t){if(RB(t))return function Vte(t,e){return as(t).pipe(Wf(e),Kc(e))}(t,e);if(iS(t))return function $te(t,e){return new Un(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(SB(t))return function Bte(t,e){return as(t).pipe(Wf(e),Kc(e))}(t,e);if(xB(t))return LB(t,e);if(kB(t))return function Ute(t,e){return new Un(n=>{let r;return Kl(n,e,()=>{r=t[MB](),Kl(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>Dt(null==r?void 0:r.return)&&r.return()})}(t,e);if(OB(t))return function jte(t,e){return LB(NB(t),e)}(t,e)}throw PB(t)}(t,e):as(t)}const{isArray:Hte}=Array,{getPrototypeOf:Gte,prototype:Wte,keys:qte}=Object;function VB(t){if(1===t.length){const e=t[0];if(Hte(e))return{args:e,keys:null};if(function Kte(t){return t&&"object"==typeof t&&Gte(t)===Wte}(e)){const n=qte(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function oS(t){return t[t.length-1]}function BB(t){return Dt(oS(t))?t.pop():void 0}function b_(t){return function Qte(t){return t&&Dt(t.schedule)}(oS(t))?t.pop():void 0}const{isArray:Xte}=Array;function sS(t){return xt(e=>function Jte(t,e){return Xte(e)?t(...e):t(e)}(t,e))}function $B(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}let UB=(()=>{var t;class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}}return(t=e).\u0275fac=function(r){return new(r||t)(E(jl),E(tt))},t.\u0275dir=Ot({type:t}),e})(),vd=(()=>{var t;class e extends UB{}return(t=e).\u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})(),t.\u0275dir=Ot({type:t,features:[gn]}),e})();const Vo=new ft(""),tne={provide:Vo,useExisting:jn(()=>C_),multi:!0},rne=new ft("");let C_=(()=>{var t;class e extends UB{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function nne(){const t=Gc()?Gc().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(r){this.setProperty("value",null==r?"":r)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(E(jl),E(tt),E(rne,8))},t.\u0275dir=Ot({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Ze("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Xn([tne]),gn]}),e})();function Qc(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}const Bi=new ft(""),Yc=new ft("");function PE(t){return null}function JB(t){return null!=t}function ZB(t){return f_(t)?er(t):t}function e$(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function t$(t,e){return e.map(n=>n(t))}function n$(t){return t.map(e=>function one(t){return!t.validate}(e)?e:n=>e.validate(n))}function aS(t){return null!=t?function r$(t){if(!t)return null;const e=t.filter(JB);return 0==e.length?null:function(n){return e$(t$(n,e))}}(n$(t)):null}function lS(t){return null!=t?function i$(t){if(!t)return null;const e=t.filter(JB);return 0==e.length?null:function(n){return function Zte(...t){const e=BB(t),{args:n,keys:r}=VB(t),i=new Un(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let l=s,c=s;for(let h=0;h<s;h++){let f=!1;as(n[h]).subscribe(Bt(o,m=>{f||(f=!0,c--),a[h]=m},()=>l--,void 0,()=>{(!l||!f)&&(c||o.next(r?$B(r,a):a),o.complete())}))}});return e?i.pipe(sS(e)):i}(t$(n,e).map(ZB)).pipe(xt(e$))}}(n$(t)):null}function o$(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function cS(t){return t?Array.isArray(t)?t:[t]:[]}function ME(t,e){return Array.isArray(t)?t.includes(e):t===e}function l$(t,e){const n=cS(e);return cS(t).forEach(i=>{ME(n,i)||n.push(i)}),n}function c$(t,e){return cS(e).filter(n=>!ME(t,n))}class u${constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=aS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class Bo extends u${get formDirective(){return null}get path(){return null}}class Ql extends u${constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class d${constructor(e){this._cd=e}get isTouched(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.touched)}get isUntouched(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.untouched)}get isPristine(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.pristine)}get isDirty(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.dirty)}get isValid(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.valid)}get isInvalid(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.invalid)}get isPending(){var e;return!(null===(e=this._cd)||void 0===e||null===(e=e.control)||void 0===e||!e.pending)}get isSubmitted(){var e;return!(null===(e=this._cd)||void 0===e||!e.submitted)}}let uS=(()=>{var t;class e extends d${constructor(r){super(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(E(Ql,2))},t.\u0275dir=Ot({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&KI("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[gn]}),e})();const T_="VALID",NE="INVALID",qf="PENDING",A_="DISABLED";function OE(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class gS{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===T_}get invalid(){return this.status===NE}get pending(){return this.status==qf}get disabled(){return this.status===A_}get enabled(){return this.status!==A_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(l$(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(l$(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(c$(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(c$(e,this._rawAsyncValidators))}hasValidator(e){return ME(this._rawValidators,e)}hasAsyncValidator(e){return ME(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=qf,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=A_,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=T_,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===T_||this.status===qf)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?A_:T_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=qf,this._hasOwnPendingAsyncValidator=!0;const n=ZB(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new pr,this.statusChanges=new pr}_calculateStatus(){return this._allControlsDisabled()?A_:this.errors?NE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qf)?qf:this._anyControlsHaveStatus(NE)?NE:T_}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){OE(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function une(t){return Array.isArray(t)?aS(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function dne(t){return Array.isArray(t)?lS(t):t||null}(this._rawAsyncValidators)}}const Kf=new ft("CallSetDisabledState",{providedIn:"root",factory:()=>FE}),FE="always";function D_(t,e,n=FE){var r,i;(function _S(t,e){const n=function s$(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(o$(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function a$(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(o$(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();BE(e._rawValidators,i),BE(e._rawAsyncValidators,i)})(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&(null===(r=(i=e.valueAccessor).setDisabledState)||void 0===r||r.call(i,t.disabled)),function pne(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&g$(t,e)})}(t,e),function mne(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function gne(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&g$(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function fne(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function BE(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function g$(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function v$(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function y$(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}Promise.resolve();const I$=class extends gS{constructor(e=null,n,r){super(function fS(t){return(OE(t)?t.validators:t)||null}(n),function pS(t,e){return(OE(e)?e.asyncValidators:t)||null}(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),OE(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=y$(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){v$(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){v$(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){y$(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Cne={provide:Ql,useExisting:jn(()=>UE)},b$=Promise.resolve();let UE=(()=>{var t;class e extends Ql{constructor(r,i,o,s,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new I$,this._registered=!1,this.name="",this.update=new pr,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=function IS(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===C_?n=o:function yne(t){return Object.getPrototypeOf(t.constructor)===vd}(o)?r=o:i=o}),i||r||n||null}(0,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){const i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),function yS(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){D_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(r){b$.then(()=>{var i;this.control.setValue(r,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(r){const i=r.isDisabled.currentValue,o=0!==i&&Hf(i);b$.then(()=>{var s;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(r){return this._parent?function LE(t,e){return[...e.path,t]}(r,this._parent):[r]}}return(t=e).\u0275fac=function(r){return new(r||t)(E(Bo,9),E(Bi,10),E(Yc,10),E(Vo,10),E(ht,8),E(Kf,8))},t.\u0275dir=Ot({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[ar.None,"disabled","isDisabled"],model:[ar.None,"ngModel","model"],options:[ar.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Xn([Cne]),gn,Yi]}),e})();const One={provide:Vo,useExisting:jn(()=>TS),multi:!0};function P$(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let TS=(()=>{var t;class e extends vd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;const o=P$(this._getOptionId(r),r);this.setProperty("value",o)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){const i=function Fne(t){return t.split(":")[0]}(r);return this._optionMap.has(i)?this._optionMap.get(i):r}}return(t=e).\u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})(),t.\u0275dir=Ot({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&Ze("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Xn([One]),gn]}),e})(),AS=(()=>{var t;class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(r){null!=this._select&&(this._select._optionMap.set(this.id,r),this._setElementValue(P$(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return(t=e).\u0275fac=function(r){return new(r||t)(E(tt),E(jl),E(TS,9))},t.\u0275dir=Ot({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const Lne={provide:Vo,useExisting:jn(()=>DS),multi:!0};function M$(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let DS=(()=>{var t;class e extends vd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){let i;if(this.value=r,Array.isArray(r)){const o=r.map(s=>this._getOptionId(s));i=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else i=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{const o=[],s=i.selectedOptions;if(void 0!==s){const a=s;for(let l=0;l<a.length;l++){const h=this._getOptionValue(a[l].value);o.push(h)}}else{const a=i.options;for(let l=0;l<a.length;l++){const c=a[l];if(c.selected){const h=this._getOptionValue(c.value);o.push(h)}}}this.value=o,r(o)}}_registerOption(r){const i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){const i=function Vne(t){return t.split(":")[0]}(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}}return(t=e).\u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})(),t.\u0275dir=Ot({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&Ze("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Xn([Lne]),gn]}),e})(),SS=(()=>{var t;class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){null!=this._select&&(this._value=r,this._setElementValue(M$(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(M$(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return(t=e).\u0275fac=function(r){return new(r||t)(E(tt),E(jl),E(DS,9))},t.\u0275dir=Ot({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();function N$(t){return"number"==typeof t?t:parseFloat(t)}let yd=(()=>{var t;class e{constructor(){this._validator=PE}ngOnChanges(r){if(this.inputName in r){const i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):PE,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return null!=r}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275dir=Ot({type:t,features:[Yi]}),e})();const Bne={provide:Bi,useExisting:jn(()=>RS),multi:!0};let RS=(()=>{var t;class e extends yd{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=r=>N$(r),this.createValidator=r=>function GB(t){return e=>{if(Qc(e.value)||Qc(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(r)}}return(t=e).\u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})(),t.\u0275dir=Ot({type:t,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&Js("max",i._enabled?i.max:null)},inputs:{max:"max"},features:[Xn([Bne]),gn]}),e})();const $ne={provide:Bi,useExisting:jn(()=>xS),multi:!0};let xS=(()=>{var t;class e extends yd{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=r=>N$(r),this.createValidator=r=>function HB(t){return e=>{if(Qc(e.value)||Qc(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(r)}}return(t=e).\u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})(),t.\u0275dir=Ot({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&Js("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[Xn([$ne]),gn]}),e})(),qne=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Jo({type:t}),t.\u0275inj=zn({}),e})(),Qne=(()=>{var t;class e{static withConfig(r){var i;return{ngModule:e,providers:[{provide:Kf,useValue:null!==(i=r.callSetDisabledState)&&void 0!==i?i:FE}]}}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Jo({type:t}),t.\u0275inj=zn({imports:[qne]}),e})();function Kt(...t){return er(t,b_(t))}function jE(...t){const e=b_(t),n=BB(t),{args:r,keys:i}=VB(t);if(0===r.length)return er([],e);const o=new Un(function Xne(t,e,n=Rr){return r=>{$$(e,()=>{const{length:i}=t,o=new Array(i);let s=i,a=i;for(let l=0;l<i;l++)$$(e,()=>{const c=er(t[l],e);let h=!1;c.subscribe(Bt(r,f=>{o[l]=f,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>$B(i,s):Rr));return n?o.pipe(sS(n)):o}function $$(t,e,n){t?Kl(n,t,e):e()}const zE=mn(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Zi(t,e,n=1/0){return Dt(e)?Zi((r,i)=>xt((o,s)=>e(r,o,i,s))(as(t(r,i))),n):("number"==typeof e&&(n=e),Rt((r,i)=>function Jne(t,e,n,r,i,o,s,a){const l=[];let c=0,h=0,f=!1;const m=()=>{f&&!l.length&&!c&&e.complete()},v=R=>c<r?w(R):l.push(R),w=R=>{o&&e.next(R),c++;let N=!1;as(n(R,h++)).subscribe(Bt(e,z=>{null==i||i(z),o?v(z):e.next(z)},()=>{N=!0},void 0,()=>{if(N)try{for(c--;l.length&&c<r;){const z=l.shift();s?Kl(e,s,()=>w(z)):w(z)}m()}catch(z){e.error(z)}}))};return t.subscribe(Bt(e,v,()=>{f=!0,m()})),()=>{null==a||a()}}(r,i,t,n)))}function Qf(t=1/0){return Zi(Rr,t)}function MS(...t){return function Zne(){return Qf(1)}()(er(t,b_(t)))}function U$(t){return new Un(e=>{as(t()).subscribe(e)})}function HE(t,e){const n=Dt(t)?t:()=>t,r=i=>i.error(n());return new Un(e?i=>e.schedule(r,0,i):r)}const xa=new Un(t=>t.complete());function kS(){return Rt((t,e)=>{let n=null;t._refCount++;const r=Bt(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class j$ extends Un{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,_t(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new De;const n=this.getSubject();e.add(this.source.subscribe(Bt(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=De.EMPTY)}return e}refCount(){return kS()(this)}}function Vr(t,e){return Rt((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(Bt(r,l=>{null==i||i.unsubscribe();let c=0;const h=o++;as(t(l,h)).subscribe(i=Bt(r,f=>r.next(e?e(l,f,h,c++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Yf(t){return t<=0?()=>xa:Rt((e,n)=>{let r=0;e.subscribe(Bt(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function GE(...t){const e=b_(t);return Rt((n,r)=>{(e?MS(t,n,e):MS(t,n)).subscribe(r)})}function As(t,e){return Rt((n,r)=>{let i=0;n.subscribe(Bt(r,o=>t.call(e,o,i++)&&r.next(o)))})}function WE(t){return Rt((e,n)=>{let r=!1;e.subscribe(Bt(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function z$(t=tre){return Rt((e,n)=>{let r=!1;e.subscribe(Bt(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function tre(){return new zE}function Xc(t,e){const n=arguments.length>=2;return r=>r.pipe(t?As((i,o)=>t(i,o,r)):Rr,Yf(1),n?WE(e):z$(()=>new zE))}function R_(t,e){return Dt(e)?Zi(t,e,1):Zi(t,1)}function eo(t,e,n){const r=Dt(t)||e||n?{next:t,error:e,complete:n}:t;return r?Rt((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(Bt(o,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),o.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),o.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),o.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Rr}function Id(t){return Rt((e,n)=>{let o,r=null,i=!1;r=e.subscribe(Bt(n,void 0,void 0,s=>{o=as(t(s,Id(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function qE(t,e){return Rt(function nre(t,e,n,r,i){return(o,s)=>{let a=n,l=e,c=0;o.subscribe(Bt(s,h=>{const f=c++;l=a?t(l,h,f):(a=!0,h),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}(t,e,arguments.length>=2,!0))}function NS(t){return t<=0?()=>xa:Rt((e,n)=>{let r=[];e.subscribe(Bt(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function OS(t){return Rt((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const _n="primary",x_=Symbol("RouteTitle");class sre{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Xf(t){return new sre(t)}function are(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ol(t,e){const n=t?FS(t):void 0,r=e?FS(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!H$(t[i],e[i]))return!1;return!0}function FS(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function H$(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function G$(t){return t.length>0?t[t.length-1]:null}function Jc(t){return function Yne(t){return!!t&&(t instanceof Un||Dt(t.lift)&&Dt(t.subscribe))}(t)?t:f_(t)?er(Promise.resolve(t)):Kt(t)}const cre={exact:function K$(t,e,n){if(!Ed(t.segments,e.segments)||!KE(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!K$(t.children[r],e.children[r],n))return!1;return!0},subset:Q$},W$={exact:function ure(t,e){return ol(t,e)},subset:function dre(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>H$(t[n],e[n]))},ignored:()=>!0};function q$(t,e,n){return cre[n.paths](t.root,e.root,n.matrixParams)&&W$[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function Q$(t,e,n){return Y$(t,e,e.segments,n)}function Y$(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!Ed(i,n)||e.hasChildren()||!KE(i,n,r))}if(t.segments.length===n.length){if(!Ed(t.segments,n)||!KE(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!Q$(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(Ed(t.segments,i)&&KE(t.segments,i,r)&&t.children[_n])&&Y$(t.children[_n],e,o,r)}}function KE(t,e,n){return e.every((r,i)=>W$[n](t[i].parameters,r.parameters))}class Jf{constructor(e=new gr([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){var e;return null!==(e=this._queryParamMap)&&void 0!==e||(this._queryParamMap=Xf(this.queryParams)),this._queryParamMap}toString(){return pre.serialize(this)}}class gr{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return QE(this)}}class P_{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){var e;return null!==(e=this._parameterMap)&&void 0!==e||(this._parameterMap=Xf(this.parameters)),this._parameterMap}toString(){return Z$(this)}}function Ed(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let wd=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:()=>new LS,providedIn:"root"}),e})();class LS{parse(e){const n=new Tre(e);return new Jf(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${M_(e.root,!0)}`,r=function _re(t){const e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${YE(n)}=${YE(i)}`).join("&"):`${YE(n)}=${YE(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function gre(t){return encodeURI(t)}(e.fragment)}`:""}`}}const pre=new LS;function QE(t){return t.segments.map(e=>Z$(e)).join("/")}function M_(t,e){if(!t.hasChildren())return QE(t);if(e){const n=t.children[_n]?M_(t.children[_n],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==_n&&r.push(`${i}:${M_(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function fre(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===_n&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==_n&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===_n?[M_(t.children[_n],!1)]:[`${i}:${M_(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[_n]?`${QE(t)}/${n[0]}`:`${QE(t)}/(${n.join("//")})`}}function X$(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function YE(t){return X$(t).replace(/%3B/gi,";")}function VS(t){return X$(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function XE(t){return decodeURIComponent(t)}function J$(t){return XE(t.replace(/\+/g,"%20"))}function Z$(t){return`${VS(t.path)}${function mre(t){return Object.entries(t).map(([e,n])=>`;${VS(e)}=${VS(n)}`).join("")}(t.parameters)}`}const vre=/^[^\/()?;#]+/;function BS(t){const e=t.match(vre);return e?e[0]:""}const yre=/^[^\/()?;=#]+/,Ere=/^[^=?&#]+/,bre=/^[^&#]+/;class Tre{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new gr([],{}):new gr([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[_n]=new gr(e,n)),r}parseSegment(){const e=BS(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Ue(4009,!1);return this.capture(e),new P_(XE(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function Ire(t){const e=t.match(yre);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=BS(this.remaining);i&&(r=i,this.capture(r))}e[XE(n)]=XE(r)}parseQueryParam(e){const n=function wre(t){const e=t.match(Ere);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function Cre(t){const e=t.match(bre);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=J$(n),o=J$(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=BS(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Ue(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=_n);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[_n]:new gr([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Ue(4011,!1)}}function eU(t){return t.segments.length>0?new gr([],{[_n]:t}):t}function tU(t){const e={};for(const[r,i]of Object.entries(t.children)){const o=tU(i);if(r===_n&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function Are(t){if(1===t.numberOfChildren&&t.children[_n]){const e=t.children[_n];return new gr(t.segments.concat(e.segments),e.children)}return t}(new gr(t.segments,e))}function Zf(t){return t instanceof Jf}function nU(t){var e;let n;const o=eU(function r(s){const a={};for(const c of s.children){const h=r(c);a[c.outlet]=h}const l=new gr(s.url,a);return s===t&&(n=l),l}(t.root));return null!==(e=n)&&void 0!==e?e:o}function rU(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return $S(i,i,i,n,r);const o=function Sre(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new oU(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new oU(n,e,r)}(e);if(o.toRoot())return $S(i,i,new gr([],{}),n,r);const s=function Rre(t,e,n){if(t.isAbsolute)return new ZE(e,!0,0);if(!n)return new ZE(e,!1,NaN);if(null===n.parent)return new ZE(n,!0,0);const r=JE(t.commands[0])?0:1;return function xre(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Ue(4005,!1);i=r.segments.length}return new ZE(r,!1,i-o)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(o,i,t),a=s.processChildren?N_(s.segmentGroup,s.index,o.commands):sU(s.segmentGroup,s.index,o.commands);return $S(i,s.segmentGroup,a,n,r)}function JE(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function k_(t){return"object"==typeof t&&null!=t&&t.outlets}function $S(t,e,n,r,i){let s,o={};r&&Object.entries(r).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(h=>`${h}`):`${c}`}),s=t===e?n:iU(t,e,n);const a=eU(tU(s));return new Jf(a,o,i)}function iU(t,e,n){const r={};return Object.entries(t.children).forEach(([i,o])=>{r[i]=o===e?n:iU(o,e,n)}),new gr(t.segments,r)}class oU{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&JE(r[0]))throw new Ue(4003,!1);const i=r.find(k_);if(i&&i!==G$(r))throw new Ue(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ZE{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function sU(t,e,n){var r;if(null!==(r=t)&&void 0!==r||(t=new gr([],{})),0===t.segments.length&&t.hasChildren())return N_(t,e,n);const i=function Mre(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const s=t.segments[i],a=n[r];if(k_(a))break;const l=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!lU(l,c,s))return o;r+=2}else{if(!lU(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),o=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const s=new gr(t.segments.slice(0,i.pathIndex),{});return s.children[_n]=new gr(t.segments.slice(i.pathIndex),t.children),N_(s,0,o)}return i.match&&0===o.length?new gr(t.segments,{}):i.match&&!t.hasChildren()?US(t,e,n):i.match?N_(t,0,o):US(t,e,n)}function N_(t,e,n){if(0===n.length)return new gr(t.segments,{});{const r=function Pre(t){return k_(t[0])?t[0].outlets:{[_n]:t}}(n),i={};if(Object.keys(r).some(o=>o!==_n)&&t.children[_n]&&1===t.numberOfChildren&&0===t.children[_n].segments.length){const o=N_(t.children[_n],e,n);return new gr(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=sU(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new gr(t.segments,i)}}function US(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(k_(o)){const l=kre(o.outlets);return new gr(r,l)}if(0===i&&JE(n[0])){r.push(new P_(t.segments[e].path,aU(n[0]))),i++;continue}const s=k_(o)?o.outlets[_n]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&JE(a)?(r.push(new P_(s,aU(a))),i+=2):(r.push(new P_(s,{})),i++)}return new gr(r,{})}function kre(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=US(new gr([],{}),0,r))}),e}function aU(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function lU(t,e,n){return t==n.path&&ol(e,n.parameters)}const O_="imperative";var Bn=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Bn||{});class sl{constructor(e,n){this.id=e,this.url=n}}class F_ extends sl{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Bn.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Yl extends sl{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Bn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Ds=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ds||{}),ew=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(ew||{});class ep extends sl{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Bn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class tp extends sl{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Bn.NavigationSkipped}}class tw extends sl{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Bn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class cU extends sl{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Bn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nre extends sl{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Bn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ore extends sl{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Bn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Fre extends sl{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Bn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lre extends sl{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Bn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vre{constructor(e){this.route=e,this.type=Bn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Bre{constructor(e){this.route=e,this.type=Bn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class $re{constructor(e){this.snapshot=e,this.type=Bn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ure{constructor(e){this.snapshot=e,this.type=Bn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jre{constructor(e){this.snapshot=e,this.type=Bn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zre{constructor(e){this.snapshot=e,this.type=Bn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uU{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Bn.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class jS{}class zS{constructor(e){this.url=e}}class Hre{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new bd,this.attachRef=null}}let bd=(()=>{var t;class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){const o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){const i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Hre,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class dU{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=HS(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=HS(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=GS(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return GS(e,this._root).map(n=>n.value)}}function HS(t,e){if(t===e.value)return e;for(const n of e.children){const r=HS(t,n);if(r)return r}return null}function GS(t,e){if(t===e.value)return[e];for(const n of e.children){const r=GS(t,n);if(r.length)return r.unshift(e),r}return[]}class Pa{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function np(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class hU extends dU{constructor(e,n){super(e),this.snapshot=n,KS(this,e)}toString(){return this.snapshot.toString()}}function fU(t){const e=function Gre(t){const o=new qS([],{},{},"",{},_n,t,null,{});return new pU("",new Pa(o,[]))}(t),n=new ue([new P_("",{})]),r=new ue({}),i=new ue({}),o=new ue({}),s=new ue(""),a=new na(n,r,o,s,i,_n,t,e.root);return a.snapshot=e.root,new hU(new Pa(a,[]),e)}class na{constructor(e,n,r,i,o,s,a,l){var c,h;this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=null!==(c=null===(h=this.dataSubject)||void 0===h?void 0:h.pipe(xt(f=>f[x_])))&&void 0!==c?c:Kt(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var e;return null!==(e=this._paramMap)&&void 0!==e||(this._paramMap=this.params.pipe(xt(n=>Xf(n)))),this._paramMap}get queryParamMap(){var e;return null!==(e=this._queryParamMap)&&void 0!==e||(this._queryParamMap=this.queryParams.pipe(xt(n=>Xf(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function WS(t,e,n="emptyOnly"){var r;let i;const{routeConfig:o}=t;var s;return i=null===e||"always"!==n&&""!==(null==o?void 0:o.path)&&(e.component||null!==(r=e.routeConfig)&&void 0!==r&&r.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...null!==(s=t._resolvedData)&&void 0!==s?s:{}}}:{params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.data,...null==o?void 0:o.data,...t._resolvedData}},o&&mU(o)&&(i.resolve[x_]=o.title),i}class qS{get title(){var e;return null===(e=this.data)||void 0===e?void 0:e[x_]}constructor(e,n,r,i,o,s,a,l,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var e;return null!==(e=this._paramMap)&&void 0!==e||(this._paramMap=Xf(this.params)),this._paramMap}get queryParamMap(){var e;return null!==(e=this._queryParamMap)&&void 0!==e||(this._queryParamMap=Xf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class pU extends dU{constructor(e,n){super(n),this.url=e,KS(this,n)}toString(){return gU(this._root)}}function KS(t,e){e.value._routerState=t,e.children.forEach(n=>KS(t,n))}function gU(t){const e=t.children.length>0?` { ${t.children.map(gU).join(", ")} } `:"";return`${t.value}${e}`}function QS(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ol(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),ol(e.params,n.params)||t.paramsSubject.next(n.params),function lre(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ol(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),ol(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function YS(t,e){const n=ol(t.params,e.params)&&function hre(t,e){return Ed(t,e)&&t.every((n,r)=>ol(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||YS(t.parent,e.parent))}function mU(t){return"string"==typeof t.title||null===t.title}let _U=(()=>{var t;class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=_n,this.activateEvents=new pr,this.deactivateEvents=new pr,this.attachEvents=new pr,this.detachEvents=new pr,this.parentContexts=Ye(bd),this.location=Ye(Ys),this.changeDetector=Ye(ht),this.environmentInjector=Ye(Xr),this.inputBinder=Ye(nw,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){const{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){var r;this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),null===(r=this.inputBinder)||void 0===r||r.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){var i;return(null===(i=this.parentContexts.getContext(r))||void 0===i?void 0:i.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const r=this.parentContexts.getContext(this.name);null!=r&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ue(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ue(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ue(4012,!1);this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){var o;this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),null===(o=this.inputBinder)||void 0===o||o.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){var o;if(this.isActivated)throw new Ue(4013,!1);this._activatedRoute=r;const s=this.location,l=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,h=new Wre(r,c,s.injector);this.activated=s.createComponent(l,{index:s.length,injector:h,environmentInjector:null!=i?i:this.environmentInjector}),this.changeDetector.markForCheck(),null===(o=this.inputBinder)||void 0===o||o.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275dir=Ot({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Yi]}),e})();class Wre{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===na?this.route:e===bd?this.childContexts:this.parent.get(e,n)}}const nw=new ft("");let vU=(()=>{var t;class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){var i;null===(i=this.outletDataSubscriptions.get(r))||void 0===i||i.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){const{activatedRoute:i}=r,o=jE([i.queryParams,i.params,i.data]).pipe(Vr(([s,a,l],c)=>(l={...s,...a,...l},0===c?Kt(l):Promise.resolve(l)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(r);const a=FV(i.component);if(a)for(const{templateName:l}of a.inputs)r.activatedComponentRef.setInput(l,s[l]);else this.unsubscribeFromRouteData(r)});this.outletDataSubscriptions.set(r,o)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),e})();function L_(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function Kre(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return L_(t,r,i);return L_(t,r)})}(t,e,n);return new Pa(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>L_(t,a)),s}}const r=function Qre(t){return new na(new ue(t.url),new ue(t.params),new ue(t.queryParams),new ue(t.fragment),new ue(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>L_(t,o));return new Pa(r,i)}}const yU="ngNavigationCancelingError";function IU(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=Zf(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=EU(!1,Ds.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function EU(t,e){const n=new Error(`NavigationCancelingError: ${t||""}`);return n[yU]=!0,n.cancellationCode=e,n}function wU(t){return!!t&&t[yU]}let bU=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=et({type:t,selectors:[["ng-component"]],standalone:!0,features:[_L],decls:1,vars:0,template:function(r,i){1&r&&me(0,"router-outlet")},dependencies:[_U],encapsulation:2}),e})();function XS(t){const e=t.children&&t.children.map(XS),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==_n&&(n.component=bU),n}function al(t){return t.outlet||_n}function V_(t){var e;if(!t)return null;if(null!==(e=t.routeConfig)&&void 0!==e&&e._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){const r=n.routeConfig;if(null!=r&&r._loadedInjector)return r._loadedInjector;if(null!=r&&r._injector)return r._injector}return null}class rie{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),QS(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=np(n);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=np(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=np(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=np(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new zre(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ure(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(QS(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),QS(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=V_(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class CU{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class rw{constructor(e,n){this.component=e,this.route=n}}function iie(t,e,n){const r=t._root;return B_(r,e?e._root:null,n,[r.value])}function rp(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function gi(t){return null!==sr(t)}(t)?e.get(t):t:r}function B_(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=np(e);return t.children.forEach(s=>{(function sie(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function aie(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Ed(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ed(t.url,e.url)||!ol(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!YS(t,e)||!ol(t.queryParams,e.queryParams);default:return!YS(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new CU(r)):(o.data=s.data,o._resolvedData=s._resolvedData),B_(t,e,o.component?a?a.children:null:n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new rw(a.outlet.component,s))}else s&&$_(e,a,i),i.canActivateChecks.push(new CU(r)),B_(t,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>$_(a,n.getContext(s),i)),i}function $_(t,e,n){const r=np(t),i=t.value;Object.entries(r).forEach(([o,s])=>{$_(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new rw(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function U_(t){return"function"==typeof t}function TU(t){return t instanceof zE||"EmptyError"===(null==t?void 0:t.name)}const iw=Symbol("INITIAL_VALUE");function ip(){return Vr(t=>jE(t.map(e=>e.pipe(Yf(1),GE(iw)))).pipe(xt(e=>{for(const n of e)if(!0!==n){if(n===iw)return iw;if(!1===n||n instanceof Jf)return n}return!0}),As(e=>e!==iw),Yf(1)))}function AU(t){return function Yo(...t){return Xo(t)}(eo(e=>{if(Zf(e))throw IU(0,e)}),xt(e=>!0===e))}class JS{constructor(e){this.segmentGroup=e||null}}class ZS extends Error{constructor(e){super(),this.urlTree=e}}function op(t){return HE(new JS(t))}class Aie{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Kt(r);if(i.numberOfChildren>1||!i.children[_n])return HE(new Ue(4e3,!1));i=i.children[_n]}}applyRedirectCommands(e,n,r){const i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new ZS(i);return i}applyRedirectCreateUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new Jf(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new gr(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new Ue(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const e1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Die(t,e,n,r,i){const o=t1(t,e,n);return o.matched?(r=function Xre(t,e){var n;return t.providers&&!t._injector&&(t._injector=VI(t.providers,e,`Route: ${t.path}`)),null!==(n=t._injector)&&void 0!==n?n:e}(e,r),function bie(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?Kt(i.map(s=>{const a=rp(s,t);return Jc(function fie(t){return t&&U_(t.canMatch)}(a)?a.canMatch(e,n):ki(t,()=>a(e,n)))})).pipe(ip(),AU()):Kt(!0)}(r,e,n).pipe(xt(s=>!0===s?o:{...e1}))):Kt(o)}function t1(t,e,n){var r,i;if("**"===e.path)return function Sie(t){return{matched:!0,parameters:t.length>0?G$(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(n);if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...e1}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const s=(e.matcher||are)(n,t,e);if(!s)return{...e1};const a={};Object.entries(null!==(r=s.posParams)&&void 0!==r?r:{}).forEach(([c,h])=>{a[c]=h.path});const l=s.consumed.length>0?{...a,...s.consumed[s.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:s.consumed,remainingSegments:n.slice(s.consumed.length),parameters:l,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function DU(t,e,n,r){return n.length>0&&function Pie(t,e,n){return n.some(r=>ow(t,e,r)&&al(r)!==_n)}(t,n,r)?{segmentGroup:new gr(e,xie(r,new gr(n,t.children))),slicedSegments:[]}:0===n.length&&function Mie(t,e,n){return n.some(r=>ow(t,e,r))}(t,n,r)?{segmentGroup:new gr(t.segments,Rie(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new gr(t.segments,t.children),slicedSegments:n}}function Rie(t,e,n,r){const i={};for(const o of n)if(ow(t,e,o)&&!r[al(o)]){const s=new gr([],{});i[al(o)]=s}return{...r,...i}}function xie(t,e){const n={};n[_n]=e;for(const r of t)if(""===r.path&&al(r)!==_n){const i=new gr([],{});n[al(r)]=i}return n}function ow(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class Oie{}class Vie{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Aie(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Ue(4002,`'${e.segmentGroup}'`)}recognize(){const e=DU(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(xt(n=>{const r=new qS([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},_n,this.rootComponentType,null,{}),i=new Pa(r,n),o=new pU("",i),s=function Dre(t,e,n=null,r=null){return rU(nU(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,_n).pipe(Id(r=>{if(r instanceof ZS)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof JS?this.noMatchError(r):r}))}inheritParamsAndData(e,n){const r=e.value,i=WS(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(xt(o=>o instanceof Pa?[o]:[]))}processChildren(e,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return er(i).pipe(R_(o=>{const s=r.children[o],a=function tie(t,e){const n=t.filter(r=>al(r)===e);return n.push(...t.filter(r=>al(r)!==e)),n}(n,o);return this.processSegmentGroup(e,a,s,o)}),qE((o,s)=>(o.push(...s),o)),WE(null),function rre(t,e){const n=arguments.length>=2;return r=>r.pipe(t?As((i,o)=>t(i,o,r)):Rr,NS(1),n?WE(e):z$(()=>new zE))}(),Zi(o=>{if(null===o)return op(r);const s=SU(o);return function Bie(t){t.sort((e,n)=>e.value.outlet===_n?-1:n.value.outlet===_n?1:e.value.outlet.localeCompare(n.value.outlet))}(s),Kt(s)}))}processSegment(e,n,r,i,o,s){return er(n).pipe(R_(a=>{var l;return this.processSegmentAgainstRoute(null!==(l=a._injector)&&void 0!==l?l:e,n,a,r,i,o,s).pipe(Id(c=>{if(c instanceof JS)return Kt(null);throw c}))}),Xc(a=>!!a),Id(a=>{if(TU(a))return function Nie(t,e,n){return 0===e.length&&!t.children[n]}(r,i,o)?Kt(new Oie):op(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return function kie(t,e,n,r){return!!(al(t)===r||r!==_n&&ow(e,n,t))&&t1(e,t,n).matched}(r,i,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):op(i):op(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){const{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:h}=t1(n,i,o);if(!a)return op(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const f=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,f).pipe(Zi(m=>this.processSegment(e,r,n,m.concat(h),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){const s=Die(n,r,i,e);return"**"===r.path&&(n.children={}),s.pipe(Vr(a=>{var l;return a.matched?(e=null!==(l=r._injector)&&void 0!==l?l:e,this.getChildConfig(e,r,i).pipe(Vr(({routes:c})=>{var h,f,m;const v=null!==(h=r._loadedInjector)&&void 0!==h?h:e,{consumedSegments:w,remainingSegments:R,parameters:N}=a,z=new qS(w,N,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function Uie(t){return t.data||{}}(r),al(r),null!==(f=null!==(m=r.component)&&void 0!==m?m:r._loadedComponent)&&void 0!==f?f:null,r,function jie(t){return t.resolve||{}}(r)),{segmentGroup:Q,slicedSegments:Te}=DU(n,w,R,c);if(0===Te.length&&Q.hasChildren())return this.processChildren(v,c,Q).pipe(xt(Je=>null===Je?null:new Pa(z,Je)));if(0===c.length&&0===Te.length)return Kt(new Pa(z,[]));const Ae=al(r)===o;return this.processSegment(v,c,Q,Te,Ae?_n:o,!0).pipe(xt(Je=>new Pa(z,Je instanceof Pa?[Je]:[])))}))):op(n)}))}getChildConfig(e,n,r){return n.children?Kt({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?Kt({routes:n._loadedRoutes,injector:n._loadedInjector}):function wie(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?Kt(!0):Kt(i.map(s=>{const a=rp(s,t);return Jc(function cie(t){return t&&U_(t.canLoad)}(a)?a.canLoad(e,n):ki(t,()=>a(e,n)))})).pipe(ip(),AU())}(e,n,r).pipe(Zi(i=>i?this.configLoader.loadChildren(e,n).pipe(eo(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function Tie(t){return HE(EU(!1,Ds.GuardRejected))}())):Kt({routes:[],injector:e})}}function $ie(t){const e=t.value.routeConfig;return e&&""===e.path}function SU(t){const e=[],n=new Set;for(const r of t){if(!$ie(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=SU(r.children);e.push(new Pa(r.value,i))}return e.filter(r=>!n.has(r))}function RU(t){const e=t.children.map(n=>RU(n)).flat();return[t,...e]}function n1(t){return Vr(e=>{const n=t(e);return n?er(n).pipe(xt(()=>e)):Kt(e)})}let xU=(()=>{var t;class e{buildTitle(r){let i,o=r.root;for(;void 0!==o;){var s;i=null!==(s=this.getResolvedTitleForRoute(o))&&void 0!==s?s:i,o=o.children.find(a=>a.outlet===_n)}return i}getResolvedTitleForRoute(r){return r.data[x_]}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:()=>Ye(Kie),providedIn:"root"}),e})(),Kie=(()=>{var t;class e extends xU{constructor(r){super(),this.title=r}updateTitle(r){const i=this.buildTitle(r);void 0!==i&&this.title.setTitle(i)}}return(t=e).\u0275fac=function(r){return new(r||t)(Ke(Dte))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const sp=new ft("",{providedIn:"root",factory:()=>({})}),ap=new ft("");let r1=(()=>{var t;class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ye(KL)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Kt(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);const i=Jc(r.loadComponent()).pipe(xt(PU),eo(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),OS(()=>{this.componentLoaders.delete(r)})),o=new j$(i,()=>new te).pipe(kS());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Kt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=function Qie(t,e,n,r){return Jc(t.loadChildren()).pipe(xt(PU),Zi(i=>i instanceof f2||Array.isArray(i)?Kt(i):er(e.compileModuleAsync(i))),xt(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(n).injector,s=o.get(ap,[],{optional:!0,self:!0}).flat()),{routes:s.map(XS),injector:o}}))}(i,this.compiler,r,this.onLoadEndListener).pipe(OS(()=>{this.childrenLoaders.delete(i)})),a=new j$(s,()=>new te).pipe(kS());return this.childrenLoaders.set(i,a),a}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function PU(t){return function Yie(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let i1=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:()=>Ye(Xie),providedIn:"root"}),e})(),Xie=(()=>{var t;class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const MU=new ft(""),kU=new ft("");function Jie(t,e,n){const r=t.get(kU),i=t.get(ss);return t.get(ze).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o;const s=new Promise(c=>{o=c}),a=i.startViewTransition(()=>(o(),function Zie(t){return new Promise(e=>{RO(e,{injector:t})})}(t))),{onViewTransitionCreated:l}=r;return l&&ki(t,()=>l({transition:a,from:e,to:n})),s})}let sw=(()=>{var t;class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new te,this.transitionAbortSubject=new te,this.configLoader=Ye(r1),this.environmentInjector=Ye(Xr),this.urlSerializer=Ye(wd),this.rootContexts=Ye(bd),this.location=Ye(rl),this.inputBindingEnabled=null!==Ye(nw,{optional:!0}),this.titleStrategy=Ye(xU),this.options=Ye(sp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Ye(i1),this.createViewTransition=Ye(MU,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Kt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new Bre(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new Vre(o))}complete(){var r;null===(r=this.transitions)||void 0===r||r.complete()}handleNavigationRequest(r){var i;const o=++this.navigationId;null===(i=this.transitions)||void 0===i||i.next({...this.transitions.value,...r,id:o})}setupNavigations(r,i,o){return this.transitions=new ue({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:O_,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(As(s=>0!==s.id),xt(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Vr(s=>{let a=!1,l=!1;return Kt(s).pipe(Vr(c=>{var h;if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ds.SupersededByNewNavigation),xa;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const f=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),m=null!==(h=c.extras.onSameUrlNavigation)&&void 0!==h?h:r.onSameUrlNavigation;if(!f&&"reload"!==m){const v="";return this.events.next(new tp(c.id,this.urlSerializer.serialize(c.rawUrl),v,ew.IgnoredSameUrlNavigation)),c.resolve(null),xa}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Kt(c).pipe(Vr(v=>{var w,R;const N=null===(w=this.transitions)||void 0===w?void 0:w.getValue();return this.events.next(new F_(v.id,this.urlSerializer.serialize(v.extractedUrl),v.source,v.restoredState)),N!==(null===(R=this.transitions)||void 0===R?void 0:R.getValue())?xa:Promise.resolve(v)}),function zie(t,e,n,r,i,o){return Zi(s=>function Fie(t,e,n,r,i,o,s="emptyOnly"){return new Vie(t,e,n,r,i,s,o).recognize()}(t,e,n,r,s.extractedUrl,i,o).pipe(xt(({state:a,tree:l})=>({...s,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),eo(v=>{s.targetSnapshot=v.targetSnapshot,s.urlAfterRedirects=v.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:v.urlAfterRedirects};const w=new cU(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(w)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:v,extractedUrl:w,source:R,restoredState:N,extras:z}=c,Q=new F_(v,this.urlSerializer.serialize(w),R,N);this.events.next(Q);const Te=fU(this.rootComponentType).snapshot;return this.currentTransition=s={...c,targetSnapshot:Te,urlAfterRedirects:w,extras:{...z,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=w,Kt(s)}{const v="";return this.events.next(new tp(c.id,this.urlSerializer.serialize(c.extractedUrl),v,ew.IgnoredByUrlHandlingStrategy)),c.resolve(null),xa}}),eo(c=>{const h=new Nre(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),xt(c=>(this.currentTransition=s={...c,guards:iie(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},s)),function pie(t,e){return Zi(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Kt({...n,guardsResult:!0}):function gie(t,e,n,r){return er(t).pipe(Zi(i=>function Eie(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Kt(o.map(a=>{var l;const c=null!==(l=V_(e))&&void 0!==l?l:i,h=rp(a,c);return Jc(function hie(t){return t&&U_(t.canDeactivate)}(h)?h.canDeactivate(t,e,n,r):ki(c,()=>h(t,e,n,r))).pipe(Xc())})).pipe(ip()):Kt(!0)}(i.component,i.route,n,e,r)),Xc(i=>!0!==i,!0))}(s,r,i,t).pipe(Zi(a=>a&&function lie(t){return"boolean"==typeof t}(a)?function mie(t,e,n,r){return er(e).pipe(R_(i=>MS(function vie(t,e){return null!==t&&e&&e(new $re(t)),Kt(!0)}(i.route.parent,r),function _ie(t,e){return null!==t&&e&&e(new jre(t)),Kt(!0)}(i.route,r),function Iie(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function oie(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>U$(()=>Kt(s.guards.map(l=>{var c;const h=null!==(c=V_(s.node))&&void 0!==c?c:n,f=rp(l,h);return Jc(function die(t){return t&&U_(t.canActivateChild)}(f)?f.canActivateChild(r,t):ki(h,()=>f(r,t))).pipe(Xc())})).pipe(ip())));return Kt(o).pipe(ip())}(t,i.path,n),function yie(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Kt(!0);const i=r.map(o=>U$(()=>{var s;const a=null!==(s=V_(e))&&void 0!==s?s:n,l=rp(o,a);return Jc(function uie(t){return t&&U_(t.canActivate)}(l)?l.canActivate(e,t):ki(a,()=>l(e,t))).pipe(Xc())}));return Kt(i).pipe(ip())}(t,i.route,n))),Xc(i=>!0!==i,!0))}(r,o,t,e):Kt(a)),xt(a=>({...n,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),eo(c=>{if(s.guardsResult=c.guardsResult,Zf(c.guardsResult))throw IU(0,c.guardsResult);const h=new Ore(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(h)}),As(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",Ds.GuardRejected),!1)),n1(c=>{if(c.guards.canActivateChecks.length)return Kt(c).pipe(eo(h=>{const f=new Fre(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}),Vr(h=>{let f=!1;return Kt(h).pipe(function Hie(t,e){return Zi(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Kt(n);const o=new Set(i.map(l=>l.route)),s=new Set;for(const l of o)if(!s.has(l))for(const c of RU(l))s.add(c);let a=0;return er(s).pipe(R_(l=>o.has(l)?function Gie(t,e,n,r){const i=t.routeConfig,o=t._resolve;return void 0!==(null==i?void 0:i.title)&&!mU(i)&&(o[x_]=i.title),function Wie(t,e,n,r){const i=FS(t);if(0===i.length)return Kt({});const o={};return er(i).pipe(Zi(s=>function qie(t,e,n,r){var i;const o=null!==(i=V_(e))&&void 0!==i?i:r,s=rp(t,o);return Jc(s.resolve?s.resolve(e,n):ki(o,()=>s(e,n)))}(t[s],e,n,r).pipe(Xc(),eo(a=>{o[s]=a}))),NS(1),function ire(t){return xt(()=>t)}(o),Id(s=>TU(s)?xa:HE(s)))}(o,t,e,r).pipe(xt(s=>(t._resolvedData=s,t.data=WS(t,t.parent,n).resolve,null)))}(l,r,t,e):(l.data=WS(l,l.parent,t).resolve,Kt(void 0))),eo(()=>a++),NS(1),Zi(l=>a===s.size?Kt(n):xa))})}(this.paramsInheritanceStrategy,this.environmentInjector),eo({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(h,"",Ds.NoDataFromResolver)}}))}),eo(h=>{const f=new Lre(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}))}),n1(c=>{const h=f=>{var m;const v=[];null!==(m=f.routeConfig)&&void 0!==m&&m.loadComponent&&!f.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(f.routeConfig).pipe(eo(w=>{f.component=w}),xt(()=>{})));for(const w of f.children)v.push(...h(w));return v};return jE(h(c.targetSnapshot.root)).pipe(WE(null),Yf(1))}),n1(()=>this.afterPreactivation()),Vr(()=>{var c;const{currentSnapshot:h,targetSnapshot:f}=s,m=null===(c=this.createViewTransition)||void 0===c?void 0:c.call(this,this.environmentInjector,h.root,f.root);return m?er(m).pipe(xt(()=>s)):Kt(s)}),xt(c=>{const h=function qre(t,e,n){const r=L_(t,e._root,n?n._root:void 0);return new hU(r,e)}(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s={...c,targetRouterState:h},this.currentNavigation.targetRouterState=h,s}),eo(()=>{this.events.next(new jS)}),((t,e,n,r)=>xt(i=>(new rie(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Yf(1),eo({next:c=>{var h;a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Yl(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),null===(h=this.titleStrategy)||void 0===h||h.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),function ore(t){return Rt((e,n)=>{as(t).subscribe(Bt(n,()=>n.complete(),Jt)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(eo(c=>{throw c}))),OS(()=>{var c;!a&&!l&&this.cancelNavigationTransition(s,"",Ds.SupersededByNewNavigation),(null===(c=this.currentTransition)||void 0===c?void 0:c.id)===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Id(c=>{if(l=!0,wU(c))this.events.next(new ep(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),function Yre(t){return wU(t)&&Zf(t.url)}(c)?this.events.next(new zS(c.url)):s.resolve(!1);else{var h;this.events.next(new tw(s.id,this.urlSerializer.serialize(s.extractedUrl),c,null!==(h=s.targetSnapshot)&&void 0!==h?h:void 0));try{s.resolve(r.errorHandler(c))}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return xa}))}))}cancelNavigationTransition(r,i,o){const s=new ep(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){var r,i;return(null===(r=this.currentTransition)||void 0===r?void 0:r.extractedUrl.toString())!==(null===(i=this.currentTransition)||void 0===i?void 0:i.currentUrlTree.toString())}isUpdatedBrowserUrl(){var r,i;return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==(null===(r=this.currentTransition)||void 0===r?void 0:r.extractedUrl.toString())&&!(null!==(i=this.currentTransition)&&void 0!==i&&i.extras.skipLocationChange)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function eoe(t){return t!==O_}let toe=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:()=>Ye(roe),providedIn:"root"}),e})();class noe{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let roe=(()=>{var t;class e extends noe{}return(t=e).\u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})(),t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),NU=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:()=>Ye(ioe),providedIn:"root"}),e})(),ioe=(()=>{var t;class e extends NU{constructor(){super(...arguments),this.location=Ye(rl),this.urlSerializer=Ye(wd),this.options=Ye(sp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Ye(i1),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Jf,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=fU(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){var r,i;return"computed"!==this.canceledNavigationResolution?this.currentPageId:null!==(r=null===(i=this.restoredState())||void 0===i?void 0:i.\u0275routerPageId)&&void 0!==r?r:this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{"popstate"===i.type&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof F_)this.stateMemento=this.createStateMemento();else if(r instanceof tp)this.rawUrlTree=i.initialUrl;else if(r instanceof cU){if("eager"===this.urlUpdateStrategy&&!i.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof jS?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof ep&&(r.code===Ds.GuardRejected||r.code===Ds.NoDataFromResolver)?this.restoreHistory(i):r instanceof tw?this.restoreHistory(i,!0):r instanceof Yl&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){const o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){const a={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(o,"",a)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(o,"",s)}}restoreHistory(r,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&0===s&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){var i;this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,null!==(i=r.finalUrl)&&void 0!==i?i:this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}}return(t=e).\u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})(),t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();var j_=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(j_||{});function OU(t,e){t.events.pipe(As(n=>n instanceof Yl||n instanceof ep||n instanceof tw||n instanceof tp),xt(n=>n instanceof Yl||n instanceof tp?j_.COMPLETE:n instanceof ep&&(n.code===Ds.Redirect||n.code===Ds.SupersededByNewNavigation)?j_.REDIRECTING:j_.FAILED),As(n=>n!==j_.REDIRECTING),Yf(1)).subscribe(()=>{e()})}function ooe(t){throw t}const soe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},aoe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let lr=(()=>{var t;class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){var r,i;this.disposed=!1,this.isNgZoneEnabled=!1,this.console=Ye(BL),this.stateManager=Ye(NU),this.options=Ye(sp,{optional:!0})||{},this.pendingTasks=Ye(yf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Ye(sw),this.urlSerializer=Ye(wd),this.location=Ye(rl),this.urlHandlingStrategy=Ye(i1),this._events=new te,this.errorHandler=this.options.errorHandler||ooe,this.navigated=!1,this.routeReuseStrategy=Ye(toe),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=null!==(r=null===(i=Ye(ap,{optional:!0}))||void 0===i?void 0:i.flat())&&void 0!==r?r:[],this.componentInputBindingEnabled=!!Ye(nw,{optional:!0}),this.eventsSubscription=new De,this.isNgZoneEnabled=Ye(ze)instanceof ze&&ze.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:o=>{this.console.warn(o)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const r=this.navigationTransitions.events.subscribe(i=>{try{const o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(null!==o&&null!==s)if(this.stateManager.handleRouterEvent(i,s),i instanceof ep&&i.code!==Ds.Redirect&&i.code!==Ds.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Yl)this.navigated=!0;else if(i instanceof zS){const a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||eoe(o.source)};this.scheduleNavigation(a,O_,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}(function coe(t){return!(t instanceof jS||t instanceof zS)})(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),O_,this.stateManager.restoredState())}setUpLocationChangeListener(){var r;null!==(r=this.nonRouterCurrentEntryChangeSubscription)&&void 0!==r||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,o)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",o)},0)}))}navigateToSyncWithBrowser(r,i,o){const s={replaceUrl:!0},a=null!=o&&o.navigationId?o:null;if(o){const c={...o};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const l=this.parseUrl(r);this.scheduleNavigation(l,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(XS),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){const{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:c}=i,h=c?this.currentUrlTree.fragment:a;let m,f=null;switch(l){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}null!==f&&(f=this.removeEmptyProps(f));try{m=nU(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof r[0]||!r[0].startsWith("/"))&&(r=[]),m=this.currentUrlTree.root}return rU(m,r,f,null!=h?h:null)}navigateByUrl(r,i={skipLocationChange:!1}){const o=Zf(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,O_,null,i)}navigate(r,i={skipLocationChange:!1}){return function loe(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new Ue(4008,!1)}(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(o=!0===i?{...soe}:!1===i?{...aoe}:i,Zf(r))return q$(this.currentUrlTree,r,o);const s=this.parseUrl(r);return q$(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(null!=s&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let l,c,h;a?(l=a.resolve,c=a.reject,h=a.promise):h=new Promise((m,v)=>{l=m,c=v});const f=this.pendingTasks.add();return OU(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:l,reject:c,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),$o=(()=>{var t;class e{constructor(r,i,o,s,a,l){var c;this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=l,this.href=null,this.commands=null,this.onChanges=new te,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const h=null===(c=a.nativeElement.tagName)||void 0===c?void 0:c.toLowerCase();this.isAnchorElement="a"===h||"area"===h,this.isAnchorElement?this.subscription=r.events.subscribe(f=>{f instanceof Yl&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){null!=r?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,s,a){const l=this.urlTree;return!!(null===l||this.isAnchorElement&&(0!==r||i||o||s||a||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(l,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){var r;null===(r=this.subscription)||void 0===r||r.unsubscribe()}updateHref(){var r;const i=this.urlTree;this.href=null!==i&&this.locationStrategy?null===(r=this.locationStrategy)||void 0===r?void 0:r.prepareExternalUrl(this.router.serializeUrl(i)):null;const o=null===this.href?null:function bN(t,e,n){return function zG(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?wN:rs}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",o)}applyAttributeValue(r,i){const o=this.renderer,s=this.el.nativeElement;null!==i?o.setAttribute(s,r,i):o.removeAttribute(s,r)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return(t=e).\u0275fac=function(r){return new(r||t)(E(lr),E(na),ba("tabindex"),E(jl),E(tt),E(Zs))},t.\u0275dir=Ot({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Ze("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&Js("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[ar.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Hf],skipLocationChange:[ar.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Hf],replaceUrl:[ar.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Hf],routerLink:"routerLink"},standalone:!0,features:[h2,Yi]}),e})();class FU{}let hoe=(()=>{var t;class e{preload(r,i){return i().pipe(Id(()=>Kt(null)))}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),foe=(()=>{var t;class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(As(r=>r instanceof Yl),R_(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){const o=[];for(const c of i){var s,a;c.providers&&!c._injector&&(c._injector=VI(c.providers,r,`Route: ${c.path}`));const h=null!==(s=c._injector)&&void 0!==s?s:r,f=null!==(a=c._loadedInjector)&&void 0!==a?a:h;var l;(c.loadChildren&&!c._loadedRoutes&&void 0===c.canLoad||c.loadComponent&&!c._loadedComponent)&&o.push(this.preloadConfig(h,c)),(c.children||c._loadedRoutes)&&o.push(this.processRoutes(f,null!==(l=c.children)&&void 0!==l?l:c._loadedRoutes))}return er(o).pipe(Qf())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;o=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(r,i):Kt(null);const s=o.pipe(Zi(a=>{var l;return null===a?Kt(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(null!==(l=a.injector)&&void 0!==l?l:r,a.routes))}));return i.loadComponent&&!i._loadedComponent?er([s,this.loader.loadComponent(i)]).pipe(Qf()):s})}}return(t=e).\u0275fac=function(r){return new(r||t)(Ke(lr),Ke(KL),Ke(Xr),Ke(FU),Ke(r1))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const o1=new ft("");let LU=(()=>{var t;class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||(a.scrollPositionRestoration="disabled"),a.anchorScrolling||(a.anchorScrolling="disabled")}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof F_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Yl?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof tp&&r.code===ew.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof uU&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new uU(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){var r,i;null===(r=this.routerEventsSubscription)||void 0===r||r.unsubscribe(),null===(i=this.scrollEventsSubscription)||void 0===i||i.unsubscribe()}}return(t=e).\u0275fac=function(r){!function qN(){throw new Error("invalid")}()},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),e})();function ll(t,e){return{\u0275kind:t,\u0275providers:e}}function BU(){const t=Ye(lt);return e=>{var n,r;const i=t.get(zl);if(e!==i.components[0])return;const o=t.get(lr),s=t.get($U);1===t.get(s1)&&o.initialNavigation(),null===(n=t.get(UU,null,bn.Optional))||void 0===n||n.setUpPreloading(),null===(r=t.get(o1,null,bn.Optional))||void 0===r||r.init(),o.resetRootComponentType(i.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const $U=new ft("",{factory:()=>new te}),s1=new ft("",{providedIn:"root",factory:()=>1}),UU=new ft("");function _oe(t){return ll(0,[{provide:UU,useExisting:foe},{provide:FU,useExisting:t}])}function yoe(t){return ll(9,[{provide:MU,useValue:Jie},{provide:kU,useValue:{skipNextTransition:!(null==t||!t.skipInitialTransition),...t}}])}const jU=new ft("ROUTER_FORROOT_GUARD"),Ioe=[rl,{provide:wd,useClass:LS},lr,bd,{provide:na,useFactory:function VU(t){return t.routerState.root},deps:[lr]},r1,[]];let a1=(()=>{var t;class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[Ioe,[],{provide:ap,multi:!0,useValue:r},{provide:jU,useFactory:Coe,deps:[[lr,new xl,new vc]]},{provide:sp,useValue:i||{}},null!=i&&i.useHash?{provide:Zs,useClass:$V}:{provide:Zs,useClass:BV},{provide:o1,useFactory:()=>{const t=Ye(Aee),e=Ye(ze),n=Ye(sp),r=Ye(sw),i=Ye(wd);return n.scrollOffset&&t.setOffset(n.scrollOffset),new LU(i,r,t,e,n)}},null!=i&&i.preloadingStrategy?_oe(i.preloadingStrategy).\u0275providers:[],null!=i&&i.initialNavigation?Toe(i):[],null!=i&&i.bindToComponentInputs?ll(8,[vU,{provide:nw,useExisting:vU}]).\u0275providers:[],null!=i&&i.enableViewTransitions?yoe().\u0275providers:[],[{provide:zU,useFactory:BU},{provide:ED,multi:!0,useExisting:zU}]]}}static forChild(r){return{ngModule:e,providers:[{provide:ap,multi:!0,useValue:r}]}}}return(t=e).\u0275fac=function(r){return new(r||t)(Ke(jU,8))},t.\u0275mod=Jo({type:t}),t.\u0275inj=zn({}),e})();function Coe(t){return"guarded"}function Toe(t){return["disabled"===t.initialNavigation?ll(3,[{provide:lE,multi:!0,useFactory:()=>{const e=Ye(lr);return()=>{e.setUpLocationChangeListener()}}},{provide:s1,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?ll(2,[{provide:s1,useValue:0},{provide:lE,multi:!0,deps:[lt],useFactory:e=>{const n=e.get(rZ,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(lr),o=e.get($U);OU(i,()=>{r(!0)}),e.get(sw).afterPreactivation=()=>(r(!0),o.closed?Kt(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const zU=new ft("");class Doe{constructor(){this.m=new Map}reset(e){this.m=new Map(Object.entries(e))}get(e,n){const r=this.m.get(e);return void 0!==r?r:n}getBoolean(e,n=!1){const r=this.m.get(e);return void 0===r?n:"string"==typeof r?"true"===r:!!r}getNumber(e,n){const r=parseFloat(this.m.get(e));return isNaN(r)?void 0!==n?n:NaN:r}set(e,n){this.m.set(e,n)}}const Zc=new Doe,WU=t=>KU(t),KU=(t=window)=>{if(typeof t>"u")return[];t.Ionic=t.Ionic||{};let e=t.Ionic.platforms;return null==e&&(e=t.Ionic.platforms=Moe(t),e.forEach(n=>t.document.documentElement.classList.add(`plt-${n}`))),e},Moe=t=>{const e=Zc.get("platform");return Object.keys(ZU).filter(n=>{const r=null==e?void 0:e[n];return"function"==typeof r?r(t):ZU[n](t)})},l1=t=>!!(Cd(t,/iPad/i)||Cd(t,/Macintosh/i)&&aw(t)),QU=t=>Cd(t,/android|sink/i),aw=t=>joe(t,"(any-pointer:coarse)"),YU=t=>XU(t)||JU(t),XU=t=>!!(t.cordova||t.phonegap||t.PhoneGap),JU=t=>{const e=t.Capacitor;return!(null==e||!e.isNative)},Cd=(t,e)=>e.test(t.navigator.userAgent),joe=(t,e)=>{var n;return null===(n=t.matchMedia)||void 0===n?void 0:n.call(t,e).matches},ZU={ipad:l1,iphone:t=>Cd(t,/iPhone/i),ios:t=>Cd(t,/iPhone|iPod/i)||l1(t),android:QU,phablet:t=>{const e=t.innerWidth,n=t.innerHeight,r=Math.min(e,n),i=Math.max(e,n);return r>390&&r<520&&i>620&&i<800},tablet:t=>{const e=t.innerWidth,n=t.innerHeight,r=Math.min(e,n),i=Math.max(e,n);return l1(t)||(t=>QU(t)&&!Cd(t,/mobile/i))(t)||r>460&&r<820&&i>780&&i<1400},cordova:XU,capacitor:JU,electron:t=>Cd(t,/electron/i),pwa:t=>{var e;return!!(null!==(e=t.matchMedia)&&void 0!==e&&e.call(t,"(display-mode: standalone)").matches||t.navigator.standalone)},mobile:aw,mobileweb:t=>aw(t)&&!YU(t),desktop:t=>!aw(t),hybrid:YU};var z_=F(6031),zoe=F(1656);function t4(t,e=Rr){return t=null!=t?t:Yoe,Rt((n,r)=>{let i,o=!0;n.subscribe(Bt(r,s=>{const a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function Yoe(t,e){return t===e}let Joe=(()=>{class t{constructor(n,r){this.doc=n,this.backButton=new te,this.keyboardDidShow=new te,this.keyboardDidHide=new te,this.pause=new te,this.resume=new te,this.resize=new te,r.run(()=>{var i;let o;this.win=n.defaultView,this.backButton.subscribeWithPriority=function(s,a){return this.subscribe(l=>l.register(s,c=>r.run(()=>a(c))))},cp(this.pause,n,"pause",r),cp(this.resume,n,"resume",r),cp(this.backButton,n,"ionBackButton",r),cp(this.resize,this.win,"resize",r),cp(this.keyboardDidShow,this.win,"ionKeyboardDidShow",r),cp(this.keyboardDidHide,this.win,"ionKeyboardDidHide",r),this._readyPromise=new Promise(s=>{o=s}),null!==(i=this.win)&&void 0!==i&&i.cordova?n.addEventListener("deviceready",()=>{o("cordova")},{once:!0}):o("dom")})}is(n){return((t,e)=>("string"==typeof t&&(e=t,t=void 0),WU(t).includes(e)))(this.win,n)}platforms(){return WU(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(n){return Zoe(this.win.location.href,n)}isLandscape(){return!this.isPortrait()}isPortrait(){var n,r;return null===(n=(r=this.win).matchMedia)||void 0===n?void 0:n.call(r,"(orientation: portrait)").matches}testUserAgent(n){const r=this.win.navigator;return!!(null!=r&&r.userAgent&&r.userAgent.indexOf(n)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return t.\u0275fac=function(n){return new(n||t)(Ke(ss),Ke(ze))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Zoe=(t,e)=>{e=e.replace(/[[\]\\]/g,"\\$&");const r=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return r?decodeURIComponent(r[1].replace(/\+/g," ")):null},cp=(t,e,n,r)=>{e&&e.addEventListener(n,i=>{r.run(()=>{t.next(null!=i?i.detail:void 0)})})};let up=(()=>{class t{constructor(n,r,i,o){this.location=r,this.serializer=i,this.router=o,this.direction=n4,this.animated=r4,this.guessDirection="forward",this.lastNavId=-1,o&&o.events.subscribe(s=>{if(s instanceof F_){const a=s.restoredState?s.restoredState.navigationId:s.id;this.guessDirection=a<this.lastNavId?"back":"forward",this.guessAnimation=s.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?s.id:a}}),n.backButton.subscribeWithPriority(0,s=>{this.pop(),s()})}navigateForward(n,r={}){return this.setDirection("forward",r.animated,r.animationDirection,r.animation),this.navigate(n,r)}navigateBack(n,r={}){return this.setDirection("back",r.animated,r.animationDirection,r.animation),this.navigate(n,r)}navigateRoot(n,r={}){return this.setDirection("root",r.animated,r.animationDirection,r.animation),this.navigate(n,r)}back(n={animated:!0,animationDirection:"back"}){return this.setDirection("back",n.animated,n.animationDirection,n.animation),this.location.back()}pop(){var n=this;return(0,_.A)(function*(){let r=n.topOutlet;for(;r;){if(yield r.pop())return!0;r=r.parentOutlet}return!1})()}setDirection(n,r,i,o){this.direction=n,this.animated=ese(n,r,i),this.animationBuilder=o}setTopOutlet(n){this.topOutlet=n}consumeTransition(){let r,n="root";const i=this.animationBuilder;return"auto"===this.direction?(n=this.guessDirection,r=this.guessAnimation):(r=this.animated,n=this.direction),this.direction=n4,this.animated=r4,this.animationBuilder=void 0,{direction:n,animation:r,animationBuilder:i}}navigate(n,r){if(Array.isArray(n))return this.router.navigate(n,r);{const i=this.serializer.parse(n.toString());return void 0!==r.queryParams&&(i.queryParams={...r.queryParams}),void 0!==r.fragment&&(i.fragment=r.fragment),this.router.navigateByUrl(i,r)}}}return t.\u0275fac=function(n){return new(n||t)(Ke(Joe),Ke(rl),Ke(wd),Ke(lr,8))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const ese=(t,e,n)=>{if(!1!==e){if(void 0!==n)return n;if("forward"===t||"back"===t)return t;if("root"===t&&!0===e)return"forward"}},n4="auto",r4=void 0;let c1=(()=>{class t{get(n,r){const i=u1();return i?i.get(n,r):null}getBoolean(n,r){const i=u1();return!!i&&i.getBoolean(n,r)}getNumber(n,r){const i=u1();return i?i.getNumber(n,r):0}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const i4=new ft("USERCONFIG"),u1=()=>{if(typeof window<"u"){const t=window.Ionic;if(null!=t&&t.config)return t.config}return null};class o4{constructor(e={}){this.data=e}get(e){return this.data[e]}}let H_=(()=>{class t{constructor(){this.zone=Ye(ze),this.applicationRef=Ye(zl)}create(n,r,i){return new tse(n,r,this.applicationRef,this.zone,i)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();class tse{constructor(e,n,r,i,o){this.environmentInjector=e,this.injector=n,this.applicationRef=r,this.zone=i,this.elementReferenceKey=o,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(e,n,r,i){return this.zone.run(()=>new Promise(o=>{const s={...r};void 0!==this.elementReferenceKey&&(s[this.elementReferenceKey]=e),o(nse(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,e,n,s,i,this.elementReferenceKey))}))}removeViewFromDom(e,n){return this.zone.run(()=>new Promise(r=>{const i=this.elRefMap.get(n);if(i){i.destroy(),this.elRefMap.delete(n);const o=this.elEventsMap.get(n);o&&(o(),this.elEventsMap.delete(n))}r()}))}}const nse=(t,e,n,r,i,o,s,a,l,c,h)=>{const m=function eZ(t,e){const n=an(t),r=e.elementInjector||Ch();return new Km(n).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}(a,{environmentInjector:e,elementInjector:lt.create({providers:ise(l),parent:n})}),v=m.instance,w=m.location.nativeElement;if(l&&(h&&void 0!==v[h]&&console.error(`[Ionic Error]: ${h} is a reserved property when using ${s.tagName.toLowerCase()}. Rename or remove the "${h}" property from ${a.name}.`),Object.assign(v,l)),c)for(const N of c)w.classList.add(N);const R=s4(t,v,w);return s.appendChild(w),r.attachView(m.hostView),i.set(w,m),o.set(w,R),w},rse=[z_.L,z_.a,z_.b,z_.c,z_.d],s4=(t,e,n)=>t.run(()=>{const r=rse.filter(i=>"function"==typeof e[i]).map(i=>{const o=s=>e[i](s.detail);return n.addEventListener(i,o),()=>n.removeEventListener(i,o)});return()=>r.forEach(i=>i())}),a4=new ft("NavParamsToken"),ise=t=>[{provide:a4,useValue:t},{provide:o4,useFactory:ose,deps:[a4]}],ose=t=>new o4(t),l4=(t,e)=>((t=t.filter(n=>n.stackId!==e.stackId)).push(e),t),h1=(t,e)=>{const n=t.createUrlTree(["."],{relativeTo:e});return t.serializeUrl(n)},c4=(t,e)=>!e||t.stackId!==e.stackId,_se=(t,e)=>{if(!t)return;const n=u4(e);for(let r=0;r<n.length;r++){if(r>=t.length)return n[r];if(n[r]!==t[r])return}},u4=t=>t.split("/").map(e=>e.trim()).filter(e=>""!==e),d4=t=>{t&&(t.ref.destroy(),t.unlistenEvents())};class vse{constructor(e,n,r,i,o,s){this.containerEl=n,this.router=r,this.navCtrl=i,this.zone=o,this.location=s,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==e?u4(e):void 0}createView(e,n){var r;const i=h1(this.router,n),o=null==e||null===(r=e.location)||void 0===r?void 0:r.nativeElement,s=s4(this.zone,e.instance,o);return{id:this.nextId++,stackId:_se(this.tabsPrefix,i),unlistenEvents:s,element:o,ref:e,url:i}}getExistingView(e){const n=h1(this.router,e),r=this.views.find(i=>i.url===n);return r&&r.ref.changeDetectorRef.reattach(),r}setActive(e){var n,r;const i=this.navCtrl.consumeTransition();let{direction:o,animation:s,animationBuilder:a}=i;const l=this.activeView,c=c4(e,l);c&&(o="back",s=void 0);const h=this.views.slice();let f;const m=this.router;m.getCurrentNavigation?f=m.getCurrentNavigation():null!==(n=m.navigations)&&void 0!==n&&n.value&&(f=m.navigations.value),null!==(r=f)&&void 0!==r&&null!==(r=r.extras)&&void 0!==r&&r.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const v=this.views.includes(e),w=this.insertView(e,o);v||e.ref.changeDetectorRef.detectChanges();const R=e.animationBuilder;return void 0===a&&"back"===o&&!c&&void 0!==R&&(a=R),l&&(l.animationBuilder=a),this.zone.runOutsideAngular(()=>this.wait(()=>(l&&l.ref.changeDetectorRef.detach(),e.ref.changeDetectorRef.reattach(),this.transition(e,l,s,this.canGoBack(1),!1,a).then(()=>yse(e,w,h,this.location,this.zone)).then(()=>({enteringView:e,direction:o,animation:s,tabSwitch:c})))))}canGoBack(e,n=this.getActiveStackId()){return this.getStack(n).length>e}pop(e,n=this.getActiveStackId()){return this.zone.run(()=>{const r=this.getStack(n);if(r.length<=e)return Promise.resolve(!1);const i=r[r.length-e-1];let o=i.url;const s=i.savedData;if(s){var a;const c=s.get("primary");null!=c&&null!==(a=c.route)&&void 0!==a&&null!==(a=a._routerState)&&void 0!==a&&a.snapshot.url&&(o=c.route._routerState.snapshot.url)}const{animationBuilder:l}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(o,{...i.savedExtras,animation:l}).then(()=>!0)})}startBackTransition(){const e=this.activeView;if(e){const n=this.getStack(e.stackId),r=n[n.length-2],i=r.animationBuilder;return this.wait(()=>this.transition(r,e,"back",this.canGoBack(2),!0,i))}return Promise.resolve()}endBackTransition(e){e?(this.skipTransition=!0,this.pop(1)):this.activeView&&h4(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(e){const n=this.getStack(e);return n.length>0?n[n.length-1]:void 0}getRootUrl(e){const n=this.getStack(e);return n.length>0?n[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}getActiveView(){return this.activeView}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(d4),this.activeView=void 0,this.views=[]}getStack(e){return this.views.filter(n=>n.stackId===e)}insertView(e,n){return this.activeView=e,this.views=((t,e,n)=>"root"===n?l4(t,e):"forward"===n?((t,e)=>(t.indexOf(e)>=0?t=t.filter(r=>r.stackId!==e.stackId||r.id<=e.id):t.push(e),t))(t,e):((t,e)=>t.indexOf(e)>=0?t.filter(r=>r.stackId!==e.stackId||r.id<=e.id):l4(t,e))(t,e))(this.views,e,n),this.views.slice()}transition(e,n,r,i,o,s){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(n===e)return Promise.resolve(!1);const a=e?e.element:void 0,l=n?n.element:void 0,c=this.containerEl;return a&&a!==l&&(a.classList.add("ion-page"),a.classList.add("ion-page-invisible"),a.parentElement!==c&&c.appendChild(a),c.commit)?c.commit(a,l,{duration:void 0===r?0:void 0,direction:r,showGoBack:i,progressAnimation:o,animationBuilder:s}):Promise.resolve(!1)}wait(e){var n=this;return(0,_.A)(function*(){void 0!==n.runningTask&&(yield n.runningTask,n.runningTask=void 0);const r=n.runningTask=e();return r.finally(()=>n.runningTask=void 0),r})()}}const yse=(t,e,n,r,i)=>"function"==typeof requestAnimationFrame?new Promise(o=>{requestAnimationFrame(()=>{h4(t,e,n,r,i),o()})}):Promise.resolve(),h4=(t,e,n,r,i)=>{i.run(()=>n.filter(o=>!e.includes(o)).forEach(d4)),e.forEach(o=>{const a=r.path().split("?")[0].split("#")[0];if(o!==t&&o.url!==a){const l=o.element;l.setAttribute("aria-hidden","true"),l.classList.add("ion-page-hidden"),o.ref.changeDetectorRef.detach()}})};let f4=(()=>{class t{constructor(n,r,i,o,s,a,l,c){this.parentOutlet=c,this.activatedView=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new ue(null),this.activated=null,this._activatedRoute=null,this.name=_n,this.stackWillChange=new pr,this.stackDidChange=new pr,this.activateEvents=new pr,this.deactivateEvents=new pr,this.parentContexts=Ye(bd),this.location=Ye(Ys),this.environmentInjector=Ye(Xr),this.inputBinder=Ye(p4,{optional:!0}),this.supportsBindingToComponentInputs=!0,this.config=Ye(c1),this.navCtrl=Ye(up),this.nativeEl=o.nativeElement,this.name=n||_n,this.tabsPrefix="true"===r?h1(s,l):void 0,this.stackCtrl=new vse(this.tabsPrefix,this.nativeEl,s,this.navCtrl,a,i),this.parentContexts.onChildOutletCreated(this.name,this)}get activatedComponentRef(){return this.activated}set animation(n){this.nativeEl.animation=n}set animated(n){this.nativeEl.animated=n}set swipeGesture(n){this._swipeGesture=n,this.nativeEl.swipeHandler=n?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:r=>this.stackCtrl.endBackTransition(r)}:void 0}ngOnDestroy(){var n;this.stackCtrl.destroy(),null===(n=this.inputBinder)||void 0===n||n.unsubscribeFromRouteData(this)}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const n=this.getContext();null!=n&&n.route&&this.activateWith(n.route,n.injector)}new Promise(n=>(0,zoe.c)(this.nativeEl,n)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(n,r){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const r=this.getContext();this.activatedView.savedData=new Map(r.children.contexts);const i=this.activatedView.savedData.get("primary");if(i&&r.route&&(i.route={...r.route}),this.activatedView.savedExtras={},r.route){const o=r.route.snapshot;this.activatedView.savedExtras.queryParams=o.queryParams,this.activatedView.savedExtras.fragment=o.fragment}}const n=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){var i;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;let o,s=this.stackCtrl.getExistingView(n);if(s){o=this.activated=s.ref;const c=s.savedData;c&&(this.getContext().children.contexts=c),this.updateActivatedRouteProxy(o.instance,n)}else{var a;const c=n._futureSnapshot,h=this.parentContexts.getOrCreateContext(this.name).children,f=new ue(null),m=this.createActivatedRouteProxy(f,n),v=new Ise(m,h,this.location.injector),w=null!==(a=c.routeConfig.component)&&void 0!==a?a:c.component;o=this.activated=this.location.createComponent(w,{index:this.location.length,injector:v,environmentInjector:null!=r?r:this.environmentInjector}),f.next(o.instance),s=this.stackCtrl.createView(this.activated,n),this.proxyMap.set(o.instance,m),this.currentActivatedRoute$.next({component:o.instance,activatedRoute:n})}null===(i=this.inputBinder)||void 0===i||i.bindActivatedRouteToOutletComponent(this),this.activatedView=s,this.navCtrl.setTopOutlet(this);const l=this.stackCtrl.getActiveView();this.stackWillChange.emit({enteringView:s,tabSwitch:c4(s,l)}),this.stackCtrl.setActive(s).then(c=>{this.activateEvents.emit(o.instance),this.stackDidChange.emit(c)})}canGoBack(n=1,r){return this.stackCtrl.canGoBack(n,r)}pop(n=1,r){return this.stackCtrl.pop(n,r)}getLastUrl(n){const r=this.stackCtrl.getLastUrl(n);return r?r.url:void 0}getLastRouteView(n){return this.stackCtrl.getLastUrl(n)}getRootView(n){return this.stackCtrl.getRootUrl(n)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(n,r){const i=new na;return i._futureSnapshot=r._futureSnapshot,i._routerState=r._routerState,i.snapshot=r.snapshot,i.outlet=r.outlet,i.component=r.component,i._paramMap=this.proxyObservable(n,"paramMap"),i._queryParamMap=this.proxyObservable(n,"queryParamMap"),i.url=this.proxyObservable(n,"url"),i.params=this.proxyObservable(n,"params"),i.queryParams=this.proxyObservable(n,"queryParams"),i.fragment=this.proxyObservable(n,"fragment"),i.data=this.proxyObservable(n,"data"),i}proxyObservable(n,r){return n.pipe(As(i=>!!i),Vr(i=>this.currentActivatedRoute$.pipe(As(o=>null!==o&&o.component===i),Vr(o=>o&&o.activatedRoute[r]),t4())))}updateActivatedRouteProxy(n,r){const i=this.proxyMap.get(n);if(!i)throw new Error("Could not find activated route proxy for view");i._futureSnapshot=r._futureSnapshot,i._routerState=r._routerState,i.snapshot=r.snapshot,i.outlet=r.outlet,i.component=r.component,this.currentActivatedRoute$.next({component:n,activatedRoute:r})}}return t.\u0275fac=function(n){return new(n||t)(ba("name"),ba("tabs"),E(rl),E(tt),E(lr),E(ze),E(na),E(t,12))},t.\u0275dir=Ot({type:t,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",name:"name"},outputs:{stackWillChange:"stackWillChange",stackDidChange:"stackDidChange",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Ise{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===na?this.route:e===bd?this.childContexts:this.parent.get(e,n)}}const p4=new ft("");let Ese=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){var r;null===(r=this.outletDataSubscriptions.get(n))||void 0===r||r.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=jE([r.queryParams,r.params,r.data]).pipe(Vr(([o,s,a],l)=>(a={...o,...s,...a},0===l?Kt(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const s=FV(r.component);if(s)for(const{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();function bse(t){return null!=t&&t.componentInputBindingEnabled?new Ese:null}let Ase=(()=>{class t{constructor(n,r,i,o,s){this.locationStrategy=n,this.navCtrl=r,this.elementRef=i,this.router=o,this.routerLink=s,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var n;if(null!==(n=this.routerLink)&&void 0!==n&&n.urlTree){const r=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=r}}onClick(n){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),n.preventDefault()}}return t.\u0275fac=function(n){return new(n||t)(E(Zs),E(up),E(tt),E(lr),E($o,8))},t.\u0275dir=Ot({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(n,r){1&n&&Ze("click",function(o){return r.onClick(o)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[Yi]}),t})();const g4=t=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(t):"function"==typeof requestAnimationFrame?requestAnimationFrame(t):setTimeout(t);class m4{constructor(e){this.ctrl=e}create(e){return this.ctrl.create(e||{})}dismiss(e,n,r){return this.ctrl.dismiss(e,n,r)}getTop(){return this.ctrl.getTop()}}F(3503),F(1497),F(2604),F(3003),F(405);var Nse=F(8436),Ose=F(464),_4=(F(7818),F(4133)),Fse=(F(8476),F(9081));F(8221),F(9457);const Vse=Nse.i,Bse=function(){var t=(0,_.A)(function*(e,n){if(!(typeof window>"u"))return yield Vse(),(0,Fse.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"]],{"type":["typeChanged"],"disabled":["disabledChanged"],"side":["sideChanged"],"swipeGesture":["swipeGestureChanged"]}],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]},null,{"activated":["activatedChanged"]}],[1,"ion-fab-list",{"activated":[4],"side":[1]},null,{"activated":["activatedChanged"]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"positionAnchor":[1,"position-anchor"],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"swipeGesture":[1,"swipe-gesture"],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"swipeGesture":["swipeGestureChanged"],"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]},null,{"value":["valueChanged"]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]],{"value":["valueChanged"],"disabled":["disabledChanged"],"readonly":["readonlyChanged"]}]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]},null,{"threshold":["thresholdChanged"],"disabled":["disabledChanged"]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[8],"checked":[32],"setFocus":[64]},null,{"value":["valueChanged"]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1032],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]],{"color":["colorChanged"],"swipeGesture":["swipeGestureChanged"],"value":["valueChanged"],"disabled":["disabledChanged"]}]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]},null,{"selectedTab":["selectedTabChanged"]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[38,"ion-input",{"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"disabled":["disabledChanged"],"placeholder":["placeholderChanged"],"value":["valueChanged"]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]},null,{"lang":["onLangChanged"],"dir":["onDirChanged"],"debounce":["debounceChanged"],"value":["valueChanged"],"showCancelButton":["showCancelButtonChanged"]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"alignment":[1],"activated":[32]},null,{"disabled":["disabledChanged"]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]},null,{"swipeGesture":["swipeGestureChanged"],"root":["rootChanged"]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[38,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[514],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]],{"maxItems":["maxItemsChanged"],"itemsBeforeCollapse":["maxItemsChanged"],"itemsAfterCollapse":["maxItemsChanged"]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]},null,{"url":["onUpdate"],"component":["onUpdate"],"componentProps":["onComponentProps"]}],[0,"ion-route-redirect",{"from":[1],"to":[1]},null,{"from":["propDidChange"],"to":["propDidChange"]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]},null,{"active":["changeActive"]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]},null,{"src":["srcChanged"]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"label":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"legacy":[4],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]},null,{"debounce":["debounceChanged"],"min":["minChanged"],"max":["maxChanged"],"activeBarStart":["activeBarStartChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]},null,{"visible":["visibleChanged"],"disabled":["updateState"],"when":["updateState"]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]],{"button":["buttonChanged"],"counterFormatter":["counterFormatterChanged"]}],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]},null,{"color":["colorChanged"],"position":["positionChanged"]}],[33,"ion-note",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"toggleIcon":[1,"toggle-icon"],"expandedIcon":[1,"expanded-icon"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]},null,{"disabled":["styleChanged"],"isExpanded":["styleChanged"],"placeholder":["styleChanged"],"value":["styleChanged"]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"formatOptions":[16],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isTimePopoverOpen":[32],"forceRenderDate":[32],"confirm":[64],"reset":[64],"cancel":[64]},null,{"formatOptions":["formatOptionsChanged"],"disabled":["disabledChanged"],"min":["minChanged"],"max":["maxChanged"],"presentation":["presentationChanged"],"yearValues":["yearValuesChanged"],"monthValues":["monthValuesChanged"],"dayValues":["dayValuesChanged"],"hourValues":["hourValuesChanged"],"minuteValues":["minuteValuesChanged"],"value":["valueChanged"]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}],[32,"ion-picker-column",{"col":[16]},null,{"col":["colChanged"]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"alignment":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]},null,{"value":["valueChanged"],"checked":["styleChanged"],"color":["styleChanged"],"disabled":["styleChanged"]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"compareWith":[1,"compare-with"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]],{"value":["valueChanged"]}]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]},null,{"disabled":["disabledChanged"]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]},null,{"name":["loadIcon"],"src":["loadIcon"],"icon":["loadIcon"],"ios":["loadIcon"],"md":["loadIcon"]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]],{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"],"buttons":["buttonsChanged"],"inputs":["inputsChanged"]}]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]},null,{"swipeHandler":["swipeHandlerChanged"]}],[33,"ion-title",{"color":[513],"size":[1]},null,{"size":["sizeChanged"]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"disabled":[4],"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]},null,{"value":["valueChange"]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"trigger":["onTriggerChange"],"triggerAction":["onTriggerChange"],"isOpen":["onIsOpenChange"]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"legacy":[4]},null,{"checked":["styleChanged"],"disabled":["styleChanged"]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]]]'),n)});return function(n,r){return t.apply(this,arguments)}}(),Ct=["*"],Yse=(t,e)=>{const n=t.prototype;e.forEach(r=>{Object.defineProperty(n,r,{get(){return this.el[r]},set(i){this.z.runOutsideAngular(()=>this.el[r]=i)},configurable:!0})})},Xse=(t,e)=>{const n=t.prototype;e.forEach(r=>{n[r]=function(){const i=arguments;return this.z.runOutsideAngular(()=>this.el[r].apply(this.el,i))}})};function St(t){return function(n){const{defineCustomElementFn:r,inputs:i,methods:o}=t;return void 0!==r&&r(),i&&Yse(n,i),o&&Xse(n,o),n}}let Uo=(()=>{let t=class{constructor(n,r,i){this.z=i,n.detach(),this.el=r.nativeElement}};return t.\u0275fac=function(n){return new(n||t)(E(ht),E(tt),E(ze))},t.\u0275cmp=et({type:t,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:Ct,decls:1,vars:0,template:function(n,r){1&n&&(function It(t){const e=$e()[Mr][_i];if(!e.projection){const r=e.projection=function yc(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(t?t.length:1,null),i=r.slice();let o=e.child;for(;null!==o;){const s=t?lY(o,t):0;null!==s&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}(),function vt(t,e=0,n){const r=$e(),i=Cn(),o=gf(i,on+t,16,null,n||null);null===o.projection&&(o.projection=e),zh(),(!r[uo]||Rc())&&32&~o.flags&&function fW(t,e,n){zN(e[Zt],0,e,n,KT(t,n,e),LN(n.parent||e[_i],n,e))}(i,r,o)}(0))},encapsulation:2,changeDetection:0}),t=(0,pt.Cg)([St({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],t),t})(),W_=(()=>{class t extends f4{constructor(n,r,i,o,s,a,l,c){super(n,r,i,o,s,a,l,c),this.parentOutlet=c}}return t.\u0275fac=function(n){return new(n||t)(ba("name"),ba("tabs"),E(rl),E(tt),E(lr),E(ze),E(na),E(t,12))},t.\u0275dir=Ot({type:t,selectors:[["ion-router-outlet"]],features:[gn]}),t})(),Ma=(()=>{class t extends Ase{}return t.\u0275fac=(()=>{let e;return function(r){return(e||(e=Vn(t)))(r||t)}})(),t.\u0275dir=Ot({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],features:[gn]}),t})();const Tle={provide:Bi,useExisting:jn(()=>v4),multi:!0};let v4=(()=>{class t extends RS{}return t.\u0275fac=(()=>{let e;return function(r){return(e||(e=Vn(t)))(r||t)}})(),t.\u0275dir=Ot({type:t,selectors:[["ion-input","type","number","max","","formControlName",""],["ion-input","type","number","max","","formControl",""],["ion-input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(n,r){2&n&&Js("max",r._enabled?r.max:null)},features:[Xn([Tle]),gn]}),t})();const Ale={provide:Bi,useExisting:jn(()=>y4),multi:!0};let y4=(()=>{class t extends xS{}return t.\u0275fac=(()=>{let e;return function(r){return(e||(e=Vn(t)))(r||t)}})(),t.\u0275dir=Ot({type:t,selectors:[["ion-input","type","number","min","","formControlName",""],["ion-input","type","number","min","","formControl",""],["ion-input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(n,r){2&n&&Js("min",r._enabled?r.min:null)},features:[Xn([Ale]),gn]}),t})(),Dle=(()=>{class t extends m4{constructor(){super(_4.m),this.angularDelegate=Ye(H_),this.injector=Ye(lt),this.environmentInjector=Ye(Xr)}create(n){return super.create({...n,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();class Sle extends m4{constructor(){super(_4.c),this.angularDelegate=Ye(H_),this.injector=Ye(lt),this.environmentInjector=Ye(Xr)}create(e){return super.create({...e,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}const Rle=(t,e,n)=>()=>{const r=e.defaultView;if(r&&typeof window<"u"){(0,Ose.s)({...t,_zoneGate:o=>n.run(o)});const i="__zone_symbol__addEventListener"in e.body?"__zone_symbol__addEventListener":"addEventListener";return function Lse(){var t=[];if(typeof window<"u"){var e=window;(!e.customElements||e.Element&&(!e.Element.prototype.closest||!e.Element.prototype.matches||!e.Element.prototype.remove||!e.Element.prototype.getRootNode))&&t.push(F.e(7278).then(F.t.bind(F,2190,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||e.NodeList&&!e.NodeList.prototype.forEach||!e.fetch||!function(){try{var r=new URL("b","http://a");return r.pathname="c%20d","http://a/c%20d"===r.href&&r.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&t.push(F.e(9329).then(F.t.bind(F,7783,23)))}return Promise.all(t)}().then(()=>Bse(r,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:g4,jmp:o=>n.runOutsideAngular(o),ael(o,s,a,l){o[i](s,a,l)},rel(o,s,a,l){o.removeEventListener(s,a,l)}}))}};let xle=(()=>{class t{static forRoot(n){return{ngModule:t,providers:[{provide:i4,useValue:n},{provide:lE,useFactory:Rle,multi:!0,deps:[i4,ss,ze]},{provide:p4,useFactory:bse,deps:[lr]}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Jo({type:t}),t.\u0275inj=zn({providers:[H_,Dle,Sle],imports:[nB]}),t})(),I4=(()=>{var t;class e{constructor(){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=et({type:t,selectors:[["app-root"]],decls:1,vars:0,consts:[["id","main-content"]],template:function(r,i){1&r&&me(0,"ion-router-outlet",0)},dependencies:[W_],styles:["ion-menu[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: var(--ion-item-background, var(--ion-background-color, #fff))}ion-menu.md[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--padding-top: 20px;--padding-bottom: 20px}ion-menu.md[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:20px 0}ion-menu.md[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{margin-bottom:30px}ion-menu.md[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%], ion-menu.md[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{padding-left:10px}ion-menu.md[_ngcontent-%COMP%]   ion-list#inbox-list[_ngcontent-%COMP%]{border-bottom:1px solid var(--ion-color-step-150, #d7d8da)}ion-menu.md[_ngcontent-%COMP%]   ion-list#inbox-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{font-size:22px;font-weight:600;min-height:20px}ion-menu.md[_ngcontent-%COMP%]   ion-list#labels-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{font-size:16px;margin-bottom:18px;color:#757575;min-height:26px}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px;border-radius:4px}ion-menu.md[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]{--background: rgba(var(--ion-color-primary-rgb), .14)}ion-menu.md[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#616e7e}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:500}ion-menu.ios[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 20px}ion-menu.ios[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:20px 0 0}ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{line-height:24px;margin-bottom:20px}ion-menu.ios[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;--min-height: 50px}ion-menu.ios[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-menu.ios[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#73849a}ion-menu.ios[_ngcontent-%COMP%]   ion-list#labels-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{margin-bottom:8px}ion-menu.ios[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%], ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{margin-bottom:8px}ion-note[_ngcontent-%COMP%]{display:inline-block;font-size:16px;color:var(--ion-color-medium-shade)}ion-item.selected[_ngcontent-%COMP%]{--color: var(--ion-color-primary)}"]}),e})();function q_(t){return(q_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function kn(t,e,n){return(e=function Mle(t){var e=function Ple(t,e){if("object"!=q_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=q_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==q_(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}F(6020);var yo=F(7852);(0,yo.registerVersion)("firebase","10.9.0","app");class Ole extends De{constructor(e,n){super()}schedule(e,n=0){return this}}const uw={setInterval(t,e,...n){const{delegate:r}=uw;return null!=r&&r.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=uw;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0};class E4 extends Ole{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return uw.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&uw.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Be(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const g1={now:()=>(g1.delegate||Date).now(),delegate:void 0};class K_{constructor(e,n=K_.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}K_.now=g1.now;class w4 extends K_{constructor(e,n=K_.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const Vle=new class Lle extends w4{}(class Fle extends E4{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),m1=new w4(E4),_1=new jf("ANGULARFIRE2_VERSION");class v1{constructor(){return((t,e)=>{const n=(0,yo.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r})($le)}}const $le="app-check";function hp(){}class b4{constructor(e,n=Vle){kn(this,"zone",void 0),kn(this,"delegate",void 0),this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},n,r)}}class Ule{constructor(e){kn(this,"zone",void 0),kn(this,"task",null),this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",hp,{},hp,hp)),n.pipe(eo({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let y1=(()=>{var t;class e{constructor(r){kn(this,"ngZone",void 0),kn(this,"outsideAngular",void 0),kn(this,"insideAngular",void 0),this.ngZone=r,this.outsideAngular=r.runOutsideAngular(()=>new b4(Zone.current)),this.insideAngular=r.run(()=>new b4(Zone.current,m1)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return t=e,kn(e,"\u0275fac",function(r){return new(r||t)(Ke(ze))}),kn(e,"\u0275prov",Qe({token:t,factory:t.\u0275fac,providedIn:"root"})),e})();function fp(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function C4(t){return t.pipe(Kc(fp().outsideAngular))}function jo(t){return function zle(t){return function(n){return(n=n.lift(new Ule(t.ngZone))).pipe(Wf(t.outsideAngular),Kc(t.insideAngular))}}(fp())(t)}var Dn=F(3345);Dn.A.registerVersion("firebase","10.9.0","app-compat");const qle=["ngOnDestroy"];class T4{constructor(e){return e}}const Q_=new ft("angularfire2.app.options"),Y_=new ft("angularfire2.app.name");function dw(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const s=Dn.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Dn.A.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){const a=!!module.hot;Yle("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new T4(s)}const Yle=(t,...e)=>{},Xle={provide:T4,useFactory:dw,deps:[Q_,ze,[new xl,Y_]]};let Jle=(()=>{var t;class e{static initializeApp(r,i){return{ngModule:e,providers:[{provide:Q_,useValue:r},{provide:Y_,useValue:i}]}}constructor(r){Dn.A.registerVersion("angularfire",_1.full,"core"),Dn.A.registerVersion("angularfire",_1.full,"app-compat"),Dn.A.registerVersion("angular",gX.full,r.toString())}}return t=e,kn(e,"\u0275fac",function(r){return new(r||t)(Ke(Ca))}),kn(e,"\u0275mod",Jo({type:t})),kn(e,"\u0275inj",zn({providers:[Xle]})),e})();function I1(t,e,n,r,i){const[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return function Zle(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,s)||(A4("error",`${e} was already initialized on the ${n} Firebase App with different settings.${ece?" You may need to reload as Firebase is not HMR aware.":""}`),A4("warn",{is:i,was:s})),o;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const ece=typeof module<"u"&&!!module.hot,A4=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);class nce extends te{constructor(e=1/0,n=1/0,r=g1){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=n.now();let a=0;for(let l=1;l<r.length&&r[l]<=s;l+=2)a=l;a&&r.splice(0,a+1)}}}function E1(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new qn({next:()=>{r.unsubscribe(),t()}});return as(e(...n)).subscribe(r)}function D4(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=null!=t?t:1/0,function rce(t={}){const{connector:e=(()=>new te),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,l,c=0,h=!1,f=!1;const m=()=>{null==a||a.unsubscribe(),a=void 0},v=()=>{m(),s=l=void 0,h=f=!1},w=()=>{const R=s;v(),null==R||R.unsubscribe()};return Rt((R,N)=>{c++,!f&&!h&&m();const z=l=null!=l?l:e();N.add(()=>{c--,0===c&&!f&&!h&&(a=E1(w,i))}),z.subscribe(N),!s&&c>0&&(s=new qn({next:Q=>z.next(Q),error:Q=>{f=!0,m(),a=E1(v,n,Q),z.error(Q)},complete:()=>{h=!0,m(),a=E1(v,r),z.complete()}}),as(R).subscribe(s))})(o)}}({connector:()=>new nce(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function S4(t,e){return Dt(e)?Vr(()=>t,e):Vr(()=>t)}const R4=new ft("angularfire2.auth.use-emulator"),x4=new ft("angularfire2.auth.settings"),P4=new ft("angularfire2.auth.tenant-id"),M4=new ft("angularfire2.auth.langugage-code"),k4=new ft("angularfire2.auth.use-device-language"),N4=new ft("angularfire.auth.persistence"),O4=(t,e,n,r,i,o,s,a)=>I1(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const l=e.runOutsideAngular(()=>t.auth());if(n&&l.useEmulator(...n),r&&(l.tenantId=r),l.languageCode=i,o&&l.useDeviceLanguage(),s)for(const[c,h]of Object.entries(s))l.settings[c]=h;return a&&l.setPersistence(a),l},[n,r,i,o,s,a]);let to=(()=>{var t;class e{constructor(r,i,o,s,a,l,c,h,f,m,v,w){kn(this,"authState",void 0),kn(this,"idToken",void 0),kn(this,"user",void 0),kn(this,"idTokenResult",void 0),kn(this,"credential",void 0);const R=new te,N=Kt(void 0).pipe(Kc(a.outsideAngular),Vr(()=>s.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,6020)))),xt(()=>dw(r,s,i)),xt(z=>O4(z,s,l,h,f,m,c,v)),D4({bufferSize:1,refCount:!1}));if(SE(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Kt(null);else{N.pipe(Xc()).subscribe();const z=N.pipe(Vr(Ae=>Ae.getRedirectResult().then(Je=>Je,()=>null)),jo,D4({bufferSize:1,refCount:!1})),Q=N.pipe(Vr(Ae=>new Un(Je=>({unsubscribe:s.runOutsideAngular(()=>Ae.onAuthStateChanged(mt=>Je.next(mt),mt=>Je.error(mt),()=>Je.complete()))})))),Te=N.pipe(Vr(Ae=>new Un(Je=>({unsubscribe:s.runOutsideAngular(()=>Ae.onIdTokenChanged(mt=>Je.next(mt),mt=>Je.error(mt),()=>Je.complete()))}))));this.authState=z.pipe(S4(Q),Wf(a.outsideAngular),Kc(a.insideAngular)),this.user=z.pipe(S4(Te),Wf(a.outsideAngular),Kc(a.insideAngular)),this.idToken=this.user.pipe(Vr(Ae=>Ae?er(Ae.getIdToken()):Kt(null))),this.idTokenResult=this.user.pipe(Vr(Ae=>Ae?er(Ae.getIdTokenResult()):Kt(null))),this.credential=function tce(...t){const e=b_(t),n=function Yte(t,e){return"number"==typeof oS(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?as(r[0]):Qf(n)(er(r,e)):xa}(z,R,this.authState.pipe(As(Ae=>!Ae))).pipe(xt(Ae=>null!=Ae&&Ae.user?Ae:null),Wf(a.outsideAngular),Kc(a.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var s;if(t[o])return null!=r&&null!==(s=r.spy)&&void 0!==s&&s.get&&r.spy.get(o,t[o]),t[o];if(qle.indexOf(o)>-1)return()=>{};const a=e.toPromise().then(l=>{const c=null==l?void 0:l[o];return"function"==typeof c?c.bind(l):null!=c&&c.then?c.then(h=>n.run(()=>h)):n.run(()=>c)});return new Proxy(()=>{},{get:(l,c)=>a[c],apply:(l,c,h)=>a.then(f=>{var m;const v=null==f?void 0:f(...h);return null!=r&&null!==(m=r.spy)&&void 0!==m&&m.apply&&r.spy.apply(o,h,v),v})})})}))(this,N,s,{spy:{apply:(z,Q,Te)=>{(z.startsWith("signIn")||z.startsWith("createUser"))&&Te.then(Ae=>R.next(Ae))}}})}}return t=e,kn(e,"\u0275fac",function(r){return new(r||t)(Ke(Q_),Ke(Y_,8),Ke(Ca),Ke(ze),Ke(y1),Ke(R4,8),Ke(x4,8),Ke(P4,8),Ke(M4,8),Ke(k4,8),Ke(N4,8),Ke(v1,8))}),kn(e,"\u0275prov",Qe({token:t,factory:t.\u0275fac,providedIn:"any"})),e})(),oce=(()=>{var t;class e{constructor(){Dn.A.registerVersion("angularfire",_1.full,"auth-compat")}}return t=e,kn(e,"\u0275fac",function(r){return new(r||t)}),kn(e,"\u0275mod",Jo({type:t})),kn(e,"\u0275inj",zn({providers:[to]})),e})();var Pt,ka=F(1362),Ss=F(8041),x=F(1076),sce=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Na={},w1=w1||{},hn=sce||self;function hw(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function X_(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var b1="closure_uid_"+(1e9*Math.random()>>>0),lce=0;function cce(t,e,n){return t.call.apply(t.bind,arguments)}function uce(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Io(t,e,n){return(Io=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cce:uce).apply(null,arguments)}function fw(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function $i(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function eu(){this.s=this.s,this.o=this.o}eu.prototype.s=!1,eu.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function ace(t){Object.prototype.hasOwnProperty.call(t,b1)&&t[b1]||(t[b1]=++lce)}(this)},eu.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const F4=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function C1(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function L4(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(hw(r)){const i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function Eo(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Eo.prototype.h=function(){this.defaultPrevented=!0};var hce=function(){if(!hn.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};hn.addEventListener("test",n,e),hn.removeEventListener("test",n,e)}catch{}return t}();function J_(t){return/^[\s\xa0]*$/.test(t)}function pw(){var t=hn.navigator;return t&&(t=t.userAgent)?t:""}function cl(t){return-1!=pw().indexOf(t)}function T1(t){return T1[" "](t),t}T1[" "]=function(){};var D1,t,pce=cl("Opera"),pp=cl("Trident")||cl("MSIE"),V4=cl("Edge"),A1=V4||pp,B4=cl("Gecko")&&!(-1!=pw().toLowerCase().indexOf("webkit")&&!cl("Edge"))&&!(cl("Trident")||cl("MSIE"))&&!cl("Edge"),gce=-1!=pw().toLowerCase().indexOf("webkit")&&!cl("Edge");function $4(){var t=hn.document;return t?t.documentMode:void 0}e:{var S1="",R1=(t=pw(),B4?/rv:([^\);]+)(\)|;)/.exec(t):V4?/Edge\/([\d\.]+)/.exec(t):pp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):gce?/WebKit\/(\S+)/.exec(t):pce?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(R1&&(S1=R1?R1[1]:""),pp){var x1=$4();if(null!=x1&&x1>parseFloat(S1)){D1=String(x1);break e}}D1=S1}var mce=hn.document&&pp&&($4()||parseInt(D1,10))||void 0;function Z_(t,e){if(Eo.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(B4){e:{try{T1(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:_ce[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Z_.$.h.call(this)}}$i(Z_,Eo);var _ce={2:"touch",3:"pen",4:"mouse"};Z_.prototype.h=function(){Z_.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ev="closure_listenable_"+(1e6*Math.random()|0),vce=0;function yce(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++vce,this.fa=this.ia=!1}function gw(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function M1(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function j4(t){const e={};for(const n in t)e[n]=t[n];return e}const z4="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function H4(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let o=0;o<z4.length;o++)n=z4[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function mw(t){this.src=t,this.g={},this.h=0}function k1(t,e){var n=e.type;if(n in t.g){var o,r=t.g[n],i=F4(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(gw(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function N1(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}mw.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=N1(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):((e=new yce(e,this.src,o,!!r,i)).ia=n,t.push(e)),e};var O1="closure_lm_"+(1e6*Math.random()|0),F1={};function G4(t,e,n,r,i){if(r&&r.once)return q4(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)G4(t,e[o],n,r,i);return null}return n=$1(n),t&&t[ev]?t.O(e,n,X_(r)?!!r.capture:!!r,i):W4(t,e,n,!1,r,i)}function W4(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=X_(i)?!!i.capture:!!i,a=V1(t);if(a||(t[O1]=a=new mw(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function Ece(){const e=wce;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)hce||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Q4(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function q4(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)q4(t,e[o],n,r,i);return null}return n=$1(n),t&&t[ev]?t.P(e,n,X_(r)?!!r.capture:!!r,i):W4(t,e,n,!0,r,i)}function K4(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)K4(t,e[o],n,r,i);else r=X_(r)?!!r.capture:!!r,n=$1(n),t&&t[ev]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=N1(o=t.g[e],n,r,i))&&(gw(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=V1(t))&&(e=t.g[e.toString()],t=-1,e&&(t=N1(e,n,r,i)),(n=-1<t?e[t]:null)&&L1(n))}function L1(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[ev])k1(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Q4(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=V1(e))?(k1(n,t),0==n.h&&(n.src=null,e[O1]=null)):gw(t)}}}function Q4(t){return t in F1?F1[t]:F1[t]="on"+t}function wce(t,e){if(t.fa)t=!0;else{e=new Z_(e,this);var n=t.listener,r=t.la||t.src;t.ia&&L1(t),t=n.call(r,e)}return t}function V1(t){return(t=t[O1])instanceof mw?t:null}var B1="__closure_events_fn_"+(1e9*Math.random()>>>0);function $1(t){return"function"==typeof t?t:(t[B1]||(t[B1]=function(e){return t.handleEvent(e)}),t[B1])}function Ui(){eu.call(this),this.i=new mw(this),this.S=this,this.J=null}function no(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Eo(e,t);else if(e instanceof Eo)e.target=e.target||t;else{var i=e;H4(e=new Eo(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=_w(s,r,!0,e)&&i}if(i=_w(s=e.g=t,r,!0,e)&&i,i=_w(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=_w(s=e.g=n[o],r,!1,e)&&i}function _w(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,l=s.la||s.src;s.ia&&k1(t.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}$i(Ui,eu),Ui.prototype[ev]=!0,Ui.prototype.removeEventListener=function(t,e,n,r){K4(this,t,e,n,r)},Ui.prototype.N=function(){if(Ui.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)gw(n[r]);delete t.g[e],t.h--}}this.J=null},Ui.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Ui.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var U1=hn.JSON.stringify;function Cce(){var t=j1;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Y4=new class bce{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Ace,t=>t.reset());class Ace{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Dce(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Sce(t){hn.setTimeout(()=>{throw t},0)}let tv,nv=!1,j1=new class Tce{constructor(){this.h=this.g=null}add(e,n){const r=Y4.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},X4=()=>{const t=hn.Promise.resolve(void 0);tv=()=>{t.then(Rce)}};var Rce=()=>{for(var t;t=Cce();){try{t.h.call(t.g)}catch(n){Sce(n)}var e=Y4;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}nv=!1};function vw(t,e){Ui.call(this),this.h=t||1,this.g=e||hn,this.j=Io(this.qb,this),this.l=Date.now()}function z1(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function H1(t,e,n){if("function"==typeof t)n&&(t=Io(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Io(t.handleEvent,t)}return 2147483647<Number(e)?-1:hn.setTimeout(t,e||0)}function J4(t){t.g=H1(()=>{t.g=null,t.i&&(t.i=!1,J4(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}$i(vw,Ui),(Pt=vw.prototype).ga=!1,Pt.T=null,Pt.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),no(this,"tick"),this.ga&&(z1(this),this.start()))}},Pt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Pt.N=function(){vw.$.N.call(this),z1(this),delete this.g};class xce extends eu{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:J4(this)}N(){super.N(),this.g&&(hn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rv(t){eu.call(this),this.h=t,this.g={}}$i(rv,eu);var Z4=[];function e3(t,e,n,r){Array.isArray(n)||(n&&(Z4[0]=n.toString()),n=Z4);for(var i=0;i<n.length;i++){var o=G4(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function t3(t){M1(t.g,function(e,n){this.g.hasOwnProperty(n)&&L1(e)},t),t.g={}}function yw(){this.g=!0}function gp(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Nce(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return U1(n)}catch{return e}}(t,n)+(r?" "+r:"")})}rv.prototype.N=function(){rv.$.N.call(this),t3(this)},rv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yw.prototype.Ea=function(){this.g=!1},yw.prototype.info=function(){};var Ad={},n3=null;function Iw(){return n3=n3||new Ui}function r3(t){Eo.call(this,Ad.Ta,t)}function iv(t){const e=Iw();no(e,new r3(e))}function i3(t,e){Eo.call(this,Ad.STAT_EVENT,t),this.stat=e}function zo(t){const e=Iw();no(e,new i3(e,t))}function o3(t,e){Eo.call(this,Ad.Ua,t),this.size=e}function ov(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return hn.setTimeout(function(){t()},e)}Ad.Ta="serverreachability",$i(r3,Eo),Ad.STAT_EVENT="statevent",$i(i3,Eo),Ad.Ua="timingevent",$i(o3,Eo);var Ew={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},s3={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function G1(){}function l3(){}G1.prototype.h=null;var K1,sv={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function W1(){Eo.call(this,"d")}function q1(){Eo.call(this,"c")}function ww(){}function av(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new rv(this),this.P=Oce,this.V=new vw(t=A1?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new c3}function c3(){this.i=null,this.g="",this.h=!1}$i(W1,Eo),$i(q1,Eo),$i(ww,G1),ww.prototype.g=function(){return new XMLHttpRequest},ww.prototype.i=function(){return{}},K1=new ww;var Oce=45e3,u3={},Q1={};function Y1(t,e,n){t.L=1,t.A=Aw(Xl(e)),t.u=n,t.S=!0,d3(t,null)}function d3(t,e){t.G=Date.now(),lv(t),t.B=Xl(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),E3(n.i,"t",r),t.o=0,n=t.l.J,t.h=new c3,t.g=G3(t.l,n?e:null,!t.u),0<t.O&&(t.M=new xce(Io(t.Pa,t,t.g),t.O)),e3(t.U,t.g,"readystatechange",t.nb),e=t.I?j4(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),iv(),function Pce(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.v,t.B,t.m,t.W,t.u)}function h3(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function f3(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=Fce(t,n),i==Q1){4==e&&(t.s=4,zo(14),r=!1),gp(t.j,t.m,null,"[Incomplete Response]");break}if(i==u3){t.s=4,zo(15),gp(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}gp(t.j,t.m,i,null),X1(t,i)}h3(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,zo(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),iR(e),e.M=!0,zo(11))):(gp(t.j,t.m,n,"[Invalid Chunked Response]"),Dd(t),cv(t))}function Fce(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?Q1:(n=Number(e.substring(n,r)),isNaN(n)?u3:(r+=1)+n>e.length?Q1:(e=e.slice(r,r+n),t.o=r+n,e))}function lv(t){t.Y=Date.now()+t.P,p3(t,t.P)}function p3(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=ov(Io(t.lb,t),e)}function bw(t){t.C&&(hn.clearTimeout(t.C),t.C=null)}function cv(t){0==t.l.H||t.J||U3(t.l,t)}function Dd(t){bw(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,z1(t.V),t3(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function X1(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||J1(n.i,t)))if(!t.K&&J1(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;Mw(n),xw(n)}rR(n),zo(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=ov(Io(n.ib,n),6e3));if(1>=C3(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Rd(n,11)}else if((t.K||n.g==t)&&Mw(n),!J_(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const h=c[3];null!=h&&(n.ra=h,n.l.info("VER="+n.ra));const f=c[4];null!=f&&(n.Ga=f,n.l.info("SVER="+n.Ga));const m=c[5];null!=m&&"number"==typeof m&&0<m&&(n.L=r=1.5*m,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const v=t.g;if(v){const w=v.g?v.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(w){var o=r.i;o.g||-1==w.indexOf("spdy")&&-1==w.indexOf("quic")&&-1==w.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Z1(o,o.h),o.h=null))}if(r.F){const R=v.g?v.g.getResponseHeader("X-HTTP-Session-Id"):null;R&&(r.Da=R,kr(r.I,r.F,R))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=t;if((r=n).wa=H3(r,r.J?r.pa:null,r.Y),s.K){T3(r.i,s);var a=s,l=r.L;l&&a.setTimeout(l),a.C&&(bw(a),lv(a)),r.g=s}else B3(r);0<n.j.length&&Pw(n)}else"stop"!=c[0]&&"close"!=c[0]||Rd(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Rd(n,7):nR(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}iv()}catch{}}function g3(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(hw(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function Vce(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(hw(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function Lce(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(hw(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(Pt=av.prototype).setTimeout=function(t){this.P=t},Pt.nb=function(t){t=t.target;const e=this.M;e&&3==ul(t)?e.l():this.Pa(t)},Pt.Pa=function(t){try{if(t==this.g)e:{const h=ul(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||A1||this.g&&(this.h.h||this.g.ja()||k3(this.g)))){this.J||4!=h||7==e||iv(),bw(this);var n=this.g.da();this.ca=n;t:if(h3(this)){var r=k3(this.g);t="";var i=r.length,o=4==ul(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Dd(this),cv(this);var s="";break t}this.h.i=new hn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function Mce(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.v,this.B,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J_(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,zo(12),Dd(this),cv(this);break e}gp(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,X1(this,n)}this.S?(f3(this,h,s),A1&&this.i&&3==h&&(e3(this.U,this.V,"tick",this.mb),this.V.start())):(gp(this.j,this.m,s,null),X1(this,s)),4==h&&Dd(this),this.i&&!this.J&&(4==h?U3(this.l,this):(this.i=!1,lv(this)))}else(function nue(t){const e={};t=(t.g&&2<=ul(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(J_(t[r]))continue;var n=Dce(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const o=e[i]||[];e[i]=o,o.push(n)}!function Ice(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,zo(12)):(this.s=0,zo(13)),Dd(this),cv(this)}}}catch{}},Pt.mb=function(){if(this.g){var t=ul(this.g),e=this.g.ja();this.o<e.length&&(bw(this),f3(this,t,e),this.i&&4!=t&&lv(this))}},Pt.cancel=function(){this.J=!0,Dd(this)},Pt.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function kce(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(iv(),zo(17)),Dd(this),this.s=2,cv(this)):p3(this,this.Y-t)};var m3=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sd(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Sd){this.h=t.h,Cw(this,t.j),this.s=t.s,this.g=t.g,Tw(this,t.m),this.l=t.l;var e=t.i,n=new hv;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),_3(this,n),this.o=t.o}else t&&(e=String(t).match(m3))?(this.h=!1,Cw(this,e[1]||"",!0),this.s=uv(e[2]||""),this.g=uv(e[3]||"",!0),Tw(this,e[4]),this.l=uv(e[5]||"",!0),_3(this,e[6]||"",!0),this.o=uv(e[7]||"")):(this.h=!1,this.i=new hv(null,this.h))}function Xl(t){return new Sd(t)}function Cw(t,e,n){t.j=n?uv(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Tw(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function _3(t,e,n){e instanceof hv?(t.i=e,function Gce(t,e){e&&!t.j&&(tu(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(y3(this,r),E3(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=dv(e,zce)),t.i=new hv(e,t.h))}function kr(t,e,n){t.i.set(e,n)}function Aw(t){return kr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function uv(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function dv(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,$ce),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function $ce(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Sd.prototype.toString=function(){var t=[],e=this.j;e&&t.push(dv(e,v3,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(dv(e,v3,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(dv(n,"/"==n.charAt(0)?jce:Uce,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",dv(n,Hce)),t.join("")};var v3=/[#\/\?@]/g,Uce=/[#\?:]/g,jce=/[#\?]/g,zce=/[#\?@]/g,Hce=/#/g;function hv(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function tu(t){t.g||(t.g=new Map,t.h=0,t.i&&function Bce(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function y3(t,e){tu(t),e=mp(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function I3(t,e){return tu(t),e=mp(t,e),t.g.has(e)}function E3(t,e,n){y3(t,e),0<n.length&&(t.i=null,t.g.set(mp(t,e),C1(n)),t.h+=n.length)}function mp(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Pt=hv.prototype).add=function(t,e){tu(this),this.i=null,t=mp(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Pt.forEach=function(t,e){tu(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},Pt.ta=function(){tu(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n},Pt.Z=function(t){tu(this);let e=[];if("string"==typeof t)I3(this,t)&&(e=e.concat(this.g.get(mp(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},Pt.set=function(t,e){return tu(this),this.i=null,I3(this,t=mp(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Pt.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},Pt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};var Wce=class{constructor(t,e){this.g=t,this.map=e}};function w3(t){this.l=t||qce,t=hn.PerformanceNavigationTiming?0<(t=hn.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(hn.g&&hn.g.Ka&&hn.g.Ka()&&hn.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var qce=10;function b3(t){return!!t.h||!!t.g&&t.g.size>=t.j}function C3(t){return t.h?1:t.g?t.g.size:0}function J1(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Z1(t,e){t.g?t.g.add(e):t.h=e}function T3(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function A3(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return C1(t.i)}w3.prototype.cancel=function(){if(this.i=A3(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var Kce=class{stringify(t){return hn.JSON.stringify(t,void 0)}parse(t){return hn.JSON.parse(t,void 0)}};function Qce(){this.g=new Kce}function Yce(t,e,n){const r=n||"";try{g3(t,function(i,o){let s=i;X_(i)&&(s=U1(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Dw(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function fv(t){this.l=t.ec||null,this.j=t.ob||!1}function Sw(t,e){Ui.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=eR,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$i(fv,G1),fv.prototype.g=function(){return new Sw(this.l,this.j)},fv.prototype.i=function(t){return function(){return t}}({}),$i(Sw,Ui);var eR=0;function D3(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function pv(t){t.readyState=4,t.l=null,t.j=null,t.A=null,gv(t)}function gv(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Pt=Sw.prototype).open=function(t,e){if(this.readyState!=eR)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,gv(this)},Pt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||hn).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Pt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,pv(this)),this.readyState=eR},Pt.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,gv(this)),this.g&&(this.readyState=3,gv(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof hn.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;D3(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},Pt.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?pv(this):gv(this),3==this.readyState&&D3(this)}},Pt.Za=function(t){this.g&&(this.response=this.responseText=t,pv(this))},Pt.Ya=function(t){this.g&&(this.response=t,pv(this))},Pt.ka=function(){this.g&&pv(this)},Pt.setRequestHeader=function(t,e){this.v.append(t,e)},Pt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Pt.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Sw.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Jce=hn.JSON.parse;function Zr(t){Ui.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=S3,this.L=this.M=!1}$i(Zr,Ui);var S3="",Zce=/^https?$/i,eue=["POST","PUT"];function R3(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,x3(t),Rw(t)}function x3(t){t.F||(t.F=!0,no(t,"complete"),no(t,"error"))}function P3(t){if(t.h&&typeof w1<"u"&&(!t.C[1]||4!=ul(t)||2!=t.da()))if(t.v&&4==ul(t))H1(t.La,0,t);else if(no(t,"readystatechange"),4==ul(t)){t.h=!1;try{const s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===s){var i=String(t.I).match(m3)[1]||null;!i&&hn.self&&hn.self.location&&(i=hn.self.location.protocol.slice(0,-1)),r=!Zce.test(i?i.toLowerCase():"")}n=r}if(n)no(t,"complete"),no(t,"success");else{t.m=6;try{var o=2<ul(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",x3(t)}}finally{Rw(t)}}}function Rw(t,e){if(t.g){M3(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||no(t,"ready");try{n.onreadystatechange=r}catch{}}}function M3(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(hn.clearTimeout(t.A),t.A=null)}function ul(t){return t.g?t.g.readyState:0}function k3(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case S3:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function N3(t){let e="";return M1(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function tR(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=N3(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):kr(t,e,n))}function mv(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function O3(t){this.Ga=0,this.j=[],this.l=new yw,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=mv("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=mv("baseRetryDelayMs",5e3,t),this.hb=mv("retryDelaySeedMs",1e4,t),this.eb=mv("forwardChannelMaxRetries",2,t),this.xa=mv("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new w3(t&&t.concurrentRequestLimit),this.Ja=new Qce,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function nR(t){if(F3(t),3==t.H){var e=t.W++,n=Xl(t.I);if(kr(n,"SID",t.K),kr(n,"RID",e),kr(n,"TYPE","terminate"),_v(t,n),(e=new av(t,t.l,e)).L=2,e.A=Aw(Xl(n)),n=!1,hn.navigator&&hn.navigator.sendBeacon)try{n=hn.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&hn.Image&&((new Image).src=e.A,n=!0),n||(e.g=G3(e.l,null),e.g.ha(e.A)),e.G=Date.now(),lv(e)}z3(t)}function xw(t){t.g&&(iR(t),t.g.cancel(),t.g=null)}function F3(t){xw(t),t.u&&(hn.clearTimeout(t.u),t.u=null),Mw(t),t.i.cancel(),t.m&&("number"==typeof t.m&&hn.clearTimeout(t.m),t.m=null)}function Pw(t){if(!b3(t.i)&&!t.m){t.m=!0;var e=t.Na;tv||X4(),nv||(tv(),nv=!0),j1.add(e,t),t.C=0}}function L3(t,e){var n;n=e?e.m:t.W++;const r=Xl(t.I);kr(r,"SID",t.K),kr(r,"RID",n),kr(r,"AID",t.V),_v(t,r),t.o&&t.s&&tR(r,t.o,t.s),n=new av(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=V3(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Z1(t.i,n),Y1(n,r,e)}function _v(t,e){t.na&&M1(t.na,function(n,r){kr(e,r,n)}),t.h&&g3({},function(n,r){kr(e,r,n)})}function V3(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Io(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){const s=["count="+n];-1==o?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let l=0;l<n;l++){let c=i[l].g;const h=i[l].map;if(c-=o,0>c)o=Math.max(0,i[l].g-100),a=!1;else try{Yce(h,s,"req"+c+"_")}catch{r&&r(h)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function B3(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;tv||X4(),nv||(tv(),nv=!0),j1.add(e,t),t.A=0}}function rR(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=ov(Io(t.Ma,t),j3(t,t.A)),t.A++,0))}function iR(t){null!=t.B&&(hn.clearTimeout(t.B),t.B=null)}function $3(t){t.g=new av(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Xl(t.wa);kr(e,"RID","rpc"),kr(e,"SID",t.K),kr(e,"AID",t.V),kr(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&kr(e,"TO",t.qa),kr(e,"TYPE","xmlhttp"),_v(t,e),t.o&&t.s&&tR(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Aw(Xl(e)),n.u=null,n.S=!0,d3(n,t)}function Mw(t){null!=t.v&&(hn.clearTimeout(t.v),t.v=null)}function U3(t,e){var n=null;if(t.g==e){Mw(t),iR(t),t.g=null;var r=2}else{if(!J1(t.i,e))return;n=e.F,T3(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;no(r=Iw(),new o3(r,n)),Pw(t)}else B3(t);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function rue(t,e){return!(C3(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=ov(Io(t.Na,t,e),j3(t,t.C)),t.C++,0)))}(t,e)||2==r&&rR(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Rd(t,5);break;case 4:Rd(t,10);break;case 3:Rd(t,6);break;default:Rd(t,2)}}function j3(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Rd(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=Io(t.pb,t);n||(n=new Sd("//www.google.com/images/cleardot.gif"),hn.location&&"http"==hn.location.protocol||Cw(n,"https"),Aw(n)),function Xce(t,e){const n=new yw;if(hn.Image){const r=new Image;r.onload=fw(Dw,n,r,"TestLoadImage: loaded",!0,e),r.onerror=fw(Dw,n,r,"TestLoadImage: error",!1,e),r.onabort=fw(Dw,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=fw(Dw,n,r,"TestLoadImage: timeout",!1,e),hn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else zo(2);t.H=0,t.h&&t.h.za(e),z3(t),F3(t)}function z3(t){if(t.H=0,t.ma=[],t.h){const e=A3(t.i);(0!=e.length||0!=t.j.length)&&(L4(t.ma,e),L4(t.ma,t.j),t.i.i.length=0,C1(t.j),t.j.length=0),t.h.ya()}}function H3(t,e,n){var r=n instanceof Sd?Xl(n):new Sd(n);if(""!=r.g)e&&(r.g=e+"."+r.g),Tw(r,r.m);else{var i=hn.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Sd(null);r&&Cw(o,r),e&&(o.g=e),i&&Tw(o,i),n&&(o.l=n),r=o}return e=t.Da,(n=t.F)&&e&&kr(r,n,e),kr(r,"VER",t.ra),_v(t,r),r}function G3(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Zr(t.Ha&&!t.va?new fv({ob:n}):t.va)).Oa(t.J),e}function W3(){}function kw(){if(pp&&!(10<=Number(mce)))throw Error("Environmental error: no available transport.")}function Rs(t,e){Ui.call(this),this.g=new O3(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!J_(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!J_(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new _p(this)}function q3(t){W1.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function K3(){q1.call(this),this.status=1}function _p(t){this.g=t}function Oa(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function oR(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var o=t.g[3],s=(e=t.g[0])+(o^(n=t.g[1])&((i=t.g[2])^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=n+(s<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=e+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=e+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=e+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(e=n+((s=e+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(e^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}function cr(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=0|t[i];r&&o==e||(n[i]=o,r=!1)}this.g=n}(Pt=Zr.prototype).Oa=function(t){this.M=t},Pt.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():K1.g(),this.C=function a3(t){return t.h||(t.h=t.i())}(this.u?this.u:K1),this.g.onreadystatechange=Io(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){return void R3(this,o)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())n.set(o,r.get(o))}r=Array.from(n.keys()).find(o=>"content-type"==o.toLowerCase()),i=hn.FormData&&t instanceof hn.FormData,!(0<=F4(eue,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{M3(this),0<this.B&&((this.L=function tue(t){return pp&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Io(this.ua,this)):this.A=H1(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){R3(this,o)}},Pt.ua=function(){typeof w1<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,no(this,"timeout"),this.abort(8))},Pt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,no(this,"complete"),no(this,"abort"),Rw(this))},Pt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rw(this,!0)),Zr.$.N.call(this)},Pt.La=function(){this.s||(this.G||this.v||this.l?P3(this):this.kb())},Pt.kb=function(){P3(this)},Pt.isActive=function(){return!!this.g},Pt.da=function(){try{return 2<ul(this)?this.g.status:-1}catch{return-1}},Pt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Pt.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Jce(e)}},Pt.Ia=function(){return this.m},Pt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Pt=O3.prototype).ra=8,Pt.H=1,Pt.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new av(this,this.l,t);let o=this.s;if(this.U&&(o?(o=j4(o),H4(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=V3(this,i,e),kr(n=Xl(this.I),"RID",t),kr(n,"CVER",22),this.F&&kr(n,"X-HTTP-Session-Id",this.F),_v(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(N3(o)))+"&"+e:this.o&&tR(n,this.o,o)),Z1(this.i,i),this.bb&&kr(n,"TYPE","init"),this.P?(kr(n,"$req",e),kr(n,"SID","null"),i.aa=!0,Y1(i,n,null)):Y1(i,n,e),this.H=2}}else 3==this.H&&(t?L3(this,t):0==this.j.length||b3(this.i)||L3(this))},Pt.Ma=function(){if(this.u=null,$3(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ov(Io(this.jb,this),t)}},Pt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,zo(10),xw(this),$3(this))},Pt.ib=function(){null!=this.v&&(this.v=null,xw(this),rR(this),zo(19))},Pt.pb=function(t){t?(this.l.info("Successfully pinged google.com"),zo(2)):(this.l.info("Failed to ping google.com"),zo(1))},Pt.isActive=function(){return!!this.h&&this.h.isActive(this)},(Pt=W3.prototype).Ba=function(){},Pt.Aa=function(){},Pt.za=function(){},Pt.ya=function(){},Pt.isActive=function(){return!0},Pt.Va=function(){},kw.prototype.g=function(t,e){return new Rs(t,e)},$i(Rs,Ui),Rs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;zo(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=H3(t,null,t.Y),Pw(t)},Rs.prototype.close=function(){nR(this.g)},Rs.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=U1(t),t=n);e.j.push(new Wce(e.fb++,t)),3==e.H&&Pw(e)},Rs.prototype.N=function(){this.g.h=null,delete this.j,nR(this.g),delete this.g,Rs.$.N.call(this)},$i(q3,W1),$i(K3,q1),$i(_p,W3),_p.prototype.Ba=function(){no(this.g,"a")},_p.prototype.Aa=function(t){no(this.g,new q3(t))},_p.prototype.za=function(t){no(this.g,new K3)},_p.prototype.ya=function(){no(this.g,"b")},$i(Oa,function iue(){this.blockSize=-1}),Oa.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Oa.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=n;)oR(this,t,o),o+=this.blockSize;if("string"==typeof t){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){oR(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){oR(this,r),i=0;break}}this.h=i,this.i+=e},Oa.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var oue={};function sR(t){return-128<=t&&128>t?function fce(t,e){var n=oue;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new cr([0|e],0>e?-1:0)}):new cr([0|t],0>t?-1:0)}function dl(t){if(isNaN(t)||!isFinite(t))return vp;if(0>t)return ro(dl(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=aR;return new cr(e,0)}var aR=4294967296,vp=sR(0),lR=sR(1),Y3=sR(16777216);function Jl(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function ra(t){return-1==t.h}function ro(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new cr(n,~t.h).add(lR)}function Nw(t,e){return t.add(ro(e))}function Ow(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function vv(t,e){this.g=t,this.h=e}function Fw(t,e){if(Jl(e))throw Error("division by zero");if(Jl(t))return new vv(vp,vp);if(ra(t))return e=Fw(ro(t),e),new vv(ro(e.g),ro(e.h));if(ra(e))return e=Fw(t,ro(e)),new vv(ro(e.g),e.h);if(30<t.g.length){if(ra(t)||ra(e))throw Error("slowDivide_ only works with positive integers.");for(var n=lR,r=e;0>=r.X(t);)n=X3(n),r=X3(r);var i=yp(n,1),o=yp(r,1);for(r=yp(r,2),n=yp(n,2);!Jl(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=yp(r,1),n=yp(n,1)}return e=Nw(t,i.R(e)),new vv(i,e)}for(i=vp;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=dl(n)).R(e);ra(s)||0<s.X(t);)s=(o=dl(n-=r)).R(e);Jl(o)&&(o=lR),i=i.add(o),t=Nw(t,s)}return new vv(i,t)}function X3(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new cr(n,t.h)}function yp(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new cr(i,t.h)}(Pt=cr.prototype).ea=function(){if(ra(this))return-ro(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:aR+r)*e,e*=aR}return t},Pt.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Jl(this))return"0";if(ra(this))return"-"+ro(this).toString(t);for(var e=dl(Math.pow(t,6)),n=this,r="";;){var i=Fw(n,e).g,o=((0<(n=Nw(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Jl(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},Pt.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},Pt.X=function(t){return ra(t=Nw(this,t))?-1:Jl(t)?0:1},Pt.abs=function(){return ra(this)?ro(this):this},Pt.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&t.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,n[i]=(s&=65535)<<16|(o&=65535)}return new cr(n,-2147483648&n[n.length-1]?-1:0)},Pt.R=function(t){if(Jl(this)||Jl(t))return vp;if(ra(this))return ra(t)?ro(this).R(ro(t)):ro(ro(this).R(t));if(ra(t))return ro(this.R(ro(t)));if(0>this.X(Y3)&&0>t.X(Y3))return dl(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=t.D(i)>>>16,l=65535&t.D(i);n[2*r+2*i]+=s*l,Ow(n,2*r+2*i),n[2*r+2*i+1]+=o*l,Ow(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Ow(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Ow(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new cr(n,0)},Pt.gb=function(t){return Fw(this,t).h},Pt.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new cr(n,this.h&t.h)},Pt.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new cr(n,this.h|t.h)},Pt.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new cr(n,this.h^t.h)},kw.prototype.createWebChannel=kw.prototype.g,Rs.prototype.send=Rs.prototype.u,Rs.prototype.open=Rs.prototype.m,Rs.prototype.close=Rs.prototype.close,Ew.NO_ERROR=0,Ew.TIMEOUT=8,Ew.HTTP_ERROR=6,s3.COMPLETE="complete",l3.EventType=sv,sv.OPEN="a",sv.CLOSE="b",sv.ERROR="c",sv.MESSAGE="d",Ui.prototype.listen=Ui.prototype.O,Zr.prototype.listenOnce=Zr.prototype.P,Zr.prototype.getLastError=Zr.prototype.Sa,Zr.prototype.getLastErrorCode=Zr.prototype.Ia,Zr.prototype.getStatus=Zr.prototype.da,Zr.prototype.getResponseJson=Zr.prototype.Wa,Zr.prototype.getResponseText=Zr.prototype.ja,Zr.prototype.send=Zr.prototype.ha,Zr.prototype.setWithCredentials=Zr.prototype.Oa,Oa.prototype.digest=Oa.prototype.l,Oa.prototype.reset=Oa.prototype.reset,Oa.prototype.update=Oa.prototype.j,cr.prototype.add=cr.prototype.add,cr.prototype.multiply=cr.prototype.R,cr.prototype.modulo=cr.prototype.gb,cr.prototype.compare=cr.prototype.X,cr.prototype.toNumber=cr.prototype.ea,cr.prototype.toString=cr.prototype.toString,cr.prototype.getBits=cr.prototype.D,cr.fromNumber=dl,cr.fromString=function Q3(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return ro(Q3(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=dl(Math.pow(e,8)),r=vp,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=dl(Math.pow(e,o)),r=r.R(o).add(dl(s))):r=(r=r.R(n)).add(dl(s))}return r};var sue=Na.createWebChannelTransport=function(){return new kw},aue=Na.getStatEventTarget=function(){return Iw()},cR=Na.ErrorCode=Ew,lue=Na.EventType=s3,cue=Na.Event=Ad,J3=Na.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Lw=(Na.FetchXmlHttpFactory=fv,Na.WebChannel=l3),uue=Na.XhrIo=Zr,due=Na.Md5=Oa,Ip=Na.Integer=cr;const Z3="@firebase/firestore";class ji{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ji.UNAUTHENTICATED=new ji(null),ji.GOOGLE_CREDENTIALS=new ji("google-credentials-uid"),ji.FIRST_PARTY=new ji("first-party-uid"),ji.MOCK_USER=new ji("mock-user");let Ep="10.9.0";const nu=new Ss.Vy("@firebase/firestore");function wp(){return nu.logLevel}function rt(t,...e){if(nu.logLevel<=Ss.$b.DEBUG){const n=e.map(uR);nu.debug(`Firestore (${Ep}): ${t}`,...n)}}function li(t,...e){if(nu.logLevel<=Ss.$b.ERROR){const n=e.map(uR);nu.error(`Firestore (${Ep}): ${t}`,...n)}}function ls(t,...e){if(nu.logLevel<=Ss.$b.WARN){const n=e.map(uR);nu.warn(`Firestore (${Ep}): ${t}`,...n)}}function uR(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function Ft(t="Unexpected state"){const e=`FIRESTORE (${Ep}) INTERNAL ASSERTION FAILED: `+t;throw li(e),new Error(e)}function Ut(t,e){t||Ft()}function Et(t,e){return t}const Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xe extends x.g{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ai{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class e5{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pue{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ji.UNAUTHENTICATED))}shutdown(){}}class gue{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class mue{constructor(e){this.t=e,this.currentUser=ji.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const o=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let s=new Ai;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ai,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable((0,_.A)(function*(){yield c.promise,yield o(r.currentUser)}))},l=c=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ai)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ut("string"==typeof r.accessToken),new e5(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ut(null===e||"string"==typeof e),new ji(e)}}class _ue{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ji.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vue{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new _ue(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ji.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class t5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yue{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=o=>{null!=o.error&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,rt("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ut("string"==typeof n.token),this.R=n.token,new t5(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Iue(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class n5{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Iue(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function cn(t,e){return t<e?-1:t>e?1:0}function bp(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function r5(t){return t+"\0"}class Br{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Xe(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Xe(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Xe(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xe(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Br.fromMillis(Date.now())}static fromDate(e){return Br.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Br(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?cn(this.nanoseconds,e.nanoseconds):cn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class zt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new zt(e)}static min(){return new zt(new Br(0,0))}static max(){return new zt(new Br(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class yv{constructor(e,n,r){void 0===n?n=0:n>e.length&&Ft(),void 0===r?r=e.length-n:r>e.length-n&&Ft(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===yv.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yv?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class On extends yv{construct(e,n,r){return new On(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Xe(Pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new On(n)}static emptyPath(){return new On([])}}const Eue=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nr extends yv{construct(e,n,r){return new Nr(e,n,r)}static isValidIdentifier(e){return Eue.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Nr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(0===r.length)throw new Xe(Pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new Xe(Pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new Xe(Pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Xe(Pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nr(n)}static emptyPath(){return new Nr([])}}class Tt{constructor(e){this.path=e}static fromPath(e){return new Tt(On.fromString(e))}static fromName(e){return new Tt(On.fromString(e).popFirst(5))}static empty(){return new Tt(On.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===On.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return On.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Tt(new On(e.slice()))}}class Cp{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function dR(t){return t.fields.find(e=>2===e.kind)}function xd(t){return t.fields.filter(e=>2!==e.kind)}Cp.UNKNOWN_ID=-1;class Pd{constructor(e,n){this.fieldPath=e,this.kind=n}}class Tp{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Tp(0,xs.min())}}function i5(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=zt.fromTimestamp(1e9===r?new Br(n+1,0):new Br(n,r));return new xs(i,Tt.empty(),e)}function o5(t){return new xs(t.readTime,t.key,-1)}class xs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xs(zt.min(),Tt.empty(),-1)}static max(){return new xs(zt.max(),Tt.empty(),-1)}}function hR(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=Tt.comparator(t.documentKey,e.documentKey),0!==n?n:cn(t.largestBatchId,e.largestBatchId))}const s5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class a5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ru(t){return fR.apply(this,arguments)}function fR(){return fR=(0,_.A)(function*(t){if(t.code!==Pe.FAILED_PRECONDITION||t.message!==s5)throw t;rt("LocalStore","Unexpectedly lost primary lease")}),fR.apply(this,arguments)}class Ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ee((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ee?n:Ee.resolve(n)}catch(n){return Ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ee.reject(n)}static resolve(e){return new Ee((n,r)=>{n(e)})}static reject(e){return new Ee((n,r)=>{r(e)})}static waitFor(e){return new Ee((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},l=>r(l))}),s=!0,o===i&&n()})}static or(e){let n=Ee.resolve(!1);for(const r of e)n=n.next(i=>i?Ee.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new Ee((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const c=l;n(e[c]).next(h=>{s[c]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new Ee((r,i)=>{const o=()=>{!0===e()?n().next(()=>{o()},i):r()};o()})}}class Vw{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Ai,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Iv(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=pR(r.target.error);this.V.reject(new Iv(e,i))}}static open(e,n,r,i){try{return new Vw(n,e.transaction(i,r))}catch(o){throw new Iv(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(rt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Tue(n)}}class ia{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===ia.S((0,x.ZQ)())&&li("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return rt("SimpleDb","Removing database:",e),Md(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,x.zW)())return!1;if(ia.C())return!0;const e=(0,x.ZQ)(),n=ia.S(e),r=0<n&&n<10,i=ia.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,_.A)(function*(){return n.db||(rt("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const o=indexedDB.open(n.name,n.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new Iv(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new Xe(Pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Xe(Pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Iv(e,a))},o.onupgradeneeded=s=>{rt("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',s.oldVersion),n.p.N(s.target.result,o.transaction,s.oldVersion,n.version).next(()=>{rt("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.L&&(n.db.onversionchange=r=>n.L(r)),n.db})()}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var o=this;return(0,_.A)(function*(){const s="readonly"===n;let a=0;for(;;){++a;try{o.db=yield o.O(e);const l=Vw.open(o.db,e,s?"readonly":"readwrite",r),c=i(l).next(h=>(l.g(),h)).catch(h=>(l.abort(h),Ee.reject(h))).toPromise();return c.catch(()=>{}),yield l.m,c}catch(l){const c=l,h="FirebaseError"!==c.name&&a<3;if(rt("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),o.close(),!h)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Cue{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Md(this.k.delete())}}class Iv extends Xe{constructor(e,n){super(Pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function iu(t){return"IndexedDbTransactionError"===t.name}class Tue{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(rt("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(rt("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Md(r)}add(e){return rt("SimpleDb","ADD",this.store.name,e,e),Md(this.store.add(e))}get(e){return Md(this.store.get(e)).next(n=>(void 0===n&&(n=null),rt("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return rt("SimpleDb","DELETE",this.store.name,e),Md(this.store.delete(e))}count(){return rt("SimpleDb","COUNT",this.store.name),Md(this.store.count())}W(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const o=i.getAll(r.range);return new Ee((s,a)=>{o.onerror=l=>{a(l.target.error)},o.onsuccess=l=>{s(l.target.result)}})}{const o=this.cursor(r),s=[];return this.G(o,(a,l)=>{s.push(l)}).next(()=>s)}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new Ee((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){rt("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new Ee((r,i)=>{n.onerror=o=>{const s=pR(o.target.error);i(s)},n.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){const r=[];return new Ee((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const l=new Cue(a),c=n(a.primaryKey,a.value,l);if(c instanceof Ee){const h=c.catch(f=>(l.done(),Ee.reject(f)));r.push(h)}l.isDone?i():null===l.$?a.continue():a.continue(l.$)}}).next(()=>Ee.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Md(t){return new Ee((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=pR(r.target.error);n(i)}})}let l5=!1;function pR(t){const e=ia.S((0,x.ZQ)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return l5||(l5=!0,setTimeout(()=>{throw r},0)),r}}return t}class Aue{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;rt("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_.A)(function*(){n.task=null;try{rt("IndexBackfiller",`Documents written: ${yield n.X.te()}`)}catch(r){iu(r)?rt("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield ru(r)}yield n.ee(6e4)}))}}class Due{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,_.A)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,o=!0;return Ee.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!r.has(s))return rt("IndexBackfiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(rt("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{const s=o5(o);hR(s,r)>0&&(r=s)}),new xs(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Ps=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Ev(t){return null==t}function wv(t){return 0===t&&1/t==-1/0}function c5(t){return"number"==typeof t&&Number.isInteger(t)&&!wv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function wo(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=u5(e)),e=Sue(t.get(n),e);return u5(e)}function Sue(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function u5(t){return t+"\x01\x01"}function hl(t){const e=t.length;if(Ut(e>=2),2===e)return Ut("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),On.emptyPath();const n=e-2,r=[];let i="";for(let o=0;o<e;){const s=t.indexOf("\x01",o);switch((s<0||s>n)&&Ft(),t.charAt(s+1)){case"\x01":const a=t.substring(o,s);let l;0===i.length?l=a:(i+=a,l=i,i=""),r.push(l);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Ft()}o=s+2}return new On(r)}const d5=["userId","batchId"];function Bw(t,e){return[t,wo(e)]}function h5(t,e,n){return[t,wo(e),n]}const Rue={},xue=["prefixPath","collectionGroup","readTime","documentId"],Pue=["prefixPath","collectionGroup","documentId"],Mue=["collectionGroup","readTime","prefixPath","documentId"],kue=["canonicalId","targetId"],Nue=["targetId","path"],Oue=["path","targetId"],Fue=["collectionId","parent"],Lue=["indexId","uid"],Vue=["uid","sequenceNumber"],Bue=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$ue=["indexId","uid","orderedDocumentKey"],Uue=["userId","collectionPath","documentId"],jue=["userId","collectionPath","largestBatchId"],zue=["userId","collectionGroup","largestBatchId"],f5=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Hue=[...f5,"documentOverlays"],p5=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],g5=p5,Gue=[...g5,"indexConfiguration","indexState","indexEntries"];class gR extends a5{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function zi(t,e){const n=Et(t);return ia.M(n.ae,e)}function m5(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ou(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Tr{constructor(e,n){this.comparator=e,this.root=n||io.EMPTY}insert(e,n){return new Tr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,io.BLACK,null,null))}remove(e){return new Tr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,io.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $w(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $w(this.root,e,this.comparator,!1)}getReverseIterator(){return new $w(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $w(this.root,e,this.comparator,!0)}}class $w{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class io{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:io.RED,this.left=null!=i?i:io.EMPTY,this.right=null!=o?o:io.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new io(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return io.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return io.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,io.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,io.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ft();const e=this.left.check();if(e!==this.right.check())throw Ft();return e+(this.isRed()?0:1)}}io.EMPTY=null,io.RED=!0,io.BLACK=!1,io.EMPTY=new class{constructor(){this.size=0}get key(){throw Ft()}get value(){throw Ft()}get color(){throw Ft()}get left(){throw Ft()}get right(){throw Ft()}copy(e,n,r,i,o){return this}insert(e,n,r){return new io(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mr{constructor(e){this.comparator=e,this.data=new Tr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new v5(this.data.getIterator())}getIteratorFrom(e){return new v5(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof mr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new mr(this.comparator);return n.data=e,n}}class v5{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ap(t){return t.hasNext()?t.getNext():void 0}class cs{constructor(e){this.fields=e,e.sort(Nr.comparator)}static empty(){return new cs([])}unionWith(e){let n=new mr(Nr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bp(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class y5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Di{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new y5("Invalid base64 string: "+o):o}}(e);return new Di(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Di(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return cn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Di.EMPTY_BYTE_STRING=new Di("");const que=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function su(t){if(Ut(!!t),"string"==typeof t){let e=0;const n=que.exec(t);if(Ut(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ei(t.seconds),nanos:ei(t.nanos)}}function ei(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Zl(t){return"string"==typeof t?Di.fromBase64String(t):Di.fromUint8Array(t)}function Uw(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function jw(t){const e=t.mapValue.fields.__previous_value__;return Uw(e)?jw(e):e}function bv(t){const e=su(t.mapValue.fields.__local_write_time__.timestampValue);return new Br(e.seconds,e.nanos)}class Kue{constructor(e,n,r,i,o,s,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class au{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new au("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof au&&e.projectId===this.projectId&&e.database===this.database}}const lu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zw={nullValue:"NULL_VALUE"};function cu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Uw(t)?4:b5(t)?9007199254740991:10:Ft()}function fl(t,e){if(t===e)return!0;const n=cu(t);if(n!==cu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bv(t).isEqual(bv(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=su(i.timestampValue),a=su(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return o=e,Zl(t.bytesValue).isEqual(Zl(o.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return ei(i.geoPointValue.latitude)===ei(o.geoPointValue.latitude)&&ei(i.geoPointValue.longitude)===ei(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ei(i.integerValue)===ei(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=ei(i.doubleValue),a=ei(o.doubleValue);return s===a?wv(s)===wv(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return bp(t.arrayValue.values||[],e.arrayValue.values||[],fl);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(m5(s)!==m5(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(void 0===a[l]||!fl(s[l],a[l])))return!1;return!0}(t,e);default:return Ft()}var o}function Cv(t,e){return void 0!==(t.values||[]).find(n=>fl(n,e))}function uu(t,e){if(t===e)return 0;const n=cu(t),r=cu(e);if(n!==r)return cn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return cn(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=ei(o.integerValue||o.doubleValue),l=ei(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return I5(t.timestampValue,e.timestampValue);case 4:return I5(bv(t),bv(e));case 5:return cn(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Zl(o),l=Zl(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=cn(a[c],l[c]);if(0!==h)return h}return cn(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=cn(ei(o.latitude),ei(s.latitude));return 0!==a?a:cn(ei(o.longitude),ei(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],l=s.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=uu(a[c],l[c]);if(h)return h}return cn(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===lu.mapValue&&s===lu.mapValue)return 0;if(o===lu.mapValue)return 1;if(s===lu.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),c=s.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const m=cn(l[f],h[f]);if(0!==m)return m;const v=uu(a[l[f]],c[h[f]]);if(0!==v)return v}return cn(l.length,h.length)}(t.mapValue,e.mapValue);default:throw Ft()}}function I5(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return cn(t,e);const n=su(t),r=su(e),i=cn(n.seconds,r.seconds);return 0!==i?i:cn(n.nanos,r.nanos)}function Dp(t){return mR(t)}function mR(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=su(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Zl(t.bytesValue).toBase64():"referenceValue"in t?Tt.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=mR(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${mR(n.fields[s])}`;return i+"}"}(t.mapValue):Ft()}function kd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _R(t){return!!t&&"integerValue"in t}function Tv(t){return!!t&&"arrayValue"in t}function E5(t){return!!t&&"nullValue"in t}function w5(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gw(t){return!!t&&"mapValue"in t}function Av(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ou(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Av(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Av(t.arrayValue.values[n]);return e}return Object.assign({},t)}function b5(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function Que(t){return"nullValue"in t?zw:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?kd(au.empty(),Tt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:Ft()}function Yue(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?kd(au.empty(),Tt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?lu:Ft()}function C5(t,e){const n=uu(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function T5(t,e){const n=uu(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class oo{constructor(e){this.value=e}static empty(){return new oo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gw(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Av(n)}setAll(e){let n=Nr.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Av(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Gw(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fl(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Gw(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ou(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new oo(Av(this.value))}}function A5(t){const e=[];return ou(t.fields,(n,r)=>{const i=new Nr([n]);if(Gw(r)){const o=A5(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new cs(e)}class Or{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Or(e,0,zt.min(),zt.min(),zt.min(),oo.empty(),0)}static newFoundDocument(e,n,r,i){return new Or(e,1,n,zt.min(),r,i,0)}static newNoDocument(e,n){return new Or(e,2,n,zt.min(),zt.min(),oo.empty(),0)}static newUnknownDocument(e,n){return new Or(e,3,n,zt.min(),zt.min(),oo.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(zt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=oo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=oo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=zt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Or&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Or(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class du{constructor(e,n){this.position=e,this.inclusive=n}}function D5(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Tt.comparator(Tt.fromName(s.referenceValue),n.key):uu(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function S5(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!fl(t.position[n],e.position[n]))return!1;return!0}class Dv{constructor(e,n="asc"){this.field=e,this.dir=n}}function Xue(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class R5{}class Fn extends R5{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new Jue(e,n,r):"array-contains"===n?new tde(e,r):"in"===n?new O5(e,r):"not-in"===n?new nde(e,r):"array-contains-any"===n?new rde(e,r):new Fn(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new Zue(e,r):new ede(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(uu(n,this.value)):null!==n&&cu(this.value)===cu(n)&&this.matchesComparison(uu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ft()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ur extends R5{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new ur(e,n)}matches(e){return Sp(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Sp(t){return"and"===t.op}function vR(t){return"or"===t.op}function yR(t){return x5(t)&&Sp(t)}function x5(t){for(const e of t.filters)if(e instanceof ur)return!1;return!0}function IR(t){if(t instanceof Fn)return t.field.canonicalString()+t.op.toString()+Dp(t.value);if(yR(t))return t.filters.map(e=>IR(e)).join(",");{const e=t.filters.map(n=>IR(n)).join(",");return`${t.op}(${e})`}}function P5(t,e){return t instanceof Fn?(r=t,(i=e)instanceof Fn&&r.op===i.op&&r.field.isEqual(i.field)&&fl(r.value,i.value)):t instanceof ur?function(r,i){return i instanceof ur&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&P5(s,i.filters[a]),!0)}(t,e):void Ft();var r,i}function M5(t,e){const n=t.filters.concat(e);return ur.create(n,t.op)}function k5(t){return t instanceof Fn?`${(n=t).field.canonicalString()} ${n.op} ${Dp(n.value)}`:t instanceof ur?function(n){return n.op.toString()+" {"+n.getFilters().map(k5).join(" ,")+"}"}(t):"Filter";var n}class Jue extends Fn{constructor(e,n,r){super(e,n,r),this.key=Tt.fromName(r.referenceValue)}matches(e){const n=Tt.comparator(e.key,this.key);return this.matchesComparison(n)}}class Zue extends Fn{constructor(e,n){super(e,"in",n),this.keys=N5(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ede extends Fn{constructor(e,n){super(e,"not-in",n),this.keys=N5(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function N5(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>Tt.fromName(r.referenceValue))}class tde extends Fn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tv(n)&&Cv(n.arrayValue,this.value)}}class O5 extends Fn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Cv(this.value.arrayValue,n)}}class nde extends Fn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Cv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Cv(this.value.arrayValue,n)}}class rde extends Fn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Cv(this.value.arrayValue,r))}}class ide{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function ER(t,e=null,n=[],r=[],i=null,o=null,s=null){return new ide(t,e,n,r,i,o,s)}function Nd(t){const e=Et(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>IR(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Ev(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Dp(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Dp(r)).join(",")),e.ce=n}return e.ce}function Sv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Xue(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!P5(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!S5(t.startAt,e.startAt)&&S5(t.endAt,e.endAt)}function Ww(t){return Tt.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function qw(t,e){return t.filters.filter(n=>n instanceof Fn&&n.field.isEqual(e))}function F5(t,e,n){let r=zw,i=!0;for(const o of qw(t,e)){let s=zw,a=!0;switch(o.op){case"<":case"<=":s=Que(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=zw}C5({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];C5({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}return{value:r,inclusive:i}}function L5(t,e,n){let r=lu,i=!0;for(const o of qw(t,e)){let s=lu,a=!0;switch(o.op){case">=":case">":s=Yue(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=lu}T5({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];T5({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}return{value:r,inclusive:i}}class ec{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null}}function V5(t,e,n,r,i,o,s,a){return new ec(t,e,n,r,i,o,s,a)}function Rp(t){return new ec(t)}function B5(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function wR(t){return null!==t.collectionGroup}function xp(t){const e=Et(t);if(null===e.le){e.le=[];const n=new Set;for(const o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new mr(Nr.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new Dv(o,r))}),n.has(Nr.keyField().canonicalString())||e.le.push(new Dv(Nr.keyField(),r))}return e.le}function Ho(t){const e=Et(t);return e.he||(e.he=$5(e,xp(t))),e.he}function $5(t,e){if("F"===t.limitType)return ER(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new Dv(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new du(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new du(t.startAt.position,t.startAt.inclusive):null;return ER(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function bR(t,e){const n=t.filters.concat([e]);return new ec(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Kw(t,e,n){return new ec(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rv(t,e){return Sv(Ho(t),Ho(e))&&t.limitType===e.limitType}function U5(t){return`${Nd(Ho(t))}|lt:${t.limitType}`}function Pp(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>k5(i)).join(", ")}]`),Ev(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Dp(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Dp(i)).join(",")),`Target(${r})`}(Ho(t))}; limitType=${t.limitType})`}function xv(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Tt.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of xp(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(s,a,l){const c=D5(s,a,l);return s.inclusive?c<=0:c<0}(r.startAt,xp(r),i)||r.endAt&&!function(s,a,l){const c=D5(s,a,l);return s.inclusive?c>=0:c>0}(r.endAt,xp(r),i)));var r,i}function j5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function z5(t){return(e,n)=>{let r=!1;for(const i of xp(t)){const o=ode(i,e,n);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function ode(t,e,n){const r=t.field.isKeyField()?Tt.comparator(e.key,n.key):function(o,s,a){const l=s.data.field(o),c=a.data.field(o);return null!==l&&null!==c?uu(l,c):Ft()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ft()}}class tc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ou(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return _5(this.inner)}size(){return this.innerSize}}const sde=new Tr(Tt.comparator);function us(){return sde}const H5=new Tr(Tt.comparator);function Pv(...t){let e=H5;for(const n of t)e=e.insert(n.key,n);return e}function G5(t){let e=H5;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function pl(){return Mv()}function W5(){return Mv()}function Mv(){return new tc(t=>t.toString(),(t,e)=>t.isEqual(e))}const ade=new Tr(Tt.comparator),lde=new mr(Tt.comparator);function yn(...t){let e=lde;for(const n of t)e=e.add(n);return e}const cde=new mr(cn);function CR(){return cde}function q5(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wv(e)?"-0":e}}function K5(t){return{integerValue:""+t}}function Q5(t,e){return c5(e)?K5(e):q5(t,e)}class Qw{constructor(){this._=void 0}}function ude(t,e,n){return t instanceof Mp?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Uw(o)&&(o=jw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Od?X5(t,e):t instanceof Fd?J5(t,e):function(i,o){const s=Y5(i,o),a=Z5(s)+Z5(i.Ie);return _R(s)&&_R(i.Ie)?K5(a):q5(i.serializer,a)}(t,e)}function dde(t,e,n){return t instanceof Od?X5(t,e):t instanceof Fd?J5(t,e):n}function Y5(t,e){return t instanceof kp?_R(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class Mp extends Qw{}class Od extends Qw{constructor(e){super(),this.elements=e}}function X5(t,e){const n=ej(e);for(const r of t.elements)n.some(i=>fl(i,r))||n.push(r);return{arrayValue:{values:n}}}class Fd extends Qw{constructor(e){super(),this.elements=e}}function J5(t,e){let n=ej(e);for(const r of t.elements)n=n.filter(i=>!fl(i,r));return{arrayValue:{values:n}}}class kp extends Qw{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Z5(t){return ei(t.integerValue||t.doubleValue)}function ej(t){return Tv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class kv{constructor(e,n){this.field=e,this.transform=n}}class fde{constructor(e,n){this.version=e,this.transformResults=n}}class $r{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $r}static exists(e){return new $r(void 0,e)}static updateTime(e){return new $r(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yw(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Xw{}function tj(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Op(t.key,$r.none()):new Np(t.key,t.data,$r.none());{const n=t.data,r=oo.empty();let i=new mr(Nr.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);null===s&&o.length>1&&(o=o.popLast(),s=n.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new nc(t.key,r,new cs(i.toArray()),$r.none())}}function pde(t,e,n){t instanceof Np?function(i,o,s){const a=i.value.clone(),l=ij(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof nc?function(i,o,s){if(!Yw(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=ij(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(rj(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Nv(t,e,n,r){return t instanceof Np?function(o,s,a,l){if(!Yw(o.precondition,s))return a;const c=o.value.clone(),h=oj(o.fieldTransforms,l,s);return c.setAll(h),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof nc?function(o,s,a,l){if(!Yw(o.precondition,s))return a;const c=oj(o.fieldTransforms,l,s),h=s.data;return h.setAll(rj(o)),h.setAll(c),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,r):(a=n,Yw(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function gde(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=Y5(r.transform,i||null);null!=o&&(null===n&&(n=oo.empty()),n.set(r.field,o))}return n||null}function nj(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&bp(r,i,(o,s)=>function hde(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof Od&&i instanceof Od||r instanceof Fd&&i instanceof Fd?bp(r.elements,i.elements,fl):r instanceof kp&&i instanceof kp?fl(r.Ie,i.Ie):r instanceof Mp&&i instanceof Mp);var r,i}(o,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class Np extends Xw{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class nc extends Xw{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function rj(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ij(t,e,n){const r=new Map;Ut(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,dde(s,a,n[i]))}return r}function oj(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,ude(o,s,e))}return r}class Op extends Xw{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TR extends Xw{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class AR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&pde(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Nv(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Nv(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=W5();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const l=tj(s,a);null!==l&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(zt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),yn())}isEqual(e){return this.batchId===e.batchId&&bp(this.mutations,e.mutations,(n,r)=>nj(n,r))&&bp(this.baseMutations,e.baseMutations,(n,r)=>nj(n,r))}}class DR{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ut(e.mutations.length===r.length);let i=function(){return ade}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new DR(e,n,r,i)}}class SR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class mde{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}class _de{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ei,Hn;function sj(t){switch(t){default:return Ft();case Pe.CANCELLED:case Pe.UNKNOWN:case Pe.DEADLINE_EXCEEDED:case Pe.RESOURCE_EXHAUSTED:case Pe.INTERNAL:case Pe.UNAVAILABLE:case Pe.UNAUTHENTICATED:return!1;case Pe.INVALID_ARGUMENT:case Pe.NOT_FOUND:case Pe.ALREADY_EXISTS:case Pe.PERMISSION_DENIED:case Pe.FAILED_PRECONDITION:case Pe.ABORTED:case Pe.OUT_OF_RANGE:case Pe.UNIMPLEMENTED:case Pe.DATA_LOSS:return!0}}function aj(t){if(void 0===t)return li("GRPC error has no .code"),Pe.UNKNOWN;switch(t){case Ei.OK:return Pe.OK;case Ei.CANCELLED:return Pe.CANCELLED;case Ei.UNKNOWN:return Pe.UNKNOWN;case Ei.DEADLINE_EXCEEDED:return Pe.DEADLINE_EXCEEDED;case Ei.RESOURCE_EXHAUSTED:return Pe.RESOURCE_EXHAUSTED;case Ei.INTERNAL:return Pe.INTERNAL;case Ei.UNAVAILABLE:return Pe.UNAVAILABLE;case Ei.UNAUTHENTICATED:return Pe.UNAUTHENTICATED;case Ei.INVALID_ARGUMENT:return Pe.INVALID_ARGUMENT;case Ei.NOT_FOUND:return Pe.NOT_FOUND;case Ei.ALREADY_EXISTS:return Pe.ALREADY_EXISTS;case Ei.PERMISSION_DENIED:return Pe.PERMISSION_DENIED;case Ei.FAILED_PRECONDITION:return Pe.FAILED_PRECONDITION;case Ei.ABORTED:return Pe.ABORTED;case Ei.OUT_OF_RANGE:return Pe.OUT_OF_RANGE;case Ei.UNIMPLEMENTED:return Pe.UNIMPLEMENTED;case Ei.DATA_LOSS:return Pe.DATA_LOSS;default:return Ft()}}(Hn=Ei||(Ei={}))[Hn.OK=0]="OK",Hn[Hn.CANCELLED=1]="CANCELLED",Hn[Hn.UNKNOWN=2]="UNKNOWN",Hn[Hn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Hn[Hn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Hn[Hn.NOT_FOUND=5]="NOT_FOUND",Hn[Hn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Hn[Hn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Hn[Hn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Hn[Hn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Hn[Hn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Hn[Hn.ABORTED=10]="ABORTED",Hn[Hn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Hn[Hn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Hn[Hn.INTERNAL=13]="INTERNAL",Hn[Hn.UNAVAILABLE=14]="UNAVAILABLE",Hn[Hn.DATA_LOSS=15]="DATA_LOSS";function lj(){return new TextEncoder}const vde=new Ip([4294967295,4294967295],0);function cj(t){const e=lj().encode(t),n=new due;return n.update(e),new Uint8Array(n.digest())}function uj(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ip([n,r],0),new Ip([i,o],0)]}class RR{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ov(`Invalid padding: ${n}`);if(r<0)throw new Ov(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Ov(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new Ov(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Ip.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Ip.fromNumber(r)));return 1===i.compare(vde)&&(i=new Ip([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=cj(e),[r,i]=uj(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new RR(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Te)return;const n=cj(e),[r,i]=uj(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);this.Re(s)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Ov extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Fv{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Lv.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Fv(zt.min(),i,new Tr(cn),us(),yn())}}class Lv{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Lv(r,n,yn(),yn(),yn())}}class Zw{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class dj{constructor(e,n){this.targetId=e,this.fe=n}}class hj{constructor(e,n,r=Di.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class fj{constructor(){this.ge=0,this.pe=gj(),this.ye=Di.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=yn(),n=yn(),r=yn();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ft()}}),new Lv(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=gj()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ut(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class yde{constructor(e){this.Be=e,this.ke=new Map,this.qe=us(),this.Qe=pj(),this.Ke=new Tr(cn)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:Ft()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const o=i.target;if(Ww(o))if(0===r){const s=new Tt(o.path);this.We(n,s,Or.newNoDocument(s,zt.min()))}else Ut(1===r);else{const s=this.Ze(n);if(s!==r){const a=this.Xe(e),l=a?this.et(a,e,s):1;0!==l&&(this.He(n),this.Ke=this.Ke.insert(n,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Zl(r).toUint8Array()}catch(l){if(l instanceof y5)return ls("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new RR(s,i,o)}catch(l){return ls(l instanceof Ov?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Be.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&Ww(a.target)){const l=new Tt(a.target.path);null!==this.qe.get(l)||this.st(s,l)||this.We(s,l,Or.newNoDocument(l,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=yn();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const c=this.Ye(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));const i=new Fv(e,n,this.Ke,this.qe,r);return this.qe=us(),this.Qe=pj(),this.Ke=new Tr(cn),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new fj,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new mr(cn),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||rt("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new fj),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function pj(){return new Tr(Tt.comparator)}function gj(){return new Tr(Tt.comparator)}const Ide={asc:"ASCENDING",desc:"DESCENDING"},Ede={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wde={and:"AND",or:"OR"};class bde{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function xR(t,e){return t.useProto3Json||Ev(e)?e:{value:e}}function Fp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mj(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Cde(t,e){return Fp(t,e.toTimestamp())}function ci(t){return Ut(!!t),zt.fromTimestamp(function(n){const r=su(n);return new Br(r.seconds,r.nanos)}(t))}function PR(t,e){return MR(t,e).canonicalString()}function MR(t,e){const n=(i=t,new On(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function _j(t){const e=On.fromString(t);return Ut(Dj(e)),e}function Vv(t,e){return PR(t.databaseId,e.path)}function gl(t,e){const n=_j(e);if(n.get(1)!==t.databaseId.projectId)throw new Xe(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Xe(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Tt(Ij(n))}function vj(t,e){return PR(t.databaseId,e)}function yj(t){const e=_j(t);return 4===e.length?On.emptyPath():Ij(e)}function kR(t){return new On(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ij(t){return Ut(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Ej(t,e,n){return{name:Vv(t,e),fields:n.value.mapValue.fields}}function wj(t,e,n){const r=gl(t,e.name),i=ci(e.updateTime),o=e.createTime?ci(e.createTime):zt.min(),s=new oo({mapValue:{fields:e.fields}}),a=Or.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Bv(t,e){let n;if(e instanceof Np)n={update:Ej(t,e.key,e.value)};else if(e instanceof Op)n={delete:Vv(t,e.key)};else if(e instanceof nc)n={update:Ej(t,e.key,e.data),updateMask:Mde(e.fieldMask)};else{if(!(e instanceof TR))return Ft();n={verify:Vv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Mp)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Od)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Fd)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof kp)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw Ft()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Cde(t,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Ft()),n;var o}function NR(t,e){const n=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?$r.updateTime(ci(o.updateTime)):void 0!==o.exists?$r.exists(o.exists):$r.none():$r.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let l=null;"setToServerValue"in a?(Ut("REQUEST_TIME"===a.setToServerValue),l=new Mp):"appendMissingElements"in a?l=new Od(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new Fd(a.removeAllFromArray.values||[]):"increment"in a?l=new kp(s,a.increment):Ft();const c=Nr.fromServerFormat(a.fieldPath);return new kv(c,l)}(t,i)):[];var o;if(e.update){const i=gl(t,e.update.name),o=new oo({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new cs((e.updateMask.fieldPaths||[]).map(h=>Nr.fromServerFormat(h)));return new nc(i,o,s,n,r)}return new Np(i,o,n,r)}if(e.delete){const i=gl(t,e.delete);return new Op(i,n)}if(e.verify){const i=gl(t,e.verify);return new TR(i,n)}return Ft()}function bj(t,e){return{documents:[vj(t,e.path)]}}function OR(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=vj(t,i);const o=function(c){if(0!==c.length)return Aj(ur.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(c){if(0!==c.length)return c.map(h=>{return{field:hu((m=h).field),direction:Rde(m.dir)};var m})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=xR(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:i};var c}function Cj(t){let e=yj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ut(1===r);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(f){const m=Tj(f);return m instanceof ur&&yR(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(m=>{return new Dv(Lp((w=m).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction));var w}));let a=null;n.limit&&(a=function(f){let m;return m="object"==typeof f?f.value:f,Ev(m)?null:m}(n.limit));let l=null;var f;n.startAt&&(l=new du((f=n.startAt).values||[],!!f.before));let c=null;return n.endAt&&(c=function(f){return new du(f.values||[],!f.before)}(n.endAt)),V5(e,i,s,o,a,"F",l,c)}function Tj(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Lp(n.unaryFilter.field);return Fn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Lp(n.unaryFilter.field);return Fn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Lp(n.unaryFilter.field);return Fn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Lp(n.unaryFilter.field);return Fn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Ft()}}(t):void 0!==t.fieldFilter?Fn.create(Lp((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ft()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return ur.create(n.compositeFilter.filters.map(r=>Tj(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ft()}}(n.compositeFilter.op))}(t):Ft();var n}function Rde(t){return Ide[t]}function xde(t){return Ede[t]}function Pde(t){return wde[t]}function hu(t){return{fieldPath:t.canonicalString()}}function Lp(t){return Nr.fromServerFormat(t.fieldPath)}function Aj(t){return t instanceof Fn?function(n){if("=="===n.op){if(w5(n.value))return{unaryFilter:{field:hu(n.field),op:"IS_NAN"}};if(E5(n.value))return{unaryFilter:{field:hu(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(w5(n.value))return{unaryFilter:{field:hu(n.field),op:"IS_NOT_NAN"}};if(E5(n.value))return{unaryFilter:{field:hu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hu(n.field),op:xde(n.op),value:n.value}}}(t):t instanceof ur?function(n){const r=n.getFilters().map(i=>Aj(i));return 1===r.length?r[0]:{compositeFilter:{op:Pde(n.op),filters:r}}}(t):Ft()}function Mde(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Dj(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class rc{constructor(e,n,r,i,o=zt.min(),s=zt.min(),a=Di.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new rc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new rc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Sj{constructor(e){this.ct=e}}function Rj(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:eb(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Vv(o=t.ct,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Fp(o,s.version.toTimestamp()),createTime:Fp(o,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ld(e.version)};else{if(!e.isUnknownDocument())return Ft();r.unknownDocument={path:n.path.toArray(),version:Ld(e.version)}}var o,s;return r}function eb(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ld(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Vd(t){const e=new Br(t.seconds,t.nanoseconds);return zt.fromTimestamp(e)}function Bd(t,e){const n=(e.baseMutations||[]).map(o=>NR(t.ct,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>NR(t.ct,o)),i=Br.fromMillis(e.localWriteTimeMs);return new AR(e.batchId,i,n,r)}function $v(t){const e=Vd(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Vd(t.lastLimboFreeSnapshotVersion):zt.min();let r;return r=void 0!==t.query.documents?(Ut(1===(o=t.query).documents.length),Ho(Rp(yj(o.documents[0])))):function(o){return Ho(Cj(o))}(t.query),new rc(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Di.fromBase64String(t.resumeToken));var o}function xj(t,e){const n=Ld(e.snapshotVersion),r=Ld(e.lastLimboFreeSnapshotVersion);let i;i=Ww(e.target)?bj(t.ct,e.target):OR(t.ct,e.target).ut;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Nd(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function FR(t){const e=Cj({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Kw(e,e.limit,"L"):e}function LR(t,e){return new SR(e.largestBatchId,NR(t.ct,e.overlayMutation))}function Pj(t,e){const n=e.path.lastSegment();return[t,wo(e.path.popLast()),n]}function Mj(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ld(r.readTime),documentKey:wo(r.documentKey.path),largestBatchId:r.largestBatchId}}class Nde{getBundleMetadata(e,n){return kj(e).get(n).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Vd(o.createTime),version:o.version};var o})}saveBundleMetadata(e,n){return kj(e).put({bundleId:(i=n).id,createTime:Ld(ci(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return Nj(e).get(n).next(r=>{if(r)return{name:(o=r).name,query:FR(o.bundledQuery),readTime:Vd(o.readTime)};var o})}saveNamedQuery(e,n){return Nj(e).put({name:(i=n).name,readTime:Ld(ci(i.readTime)),bundledQuery:i.bundledQuery});var i}}function kj(t){return zi(t,"bundles")}function Nj(t){return zi(t,"namedQueries")}class tb{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){return new tb(e,n.uid||"")}getOverlay(e,n){return Uv(e).get(Pj(this.userId,n)).next(r=>r?LR(this.serializer,r):null)}getOverlays(e,n){const r=pl();return Ee.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((o,s)=>{const a=new SR(n,s);i.push(this.ht(e,a))}),Ee.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(s=>i.add(wo(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Uv(e).H("collectionPathOverlayIndex",a))}),Ee.waitFor(o)}getOverlaysForCollection(e,n,r){const i=pl(),o=wo(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Uv(e).W("collectionPathOverlayIndex",s).next(a=>{for(const l of a){const c=LR(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const o=pl();let s;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Uv(e).Y({index:"collectionGroupOverlayIndex",range:a},(l,c,h)=>{const f=LR(this.serializer,c);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):h.done()}).next(()=>o)}ht(e,n){return Uv(e).put(function(i,o,s){const[a,l,c]=Pj(o,s.mutation.key);return{userId:o,collectionPath:l,documentId:c,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Bv(i.ct,s.mutation)}}(this.serializer,this.userId,n))}}function Uv(t){return zi(t,"documentOverlays")}class $d{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(ei(e.integerValue));else if("doubleValue"in e){const r=ei(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),wv(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(n,20),"string"==typeof r?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Zl(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?b5(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):Ft()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const i of r)this.It(i,n)}gt(e,n){this.Et(n,37),Tt.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}function Ode(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Oj(t){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const s=Ode(255&r[o]);if(i+=s,8!==s)break}return i}(t);return Math.ceil(e/8)}$d.bt=new $d;class Fde{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const n=this.Bt(e),r=Oj(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){const n=this.Bt(e),r=Oj(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){const n=255&e;0===n?(this.Kt(0),this.Kt(255)):255===n?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;0===n?(this.Ut(0),this.Ut(255)):255===n?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Lde{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class Vde{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class jv{constructor(){this.Gt=new Fde,this.zt=new Lde(this.Gt),this.jt=new Vde(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Ud{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ud(this.indexId,this.documentKey,this.arrayValue,r)}}function fu(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=Fj(t.arrayValue,e.arrayValue),0!==n?n:(n=Fj(t.directionalValue,e.directionalValue),0!==n?n:Tt.comparator(t.documentKey,e.documentKey)))}function Fj(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class Lj{constructor(e){this.Yt=new mr((n,r)=>Nr.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(Ut(e.collectionGroup===this.collectionId),this.en)return!1;const n=dR(e);if(void 0!==n&&!this.nn(n))return!1;const r=xd(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[o];if(!this.rn(a,l)||!this.sn(this.Zt[s++],l))return!1}++o}for(;o<r.length;++o)if(s>=this.Zt.length||!this.sn(this.Zt[s++],r[o]))return!1;return!0}on(){if(this.en)return null;let e=new mr(Nr.comparator);const n=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new Pd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Pd(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Pd(r.field,"asc"===r.dir?0:1)));return new Cp(Cp.UNKNOWN_ID,this.collectionId,n,Tp.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function Vj(t){var e,n;if(Ut(t instanceof Fn||t instanceof ur),t instanceof Fn){if(t instanceof O5){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(o=>Fn.create(t.field,"==",o)))||[];return ur.create(i,"or")}return t}const r=t.filters.map(i=>Vj(i));return ur.create(r,t.op)}function Bde(t){if(0===t.getFilters().length)return[];const e=$R(Vj(t));return Ut(Bj(e)),VR(e)||BR(e)?[e]:e.getFilters()}function VR(t){return t instanceof Fn}function BR(t){return t instanceof ur&&yR(t)}function Bj(t){return VR(t)||BR(t)||function(n){if(n instanceof ur&&vR(n)){for(const r of n.getFilters())if(!VR(r)&&!BR(r))return!1;return!0}return!1}(t)}function $R(t){if(Ut(t instanceof Fn||t instanceof ur),t instanceof Fn)return t;if(1===t.filters.length)return $R(t.filters[0]);const e=t.filters.map(r=>$R(r));let n=ur.create(e,t.op);return n=nb(n),Bj(n)?n:(Ut(n instanceof ur),Ut(Sp(n)),Ut(n.filters.length>1),n.filters.reduce((r,i)=>UR(r,i)))}function UR(t,e){let n;return Ut(t instanceof Fn||t instanceof ur),Ut(e instanceof Fn||e instanceof ur),n=t instanceof Fn?e instanceof Fn?ur.create([t,e],"and"):$j(t,e):e instanceof Fn?$j(e,t):function(i,o){if(Ut(i.filters.length>0&&o.filters.length>0),Sp(i)&&Sp(o))return M5(i,o.getFilters());const s=vR(i)?i:o,a=vR(i)?o:i,l=s.filters.map(c=>UR(c,a));return ur.create(l,"or")}(t,e),nb(n)}function $j(t,e){if(Sp(e))return M5(e,t.getFilters());{const n=e.filters.map(r=>UR(t,r));return ur.create(n,"or")}}function nb(t){if(Ut(t instanceof Fn||t instanceof ur),t instanceof Fn)return t;const e=t.getFilters();if(1===e.length)return nb(e[0]);if(x5(t))return t;const n=e.map(i=>nb(i)),r=[];return n.forEach(i=>{i instanceof Fn?r.push(i):i instanceof ur&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:ur.create(r,t.op)}class $de{constructor(){this._n=new jR}addToCollectionParentIndex(e,n){return this._n.add(n),Ee.resolve()}getCollectionParents(e,n){return Ee.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return Ee.resolve()}deleteFieldIndex(e,n){return Ee.resolve()}deleteAllFieldIndexes(e){return Ee.resolve()}createTargetIndexes(e,n){return Ee.resolve()}getDocumentsMatchingTarget(e,n){return Ee.resolve(null)}getIndexType(e,n){return Ee.resolve(0)}getFieldIndexes(e,n){return Ee.resolve([])}getNextCollectionGroupToUpdate(e){return Ee.resolve(null)}getMinOffset(e,n){return Ee.resolve(xs.min())}getMinOffsetFromCollectionGroup(e,n){return Ee.resolve(xs.min())}updateCollectionGroup(e,n,r){return Ee.resolve()}updateIndexEntries(e,n){return Ee.resolve()}}class jR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new mr(On.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mr(On.comparator)).toArray()}}const rb=new Uint8Array(0);class Ude{constructor(e,n){this.databaseId=n,this.an=new jR,this.un=new tc(r=>Nd(r),(r,i)=>Sv(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const o={collectionId:r,parent:wo(i)};return Uj(e).put(o)}return Ee.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[r5(n),""],!1,!0);return Uj(e).W(i).next(o=>{for(const s of o){if(s.collectionId!==n)break;r.push(hl(s.parent))}return r})}addFieldIndex(e,n){const r=zv(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete i.indexId;const o=r.add(i);if(n.indexState){const s=Bp(e);return o.next(a=>{s.put(Mj(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){const r=zv(e),i=Bp(e),o=Vp(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=zv(e),r=Vp(e),i=Bp(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return Ee.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const o=new Lj(r).on();if(null!=o)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){const r=Vp(e);let i=!0;const o=new Map;return Ee.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=yn();const a=[];return Ee.forEach(o,(l,c)=>{var Te;rt("IndexedDbIndexManager",`Using index ${Te=l,`id=${Te.indexId}|cg=${Te.collectionGroup}|f=${Te.fields.map(Ae=>`${Ae.fieldPath}:${Ae.kind}`).join(",")}`} to execute ${Nd(n)}`);const h=function(Te,Ae){const Je=dR(Ae);if(void 0===Je)return null;for(const mt of qw(Te,Je.fieldPath))switch(mt.op){case"array-contains-any":return mt.value.arrayValue.values||[];case"array-contains":return[mt.value]}return null}(c,l),f=function(Te,Ae){const Je=new Map;for(const mt of xd(Ae))for(const Xt of qw(Te,mt.fieldPath))switch(Xt.op){case"==":case"in":Je.set(mt.fieldPath.canonicalString(),Xt.value);break;case"not-in":case"!=":return Je.set(mt.fieldPath.canonicalString(),Xt.value),Array.from(Je.values())}return null}(c,l),m=function(Te,Ae){const Je=[];let mt=!0;for(const Xt of xd(Ae)){const tn=0===Xt.kind?F5(Te,Xt.fieldPath,Te.startAt):L5(Te,Xt.fieldPath,Te.startAt);Je.push(tn.value),mt&&(mt=tn.inclusive)}return new du(Je,mt)}(c,l),v=function(Te,Ae){const Je=[];let mt=!0;for(const Xt of xd(Ae)){const tn=0===Xt.kind?L5(Te,Xt.fieldPath,Te.endAt):F5(Te,Xt.fieldPath,Te.endAt);Je.push(tn.value),mt&&(mt=tn.inclusive)}return new du(Je,mt)}(c,l),w=this.hn(l,c,m),R=this.hn(l,c,v),N=this.Pn(l,c,f),z=this.In(l.indexId,h,w,m.inclusive,R,v.inclusive,N);return Ee.forEach(z,Q=>r.j(Q,n.limit).next(Te=>{Te.forEach(Ae=>{const Je=Tt.fromSegments(Ae.documentKey);s.has(Je)||(s=s.add(Je),a.push(Je))})}))}).next(()=>a)}return Ee.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:Bde(ur.create(e.filters,"and")).map(r=>ER(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,o,s,a){const l=(null!=n?n.length:1)*Math.max(r.length,o.length),c=l/(null!=n?n.length:1),h=[];for(let f=0;f<l;++f){const m=n?this.Tn(n[f/c]):rb,v=this.En(e,m,r[f%c],i),w=this.dn(e,m,o[f%c],s),R=a.map(N=>this.En(e,m,N,!0));h.push(...this.createRange(v,w,R))}return h}En(e,n,r,i){const o=new Ud(e,Tt.empty(),n,r);return i?o:o.Jt()}dn(e,n,r,i){const o=new Ud(e,Tt.empty(),n,r);return i?o.Jt():o}ln(e,n){const r=new Lj(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2;const i=this.cn(n);return Ee.forEach(i,o=>this.ln(e,o).next(s=>{s?0!==r&&s.fields.length<function(l){let c=new mr(Nr.comparator),h=!1;for(const f of l.filters)for(const m of f.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?h=!0:c=c.add(m.field));for(const f of l.orderBy)f.field.isKeyField()||(c=c.add(f.field));return c.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}An(e,n){const r=new jv;for(const i of xd(e)){const o=n.data.field(i.fieldPath);if(null==o)return null;const s=r.Ht(i.kind);$d.bt.Pt(o,s)}return r.Wt()}Tn(e){const n=new jv;return $d.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const r=new jv;return $d.bt.Pt(kd(this.databaseId,n),r.Ht(function(o){const s=xd(o);return 0===s.length?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(null===r)return[];let i=[];i.push(new jv);let o=0;for(const s of xd(e)){const a=r[o++];for(const l of i)if(this.Vn(n,s.fieldPath)&&Tv(a))i=this.mn(i,s,a);else{const c=l.Ht(s.kind);$d.bt.Pt(a,c)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const l=new jv;l.seed(a.Wt()),$d.bt.Pt(s,l.Ht(n.kind)),o.push(l)}return o}Vn(e,n){return!!e.filters.find(r=>r instanceof Fn&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=zv(e),i=Bp(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{const s=[];return Ee.forEach(o,a=>i.get([a.indexId,this.uid]).next(l=>{s.push(function(h,f){const m=f?new Tp(f.sequenceNumber,new xs(Vd(f.readTime),new Tt(hl(f.documentKey)),f.largestBatchId)):Tp.empty(),v=h.fields.map(([w,R])=>new Pd(Nr.fromServerFormat(w),R));return new Cp(h.indexId,h.collectionGroup,v,m)}(a,l))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:cn(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=zv(e),o=Bp(e);return this.gn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>Ee.forEach(a,l=>o.put(Mj(l.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){const r=new Map;return Ee.forEach(n,(i,o)=>{const s=r.get(i.collectionGroup);return(s?Ee.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),Ee.forEach(a,l=>this.pn(e,i,l).next(c=>{const h=this.yn(o,l);return c.isEqual(h)?Ee.resolve():this.wn(e,o,l,c,h)}))))})}Sn(e,n,r,i){return Vp(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return Vp(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){const i=Vp(e);let o=new mr(fu);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(s,a)=>{o=o.add(new Ud(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let r=new mr(fu);const i=this.An(n,e);if(null==i)return r;const o=dR(n);if(null!=o){const s=e.data.field(o.fieldPath);if(Tv(s))for(const a of s.arrayValue.values||[])r=r.add(new Ud(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new Ud(n.indexId,e.key,rb,i));return r}wn(e,n,r,i,o){rt("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const s=[];return function(l,c,h,f,m){const v=l.getIterator(),w=c.getIterator();let R=Ap(v),N=Ap(w);for(;R||N;){let z=!1,Q=!1;if(R&&N){const Te=h(R,N);Te<0?Q=!0:Te>0&&(z=!0)}else null!=R?Q=!0:z=!0;z?(f(N),N=Ap(w)):Q?(m(R),R=Ap(v)):(R=Ap(v),N=Ap(w))}}(i,o,fu,a=>{s.push(this.Sn(e,n,r,a))},a=>{s.push(this.bn(e,n,r,a))}),Ee.waitFor(s)}gn(e){let n=1;return Bp(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>fu(s,a)).filter((s,a,l)=>!a||0!==fu(s,l[a-1]));const i=[];i.push(e);for(const s of r){const a=fu(s,e),l=fu(s,n);if(0===a)i[0]=e.Jt();else if(a>0&&l<0)i.push(s),i.push(s.Jt());else if(l>0)break}i.push(n);const o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];o.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,rb,[]],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,rb,[]]))}return o}Dn(e,n){return fu(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(jj)}getMinOffset(e,n){return Ee.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||Ft())).next(jj)}}function Uj(t){return zi(t,"collectionParents")}function Vp(t){return zi(t,"indexEntries")}function zv(t){return zi(t,"indexConfiguration")}function Bp(t){return zi(t,"indexState")}function jj(t){Ut(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;hR(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new xs(e.readTime,e.documentKey,n)}const zj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class bo{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new bo(e,bo.DEFAULT_COLLECTION_PERCENTILE,bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Hj(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:s},(h,f,m)=>(a++,m.delete()));o.push(l.next(()=>{Ut(1===a)}));const c=[];for(const h of n.mutations){const f=h5(e,h.key.path,n.batchId);o.push(i.delete(f)),c.push(h.key)}return Ee.waitFor(o).next(()=>c)}function ib(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ft();e=t.noDocument}return JSON.stringify(e).length}bo.DEFAULT_COLLECTION_PERCENTILE=10,bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bo.DEFAULT=new bo(41943040,bo.DEFAULT_COLLECTION_PERCENTILE,bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bo.DISABLED=new bo(-1,0,0);class ob{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){Ut(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new ob(o,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pu(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const o=$p(e),s=pu(e);return s.add({}).next(a=>{Ut("number"==typeof a);const l=new AR(a,n,r,i),c=function(v,w,R){const N=R.baseMutations.map(Q=>Bv(v.ct,Q)),z=R.mutations.map(Q=>Bv(v.ct,Q));return{userId:w,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:N,mutations:z}}(this.serializer,this.userId,l),h=[];let f=new mr((m,v)=>cn(m.canonicalString(),v.canonicalString()));for(const m of i){const v=h5(this.userId,m.key.path,a);f=f.add(m.key.path.popLast()),h.push(s.put(c)),h.push(o.put(v,Rue))}return f.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Cn[a]=l.keys()}),Ee.waitFor(h).next(()=>l)})}lookupMutationBatch(e,n){return pu(e).get(n).next(r=>r?(Ut(r.userId===this.userId),Bd(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?Ee.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return pu(e).Y({index:"userMutationsIndex",range:i},(s,a,l)=>{a.userId===this.userId&&(Ut(a.batchId>=r),o=Bd(this.serializer,a)),l.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return pu(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pu(e).W("userMutationsIndex",n).next(r=>r.map(i=>Bd(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Bw(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return $p(e).Y({range:i},(s,a,l)=>{const[c,h,f]=s,m=hl(h);if(c===this.userId&&n.path.isEqual(m))return pu(e).get(f).next(v=>{if(!v)throw Ft();Ut(v.userId===this.userId),o.push(Bd(this.serializer,v))});l.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new mr(cn);const i=[];return n.forEach(o=>{const s=Bw(this.userId,o.path),a=IDBKeyRange.lowerBound(s),l=$p(e).Y({range:a},(c,h,f)=>{const[m,v,w]=c,R=hl(v);m===this.userId&&o.path.isEqual(R)?r=r.add(w):f.done()});i.push(l)}),Ee.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,o=Bw(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new mr(cn);return $p(e).Y({range:s},(l,c,h)=>{const[f,m,v]=l,w=hl(m);f===this.userId&&r.isPrefixOf(w)?w.length===i&&(a=a.add(v)):h.done()}).next(()=>this.Fn(e,a))}Fn(e,n){const r=[],i=[];return n.forEach(o=>{i.push(pu(e).get(o).next(s=>{if(null===s)throw Ft();Ut(s.userId===this.userId),r.push(Bd(this.serializer,s))}))}),Ee.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Hj(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),Ee.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Ee.resolve();const r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return $p(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){const l=hl(o[1]);i.push(l)}else a.done()}).next(()=>{Ut(0===i.length)})})}containsKey(e,n){return Gj(e,this.userId,n)}xn(e){return Wj(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Gj(t,e,n){const r=Bw(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return $p(t).Y({range:o,J:!0},(a,l,c)=>{const[h,f,m]=a;h===e&&f===i&&(s=!0),c.done()}).next(()=>s)}function pu(t){return zi(t,"mutations")}function $p(t){return zi(t,"documentMutations")}function Wj(t){return zi(t,"mutationQueues")}class jd{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new jd(0)}static Ln(){return new jd(-1)}}class jde{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new jd(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>zt.fromTimestamp(new Br(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Up(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(Ut(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0;const o=[];return Up(e).Y((s,a)=>{const l=$v(a);l.sequenceNumber<=n&&null===r.get(l.targetId)&&(i++,o.push(this.removeTargetData(e,l)))}).next(()=>Ee.waitFor(o)).next(()=>i)}forEachTarget(e,n){return Up(e).Y((r,i)=>{const o=$v(i);n(o)})}Bn(e){return qj(e).get("targetGlobalKey").next(n=>(Ut(null!==n),n))}kn(e,n){return qj(e).put("targetGlobalKey",n)}qn(e,n){return Up(e).put(xj(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Nd(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Up(e).Y({range:i,index:"queryTargetsIndex"},(s,a,l)=>{const c=$v(a);Sv(n,c.target)&&(o=c,l.done())}).next(()=>o)}addMatchingKeys(e,n,r){const i=[],o=gu(e);return n.forEach(s=>{const a=wo(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),Ee.waitFor(i)}removeMatchingKeys(e,n,r){const i=gu(e);return Ee.forEach(n,o=>{const s=wo(o.path);return Ee.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){const r=gu(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=gu(e);let o=yn();return i.Y({range:r,J:!0},(s,a,l)=>{const c=hl(s[1]),h=new Tt(c);o=o.add(h)}).next(()=>o)}containsKey(e,n){const r=wo(n.path),i=IDBKeyRange.bound([r],[r5(r)],!1,!0);let o=0;return gu(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],l,c)=>{0!==s&&(o++,c.done())}).next(()=>o>0)}_t(e,n){return Up(e).get(n).next(r=>r?$v(r):null)}}function Up(t){return zi(t,"targets")}function qj(t){return zi(t,"targetGlobal")}function gu(t){return zi(t,"targetDocuments")}function Kj([t,e],[n,r]){const i=cn(t,n);return 0===i?cn(e,r):i}class zde{constructor(e){this.Kn=e,this.buffer=new mr(Kj),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Kj(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Qj{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var n=this;rt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_.A)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){iu(r)?rt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ru(r)}yield n.zn(3e5)}))}}class Hde{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return Ee.resolve(Ps._e);const r=new zde(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector","Garbage collection skipped; disabled"),Ee.resolve(zj)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zj):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,o,s,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(o=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),wp()<=Ss.$b.DEBUG&&rt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-h}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(l-a)+`ms\n\tRemoved ${f} documents in `+(c-l)+`ms\nTotal Duration: ${c-h}ms`),Ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}}class Gde{constructor(e,n){this.db=e,this.garbageCollector=function Yj(t,e){return new Hde(t,e)}(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return sb(e,r)}removeReference(e,n,r){return sb(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return sb(e,n)}er(e,n){return function(i,o){let s=!1;return Wj(i).Z(a=>Gj(i,a,o).next(l=>(l&&(s=!0),Ee.resolve(!l)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Xn(e,(s,a)=>{if(a<=n){const l=this.er(e,s).next(c=>{if(!c)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,zt.min()),gu(e).delete([0,wo(s.path)])))});i.push(l)}}).next(()=>Ee.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return sb(e,n)}Xn(e,n){const r=gu(e);let i,o=Ps._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:l,sequenceNumber:c})=>{0===s?(o!==Ps._e&&n(new Tt(hl(i)),o),o=c,i=l):o=Ps._e}).next(()=>{o!==Ps._e&&n(new Tt(hl(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function sb(t,e){return gu(t).put((i=t.currentSequenceNumber,{targetId:0,path:wo(e.path),sequenceNumber:i}));var i}class Xj{constructor(){this.changes=new tc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Or.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?Ee.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Wde{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return zd(e).put(r)}removeEntry(e,n,r){return zd(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],eb(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=Or.newInvalidDocument(n);return zd(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Hv(n))},(i,o)=>{r=this.nr(n,o)}).next(()=>r)}rr(e,n){let r={size:0,document:Or.newInvalidDocument(n)};return zd(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Hv(n))},(i,o)=>{r={document:this.nr(n,o),size:ib(o)}}).next(()=>r)}getEntries(e,n){let r=us();return this.ir(e,n,(i,o)=>{const s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,n){let r=us(),i=new Tr(Tt.comparator);return this.ir(e,n,(o,s)=>{const a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,ib(s))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return Ee.resolve();let i=new mr(t6);n.forEach(l=>i=i.add(l));const o=IDBKeyRange.bound(Hv(i.first()),Hv(i.last())),s=i.getIterator();let a=s.getNext();return zd(e).Y({index:"documentKeyIndex",range:o},(l,c,h)=>{const f=Tt.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&t6(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,c),a=s.hasNext()?s.getNext():null),a?h.U(Hv(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){const s=n.path,a=[s.popLast().toArray(),s.lastSegment(),eb(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zd(e).W(IDBKeyRange.bound(a,l,!0)).next(c=>{null==o||o.incrementDocumentReadCount(c.length);let h=us();for(const f of c){const m=this.nr(Tt.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(xv(n,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,n,r,i){let o=us();const s=e6(n,r),a=e6(n,xs.max());return zd(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(l,c,h)=>{const f=this.nr(Tt.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);o=o.insert(f.key,f),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new qde(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Zj(e).get("remoteDocumentGlobalKey").next(n=>(Ut(!!n),n))}tr(e,n){return Zj(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const r=function kde(t,e){let n;if(e.document)n=wj(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Tt.fromSegments(e.noDocument.path),i=Vd(e.noDocument.readTime);n=Or.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ft();{const r=Tt.fromSegments(e.unknownDocument.path),i=Vd(e.unknownDocument.version);n=Or.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const o=new Br(i[0],i[1]);return zt.fromTimestamp(o)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(zt.min()))return r}return Or.newInvalidDocument(e)}}function Jj(t){return new Wde(t)}class qde extends Xj{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new tc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new mr((o,s)=>cn(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){const l=Rj(this.ar.serializer,s);i=i.add(o.path.popLast());const c=ib(l);r+=c-a.size,n.push(this.ar.addEntry(e,o,l))}else if(r-=a.size,this.trackRemovals){const l=Rj(this.ar.serializer,s.convertToNoDocument(zt.min()));n.push(this.ar.addEntry(e,o,l))}}),i.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,r)),Ee.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function Zj(t){return zi(t,"remoteDocumentGlobal")}function zd(t){return zi(t,"remoteDocumentsV14")}function Hv(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function e6(t,e){const n=e.documentKey.path.toArray();return[t,eb(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function t6(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=cn(n[o],r[o]),i)return i;return i=cn(n.length,r.length),i||(i=cn(n[n.length-2],r[r.length-2]),i||cn(n[n.length-1],r[r.length-1]))}class Kde{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class n6{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Nv(r.mutation,i,cs.empty(),Br.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,yn()).next(()=>r))}getLocalViewOfDocuments(e,n,r=yn()){const i=pl();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Pv();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=pl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,yn()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=us();const s=Mv(),a=Mv();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(void 0===h||h.mutation instanceof nc)?o=o.insert(c.key,c):void 0!==h?(s.set(c.key,h.mutation.getFieldMask()),Nv(h.mutation,c,h.mutation.getFieldMask(),Br.now())):s.set(c.key,cs.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,h)=>s.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new Kde(h,null!==(f=s.get(c))&&void 0!==f?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Mv();let i=new Tr((s,a)=>s-a),o=yn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(l=>{const c=n.get(l);if(null===c)return;let h=r.get(l)||cs.empty();h=a.applyToLocalView(c,h),r.set(l,h);const f=(i.get(a.batchId)||yn()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,f=W5();h.forEach(m=>{if(!o.has(m)){const v=tj(n.get(m),r.get(m));null!==v&&f.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,f))}return Ee.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return Tt.isDocumentKey((s=n).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):wR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var s}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):Ee.resolve(pl());let a=-1,l=o;return s.next(c=>Ee.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(h)?Ee.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,yn())).next(h=>({batchId:a,changes:G5(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Tt(n)).next(r=>{let i=Pv();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Pv();return this.indexManager.getCollectionParents(e,o).next(a=>Ee.forEach(a,l=>{const c=(f=n,m=l.child(o),new ec(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt));var f,m;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((f,m)=>{s=s.insert(f,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((l,c)=>{const h=c.getKey();null===s.get(h)&&(s=s.insert(h,Or.newInvalidDocument(h)))});let a=Pv();return s.forEach((l,c)=>{const h=o.get(l);void 0!==h&&Nv(h.mutation,c,cs.empty(),Br.now()),xv(n,c)&&(a=a.insert(l,c))}),a})}}class Qde{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return Ee.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,{id:(i=n).id,version:i.version,createTime:ci(i.createTime)}),Ee.resolve();var i}getNamedQuery(e,n){return Ee.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,{name:(i=n).name,query:FR(i.bundledQuery),readTime:ci(i.readTime)}),Ee.resolve();var i}}class Yde{constructor(){this.overlays=new Tr(Tt.comparator),this.hr=new Map}getOverlay(e,n){return Ee.resolve(this.overlays.get(n))}getOverlays(e,n){const r=pl();return Ee.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),Ee.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),Ee.resolve()}getOverlaysForCollection(e,n,r){const i=pl(),o=n.length+1,s=new Tt(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Ee.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Tr((c,h)=>c-h);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=o.get(c.largestBatchId);null===h&&(h=pl(),o=o.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=pl(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return Ee.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new SR(n,r));let o=this.hr.get(n);void 0===o&&(o=yn(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}}class zR{constructor(){this.Pr=new mr(Hi.Ir),this.Tr=new mr(Hi.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Hi(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Hi(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new Tt(new On([])),r=new Hi(n,e),i=new Hi(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new Tt(new On([])),r=new Hi(n,e),i=new Hi(n,e+1);let o=yn();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Hi(e,0),r=this.Pr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class Hi{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Tt.comparator(e.key,n.key)||cn(e.pr,n.pr)}static Er(e,n){return cn(e.pr,n.pr)||Tt.comparator(e.key,n.key)}}class Xde{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new mr(Hi.Ir)}checkEmpty(e){return Ee.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const o=this.yr;this.yr++;const s=new AR(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.wr=this.wr.add(new Hi(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ee.resolve(s)}lookupMutationBatch(e,n){return Ee.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.br(n+1),o=i<0?0:i;return Ee.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Ee.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Hi(n,0),i=new Hi(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{const a=this.Sr(s.pr);o.push(a)}),Ee.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new mr(cn);return n.forEach(i=>{const o=new Hi(i,0),s=new Hi(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),Ee.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Tt.isDocumentKey(o)||(o=o.child(""));const s=new Hi(new Tt(o),0);let a=new mr(cn);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},s),Ee.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){Ut(0===this.Cr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return Ee.forEach(n.mutations,i=>{const o=new Hi(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Hi(n,0),i=this.wr.firstAfterOrEqual(r);return Ee.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return Ee.resolve()}Cr(e,n){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Jde{constructor(e){this.vr=e,this.docs=new Tr(Tt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ee.resolve(r?r.document.mutableCopy():Or.newInvalidDocument(n))}getEntries(e,n){let r=us();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Or.newInvalidDocument(i))}),Ee.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=us();const s=n.path,a=new Tt(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||hR(o5(h),r)<=0||(i.has(h.key)||xv(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return Ee.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Ft()}Fr(e,n){return Ee.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Zde(this)}getSize(e){return Ee.resolve(this.size)}}class Zde extends Xj{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),Ee.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}class ehe{constructor(e){this.persistence=e,this.Mr=new tc(n=>Nd(n),Sv),this.lastRemoteSnapshotVersion=zt.min(),this.highestTargetId=0,this.Or=0,this.Nr=new zR,this.targetCount=0,this.Lr=jd.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),Ee.resolve()}getLastRemoteSnapshotVersion(e){return Ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ee.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Ee.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new jd(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,Ee.resolve()}updateTargetData(e,n){return this.qn(n),Ee.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Ee.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Ee.waitFor(o).next(()=>i)}getTargetCount(e){return Ee.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return Ee.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),Ee.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),Ee.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),Ee.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return Ee.resolve(r)}containsKey(e,n){return Ee.resolve(this.Nr.containsKey(n))}}class HR{constructor(e,n){this.Br={},this.overlays={},this.kr=new Ps(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new ehe(this),this.indexManager=new $de,this.remoteDocumentCache=new Jde(r=>this.referenceDelegate.Kr(r)),this.serializer=new Sj(n),this.$r=new Qde(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Yde,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new Xde(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){rt("MemoryPersistence","Starting transaction:",e);const i=new the(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return Ee.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class the extends a5{constructor(e){super(),this.currentSequenceNumber=e}}class ab{constructor(e){this.persistence=e,this.zr=new zR,this.jr=null}static Hr(e){return new ab(e)}get Jr(){if(this.jr)return this.jr;throw Ft()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Ee.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Ee.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),Ee.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ee.forEach(this.Jr,r=>{const i=Tt.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,zt.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return Ee.or([()=>Ee.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}class nhe{constructor(e){this.serializer=e}N(e,n,r,i){const o=new Vw("createOrUpgrade",n);var l;r<1&&i>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",d5,{unique:!0}),l.createObjectStore("documentMutations"),r6(e),function(l){l.createObjectStore("remoteDocuments")}(e));let s=Ee.resolve();return r<3&&i>=3&&(0!==r&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),r6(e)),s=s.next(()=>function(l){const c=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:zt.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(0!==r&&(s=s.next(()=>function(l,c){return c.store("mutations").W().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",d5,{unique:!0});const f=c.store("mutations"),m=h.map(v=>f.put(v));return Ee.waitFor(m)})}(e,o))),s=s.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:Uue});c.createIndex("collectionPathOverlayIndex",jue,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",zue,{unique:!1})}(e)})),r<13&&i>=13&&(s=s.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:xue});c.createIndex("documentKeyIndex",Pue),c.createIndex("collectionGroupIndex",Mue)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:Lue}).createIndex("sequenceNumberIndex",Vue,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:Bue}).createIndex("documentKeyIndex",$ue,{unique:!1})}(e))),s}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=ib(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>Ee.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>Ee.forEach(a,l=>{Ut(l.userId===o.userId);const c=Bd(this.serializer,l);return Hj(e,o.userId,c).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.Y((s,a)=>{const l=new On(s),c=[0,wo(l)];o.push(n.get(c).next(h=>h?Ee.resolve():n.put({targetId:0,path:wo(l),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Ee.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:Fue});const r=n.store("collectionParents"),i=new jR,o=s=>{if(i.add(s)){const a=s.lastSegment(),l=s.popLast();return r.put({collectionId:a,parent:wo(l)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{const l=new On(s);return o(l.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,l],c)=>{const h=hl(a);return o(h.popLast())}))}ri(e){const n=e.store("targets");return n.Y((r,i)=>{const o=$v(i),s=xj(this.serializer,o);return n.put(s)})}ii(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{const a=n.store("remoteDocumentsV14"),l=(f=s,f.document?new Tt(On.fromString(f.document.name).popFirst(5)):f.noDocument?Tt.fromSegments(f.noDocument.path):f.unknownDocument?Tt.fromSegments(f.unknownDocument.path):Ft()).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};var f;i.push(a.put(c))}).next(()=>Ee.waitFor(i))}si(e,n){const r=n.store("mutations"),i=Jj(this.serializer),o=new HR(ab.Hr,this.serializer.ct);return r.W().next(s=>{const a=new Map;return s.forEach(l=>{var c;let h=null!==(c=a.get(l.userId))&&void 0!==c?c:yn();Bd(this.serializer,l).keys().forEach(f=>h=h.add(f)),a.set(l.userId,h)}),Ee.forEach(a,(l,c)=>{const h=new ji(c),f=tb.lt(this.serializer,h),m=o.getIndexManager(h),v=ob.lt(h,this.serializer,m,o.referenceDelegate);return new n6(i,v,f,m).recalculateAndSaveOverlaysForDocumentKeys(new gR(n,Ps._e),l).next()})})}}function r6(t){t.createObjectStore("targetDocuments",{keyPath:Nue}).createIndex("documentTargetsIndex",Oue,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kue,{unique:!0}),t.createObjectStore("targetGlobal")}const GR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class WR{constructor(e,n,r,i,o,s,a,l,c,h,f=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=c,this.ai=h,this.ui=f,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=m=>Promise.resolve(),!WR.D())throw new Xe(Pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Gde(this,i),this.Ti=n+"main",this.serializer=new Sj(l),this.Ei=new ia(this.Ti,this.ui,new nhe(this.serializer)),this.Qr=new jde(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Jj(this.serializer),this.$r=new Nde,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===h&&li("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Xe(Pe.FAILED_PRECONDITION,GR);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Ps(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var n=this;return this.Ii=function(){var r=(0,_.A)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B(function(){var n=(0,_.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,_.A)(function*(){n.started&&(yield n.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>cb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(iu(e))return rt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return rt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Gv(e).get("owner").next(n=>Ee.resolve(this.Si(n)))}bi(e){return cb(e).delete(this.clientId)}Di(){var e=this;return(0,_.A)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=zi(r,"clientMetadata");return i.W().next(o=>{const s=e.vi(o,18e5),a=o.filter(l=>-1===s.indexOf(l));return Ee.forEach(a,l=>i.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of n)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Ee.resolve(!0):Gv(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new Xe(Pe.FAILED_PRECONDITION,GR);return!1}}return!(!this.networkEnabled||!this.inForeground)||cb(e).W().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&rt("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,_.A)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new gR(n,Ps._e);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>cb(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return ob.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ude(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return tb.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){rt("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",o=15===(l=this.ui)?Gue:14===l?g5:13===l?p5:12===l?Hue:11===l?f5:void Ft();var l;let s;return this.Ei.runTransaction(e,i,o,a=>(s=new gR(a,this.kr?this.kr.next():Ps._e),"readwrite-primary"===n?this.gi(s).next(l=>!!l||this.pi(s)).next(l=>{if(!l)throw li(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Xe(Pe.FAILED_PRECONDITION,s5);return r(s)}).next(l=>this.wi(s).next(()=>l)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return Gv(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Xe(Pe.FAILED_PRECONDITION,GR)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gv(e).put("owner",n)}static D(){return ia.D()}yi(e){const n=Gv(e);return n.get("owner").next(r=>this.Si(r)?(rt("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Ee.resolve())}Ci(e,n){const r=Date.now();return!(e<r-n||e>r&&(li(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,x.nr)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const r=null!==(null===(n=this.di)||void 0===n?void 0:n.getItem(this.Fi(e)));return rt("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return li("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){li("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gv(t){return zi(t,"owner")}function cb(t){return zi(t,"clientMetadata")}function qR(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class KR{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=yn(),i=yn();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new KR(e,n.fromCache,r,i)}}class rhe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class i6{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,x.nr)()?8:ia.v((0,x.ZQ)())>0?6:4}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new rhe;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(wp()<=Ss.$b.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",Pp(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Ee.resolve()):(wp()<=Ss.$b.DEBUG&&rt("QueryEngine","Query:",Pp(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(wp()<=Ss.$b.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",Pp(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ho(n))):Ee.resolve())}ji(e,n){if(B5(n))return Ee.resolve(null);let r=Ho(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=Kw(n,null,"F"),r=Ho(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=yn(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,s,l.readTime)?this.ji(e,Kw(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return B5(n)||i.isEqual(zt.min())?Ee.resolve(null):this.zi.getDocuments(e,r).next(o=>{const s=this.Zi(n,o);return this.Xi(n,s,r,i)?Ee.resolve(null):(wp()<=Ss.$b.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Pp(n)),this.es(e,s,n,i5(i,-1)).next(a=>a))})}Zi(e,n){let r=new mr(z5(e));return n.forEach((i,o)=>{xv(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const o="F"===e.limitType?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return wp()<=Ss.$b.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",Pp(n)),this.zi.getDocumentsMatchingQuery(e,n,xs.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}class ihe{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Tr(cn),this.rs=new tc(o=>Nd(o),Sv),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new n6(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function o6(t,e,n,r){return new ihe(t,e,n,r)}function s6(t,e){return QR.apply(this,arguments)}function QR(){return QR=(0,_.A)(function*(t,e){const n=Et(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let l=yn();for(const c of i){s.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of o){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:s,addedBatchIds:a}))})})}),QR.apply(this,arguments)}function a6(t){const e=Et(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function l6(t,e,n){let r=yn(),i=yn();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=us();return n.forEach((a,l)=>{const c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(zt.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):rt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:s,ls:i}})}function ahe(t,e){const n=Et(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function jp(t,e){const n=Et(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,Ee.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new rc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function zp(t,e,n){return YR.apply(this,arguments)}function YR(){return YR=(0,_.A)(function*(t,e,n){const r=Et(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!iu(s))throw s;rt("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}),YR.apply(this,arguments)}function ub(t,e,n){const r=Et(t);let i=zt.min(),o=yn();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,h){const f=Et(l),m=f.rs.get(h);return void 0!==m?Ee.resolve(f.ns.get(m)):f.Qr.getTargetData(c,h)}(r,s,Ho(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:zt.min(),n?o:yn())).next(a=>(d6(r,j5(e),a),{documents:a,hs:o})))}function c6(t,e){const n=Et(t),r=Et(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function u6(t,e){const n=Et(t),r=n.ss.get(e)||zt.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,i5(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(d6(n,e,i),i))}function d6(t,e,n){let r=t.ss.get(e)||zt.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}function XR(){return XR=(0,_.A)(function*(t,e,n,r){const i=Et(t);let o=yn(),s=us();for(const c of n){const h=e.Ps(c.metadata.name);c.document&&(o=o.add(h));const f=e.Is(c);f.setReadTime(e.Ts(c.metadata.readTime)),s=s.insert(h,f)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=yield jp(i,(h=r,Ho(Rp(On.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>l6(c,a,s).next(h=>(a.apply(c),h)).next(h=>i.Qr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Qr.addMatchingKeys(c,o,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,h.cs,h.ls)).next(()=>h.cs)))}),XR.apply(this,arguments)}function che(t,e){return JR.apply(this,arguments)}function JR(){return JR=(0,_.A)(function*(t,e,n=yn()){const r=yield jp(t,Ho(FR(e.bundledQuery))),i=Et(t);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=ci(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(o,e);const a=r.withResumeToken(Di.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(o,a).next(()=>i.Qr.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Qr.addMatchingKeys(o,n,r.targetId)).next(()=>i.$r.saveNamedQuery(o,e))})}),JR.apply(this,arguments)}function h6(t,e){return`firestore_clients_${t}_${e}`}function f6(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ZR(t,e){return`firestore_targets_${t}_${e}`}class db{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){const i=JSON.parse(r);let o,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(o=new Xe(i.error.code,i.error.message))),s?new db(e,n,i.state,o):(li("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wv{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Xe(r.error.code,r.error.message))),o?new Wv(e,r.state,i):(li("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hb{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=CR();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=c5(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new hb(e,o):(li("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class ex{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new ex(n.clientId,n.onlineState):(li("SharedClientState",`Failed to parse online state: ${e}`),null)}}class tx{constructor(){this.activeTargetIds=CR()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nx{constructor(e,n,r,i,o){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Tr(cn),this.started=!1,this.ys=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=h6(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new tx),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_.A)(function*(){const n=yield e.syncEngine.Bi();for(const i of n){if(i===e.Vs)continue;const o=e.getItem(h6(e.persistenceKey,i));if(o){const s=hb.Es(i,o);s&&(e.ps=e.ps.insert(s.clientId,s))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ZR(this.persistenceKey,e));if(r){const i=Wv.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ZR(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return rt("SharedClientState","READ",e,n),n}setItem(e,n){rt("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){rt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(rt("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void li("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,_.A)(function*(){if(n.started){if(null!==r.key)if(n.bs.test(r.key)){if(null==r.newValue){const i=n.$s(r.key);return n.Us(i,null)}{const i=n.Ws(r.key,r.newValue);if(i)return n.Us(i.clientId,i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.Gs(r.key,r.newValue);if(i)return n.zs(i)}}else if(n.Cs.test(r.key)){if(null!==r.newValue){const i=n.js(r.key,r.newValue);if(i)return n.Hs(i)}}else if(r.key===n.vs){if(null!==r.newValue){const i=n.xs(r.newValue);if(i)return n.Os(i)}}else if(r.key===n.Ss){const i=function(s){let a=Ps._e;if(null!=s)try{const l=JSON.parse(s);Ut("number"==typeof l),a=l}catch(l){li("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(r.newValue);i!==Ps._e&&n.sequenceNumberHandler(i)}else if(r.key===n.Fs){const i=n.Js(r.newValue);yield Promise.all(i.map(o=>n.syncEngine.Ys(o)))}}else n.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){const i=new db(this.currentUser,e,n,r),o=f6(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Bs(e){const n=f6(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,n,r){const i=ZR(this.persistenceKey,e),o=new Wv(e,n,r);this.setItem(i,o.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const r=this.$s(e);return hb.Es(r,n)}Gs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return db.Es(new ji(void 0!==r[2]?r[2]:null),i,n)}js(e,n){const r=this.Cs.exec(e),i=Number(r[1]);return Wv.Es(i,n)}xs(e){return ex.Es(e)}Js(e){return JSON.parse(e)}zs(e){var n=this;return(0,_.A)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Zs(e.batchId,e.state,e.error);rt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(l=>{i.has(l)||s.push(l)}),i.forEach(l=>{o.has(l)||a.push(l)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=CR();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class p6{constructor(){this.no=new tx,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new tx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class uhe{io(e){}shutdown(){}}class g6{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){rt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){rt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let fb=null;function rx(){return null===fb?fb=268435456+Math.round(2147483648*Math.random()):fb++,"0x"+fb.toString(16)}const dhe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hhe{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Co="WebChannelConnection";class fhe extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${o}`,this.yo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(n,r,i,o,s){const a=rx(),l=this.bo(n,r.toUriEncodedString());rt("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,o,s),this.Co(n,l,c,i).then(h=>(rt("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw ls("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}vo(n,r,i,o,s,a){return this.So(n,r,i,o,s)}Do(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+Ep,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}bo(n,r){return`${this.fo}/v1/${r}:${dhe[n]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){const o=rx();return new Promise((s,a)=>{const l=new uue;l.setWithCredentials(!0),l.listenOnce(lue.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case cR.NO_ERROR:const h=l.getResponseJson();rt(Co,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case cR.TIMEOUT:rt(Co,`RPC '${e}' ${o} timed out`),a(new Xe(Pe.DEADLINE_EXCEEDED,"Request time out"));break;case cR.HTTP_ERROR:const f=l.getStatus();if(rt(Co,`RPC '${e}' ${o} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=null==m?void 0:m.error;if(v&&v.status&&v.message){const w=function(N){const z=N.toLowerCase().replace(/_/g,"-");return Object.values(Pe).indexOf(z)>=0?z:Pe.UNKNOWN}(v.status);a(new Xe(w,v.message))}else a(new Xe(Pe.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Xe(Pe.UNAVAILABLE,"Connection failed."));break;default:Ft()}}finally{rt(Co,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);rt(Co,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",c,r,15)})}Fo(e,n,r){const i=rx(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=sue(),a=aue(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=o.join("");rt(Co,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=s.createWebChannel(h,l);let m=!1,v=!1;const w=new hhe({lo:N=>{v?rt(Co,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(rt(Co,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),rt(Co,`RPC '${e}' stream ${i} sending:`,N),f.send(N))},ho:()=>f.close()}),R=(N,z,Q)=>{N.listen(z,Te=>{try{Q(Te)}catch(Ae){setTimeout(()=>{throw Ae},0)}})};return R(f,Lw.EventType.OPEN,()=>{v||rt(Co,`RPC '${e}' stream ${i} transport opened.`)}),R(f,Lw.EventType.CLOSE,()=>{v||(v=!0,rt(Co,`RPC '${e}' stream ${i} transport closed`),w.Vo())}),R(f,Lw.EventType.ERROR,N=>{v||(v=!0,ls(Co,`RPC '${e}' stream ${i} transport errored:`,N),w.Vo(new Xe(Pe.UNAVAILABLE,"The operation could not be completed")))}),R(f,Lw.EventType.MESSAGE,N=>{var z;if(!v){const Q=N.data[0];Ut(!!Q);const Ae=Q.error||(null===(z=Q[0])||void 0===z?void 0:z.error);if(Ae){rt(Co,`RPC '${e}' stream ${i} received error:`,Ae);const Je=Ae.status;let mt=function(Do){const Mu=Ei[Do];if(void 0!==Mu)return aj(Mu)}(Je),Xt=Ae.message;void 0===mt&&(mt=Pe.INTERNAL,Xt="Unknown error status: "+Je+" with message "+Ae.message),v=!0,w.Vo(new Xe(mt,Xt)),f.close()}else rt(Co,`RPC '${e}' stream ${i} received:`,Q),w.mo(Q)}}),R(a,cue.STAT_EVENT,N=>{N.stat===J3.PROXY?rt(Co,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===J3.NOPROXY&&rt(Co,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.Ro()},0),w}}function m6(){return typeof window<"u"?window:null}function pb(){return typeof document<"u"?document:null}function qv(t){return new bde(t,!0)}class ix{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&rt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class _6{constructor(e,n,r,i,o,s,a,l){this.oi=e,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new ix(e,n)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,_.A)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,_.A)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){var r=this;return(0,_.A)(function*(){r.n_(),r.r_(),r.jo.cancel(),r.Wo++,4!==e?r.jo.reset():n&&n.code===Pe.RESOURCE_EXHAUSTED?(li(n.toString()),li("Using maximum backoff delay to prevent overloading the backend."),r.jo.ko()):n&&n.code===Pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.i_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.To(n)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{const i=new Xe(Pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){var e=this;this.state=5,this.jo.qo((0,_.A)(function*(){e.state=0,e.start()}))}__(e){return rt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(rt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class phe extends _6{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=function Ade(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:Ft(),i=e.targetChange.targetIds||[],o=function(c,h){return c.useProto3Json?(Ut(void 0===h||"string"==typeof h),Di.fromBase64String(h||"")):(Ut(void 0===h||h instanceof Uint8Array),Di.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const h=void 0===c.code?Pe.UNKNOWN:aj(c.code);return new Xe(h,c.message||"")}(s);n=new hj(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=gl(t,r.document.name),o=ci(r.document.updateTime),s=r.document.createTime?ci(r.document.createTime):zt.min(),a=new oo({mapValue:{fields:r.document.fields}}),l=Or.newFoundDocument(i,o,s,a);n=new Zw(r.targetIds||[],r.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const r=e.documentDelete,i=gl(t,r.document),o=r.readTime?ci(r.readTime):zt.min(),s=Or.newNoDocument(i,o);n=new Zw([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=gl(t,r.document);n=new Zw([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ft();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new _de(i,o);n=new dj(r.targetId,s)}}var c;return n}(this.serializer,e),r=function(o){if(!("targetChange"in o))return zt.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?zt.min():s.readTime?ci(s.readTime):zt.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=kR(this.serializer),n.addTarget=function(o,s){let a;const l=s.target;if(a=Ww(l)?{documents:bj(o,l)}:{query:OR(o,l).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=mj(o,s.resumeToken);const c=xR(o,s.expectedCount);null!==c&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(zt.min())>0){a.readTime=Fp(o,s.snapshotVersion.toTimestamp());const c=xR(o,s.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function Sde(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ft()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=kR(this.serializer),n.removeTarget=e,this.t_(n)}}class ghe extends _6{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(Ut(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=function Dde(t,e){return t&&t.length>0?(Ut(void 0!==e),t.map(n=>function(i,o){let s=ci(i.updateTime?i.updateTime:o);return s.isEqual(zt.min())&&(s=ci(o)),new fde(s,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=ci(e.commitTime);return this.listener.T_(r,n)}return Ut(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=kR(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Bv(this.serializer,r))};this.t_(n)}}class mhe extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new Xe(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,MR(n,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Xe(Pe.UNKNOWN,o.toString())})}vo(e,n,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,MR(n,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Xe(Pe.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}function ox(){return ox=(0,_.A)(function*(t,e,n){var r;const i=Et(t),{request:o,V_:s,parent:a}=function(f,m,v){const{ut:w,parent:R}=OR(f,m),N={},z=[];let Q=0;return v.forEach(Te=>{const Ae="aggregate_"+Q++;N[Ae]=Te.alias,"count"===Te.aggregateType?z.push({alias:Ae,count:{}}):"avg"===Te.aggregateType?z.push({alias:Ae,avg:{field:hu(Te.fieldPath)}}):"sum"===Te.aggregateType&&z.push({alias:Ae,sum:{field:hu(Te.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:z,structuredQuery:w.structuredQuery},parent:w.parent},V_:N,parent:R}}(i.serializer,function(f){const m=Et(f);return m.Pe||(m.Pe=$5(m,f.explicitOrderBy)),m.Pe}(e),n);i.connection.wo||delete o.parent;const l=(yield i.vo("RunAggregationQuery",i.serializer.databaseId,a,o,1)).filter(h=>!!h.result);Ut(1===l.length);const c=null===(r=l[0].result)||void 0===r?void 0:r.aggregateFields;return Object.keys(c).reduce((h,f)=>(h[s[f]]=c[f],h),{})}),ox.apply(this,arguments)}class vhe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(li(n),this.g_=!1):rt("OnlineStateTracker",n)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class yhe{constructor(e,n,r,i,o){var s=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(a=>{r.enqueueAndForget((0,_.A)(function*(){var l;mu(s)&&(rt("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,_.A)(function*(h){const f=Et(h);f.v_.add(4),yield Hp(f),f.x_.set("Unknown"),f.v_.delete(4),yield Kv(f)}),function c(h){return l.apply(this,arguments)})(s))}))}),this.x_=new vhe(r,i)}}function Kv(t){return sx.apply(this,arguments)}function sx(){return sx=(0,_.A)(function*(t){if(mu(t))for(const e of t.F_)yield e(!0)}),sx.apply(this,arguments)}function Hp(t){return ax.apply(this,arguments)}function ax(){return ax=(0,_.A)(function*(t){for(const e of t.F_)yield e(!1)}),ax.apply(this,arguments)}function gb(t,e){const n=Et(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),ux(n)?cx(n):qp(n).Jo()&&lx(n,e))}function Gp(t,e){const n=Et(t),r=qp(n);n.C_.delete(e),r.Jo()&&v6(n,e),0===n.C_.size&&(r.Jo()?r.Xo():mu(n)&&n.x_.set("Unknown"))}function lx(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(zt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qp(t).c_(e)}function v6(t,e){t.O_.Oe(e),qp(t).l_(e)}function cx(t){t.O_=new yde({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),qp(t).start(),t.x_.p_()}function ux(t){return mu(t)&&!qp(t).Ho()&&t.C_.size>0}function mu(t){return 0===Et(t).v_.size}function y6(t){t.O_=void 0}function Ihe(t){return dx.apply(this,arguments)}function dx(){return dx=(0,_.A)(function*(t){t.C_.forEach((e,n)=>{lx(t,e)})}),dx.apply(this,arguments)}function Ehe(t,e){return hx.apply(this,arguments)}function hx(){return hx=(0,_.A)(function*(t,e){y6(t),ux(t)?(t.x_.S_(e),cx(t)):t.x_.set("Unknown")}),hx.apply(this,arguments)}function whe(t,e,n){return fx.apply(this,arguments)}function fx(){return fx=(0,_.A)(function*(t,e,n){if(t.x_.set("Online"),e instanceof hj&&2===e.state&&e.cause)try{yield(r=(0,_.A)(function*(o,s){const a=s.cause;for(const l of s.targetIds)o.C_.has(l)&&(yield o.remoteSyncer.rejectListen(l,a),o.C_.delete(l),o.O_.removeTarget(l))}),function i(o,s){return r.apply(this,arguments)})(t,e)}catch(r){rt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield mb(t,r)}else if(e instanceof Zw?t.O_.$e(e):e instanceof dj?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(zt.min()))try{const r=yield a6(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.O_.it(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=o.C_.get(c);h&&o.C_.set(c,h.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{const h=o.C_.get(l);if(!h)return;o.C_.set(l,h.withResumeToken(Di.EMPTY_BYTE_STRING,h.snapshotVersion)),v6(o,l);const f=new rc(h.target,l,c,h.sequenceNumber);lx(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){rt("RemoteStore","Failed to raise snapshot:",r),yield mb(t,r)}var r}),fx.apply(this,arguments)}function mb(t,e,n){return px.apply(this,arguments)}function px(){return px=(0,_.A)(function*(t,e,n){if(!iu(e))throw e;t.v_.add(1),yield Hp(t),t.x_.set("Offline"),n||(n=()=>a6(t.localStore)),t.asyncQueue.enqueueRetryable((0,_.A)(function*(){rt("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Kv(t)}))}),px.apply(this,arguments)}function I6(t,e){return e().catch(n=>mb(t,n,e))}function Wp(t){return gx.apply(this,arguments)}function gx(){return gx=(0,_.A)(function*(t){const e=Et(t),n=_u(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;bhe(e);)try{const i=yield ahe(e.localStore,r);if(null===i){0===e.D_.length&&n.Xo();break}r=i.batchId,Che(e,i)}catch(i){yield mb(e,i)}E6(e)&&w6(e)}),gx.apply(this,arguments)}function bhe(t){return mu(t)&&t.D_.length<10}function Che(t,e){t.D_.push(e);const n=_u(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function E6(t){return mu(t)&&!_u(t).Ho()&&t.D_.length>0}function w6(t){_u(t).start()}function The(t){return mx.apply(this,arguments)}function mx(){return mx=(0,_.A)(function*(t){_u(t).d_()}),mx.apply(this,arguments)}function Ahe(t){return _x.apply(this,arguments)}function _x(){return _x=(0,_.A)(function*(t){const e=_u(t);for(const n of t.D_)e.I_(n.mutations)}),_x.apply(this,arguments)}function Dhe(t,e,n){return vx.apply(this,arguments)}function vx(){return vx=(0,_.A)(function*(t,e,n){const r=t.D_.shift(),i=DR.from(r,e,n);yield I6(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Wp(t)}),vx.apply(this,arguments)}function She(t,e){return yx.apply(this,arguments)}function yx(){return yx=(0,_.A)(function*(t,e){var n;e&&_u(t).P_&&(yield(n=(0,_.A)(function*(i,o){if(sj(a=o.code)&&a!==Pe.ABORTED){const s=i.D_.shift();_u(i).Zo(),yield I6(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield Wp(i)}var a}),function r(i,o){return n.apply(this,arguments)})(t,e)),E6(t)&&w6(t)}),yx.apply(this,arguments)}function b6(t,e){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,_.A)(function*(t,e){const n=Et(t);n.asyncQueue.verifyOperationInProgress(),rt("RemoteStore","RemoteStore received new credentials");const r=mu(n);n.v_.add(3),yield Hp(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Kv(n)}),Ix.apply(this,arguments)}function Ex(t,e){return wx.apply(this,arguments)}function wx(){return wx=(0,_.A)(function*(t,e){const n=Et(t);e?(n.v_.delete(2),yield Kv(n)):e||(n.v_.add(2),yield Hp(n),n.x_.set("Unknown"))}),wx.apply(this,arguments)}function qp(t){return t.N_||(t.N_=function(n,r,i){const o=Et(n);return o.R_(),new phe(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:Ihe.bind(null,t),To:Ehe.bind(null,t),u_:whe.bind(null,t)}),t.F_.push(function(){var e=(0,_.A)(function*(n){n?(t.N_.Zo(),ux(t)?cx(t):t.x_.set("Unknown")):(yield t.N_.stop(),y6(t))});return function(n){return e.apply(this,arguments)}}())),t.N_}function _u(t){return t.L_||(t.L_=function(n,r,i){const o=Et(n);return o.R_(),new ghe(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:The.bind(null,t),To:She.bind(null,t),E_:Ahe.bind(null,t),T_:Dhe.bind(null,t)}),t.F_.push(function(){var e=(0,_.A)(function*(n){n?(t.L_.Zo(),yield Wp(t)):(yield t.L_.stop(),t.D_.length>0&&(rt("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))});return function(n){return e.apply(this,arguments)}}())),t.L_}class bx{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new bx(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xe(Pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kp(t,e){if(li("AsyncQueue",`${e}: ${t}`),iu(t))return new Xe(Pe.UNAVAILABLE,`${e}: ${t}`);throw t}class Qp{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Tt.comparator(n.key,r.key):(n,r)=>Tt.comparator(n.key,r.key),this.keyedMap=Pv(),this.sortedSet=new Tr(this.comparator)}static emptySet(e){return new Qp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qp)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Qp;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class C6{constructor(){this.B_=new Tr(Tt.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(n):1===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):Ft():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Yp{constructor(e,n,r,i,o,s,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new Yp(e,n,Qp.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class Rhe{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class xhe{constructor(){this.queries=new tc(e=>U5(e),Rv),this.onlineState="Unknown",this.W_=new Set}}function Cx(t,e){return Tx.apply(this,arguments)}function Tx(){return Tx=(0,_.A)(function*(t,e){const n=Et(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.K_()&&e.U_()&&(r=2):(o=new Rhe,r=e.U_()?0:1);try{switch(r){case 0:o.q_=yield n.onListen(i,!0);break;case 1:o.q_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){const a=Kp(s,`Initialization of query '${Pp(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.Q_.push(e),e.G_(n.onlineState),o.q_&&e.z_(o.q_)&&Sx(n)}),Tx.apply(this,arguments)}function Ax(t,e){return Dx.apply(this,arguments)}function Dx(){return Dx=(0,_.A)(function*(t,e){const n=Et(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),0===o.Q_.length?i=e.U_()?0:1:!o.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}),Dx.apply(this,arguments)}function Phe(t,e){const n=Et(t);let r=!1;for(const i of e){const s=n.queries.get(i.query);if(s){for(const a of s.Q_)a.z_(i)&&(r=!0);s.q_=i}}r&&Sx(n)}function Mhe(t,e,n){const r=Et(t),i=r.queries.get(e);if(i)for(const o of i.Q_)o.onError(n);r.queries.delete(e)}function Sx(t){t.W_.forEach(e=>{e.next()})}var Rx,T6;(T6=Rx||(Rx={})).j_="default",T6.Cache="cache";class xx{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Yp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){return!e.fromCache||!this.U_()||(!this.options.ta||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ea(e){e=Yp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==Rx.Cache}}class khe{constructor(e,n){this.na=e,this.byteLength=n}ra(){return"metadata"in this.na}}class A6{constructor(e){this.serializer=e}Ps(e){return gl(this.serializer,e)}Is(e){return e.metadata.exists?wj(this.serializer,e.document,!1):Or.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return ci(e)}}class Nhe{constructor(e,n,r){this.ia=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=D6(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++n;const r=On.fromString(e.na.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}oa(e){const n=new Map,r=new A6(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.Ps(i.metadata.name);for(const s of i.metadata.queries){const a=(n.get(s)||yn()).add(o);n.set(s,a)}}return n}complete(){var e=this;return(0,_.A)(function*(){const n=yield function lhe(t,e,n,r){return XR.apply(this,arguments)}(e.localStore,new A6(e.serializer),e.documents,e.ia.id),r=e.oa(e.documents);for(const i of e.queries)yield che(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,_a:e.collectionGroups,aa:n}})()}}function D6(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class S6{constructor(e){this.key=e}}class R6{constructor(e){this.key=e}}class x6{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=yn(),this.mutatedKeys=yn(),this.ha=z5(e),this.Pa=new Qp(this.ha)}get Ia(){return this.ua}Ta(e,n){const r=n?n.Ea:new C6,i=n?n.Pa:this.Pa;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const m=i.get(h),v=xv(this.query,f)?f:null,w=!!m&&this.mutatedKeys.has(m.key),R=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let N=!1;m&&v?m.data.isEqual(v.data)?w!==R&&(r.track({type:3,doc:v}),N=!0):this.da(m,v)||(r.track({type:2,doc:v}),N=!0,(l&&this.ha(v,l)>0||c&&this.ha(v,c)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),N=!0):m&&!v&&(r.track({type:1,doc:m}),N=!0,(l||c)&&(a=!0)),N&&(v?(s=s.add(v),o=R?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const h="F"===this.query.limitType?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Pa:s,Ea:r,Xi:a,mutatedKeys:o}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const s=e.Ea.k_();s.sort((h,f)=>function(v,w){const R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ft()}};return R(v)-R(w)}(h.type,f.type)||this.ha(h.doc,f.doc)),this.Aa(r),i=null!=i&&i;const a=n&&!i?this.Ra():[],l=0===this.la.size&&this.current&&!i?1:0,c=l!==this.ca;return this.ca=l,0!==s.length||c?{snapshot:new Yp(this.query,e.Pa,o,s,e.mutatedKeys,0===l,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new C6,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=yn(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return e.forEach(r=>{this.la.has(r)||n.push(new R6(r))}),this.la.forEach(r=>{e.has(r)||n.push(new S6(r))}),n}fa(e){this.ua=e.hs,this.la=yn();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return Yp.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class Ohe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Fhe{constructor(e){this.key=e,this.pa=!1}}class Lhe{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.ya={},this.wa=new tc(a=>U5(a),Rv),this.Sa=new Map,this.ba=new Set,this.Da=new Tr(Tt.comparator),this.Ca=new Map,this.va=new zR,this.Fa={},this.Ma=new Map,this.xa=jd.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}function Vhe(t,e){return Px.apply(this,arguments)}function Px(){return Px=(0,_.A)(function*(t,e,n=!0){const r=_b(t);let i;const o=r.wa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ga()):i=yield P6(r,e,n,!0),i}),Px.apply(this,arguments)}function Bhe(t,e){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,_.A)(function*(t,e){const n=_b(t);yield P6(n,e,!0,!1)}),Mx.apply(this,arguments)}function P6(t,e,n,r){return kx.apply(this,arguments)}function kx(){return kx=(0,_.A)(function*(t,e,n,r){const i=yield jp(t.localStore,Ho(e)),o=i.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current";let a;return r&&(a=yield Nx(t,e,o,"current"===s,i.resumeToken)),t.isPrimaryClient&&n&&gb(t.remoteStore,i),a}),kx.apply(this,arguments)}function Nx(t,e,n,r,i){return Ox.apply(this,arguments)}function Ox(){return Ox=(0,_.A)(function*(t,e,n,r,i){t.Na=(f,m,v)=>{return(w=(0,_.A)(function*(N,z,Q,Te){let Ae=z.view.Ta(Q);Ae.Xi&&(Ae=yield ub(N.localStore,z.query,!1).then(({documents:tn})=>z.view.Ta(tn,Ae)));const Je=Te&&Te.targetChanges.get(z.targetId),mt=Te&&null!=Te.targetMismatches.get(z.targetId),Xt=z.view.applyChanges(Ae,N.isPrimaryClient,Je,mt);return Wx(N,z.targetId,Xt.Va),Xt.snapshot}),function R(N,z,Q,Te){return w.apply(this,arguments)})(t,f,m,v);var w};const o=yield ub(t.localStore,e,!0),s=new x6(e,o.hs),a=s.Ta(o.documents),l=Lv.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),c=s.applyChanges(a,t.isPrimaryClient,l);Wx(t,n,c.Va);const h=new Ohe(e,n,s);return t.wa.set(e,h),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot}),Ox.apply(this,arguments)}function $he(t,e,n){return Fx.apply(this,arguments)}function Fx(){return Fx=(0,_.A)(function*(t,e,n){const r=Et(t),i=r.wa.get(e),o=r.Sa.get(i.targetId);if(o.length>1)return r.Sa.set(i.targetId,o.filter(s=>!Rv(s,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield zp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Gp(r.remoteStore,i.targetId),Xp(r,i.targetId)}).catch(ru))):(Xp(r,i.targetId),yield zp(r.localStore,i.targetId,!0))}),Fx.apply(this,arguments)}function Uhe(t,e){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,_.A)(function*(t,e){const n=Et(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gp(n.remoteStore,r.targetId))}),Lx.apply(this,arguments)}function Vx(){return Vx=(0,_.A)(function*(t,e,n){const r=rP(t);try{const i=yield function(s,a){const l=Et(s),c=Br.now(),h=a.reduce((v,w)=>v.add(w.key),yn());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=us(),R=yn();return l.os.getEntries(v,h).next(N=>{w=N,w.forEach((z,Q)=>{Q.isValidDocument()||(R=R.add(z))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,w)).next(N=>{f=N;const z=[];for(const Q of a){const Te=gde(Q,f.get(Q.key).overlayedDocument);null!=Te&&z.push(new nc(Q.key,Te,A5(Te.value.mapValue),$r.exists(!0)))}return l.mutationQueue.addMutationBatch(v,c,z,a)}).next(N=>{m=N;const z=N.applyToLocalDocumentSet(f,R);return l.documentOverlayCache.saveOverlays(v,N.batchId,z)})}).then(()=>({batchId:m.batchId,changes:G5(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let c=s.Fa[s.currentUser.toKey()];c||(c=new Tr(cn)),c=c.insert(a,l),s.Fa[s.currentUser.toKey()]=c}(r,i.batchId,n),yield ic(r,i.changes),yield Wp(r.remoteStore)}catch(i){const o=Kp(i,"Failed to persist write");n.reject(o)}}),Vx.apply(this,arguments)}function M6(t,e){return Bx.apply(this,arguments)}function Bx(){return Bx=(0,_.A)(function*(t,e){const n=Et(t);try{const r=yield function she(t,e){const n=Et(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((h,f)=>{const m=i.get(f);if(!m)return;a.push(n.Qr.removeMatchingKeys(o,h.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(o,h.addedDocuments,f)));let v=m.withSequenceNumber(o.currentSequenceNumber);var R,N,z;null!==e.targetMismatches.get(f)?v=v.withResumeToken(Di.EMPTY_BYTE_STRING,zt.min()).withLastLimboFreeSnapshotVersion(zt.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(f,v),N=v,z=h,(0===(R=m).resumeToken.approximateByteSize()||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8||z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0)&&a.push(n.Qr.updateTargetData(o,v))});let l=us(),c=yn();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(l6(o,s,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(zt.min())){const h=n.Qr.getLastRemoteSnapshotVersion(o).next(f=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return Ee.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(n.ns=i,o))}(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Ca.get(o);s&&(Ut(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.pa=!0:i.modifiedDocuments.size>0?Ut(s.pa):i.removedDocuments.size>0&&(Ut(s.pa),s.pa=!1))}),yield ic(n,r,e)}catch(r){yield ru(r)}}),Bx.apply(this,arguments)}function k6(t,e,n){const r=Et(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.wa.forEach((o,s)=>{const a=s.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=Et(s);l.onlineState=a;let c=!1;l.queries.forEach((h,f)=>{for(const m of f.Q_)m.G_(a)&&(c=!0)}),c&&Sx(l)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function zhe(t,e,n){return $x.apply(this,arguments)}function $x(){return $x=(0,_.A)(function*(t,e,n){const r=Et(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ca.get(e),o=i&&i.key;if(o){let s=new Tr(Tt.comparator);s=s.insert(o,Or.newNoDocument(o,zt.min()));const a=yn().add(o),l=new Fv(zt.min(),new Map,new Tr(cn),s,a);yield M6(r,l),r.Da=r.Da.remove(o),r.Ca.delete(e),qx(r)}else yield zp(r.localStore,e,!1).then(()=>Xp(r,e,n)).catch(ru)}),$x.apply(this,arguments)}function Hhe(t,e){return Ux.apply(this,arguments)}function Ux(){return Ux=(0,_.A)(function*(t,e){const n=Et(t),r=e.batch.batchId;try{const i=yield function ohe(t,e){const n=Et(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const f=c.batch,m=f.keys();let v=Ee.resolve();return m.forEach(w=>{v=v.next(()=>h.getEntry(l,w)).next(R=>{const N=c.docVersions.get(w);Ut(null!==N),R.version.compareTo(N)<0&&(f.applyToRemoteDocument(R,c),R.isValidDocument()&&(R.setReadTime(c.commitVersion),h.addEntry(R)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=yn();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);Gx(n,r,null),Hx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield ic(n,i)}catch(i){yield ru(i)}}),Ux.apply(this,arguments)}function Ghe(t,e,n){return jx.apply(this,arguments)}function jx(){return jx=(0,_.A)(function*(t,e,n){const r=Et(t);try{const i=yield function(s,a){const l=Et(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Ut(null!==f),h=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);Gx(r,e,n),Hx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield ic(r,i)}catch(i){yield ru(i)}}),jx.apply(this,arguments)}function zx(){return zx=(0,_.A)(function*(t,e){const n=Et(t);mu(n.remoteStore)||rt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const a=Et(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(-1===r)return void e.resolve();const i=n.Ma.get(r)||[];i.push(e),n.Ma.set(r,i)}catch(r){const i=Kp(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),zx.apply(this,arguments)}function Hx(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function Gx(t,e,n){const r=Et(t);let i=r.Fa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function Xp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||N6(t,r)})}function N6(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);null!==n&&(Gp(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),qx(t))}function Wx(t,e,n){for(const r of n)r instanceof S6?(t.va.addReference(r.key,e),qhe(t,r)):r instanceof R6?(rt("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||N6(t,r.key)):Ft()}function qhe(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(rt("SyncEngine","New document in limbo: "+n),t.ba.add(r),qx(t))}function qx(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new Tt(On.fromString(e)),r=t.xa.next();t.Ca.set(r,new Fhe(n)),t.Da=t.Da.insert(n,r),gb(t.remoteStore,new rc(Ho(Rp(n.path)),r,"TargetPurposeLimboResolution",Ps._e))}}function ic(t,e,n){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,_.A)(function*(t,e,n){const r=Et(t),i=[],o=[],s=[];var a;r.wa.isEmpty()||(r.wa.forEach((a,l)=>{s.push(r.Na(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,null!=c&&c.fromCache?"not-current":"current"),c){i.push(c);const h=KR.Ki(l.targetId,c);o.push(h)}}))}),yield Promise.all(s),r.ya.u_(i),yield(a=(0,_.A)(function*(c,h){const f=Et(c);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>Ee.forEach(h,v=>Ee.forEach(v.qi,w=>f.persistence.referenceDelegate.addReference(m,v.targetId,w)).next(()=>Ee.forEach(v.Qi,w=>f.persistence.referenceDelegate.removeReference(m,v.targetId,w)))))}catch(m){if(!iu(m))throw m;rt("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const v=m.targetId;if(!m.fromCache){const w=f.ns.get(v),N=w.withLastLimboFreeSnapshotVersion(w.snapshotVersion);f.ns=f.ns.insert(v,N)}}}),function l(c,h){return a.apply(this,arguments)})(r.localStore,o))}),Kx.apply(this,arguments)}function Khe(t,e){return Qx.apply(this,arguments)}function Qx(){return Qx=(0,_.A)(function*(t,e){const n=Et(t);if(!n.currentUser.isEqual(e)){rt("SyncEngine","User change. New user:",e.toKey());const r=yield s6(n.localStore,e);n.currentUser=e,(o=n).Ma.forEach(a=>{a.forEach(l=>{l.reject(new Xe(Pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ma.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ic(n,r.us)}var o}),Qx.apply(this,arguments)}function Qhe(t,e){const n=Et(t),r=n.Ca.get(e);if(r&&r.pa)return yn().add(r.key);{let i=yn();const o=n.Sa.get(e);if(!o)return i;for(const s of o){const a=n.wa.get(s);i=i.unionWith(a.view.Ia)}return i}}function Yhe(t,e){return Yx.apply(this,arguments)}function Yx(){return Yx=(0,_.A)(function*(t,e){const n=Et(t),r=yield ub(n.localStore,e.query,!0),i=e.view.fa(r);return n.isPrimaryClient&&Wx(n,e.targetId,i.Va),i}),Yx.apply(this,arguments)}function Xhe(t,e){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,_.A)(function*(t,e){const n=Et(t);return u6(n.localStore,e).then(r=>ic(n,r))}),Xx.apply(this,arguments)}function Jhe(t,e,n,r){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,_.A)(function*(t,e,n,r){const i=Et(t),o=yield function(a,l){const c=Et(a),h=Et(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",f=>h.vn(f,l).next(m=>m?c.localDocuments.getDocuments(f,m):Ee.resolve(null)))}(i.localStore,e);var l;null!==o?("pending"===n?yield Wp(i.remoteStore):"acknowledged"===n||"rejected"===n?(Gx(i,e,r||null),Hx(i,e),l=e,Et(Et(i.localStore).mutationQueue).Mn(l)):Ft(),yield ic(i,o)):rt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Jx.apply(this,arguments)}function Zx(){return Zx=(0,_.A)(function*(t,e){const n=Et(t);if(_b(n),rP(n),!0===e&&!0!==n.Oa){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield O6(n,r.toArray());n.Oa=!0,yield Ex(n.remoteStore,!0);for(const o of i)gb(n.remoteStore,o)}else if(!1===e&&!1!==n.Oa){const r=[];let i=Promise.resolve();n.Sa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Xp(n,s),zp(n.localStore,s,!0))),Gp(n.remoteStore,s)}),yield i,yield O6(n,r),function(s){const a=Et(s);a.Ca.forEach((l,c)=>{Gp(a.remoteStore,c)}),a.va.mr(),a.Ca=new Map,a.Da=new Tr(Tt.comparator)}(n),n.Oa=!1,yield Ex(n.remoteStore,!1)}}),Zx.apply(this,arguments)}function O6(t,e,n){return eP.apply(this,arguments)}function eP(){return eP=(0,_.A)(function*(t,e,n){const r=Et(t),i=[],o=[];for(const s of e){let a;const l=r.Sa.get(s);if(l&&0!==l.length){a=yield jp(r.localStore,Ho(l[0]));for(const c of l){const h=r.wa.get(c),f=yield Yhe(r,h);f.snapshot&&o.push(f.snapshot)}}else{const c=yield c6(r.localStore,s);a=yield jp(r.localStore,c),yield Nx(r,F6(c),s,!1,a.resumeToken)}i.push(a)}return r.ya.u_(o),i}),eP.apply(this,arguments)}function F6(t){return V5(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function efe(t){return n=Et(t).localStore,Et(Et(n).persistence).Bi();var n}function tfe(t,e,n,r){return tP.apply(this,arguments)}function tP(){return tP=(0,_.A)(function*(t,e,n,r){const i=Et(t);if(i.Oa)return void rt("SyncEngine","Ignoring unexpected query state notification.");const o=i.Sa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const s=yield u6(i.localStore,j5(o[0])),a=Fv.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Di.EMPTY_BYTE_STRING);yield ic(i,s,a);break}case"rejected":yield zp(i.localStore,e,!0),Xp(i,e,r);break;default:Ft()}}),tP.apply(this,arguments)}function nfe(t,e,n){return nP.apply(this,arguments)}function nP(){return nP=(0,_.A)(function*(t,e,n){const r=_b(t);if(r.Oa){for(const i of e){if(r.Sa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){rt("SyncEngine","Adding an already active target "+i);continue}const o=yield c6(r.localStore,i),s=yield jp(r.localStore,o);yield Nx(r,F6(o),s.targetId,!1,s.resumeToken),gb(r.remoteStore,s)}for(const i of n)r.Sa.has(i)&&(yield zp(r.localStore,i,!1).then(()=>{Gp(r.remoteStore,i),Xp(r,i)}).catch(ru))}}),nP.apply(this,arguments)}function _b(t){const e=Et(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=M6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Qhe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zhe.bind(null,e),e.ya.u_=Phe.bind(null,e.eventManager),e.ya.La=Mhe.bind(null,e.eventManager),e}function rP(t){const e=Et(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Hhe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ghe.bind(null,e),e}class Jp{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,_.A)(function*(){n.serializer=qv(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return o6(this.persistence,new i6,e.initialUser,this.serializer)}createPersistence(e){return new HR(ab.Hr,this.serializer)}createSharedClientState(e){return new p6}terminate(){var e=this;return(0,_.A)(function*(){var n,r;null===(n=e.gcScheduler)||void 0===n||n.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class iP extends Jp{constructor(e,n,r){super(),this.ka=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,_.A)(function*(){yield n().call(r,e),yield r.ka.initialize(r,e),yield rP(r.ka.syncEngine),yield Wp(r.ka.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return o6(this.persistence,new i6,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new Qj(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new Due(n,this.persistence);return new Aue(e.asyncQueue,r)}createPersistence(e){const n=qR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?bo.withCacheSize(this.cacheSizeBytes):bo.DEFAULT;return new WR(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,m6(),pb(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new p6}}class L6 extends iP{constructor(e,n){super(e,n,!1),this.ka=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,_.A)(function*(){yield n().call(r,e);const i=r.ka.syncEngine;r.sharedClientState instanceof nx&&(r.sharedClientState.syncEngine={Zs:Jhe.bind(null,i),Xs:tfe.bind(null,i),eo:nfe.bind(null,i),Bi:efe.bind(null,i),Ys:Xhe.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var o=(0,_.A)(function*(s){yield function Zhe(t,e){return Zx.apply(this,arguments)}(r.ka.syncEngine,s),r.gcScheduler&&(s&&!r.gcScheduler.started?r.gcScheduler.start():s||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(s&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():s||r.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const n=m6();if(!nx.D(n))throw new Xe(Pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=qR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new nx(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Zp{initialize(e,n){var r=this;return(0,_.A)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>k6(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Khe.bind(null,r.syncEngine),yield Ex(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new xhe}createDatastore(e){const n=qv(e.databaseInfo.databaseId),r=new fhe(e.databaseInfo);return new mhe(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,o=e.asyncQueue,s=n=>k6(this.syncEngine,n,0),a=g6.D()?new g6:new uhe,new yhe(r,i,o,s,a);var r,i,o,s,a}createSyncEngine(e,n){return function(i,o,s,a,l,c,h){const f=new Lhe(i,o,s,a,l,c);return h&&(f.Oa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){var e=this;return(0,_.A)(function*(){var n,r;yield(r=(0,_.A)(function*(o){const s=Et(o);rt("RemoteStore","RemoteStore shutting down."),s.v_.add(5),yield Hp(s),s.M_.shutdown(),s.x_.set("Unknown")}),function i(o){return r.apply(this,arguments)})(e.remoteStore),null===(n=e.datastore)||void 0===n||n.terminate()})()}}function V6(t,e=10240){let n=0;return{read:()=>(0,_.A)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,_.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class vb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):li("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class ofe{constructor(e,n){this.Ka=e,this.serializer=n,this.metadata=new Ai,this.buffer=new Uint8Array,this.$a=new TextDecoder("utf-8"),this.Ua().then(r=>{r&&r.ra()?this.metadata.resolve(r.na.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.na)}`))},r=>this.metadata.reject(r))}close(){return this.Ka.cancel()}getMetadata(){var e=this;return(0,_.A)(function*(){return e.metadata.promise})()}Ba(){var e=this;return(0,_.A)(function*(){return yield e.getMetadata(),e.Ua()})()}Ua(){var e=this;return(0,_.A)(function*(){const n=yield e.Wa();if(null===n)return null;const r=e.$a.decode(n),i=Number(r);isNaN(i)&&e.Ga(`length string (${r}) is not valid number`);const o=yield e.za(i);return new khe(JSON.parse(o),n.length+i)})()}ja(){return this.buffer.findIndex(e=>123===e)}Wa(){var e=this;return(0,_.A)(function*(){for(;e.ja()<0&&!(yield e.Ha()););if(0===e.buffer.length)return null;const n=e.ja();n<0&&e.Ga("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}za(e){var n=this;return(0,_.A)(function*(){for(;n.buffer.length<e;)(yield n.Ha())&&n.Ga("Reached the end of bundle when more is expected.");const r=n.$a.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Ga(e){throw this.Ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ha(){var e=this;return(0,_.A)(function*(){const n=yield e.Ka.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class sfe{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,_.A)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw n.lastTransactionError=new Xe(Pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),n.lastTransactionError;const r=yield(i=(0,_.A)(function*(s,a){const l=Et(s),c={documents:a.map(v=>Vv(l.serializer,v))},h=yield l.vo("BatchGetDocuments",l.serializer.databaseId,On.emptyPath(),c,a.length),f=new Map;h.forEach(v=>{const w=function Tde(t,e){return"found"in e?function(r,i){Ut(!!i.found);const o=gl(r,i.found.name),s=ci(i.found.updateTime),a=i.found.createTime?ci(i.found.createTime):zt.min(),l=new oo({mapValue:{fields:i.found.fields}});return Or.newFoundDocument(o,s,a,l)}(t,e):"missing"in e?function(r,i){Ut(!!i.missing),Ut(!!i.readTime);const o=gl(r,i.missing),s=ci(i.readTime);return Or.newNoDocument(o,s)}(t,e):Ft()}(l.serializer,v);f.set(w.key.toString(),w)});const m=[];return a.forEach(v=>{const w=f.get(v.toString());Ut(!!w),m.push(w)}),m}),function o(s,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Op(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const o=Tt.fromPath(i);e.mutations.push(new TR(o,e.precondition(o)))}),yield(r=(0,_.A)(function*(o,s){const a=Et(o),l={writes:s.map(c=>Bv(a.serializer,c))};yield a.So("Commit",a.serializer.databaseId,On.emptyPath(),l)}),function i(o,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ft();n=zt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Xe(Pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(zt.min())?$r.exists(!1):$r.updateTime(n):$r.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(zt.min()))throw new Xe(Pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $r.updateTime(n)}return $r.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class afe{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Ja=r.maxAttempts,this.jo=new ix(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){var e=this;this.jo.qo((0,_.A)(function*(){const n=new sfe(e.datastore),r=e.Xa(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.eu(o)}))}).catch(i=>{e.eu(i)})}))}Xa(e){try{const n=this.updateFunction(e);return!Ev(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget(()=>(this.Za(),Promise.resolve()))):this.deferred.reject(e)}tu(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!sj(n)}return!1}}class lfe{constructor(e,n,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ji.UNAUTHENTICATED,this.clientId=n5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var s=(0,_.A)(function*(a){rt("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(r,s=>(rt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Xe(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Kp(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function yb(t,e){return oP.apply(this,arguments)}function oP(){return oP=(0,_.A)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),rt("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,_.A)(function*(o){r.isEqual(o)||(yield s6(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),oP.apply(this,arguments)}function sP(t,e){return aP.apply(this,arguments)}function aP(){return aP=(0,_.A)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield lP(t);rt("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>b6(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>b6(e.remoteStore,i)),t._onlineComponents=e}),aP.apply(this,arguments)}function B6(t){return"FirebaseError"===t.name?t.code===Pe.FAILED_PRECONDITION||t.code===Pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function lP(t){return cP.apply(this,arguments)}function cP(){return cP=(0,_.A)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){rt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield yb(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!B6(n))throw n;ls("Error using user provided cache. Falling back to memory cache: "+n),yield yb(t,new Jp)}}else rt("FirestoreClient","Using default OfflineComponentProvider"),yield yb(t,new Jp);return t._offlineComponents}),cP.apply(this,arguments)}function Ib(t){return uP.apply(this,arguments)}function uP(){return uP=(0,_.A)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(rt("FirestoreClient","Using user provided OnlineComponentProvider"),yield sP(t,t._uninitializedComponentsProvider._online)):(rt("FirestoreClient","Using default OnlineComponentProvider"),yield sP(t,new Zp))),t._onlineComponents}),uP.apply(this,arguments)}function $6(t){return lP(t).then(e=>e.persistence)}function eg(t){return lP(t).then(e=>e.localStore)}function U6(t){return Ib(t).then(e=>e.remoteStore)}function dP(t){return Ib(t).then(e=>e.syncEngine)}function j6(t){return Ib(t).then(e=>e.datastore)}function tg(t){return hP.apply(this,arguments)}function hP(){return hP=(0,_.A)(function*(t){const e=yield Ib(t),n=e.eventManager;return n.onListen=Vhe.bind(null,e.syncEngine),n.onUnlisten=$he.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Bhe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Uhe.bind(null,e.syncEngine),n}),hP.apply(this,arguments)}function z6(t,e,n={}){const r=new Ai;return t.asyncQueue.enqueueAndForget((0,_.A)(function*(){return function(o,s,a,l,c){const h=new vb({next:m=>{s.enqueueAndForget(()=>Ax(o,f));const v=m.docs.has(a);!v&&m.fromCache?c.reject(new Xe(Pe.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&l&&"server"===l.source?c.reject(new Xe(Pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new xx(Rp(a.path),h,{includeMetadataChanges:!0,ta:!0});return Cx(o,f)}(yield tg(t),t.asyncQueue,e,n,r)})),r.promise}function H6(t,e,n={}){const r=new Ai;return t.asyncQueue.enqueueAndForget((0,_.A)(function*(){return function(o,s,a,l,c){const h=new vb({next:m=>{s.enqueueAndForget(()=>Ax(o,f)),m.fromCache&&"server"===l.source?c.reject(new Xe(Pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new xx(a,h,{includeMetadataChanges:!0,ta:!0});return Cx(o,f)}(yield tg(t),t.asyncQueue,e,n,r)})),r.promise}function G6(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const W6=new Map;function fP(t,e,n){if(!n)throw new Xe(Pe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function q6(t,e,n,r){if(!0===e&&!0===r)throw new Xe(Pe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function K6(t){if(!Tt.isDocumentKey(t))throw new Xe(Pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Q6(t){if(Tt.isDocumentKey(t))throw new Xe(Pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Eb(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":Ft()}function Nn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Xe(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Eb(t);throw new Xe(Pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Y6(t,e){if(e<=0)throw new Xe(Pe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class X6{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Xe(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Xe(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}q6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=G6(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new Xe(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Xe(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Xe(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qv{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new X6({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Xe(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Xe(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new X6(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new pue;switch(r.type){case"firstParty":return new vue(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Xe(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=W6.get(n);r&&(rt("ComponentProvider","Removing Datastore"),W6.delete(n),r.terminate())}(this),Promise.resolve()}}function J6(t,e,n,r={}){var i;const o=(t=Nn(t,Qv))._getSettings(),s=`${e}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&ls("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,l;if("string"==typeof r.mockUserToken)a=r.mockUserToken,l=ji.MOCK_USER;else{a=(0,x.Fy)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Xe(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ji(c)}t._authCredentials=new gue(new e5(a,l))}}class so{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new so(this.firestore,e,this._query)}}class Fr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ml(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fr(this.firestore,e,this._key)}}class ml extends so{constructor(e,n,r){super(e,n,Rp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fr(this.firestore,null,new Tt(e))}withConverter(e){return new ml(this.firestore,e,this._path)}}function Yv(t,e,...n){if(t=(0,x.Ku)(t),fP("collection","path",e),t instanceof Qv){const r=On.fromString(e,...n);return Q6(r),new ml(t,null,r)}{if(!(t instanceof Fr||t instanceof ml))throw new Xe(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(On.fromString(e,...n));return Q6(r),new ml(t.firestore,null,r)}}function wb(t,e,...n){if(t=(0,x.Ku)(t),1===arguments.length&&(e=n5.newId()),fP("doc","path",e),t instanceof Qv){const r=On.fromString(e,...n);return K6(r),new Fr(t,null,new Tt(r))}{if(!(t instanceof Fr||t instanceof ml))throw new Xe(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(On.fromString(e,...n));return K6(r),new Fr(t.firestore,t instanceof ml?t.converter:null,new Tt(r))}}function Z6(t,e){return t=(0,x.Ku)(t),e=(0,x.Ku)(e),(t instanceof Fr||t instanceof ml)&&(e instanceof Fr||e instanceof ml)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function pP(t,e){return t=(0,x.Ku)(t),e=(0,x.Ku)(e),t instanceof so&&e instanceof so&&t.firestore===e.firestore&&Rv(t._query,e._query)&&t.converter===e.converter}class Ife{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new ix(this,"async_queue_retry"),this.cu=()=>{const n=pb();n&&rt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=pb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=pb();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new Ai;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){var e=this;return(0,_.A)(function*(){if(0!==e.ru.length){try{yield e.ru[0](),e.ru.shift(),e.jo.reset()}catch(n){if(!iu(n))throw n;rt("AsyncQueue","Operation failed with retryable error: "+n)}e.ru.length>0&&e.jo.qo(()=>e.Pu())}})()}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(r=>{throw this.ou=r,this._u=!1,li("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const i=bx.createAndSchedule(this,e,n,r,o=>this.Iu(o));return this.su.push(i),i}lu(){this.ou&&Ft()}verifyOperationInProgress(){}Tu(){var e=this;return(0,_.A)(function*(){let n;do{n=e.nu,yield n}while(n!==e.nu)})()}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function gP(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(t)}class Efe{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ai,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ar extends Qv{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Ife,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||ez(this),this._firestoreClient.terminate()}}function mP(t,e){const n="object"==typeof t?t:(0,yo.getApp)(),r="string"==typeof t?t:e||"(default)",i=(0,yo._getProvider)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(0,x.yU)("firestore");o&&J6(i,...o)}return i}function ti(t){return t._firestoreClient||ez(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ez(t){var e,n,r;const i=t._freezeSettings(),o=(l=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new Kue(t._databaseId,l,t._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,G6(h.experimentalLongPollingOptions),h.useFetchStreams));var l,h;t._firestoreClient=new lfe(t._authCredentials,t._appCheckCredentials,t._queue,o),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function tz(t,e,n){const r=new Ai;return t.asyncQueue.enqueue((0,_.A)(function*(){try{yield yb(t,n),yield sP(t,e),r.resolve()}catch(i){const o=i;if(!B6(o))throw o;ls("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function nz(t){if(t._initialized||t._terminated)throw new Xe(Pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Xv{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class Pfe{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class _l{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _l(Di.fromBase64String(e))}catch(n){throw new Xe(Pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _l(Di.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class oc{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new Xe(Pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hd{constructor(e){this._methodName=e}}class bb{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Xe(Pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Xe(Pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return cn(this._lat,e._lat)||cn(this._long,e._long)}}const Mfe=/^__.*__$/;class kfe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new nc(e,this.data,this.fieldMask,n,this.fieldTransforms):new Np(e,this.data,n,this.fieldTransforms)}}class rz{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new nc(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function iz(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ft()}}class Cb{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Ru(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new Cb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return Db(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(iz(this.Vu)&&Mfe.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class Nfe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||qv(e)}Cu(e,n,r,i=!1){return new Cb({Vu:e,methodName:n,Du:r,path:Nr.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gd(t){const e=t._freezeSettings(),n=qv(t._databaseId);return new Nfe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Tb(t,e,n,r,i,o={}){const s=t.Cu(o.merge||o.mergeFields?2:0,e,n,i);bP("Data must be an object, but it was:",s,r);const a=az(r,s);let l,c;if(o.merge)l=new cs(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const f of o.mergeFields){const m=Zv(e,f,n);if(!s.contains(m))throw new Xe(Pe.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);cz(h,m)||h.push(m)}l=new cs(h),c=s.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=s.fieldTransforms;return new kfe(new oo(a),l,c)}class Jv extends Hd{_toFieldTransform(e){if(2!==e.Vu)throw e.Su(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jv}}function oz(t,e,n){return new Cb({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class _P extends Hd{_toFieldTransform(e){return new kv(e.path,new Mp)}isEqual(e){return e instanceof _P}}class vP extends Hd{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=oz(this,e,!0),r=this.vu.map(o=>Wd(o,n)),i=new Od(r);return new kv(e.path,i)}isEqual(e){return e instanceof vP&&(0,x.bD)(this.vu,e.vu)}}class yP extends Hd{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=oz(this,e,!0),r=this.vu.map(o=>Wd(o,n)),i=new Fd(r);return new kv(e.path,i)}isEqual(e){return e instanceof yP&&(0,x.bD)(this.vu,e.vu)}}class IP extends Hd{constructor(e,n){super(e),this.Fu=n}_toFieldTransform(e){const n=new kp(e.serializer,Q5(e.serializer,this.Fu));return new kv(e.path,n)}isEqual(e){return e instanceof IP&&this.Fu===e.Fu}}function EP(t,e,n,r){const i=t.Cu(1,e,n);bP("Data must be an object, but it was:",i,r);const o=[],s=oo.empty();ou(r,(l,c)=>{const h=Ab(e,l,n);c=(0,x.Ku)(c);const f=i.yu(h);if(c instanceof Jv)o.push(h);else{const m=Wd(c,f);null!=m&&(o.push(h),s.set(h,m))}});const a=new cs(o);return new rz(s,a,i.fieldTransforms)}function wP(t,e,n,r,i,o){const s=t.Cu(1,e,n),a=[Zv(e,r,n)],l=[i];if(o.length%2!=0)throw new Xe(Pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Zv(e,o[m])),l.push(o[m+1]);const c=[],h=oo.empty();for(let m=a.length-1;m>=0;--m)if(!cz(c,a[m])){const v=a[m];let w=l[m];w=(0,x.Ku)(w);const R=s.yu(v);if(w instanceof Jv)c.push(v);else{const N=Wd(w,R);null!=N&&(c.push(v),h.set(v,N))}}const f=new cs(c);return new rz(h,f,s.fieldTransforms)}function sz(t,e,n,r=!1){return Wd(n,t.Cu(r?4:3,e))}function Wd(t,e){if(lz(t=(0,x.Ku)(t)))return bP("Unsupported field value:",e,t),az(t,e);if(t instanceof Hd)return function(r,i){if(!iz(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&4!==e.Vu)throw e.Su("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let l=Wd(a,i.wu(s));null==l&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if(null===(r=(0,x.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return Q5(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=Br.fromDate(r);return{timestampValue:Fp(i.serializer,o)}}if(r instanceof Br){const o=new Br(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fp(i.serializer,o)}}if(r instanceof bb)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _l)return{bytesValue:mj(i.serializer,r._byteString)};if(r instanceof Fr){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Su(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:PR(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${Eb(r)}`)}(t,e)}function az(t,e){const n={};return _5(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ou(t,(r,i)=>{const o=Wd(i,e.fu(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function lz(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Br||t instanceof bb||t instanceof _l||t instanceof Fr||t instanceof Hd)}function bP(t,e,n){if(!lz(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Eb(n);throw e.Su("an object"===r?t+" a custom object":t+" "+r)}var i}function Zv(t,e,n){if((e=(0,x.Ku)(e))instanceof oc)return e._internalPath;if("string"==typeof e)return Ab(t,e);throw Db("Field path arguments must be of type string or ",t,!1,void 0,n)}const Ofe=new RegExp("[~\\*/\\[\\]]");function Ab(t,e,n){if(e.search(Ofe)>=0)throw Db(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new oc(...e.split("."))._internalPath}catch{throw Db(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Db(t,e,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new Xe(Pe.INVALID_ARGUMENT,a+t+l)}function cz(t,e){return t.some(n=>n.isEqual(e))}class ey{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Fr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ffe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Sb("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class Ffe extends ey{data(){return super.data()}}function Sb(t,e){return"string"==typeof e?Ab(t,e):e instanceof oc?e._internalPath:e._delegate._internalPath}function uz(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Xe(Pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class CP{}class ty extends CP{}function vl(t,e,...n){let r=[];e instanceof CP&&r.push(e),r=r.concat(n),function(o){const s=o.filter(l=>l instanceof ng).length,a=o.filter(l=>l instanceof ny).length;if(s>1||s>0&&a>0)throw new Xe(Pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class ny extends ty{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ny(e,n,r)}_apply(e){const n=this._parse(e);return pz(e._query,n),new so(e.firestore,e.converter,bR(e._query,n))}_parse(e){const n=Gd(e.firestore);return function(o,s,a,l,c,h,f){let m;if(c.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new Xe(Pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){fz(f,h);const v=[];for(const w of f)v.push(hz(l,o,w));m={arrayValue:{values:v}}}else m=hz(l,o,f)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||fz(f,h),m=sz(a,"where",f,"in"===h||"not-in"===h);return Fn.create(c,h,m)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}function TP(t,e,n){const r=e,i=Sb("where",t);return ny._create(i,r,n)}class ng extends CP{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ng(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:ur.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const l of a)pz(s,l),s=bR(s,l)}(e._query,n),new so(e.firestore,e.converter,bR(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class AP extends ty{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new AP(e,n)}_apply(e){const n=function(i,o,s){if(null!==i.startAt)throw new Xe(Pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Xe(Pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dv(o,s)}(e._query,this._field,this._direction);return new so(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new ec(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class Rb extends ty{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Rb(e,n,r)}_apply(e){return new so(e.firestore,e.converter,Kw(e._query,this._limit,this._limitType))}}class xb extends ty{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new xb(e,n,r)}_apply(e){const n=dz(e,this.type,this._docOrFields,this._inclusive);return new so(e.firestore,e.converter,(o=n,new ec((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)));var i,o}}class Pb extends ty{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Pb(e,n,r)}_apply(e){const n=dz(e,this.type,this._docOrFields,this._inclusive);return new so(e.firestore,e.converter,(o=n,new ec((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)));var i,o}}function dz(t,e,n,r){if(n[0]=(0,x.Ku)(n[0]),n[0]instanceof ey)return function(o,s,a,l,c){if(!l)throw new Xe(Pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const f of xp(o))if(f.field.isKeyField())h.push(kd(s,l.key));else{const m=l.data.field(f.field);if(Uw(m))throw new Xe(Pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const v=f.field.canonicalString();throw new Xe(Pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(m)}return new du(h,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Gd(t.firestore);return function(s,a,l,c,h,f){const m=s.explicitOrderBy;if(h.length>m.length)throw new Xe(Pe.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let w=0;w<h.length;w++){const R=h[w];if(m[w].field.isKeyField()){if("string"!=typeof R)throw new Xe(Pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof R}`);if(!wR(s)&&-1!==R.indexOf("/"))throw new Xe(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${R}' contains a slash.`);const N=s.path.child(On.fromString(R));if(!Tt.isDocumentKey(N))throw new Xe(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);const z=new Tt(N);v.push(kd(a,z))}else{const N=sz(l,c,R);v.push(N)}}return new du(v,f)}(t._query,t.firestore._databaseId,i,e,n,r)}}function hz(t,e,n){if("string"==typeof(n=(0,x.Ku)(n))){if(""===n)throw new Xe(Pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wR(e)&&-1!==n.indexOf("/"))throw new Xe(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(On.fromString(n));if(!Tt.isDocumentKey(r))throw new Xe(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kd(t,new Tt(r))}if(n instanceof Fr)return kd(t,n._key);throw new Xe(Pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Eb(n)}.`)}function fz(t,e){if(!Array.isArray(t)||0===t.length)throw new Xe(Pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function pz(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new Xe(Pe.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class DP{convertValue(e,n="none"){switch(cu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ei(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Ft()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ou(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new bb(ei(e.latitude),ei(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=jw(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bv(e));default:return null}}convertTimestamp(e){const n=su(e);return new Br(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=On.fromString(e);Ut(Dj(r));const i=new au(r.get(1),r.get(3)),o=new Tt(r.popFirst(5));return i.isEqual(n)||li(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function Mb(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Hfe extends DP{constructor(e){super(),this.firestore=e}convertBytes(e){return new _l(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Fr(this.firestore,null,n)}}class qd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sc extends ey{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ry(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Sb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ry extends sc{data(e={}){return super.data(e)}}class vu{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new qd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ry(this._firestore,this._userDataWriter,r.key,r,new qd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Xe(Pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new ry(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const l=new ry(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return 0!==a.type&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Wfe(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Wfe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ft()}}function mz(t,e){return t instanceof sc&&e instanceof sc?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof vu&&e instanceof vu&&t._firestore===e._firestore&&pP(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class yu extends DP{constructor(e){super(),this.firestore=e}convertBytes(e){return new _l(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Fr(this.firestore,null,n)}}function _z(t,e,n){t=Nn(t,Fr);const r=Nn(t.firestore,Ar),i=Mb(t.converter,e,n);return rg(r,[Tb(Gd(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,$r.none())])}function vz(t,e,n,...r){t=Nn(t,Fr);const i=Nn(t.firestore,Ar),o=Gd(i);let s;return s="string"==typeof(e=(0,x.Ku)(e))||e instanceof oc?wP(o,"updateDoc",t._key,e,n,r):EP(o,"updateDoc",t._key,e),rg(i,[s.toMutation(t._key,$r.exists(!0))])}function yz(t,...e){var n,r,i;t=(0,x.Ku)(t);let o={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof e[s]||gP(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(gP(e[s])){const f=e[s];e[s]=null===(n=f.next)||void 0===n?void 0:n.bind(f),e[s+1]=null===(r=f.error)||void 0===r?void 0:r.bind(f),e[s+2]=null===(i=f.complete)||void 0===i?void 0:i.bind(f)}let l,c,h;if(t instanceof Fr)c=Nn(t.firestore,Ar),h=Rp(t._key.path),l={next:f=>{e[s]&&e[s](SP(c,t,f))},error:e[s+1],complete:e[s+2]};else{const f=Nn(t,so);c=Nn(f.firestore,Ar),h=f._query;const m=new yu(c);l={next:v=>{e[s]&&e[s](new vu(c,m,f,v))},error:e[s+1],complete:e[s+2]},uz(t._query)}return function(m,v,w,R){const N=new vb(R),z=new xx(v,N,w);return m.asyncQueue.enqueueAndForget((0,_.A)(function*(){return Cx(yield tg(m),z)})),()=>{N.Qa(),m.asyncQueue.enqueueAndForget((0,_.A)(function*(){return Ax(yield tg(m),z)}))}}(ti(c),h,a,l)}function rg(t,e){return function(r,i){const o=new Ai;return r.asyncQueue.enqueueAndForget((0,_.A)(function*(){return function jhe(t,e,n){return Vx.apply(this,arguments)}(yield dP(r),i,o)})),o.promise}(ti(t),e)}function SP(t,e,n){const r=n.docs.get(e._key),i=new yu(t);return new sc(t,i,e._key,r,new qd(n.hasPendingWrites,n.fromCache),e.converter)}function RP(t){return function npe(t,e){const n=Nn(t.firestore,Ar),r=ti(n),i=function(s,a){const l=[];for(const c in s)Object.prototype.hasOwnProperty.call(s,c)&&l.push(a(s[c],c));return l}(e,(o,s)=>new mde(s,o.aggregateType,o._internalFieldPath));return function(s,a,l){const c=new Ai;return s.asyncQueue.enqueueAndForget((0,_.A)(function*(){try{const h=yield j6(s);c.resolve(function _he(t,e,n){return ox.apply(this,arguments)}(h,a,l))}catch(h){c.reject(h)}})),c.promise}(r,t._query,i).then(o=>function(a,l,c){const h=new yu(a);return new Pfe(l,h,c)}(n,t,o))}(t,{count:new Xv("count")})}const upe={maxAttempts:5};class Iz{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Gd(e)}set(e,n,r){this._verifyNotCommitted();const i=Iu(e,this._firestore),o=Mb(i.converter,n,r),s=Tb(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(s.toMutation(i._key,$r.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=Iu(e,this._firestore);let s;return s="string"==typeof(n=(0,x.Ku)(n))||n instanceof oc?wP(this._dataReader,"WriteBatch.update",o._key,n,r,i):EP(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,$r.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Iu(e,this._firestore);return this._mutations=this._mutations.concat(new Op(n._key,$r.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xe(Pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Iu(t,e){if((t=(0,x.Ku)(t)).firestore!==e)throw new Xe(Pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class dpe extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Gd(n)}get(n){const r=Iu(n,this._firestore),i=new Hfe(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||1!==o.length)return Ft();const s=o[0];if(s.isFoundDocument())return new ey(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new ey(this._firestore,i,r._key,null,r.converter);throw Ft()})}set(n,r,i){const o=Iu(n,this._firestore),s=Mb(o.converter,r,i),a=Tb(this._dataReader,"Transaction.set",o._key,s,null!==o.converter,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){const s=Iu(n,this._firestore);let a;return a="string"==typeof(r=(0,x.Ku)(r))||r instanceof oc?wP(this._dataReader,"Transaction.update",s._key,r,i,o):EP(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){const r=Iu(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Iu(e,this._firestore),r=new yu(this._firestore);return super.get(e).then(i=>new sc(this._firestore,r,n._key,i._document,new qd(!1,!1),n.converter))}}function PP(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Xe("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function Cz(){if(typeof Uint8Array>"u")throw new Xe("unimplemented","Uint8Arrays are not available in this environment.")}function Tz(){if(!function Wue(){return typeof atob<"u"}())throw new Xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){Ep=yo.SDK_VERSION,(0,yo._registerComponent)(new ka.uA("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Ar(new mue(r.getProvider("auth-internal")),new yue(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Xe(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new au(c.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,yo.registerVersion)(Z3,"4.5.0",e),(0,yo.registerVersion)(Z3,"4.5.0","esm2017")}();class iy{constructor(e){this._delegate=e}static fromBase64String(e){return Tz(),new iy(_l.fromBase64String(e))}static fromUint8Array(e){return Cz(),new iy(_l.fromUint8Array(e))}toBase64(){return Tz(),this._delegate.toBase64()}toUint8Array(){return Cz(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function MP(t){return function Epe(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class wpe{enableIndexedDbPersistence(e,n){return function bfe(t,e){nz(t=Nn(t,Ar));const n=ti(t);if(n._uninitializedComponentsProvider)throw new Xe(Pe.FAILED_PRECONDITION,"SDK cache is already specified.");ls("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new Zp;return tz(n,i,new iP(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function Cfe(t){nz(t=Nn(t,Ar));const e=ti(t);if(e._uninitializedComponentsProvider)throw new Xe(Pe.FAILED_PRECONDITION,"SDK cache is already specified.");ls("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new Zp;return tz(e,r,new L6(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Tfe(t){if(t._initialized&&!t._terminated)throw new Xe(Pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ai;return t._queue.enqueueAndForgetEvenWhileRestricted((0,_.A)(function*(){try{yield(n=(0,_.A)(function*(i){if(!ia.D())return Promise.resolve();const o=i+"main";yield ia.delete(o)}),function r(i){return n.apply(this,arguments)})(qR(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class Az{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof au||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&ls("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){J6(this._delegate,e,n,r)}enableNetwork(){return function Dfe(t){return function cfe(t){return t.asyncQueue.enqueue((0,_.A)(function*(){const e=yield $6(t),n=yield U6(t);return e.setNetworkEnabled(!0),function(i){const o=Et(i);return o.v_.delete(0),Kv(o)}(n)}))}(ti(t=Nn(t,Ar)))}(this._delegate)}disableNetwork(){return function Sfe(t){return function ufe(t){return t.asyncQueue.enqueue((0,_.A)(function*(){const e=yield $6(t),n=yield U6(t);return e.setNetworkEnabled(!1),(r=(0,_.A)(function*(o){const s=Et(o);s.v_.add(0),yield Hp(s),s.x_.set("Offline")}),function i(o){return r.apply(this,arguments)})(n);var r}))}(ti(t=Nn(t,Ar)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,q6("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Afe(t){return function(n){const r=new Ai;return n.asyncQueue.enqueueAndForget((0,_.A)(function*(){return function Whe(t,e){return zx.apply(this,arguments)}(yield dP(n),r)})),r.promise}(ti(t=Nn(t,Ar)))}(this._delegate)}onSnapshotsInSync(e){return function tpe(t,e){return function ffe(t,e){const n=new vb(e);return t.asyncQueue.enqueueAndForget((0,_.A)(function*(){return i=yield tg(t),o=n,Et(i).W_.add(o),void o.next();var i,o})),()=>{n.Qa(),t.asyncQueue.enqueueAndForget((0,_.A)(function*(){return i=yield tg(t),o=n,void Et(i).W_.delete(o);var i,o}))}}(ti(t=Nn(t,Ar)),gP(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ig(this,Yv(this._delegate,e))}catch(n){throw Go(n,"collection()","Firestore.collection()")}}doc(e){try{return new oa(this,wb(this._delegate,e))}catch(n){throw Go(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Wo(this,function yfe(t,e){if(t=Nn(t,Qv),fP("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Xe(Pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new so(t,null,(r=e,new ec(On.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw Go(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function hpe(t,e,n){t=Nn(t,Ar);const r=Object.assign(Object.assign({},upe),n);return function(o){if(o.maxAttempts<1)throw new Xe(Pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){const l=new Ai;return o.asyncQueue.enqueueAndForget((0,_.A)(function*(){const c=yield j6(o);new afe(o.asyncQueue,c,a,s,l).Ya()})),l.promise}(ti(t),i=>e(new dpe(t,i)),r)}(this._delegate,n=>e(new Dz(this,n)))}batch(){return ti(this._delegate),new Sz(new Iz(this._delegate,e=>rg(this._delegate,e)))}loadBundle(e){return function Rfe(t,e){const n=ti(t=Nn(t,Ar)),r=new Efe;return function pfe(t,e,n,r){const i=function(s,a){let l;return l="string"==typeof s?lj().encode(s):s,h=function(h,f){if(h instanceof Uint8Array)return V6(h,f);if(h instanceof ArrayBuffer)return V6(new Uint8Array(h),f);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new ofe(h,a);var h}(n,qv(e));t.asyncQueue.enqueueAndForget((0,_.A)(function*(){!function rfe(t,e,n){const r=Et(t);var i;(i=(0,_.A)(function*(s,a,l){try{const c=yield a.getMetadata();if(yield function(w,R){const N=Et(w),z=ci(R.createTime);return N.persistence.runTransaction("hasNewerBundle","readonly",Q=>N.$r.getBundleMetadata(Q,R.id)).then(Q=>!!Q&&Q.createTime.compareTo(z)>=0)}(s.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(w=c).totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}),Promise.resolve(new Set);l._updateProgress(D6(c));const h=new Nhe(c,s.localStore,a.serializer);let f=yield a.Ba();for(;f;){const v=yield h.sa(f);v&&l._updateProgress(v),f=yield a.Ba()}const m=yield h.complete();return yield ic(s,m.aa,void 0),yield function(w,R){const N=Et(w);return N.persistence.runTransaction("Save bundle","readwrite",z=>N.$r.saveBundleMetadata(z,R))}(s.localStore,c),l._completeWith(m.progress),Promise.resolve(m._a)}catch(c){return ls("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var w}),function o(s,a,l){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield dP(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function xfe(t,e){return function gfe(t,e){return t.asyncQueue.enqueue((0,_.A)(function*(){return function(r,i){const o=Et(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield eg(t),e)}))}(ti(t=Nn(t,Ar)),e).then(n=>n?new so(t,null,n.query):null)}(this._delegate,e).then(n=>n?new Wo(this,n):null)}}class Nb extends DP{constructor(e){super(),this.firestore=e}convertBytes(e){return new iy(new _l(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return oa.forKey(n,this.firestore,null)}}class Dz{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Nb(e)}get(e){const n=Qd(e);return this._delegate.get(n).then(r=>new oy(this._firestore,new sc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Qd(e);return r?(PP("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Qd(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Qd(e);return this._delegate.delete(n),this}}class Sz{constructor(e){this._delegate=e}set(e,n,r){const i=Qd(e);return r?(PP("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Qd(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Qd(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Kd{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new ry(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sy(this._firestore,r),null!=n?n:{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Kd.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new Kd(e,new Nb(e),n),i.set(n,o)),o}}Kd.INSTANCES=new WeakMap;class oa{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Nb(e)}static forPath(e,n,r){if(e.length%2!=0)throw new Xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new oa(n,new Fr(n._delegate,r,new Tt(e)))}static forKey(e,n,r){return new oa(n,new Fr(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ig(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ig(this.firestore,Yv(this._delegate,e))}catch(n){throw Go(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,x.Ku)(e))instanceof Fr&&Z6(this._delegate,e)}set(e,n){n=PP("DocumentReference.set",n);try{return n?_z(this._delegate,e,n):_z(this._delegate,e)}catch(r){throw Go(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?vz(this._delegate,e):vz(this._delegate,e,n,...r)}catch(i){throw Go(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Zfe(t){return rg(Nn(t.firestore,Ar),[new Op(t._key,$r.none())])}(this._delegate)}onSnapshot(...e){const n=Rz(e),r=xz(e,i=>new oy(this.firestore,new sc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return yz(this._delegate,n,r)}get(e){let n;return n="cache"===(null==e?void 0:e.source)?function Kfe(t){t=Nn(t,Fr);const e=Nn(t.firestore,Ar),n=ti(e),r=new yu(e);return function dfe(t,e){const n=new Ai;return t.asyncQueue.enqueueAndForget((0,_.A)(function*(){return(r=(0,_.A)(function*(o,s,a){try{const l=yield function(h,f){const m=Et(h);return m.persistence.runTransaction("read document","readonly",v=>m.localDocuments.getDocument(v,f))}(o,s);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new Xe(Pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=Kp(l,`Failed to get document '${s} from cache`);a.reject(c)}}),function i(o,s,a){return r.apply(this,arguments)})(yield eg(t),e,n);var r})),n.promise}(n,t._key).then(i=>new sc(e,r,t._key,i,new qd(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Qfe(t){t=Nn(t,Fr);const e=Nn(t.firestore,Ar);return z6(ti(e),t._key,{source:"server"}).then(n=>SP(e,t,n))}(this._delegate):function qfe(t){t=Nn(t,Fr);const e=Nn(t.firestore,Ar);return z6(ti(e),t._key).then(n=>SP(e,t,n))}(this._delegate),n.then(r=>new oy(this.firestore,new sc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new oa(this.firestore,this._delegate.withConverter(e?Kd.getInstance(this.firestore,e):null))}}function Go(t,e,n){return t.message=t.message.replace(e,n),t}function Rz(t){for(const e of t)if("object"==typeof e&&!MP(e))return e;return{}}function xz(t,e){var n,r;let i;return i=MP(t[0])?t[0]:MP(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class oy{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new oa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return mz(this._delegate,e._delegate)}}class sy extends oy{data(e){const n=this._delegate.data(e);return this._delegate._converter||function fue(t,e){t||Ft()}(void 0!==n),n}}class Wo{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Nb(e)}where(e,n,r){try{return new Wo(this.firestore,vl(this._delegate,TP(e,n,r)))}catch(i){throw Go(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Wo(this.firestore,vl(this._delegate,function Lfe(t,e="asc"){const n=e,r=Sb("orderBy",t);return AP._create(r,n)}(e,n)))}catch(r){throw Go(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Wo(this.firestore,vl(this._delegate,function Vfe(t){return Y6("limit",t),Rb._create("limit",t,"F")}(e)))}catch(n){throw Go(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Wo(this.firestore,vl(this._delegate,function Bfe(t){return Y6("limitToLast",t),Rb._create("limitToLast",t,"L")}(e)))}catch(n){throw Go(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Wo(this.firestore,vl(this._delegate,function $fe(...t){return xb._create("startAt",t,!0)}(...e)))}catch(n){throw Go(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Wo(this.firestore,vl(this._delegate,function Ufe(...t){return xb._create("startAfter",t,!1)}(...e)))}catch(n){throw Go(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Wo(this.firestore,vl(this._delegate,function jfe(...t){return Pb._create("endBefore",t,!1)}(...e)))}catch(n){throw Go(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Wo(this.firestore,vl(this._delegate,function zfe(...t){return Pb._create("endAt",t,!0)}(...e)))}catch(n){throw Go(n,"endAt()","Query.endAt()")}}isEqual(e){return pP(this._delegate,e._delegate)}get(e){let n;return n="cache"===(null==e?void 0:e.source)?function Xfe(t){t=Nn(t,so);const e=Nn(t.firestore,Ar),n=ti(e),r=new yu(e);return function hfe(t,e){const n=new Ai;return t.asyncQueue.enqueueAndForget((0,_.A)(function*(){return(r=(0,_.A)(function*(o,s,a){try{const l=yield ub(o,s,!0),c=new x6(s,l.hs),h=c.Ta(l.documents),f=c.applyChanges(h,!1);a.resolve(f.snapshot)}catch(l){const c=Kp(l,`Failed to execute query '${s} against cache`);a.reject(c)}}),function i(o,s,a){return r.apply(this,arguments)})(yield eg(t),e,n);var r})),n.promise}(n,t._query).then(i=>new vu(e,r,t,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function Jfe(t){t=Nn(t,so);const e=Nn(t.firestore,Ar),n=ti(e),r=new yu(e);return H6(n,t._query,{source:"server"}).then(i=>new vu(e,r,t,i))}(this._delegate):function Yfe(t){t=Nn(t,so);const e=Nn(t.firestore,Ar),n=ti(e),r=new yu(e);return uz(t._query),H6(n,t._query).then(i=>new vu(e,r,t,i))}(this._delegate),n.then(r=>new kP(this.firestore,new vu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=Rz(e),r=xz(e,i=>new kP(this.firestore,new vu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return yz(this._delegate,n,r)}withConverter(e){return new Wo(this.firestore,this._delegate.withConverter(e?Kd.getInstance(this.firestore,e):null))}}class Cpe{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new sy(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class kP{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Wo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new sy(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Cpe(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new sy(this._firestore,r))})}isEqual(e){return mz(this._delegate,e._delegate)}}class ig extends Wo{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new oa(this.firestore,e):null}doc(e){try{return new oa(this.firestore,void 0===e?wb(this._delegate):wb(this._delegate,e))}catch(n){throw Go(n,"doc()","CollectionReference.doc()")}}add(e){return function epe(t,e){const n=Nn(t.firestore,Ar),r=wb(t),i=Mb(t.converter,e);return rg(n,[Tb(Gd(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,$r.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new oa(this.firestore,n))}isEqual(e){return Z6(this._delegate,e._delegate)}withConverter(e){return new ig(this.firestore,this._delegate.withConverter(e?Kd.getInstance(this.firestore,e):null))}}function Qd(t){return Nn(t,Fr)}class NP{constructor(...e){this._delegate=new oc(...e)}static documentId(){return new NP(Nr.keyField().canonicalString())}isEqual(e){return(e=(0,x.Ku)(e))instanceof oc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Yd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ppe(){return new _P("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Yd(e)}static delete(){const e=function fpe(){return new Jv("deleteField")}();return e._methodName="FieldValue.delete",new Yd(e)}static arrayUnion(...e){const n=function gpe(...t){return new vP("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new Yd(n)}static arrayRemove(...e){const n=function mpe(...t){return new yP("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new Yd(n)}static increment(e){const n=function _pe(t){return new IP("increment",t)}(e);return n._methodName="FieldValue.increment",new Yd(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Tpe={Firestore:Az,GeoPoint:bb,Timestamp:Br,Blob:iy,Transaction:Dz,WriteBatch:Sz,DocumentReference:oa,DocumentSnapshot:oy,Query:Wo,QueryDocumentSnapshot:sy,QuerySnapshot:kP,CollectionReference:ig,FieldPath:NP,FieldValue:Yd,setLogLevel:function bpe(t){!function hue(t){nu.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};!function Dpe(t){(function Ape(t,e){t.INTERNAL.registerComponent(new ka.uA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Tpe)))})(t,(e,n)=>new Az(e,n,new wpe)),t.registerVersion("@firebase/firestore-compat","0.3.27")}(Dn.A);const Pz="firebasestorage.googleapis.com",Mz="storageBucket";class qr extends x.g{constructor(e,n,r=0){super(OP(e),`Firebase Storage: ${n} (${OP(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return OP(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Ur=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(Ur||{});function OP(t){return"storage/"+t}function FP(){return new qr(Ur.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function kz(){return new qr(Ur.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Nz(){return new qr(Ur.CANCELED,"User canceled the upload/download.")}function Oz(){return new qr(Ur.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function og(t){return new qr(Ur.INVALID_ARGUMENT,t)}function Fz(){return new qr(Ur.APP_DELETED,"The Firebase app was deleted.")}function Lz(t){return new qr(Ur.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ay(t,e){return new qr(Ur.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ly(t){throw new qr(Ur.INTERNAL_ERROR,"Internal error: "+t)}class To{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=To.makeFromUrl(e,n)}catch{return new To(e,"")}if(""===r.path)return r;throw function Lpe(t){return new qr(Ur.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function c(Ae){Ae.path_=decodeURIComponent(Ae.path)}const f=n.replace(/[.]/g,"\\."),Te=[{regex:a,indices:{bucket:1,path:3},postModify:function o(Ae){"/"===Ae.path.charAt(Ae.path.length-1)&&(Ae.path_=Ae.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${f}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:c},{regex:new RegExp(`^https?://${n===Pz?"(?:storage.googleapis.com|storage.cloud.google.com)":n}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:c}];for(let Ae=0;Ae<Te.length;Ae++){const Je=Te[Ae],mt=Je.regex.exec(e);if(mt){let tn=mt[Je.indices.path];tn||(tn=""),r=new To(mt[Je.indices.bucket],tn),Je.postModify(r);break}}if(null==r)throw function Fpe(t){return new qr(Ur.INVALID_URL,"Invalid URL '"+t+"'.")}(e);return r}}class jpe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Ob(t){return"string"==typeof t||t instanceof String}function Vz(t){return LP()&&t instanceof Blob}function LP(){return typeof Blob<"u"}function VP(t,e,n,r){if(r<e)throw og(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw og(`Invalid value for '${t}'. Expected ${n} or less.`)}function ac(t,e,n){let r=e;return null==n&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Bz(t){const e=encodeURIComponent;let n="?";for(const r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n=n.slice(0,-1),n}var sg=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(sg||{});function $z(t,e){const n=t>=500&&t<600,i=-1!==[408,429].indexOf(t),o=-1!==e.indexOf(t);return n||i||o}class Kpe{constructor(e,n,r,i,o,s,a,l,c,h,f,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,w)=>{this.resolve_=v,this.reject_=w,this.start_()})}start_(){const n=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());!function Gpe(t){return void 0!==t}(l)?o():o(l)}catch(l){s(l)}else if(null!==a){const l=FP();l.serverResponse=a.getErrorText(),s(this.errorCallback_?this.errorCallback_(a,l):l)}else s(i.canceled?this.appDelete_?Fz():Nz():kz())};this.canceled_?n(0,new Fb(!1,null,!0)):this.backoffId_=function zpe(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return 2===a}let c=!1;function h(...N){c||(c=!0,e.apply(null,N))}function f(N){i=setTimeout(()=>{i=null,t(v,l())},N)}function m(){o&&clearTimeout(o)}function v(N,...z){if(c)return void m();if(N)return m(),void h.call(null,N,...z);if(l()||s)return m(),void h.call(null,N,...z);let Te;r<64&&(r*=2),1===a?(a=2,Te=0):Te=1e3*(r+Math.random()),f(Te)}let w=!1;function R(N){w||(w=!0,m(),!c&&(null!==i?(N||(a=2),clearTimeout(i),f(0)):N||(a=1)))}return f(0),o=setTimeout(()=>{s=!0,R(!0)},n),R}((r,i)=>{if(i)return void r(!1,new Fb(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===sg.NO_ERROR,l=o.getStatus();if(!a||$z(l,this.additionalRetryCodes_)&&this.retry){const h=o.getErrorCode()===sg.ABORT;return void r(!1,new Fb(!1,null,h))}const c=-1!==this.successCodes_.indexOf(l);r(!0,new Fb(c,o))})},n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Hpe(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Fb{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function tge(...t){const e=function ege(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}if(LP())return new Blob(t);throw new qr(Ur.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Ms={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class BP{constructor(e,n){this.data=e,this.contentType=n||null}}function $P(t,e){switch(t){case Ms.RAW:return new BP(Uz(e));case Ms.BASE64:case Ms.BASE64URL:return new BP(jz(t,e));case Ms.DATA_URL:return new BP(function oge(t){const e=new zz(t);return e.base64?jz(Ms.BASE64,e.rest):function ige(t){let e;try{e=decodeURIComponent(t)}catch{throw ay(Ms.DATA_URL,"Malformed data URL.")}return Uz(e)}(e.rest)}(e),function sge(t){return new zz(t).contentType}(e))}throw FP()}function Uz(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function jz(t,e){switch(t){case Ms.BASE64:{const i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o)throw ay(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ms.BASE64URL:{const i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw ay(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=function rge(t){if(typeof atob>"u")throw function Upe(t){return new qr(Ur.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(t)}(e)}catch(i){throw i.message.includes("polyfill")?i:ay(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class zz{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(null===n)throw ay(Ms.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;null!=r&&(this.base64=function age(t,e){return t.length>=e.length&&t.substring(t.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class yl{constructor(e,n){let r=0,i="";Vz(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Vz(this.data_)){const i=function nge(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===i?null:new yl(i)}{const r=new Uint8Array(this.data_.buffer,e,n-e);return new yl(r,!0)}}static getBlob(...e){if(LP()){const n=e.map(r=>r instanceof yl?r.data_:r);return new yl(tge.apply(null,n))}{const n=e.map(s=>Ob(s)?$P(Ms.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new yl(i,!0)}}uploadData(){return this.data_}}function UP(t){let e;try{e=JSON.parse(t)}catch{return null}return function qpe(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function Hz(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function uge(t,e){return e}class qo{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||uge}}let Lb=null;function cy(){if(Lb)return Lb;const t=[];t.push(new qo("bucket")),t.push(new qo("generation")),t.push(new qo("metageneration")),t.push(new qo("name","fullPath",!0));const n=new qo("name");n.xform=function e(o,s){return function dge(t){return!Ob(t)||t.length<2?t:Hz(t)}(s)},t.push(n);const i=new qo("size");return i.xform=function r(o,s){return void 0!==s?Number(s):s},t.push(i),t.push(new qo("timeCreated")),t.push(new qo("updated")),t.push(new qo("md5Hash",null,!0)),t.push(new qo("cacheControl",null,!0)),t.push(new qo("contentDisposition",null,!0)),t.push(new qo("contentEncoding",null,!0)),t.push(new qo("contentLanguage",null,!0)),t.push(new qo("contentType",null,!0)),t.push(new qo("metadata","customMetadata",!0)),Lb=t,Lb}function Gz(t,e,n){const r=UP(e);return null===r?null:function fge(t,e,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,e[s.server])}return function hge(t,e){Object.defineProperty(t,"ref",{get:function n(){const o=new To(t.bucket,t.fullPath);return e._makeStorageReference(o)}})}(r,t),r}(t,r,n)}function jP(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}const Wz="prefixes",qz="items";class Il{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function El(t){if(!t)throw FP()}function Vb(t,e){return function n(r,i){const o=Gz(t,i,e);return El(null!==o),o}}function ag(t){return function e(n,r){let i;return i=401===n.getStatus()?n.getErrorText().includes("Firebase App Check token is invalid")?function Npe(){return new qr(Ur.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function kpe(){return new qr(Ur.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===n.getStatus()?function Mpe(t){return new qr(Ur.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(t.bucket):403===n.getStatus()?function Ope(t){return new qr(Ur.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}(t.path):r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}}function uy(t){const e=ag(t);return function n(r,i){let o=e(r,i);return 404===r.getStatus()&&(o=function Ppe(t){return new qr(Ur.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}(t.path)),o.serverResponse=i.serverResponse,o}}function Kz(t,e,n){const i=ac(e.fullServerUrl(),t.host,t._protocol),s=t.maxOperationRetryTime,a=new Il(i,"GET",Vb(t,n),s);return a.errorHandler=uy(e),a}function yge(t,e,n,r,i){const o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const a=ac(e.bucketOnlyServerUrl(),t.host,t._protocol),c=t.maxOperationRetryTime,h=new Il(a,"GET",function _ge(t,e){return function n(r,i){const o=function mge(t,e,n){const r=UP(n);return null===r?null:function gge(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Wz])for(const i of n[Wz]){const o=i.replace(/\/$/,""),s=t._makeStorageReference(new To(e,o));r.prefixes.push(s)}if(n[qz])for(const i of n[qz]){const o=t._makeStorageReference(new To(e,i.name));r.items.push(o)}return r}(t,e,r)}(t,e,i);return El(null!==o),o}}(t,e.bucket),c);return h.urlParams=o,h.errorHandler=ag(e),h}function Yz(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function bge(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Bb{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function zP(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{El(!1)}return El(!!n&&-1!==(e||["active"]).indexOf(n)),n}const Dge={STATE_CHANGED:"state_changed"},Ko={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function HP(t){switch(t){case"running":case"pausing":case"canceling":return Ko.RUNNING;case"paused":return Ko.PAUSED;case"success":return Ko.SUCCESS;case"canceled":return Ko.CANCELED;default:return Ko.ERROR}}class Sge{constructor(e,n,r){if(function Wpe(t){return"function"==typeof t}(e)||null!=n||null!=r)this.next=e,this.error=null!=n?n:void 0,this.complete=null!=r?r:void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function lg(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}let Zz=null;class Rge{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=sg.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=sg.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=sg.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw ly("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ly("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ly("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ly("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ly("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class xge extends Rge{initXhr(){this.xhr_.responseType="text"}}function Fa(){return Zz?Zz():new xge}class eH{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=cy(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Ur.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if($z(i.status,[])){if(!o)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=kz()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Ur.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,n)=>{const r=function Cge(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s=Yz(e,r,i),a={name:s.fullPath},l=ac(o,t.host,t._protocol),h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},f=jP(s,n),w=new Il(l,"POST",function v(R){let N;zP(R);try{N=R.getResponseHeader("X-Goog-Upload-URL")}catch{El(!1)}return El(Ob(N)),N},t.maxUploadRetryTime);return w.urlParams=a,w.headers=h,w.body=f,w.errorHandler=ag(e),w}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Fa,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=function Tge(t,e,n,r){const l=new Il(n,"POST",function o(c){const h=zP(c,["active","final"]);let f=null;try{f=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{El(!1)}f||El(!1);const m=Number(f);return El(!isNaN(m)),new Bb(m,r.size(),"final"===h)},t.maxUploadRetryTime);return l.headers={"X-Goog-Upload-Command":"query"},l.errorHandler=ag(e),l}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,Fa,n,r);this._request=o,o.getPromise().then(s=>{this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,n=new Bb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=function Age(t,e,n,r,i,o,s,a){const l=new Bb(0,0);if(s?(l.current=s.current,l.total=s.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw function Bpe(){return new qr(Ur.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const c=l.total-l.current;let h=c;i>0&&(h=Math.min(h,i));const f=l.current;let v="";v=0===h?"finalize":c===h?"upload, finalize":"upload";const w={"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":`${l.current}`},R=r.slice(f,f+h);if(null===R)throw Oz();const Te=new Il(n,"POST",function N(Ae,Je){const mt=zP(Ae,["active","final"]),Xt=l.current+h,tn=r.size();let Do;return Do="final"===mt?Vb(e,o)(Ae,Je):null,new Bb(Xt,tn,"final"===mt,Do)},e.maxUploadRetryTime);return Te.headers=w,Te.body=R.uploadData(),Te.progressCallback=a||null,Te.errorHandler=ag(t),Te}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){return this._error=l,void this._transition("error")}const a=this._ref.storage._makeRequest(s,Fa,i,o,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=Kz(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Fa,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=function Xz(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},l=function a(){let Te="";for(let Ae=0;Ae<2;Ae++)Te+=Math.random().toString().slice(2);return Te}();s["Content-Type"]="multipart/related; boundary="+l;const c=Yz(e,r,i),h=jP(c,n),v=yl.getBlob("--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+h+"\r\n--"+l+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",r,"\r\n--"+l+"--");if(null===v)throw Oz();const w={name:c.fullPath},R=ac(o,t.host,t._protocol),z=t.maxUploadRetryTime,Q=new Il(R,"POST",Vb(t,n),z);return Q.urlParams=w,Q.headers=s,Q.body=v.uploadData(),Q.errorHandler=ag(e),Q}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Fa,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n="paused"===this._state;this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Nz(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=HP(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const o=new Sge(n||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);-1!==n&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(HP(this._state)){case Ko.SUCCESS:lg(this._resolve.bind(null,this.snapshot))();break;case Ko.CANCELED:case Ko.ERROR:lg(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(HP(this._state)){case Ko.RUNNING:case Ko.PAUSED:e.next&&lg(e.next.bind(e,this.snapshot))();break;case Ko.SUCCESS:e.complete&&lg(e.complete.bind(e))();break;default:e.error&&lg(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Xd{constructor(e,n){this._service=e,this._location=n instanceof To?n:To.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Xd(e,n)}get root(){const e=new To(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Hz(this._location.path)}get storage(){return this._service}get parent(){const e=function lge(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;const n=new To(this._location.bucket,e);return new Xd(this._service,n)}_throwIfRoot(e){if(""===this._location.path)throw Lz(e)}}function nH(t,e,n){return GP.apply(this,arguments)}function GP(){return GP=(0,_.A)(function*(t,e,n){const i=yield rH(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield nH(t,e,i.nextPageToken))}),GP.apply(this,arguments)}function rH(t,e){null!=e&&"number"==typeof e.maxResults&&VP("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=yge(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,Fa)}function jge(t){t._throwIfRoot("getDownloadURL");const e=function Ige(t,e,n){const i=ac(e.fullServerUrl(),t.host,t._protocol),s=t.maxOperationRetryTime,a=new Il(i,"GET",function vge(t,e){return function n(r,i){const o=Gz(t,i,e);return El(null!==o),function pge(t,e,n,r){const i=UP(e);if(null===i||!Ob(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map(c=>{const f=t.fullPath;return ac("/b/"+s(t.bucket)+"/o/"+s(f),n,r)+Bz({alt:"media",token:c})})[0]}(o,i,t.host,t._protocol)}}(t,n),s);return a.errorHandler=uy(e),a}(t.storage,t._location,cy());return t.storage.makeRequestWithTokens(e,Fa).then(n=>{if(null===n)throw function $pe(){return new qr(Ur.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return n})}function iH(t,e){const n=function cge(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new To(t._location.bucket,n);return new Xd(t.storage,r)}function oH(t,e){if(t instanceof WP){const n=t;if(null==n._bucket)throw function Vpe(){return new qr(Ur.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Mz+"' property when initializing the app?")}();const r=new Xd(n,n._bucket);return null!=e?oH(r,e):r}return void 0!==e?iH(t,e):t}function Wge(t,e){if(e&&function Hge(t){return/^[A-Za-z]+:\/\//.test(t)}(e)){if(t instanceof WP)return function Gge(t,e){return new Xd(t,e)}(t,e);throw og("To use ref(service, url), the first argument must be a Storage instance.")}return oH(t,e)}function sH(t,e){const n=null==e?void 0:e[Mz];return null==n?null:To.makeFromBucketSpec(n,t)}class WP{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=Pz,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?To.makeFromBucketSpec(i,this._host):sH(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?To.makeFromBucketSpec(this._url,e):sH(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){VP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){VP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,_.A)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const n=e._authProvider.getImmediate({optional:!0});if(n){const r=yield n.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,_.A)(function*(){const n=e._appCheckProvider.getImmediate({optional:!0});return n?(yield n.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xd(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new jpe(Fz());{const s=function Zpe(t,e,n,r,i,o,s=!0){const a=Bz(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return function Xpe(t,e){e&&(t["X-Firebase-GMPID"]=e)}(c,e),function Qpe(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(c,n),function Ype(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(c,o),function Jpe(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(c,r),new Kpe(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,n){var r=this;return(0,_.A)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,n,i,o).getPromise()})()}}const aH="@firebase/storage";function uH(t,e){return Wge(t=(0,x.Ku)(t),e)}function nme(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new WP(n,r,i,e,yo.SDK_VERSION)}!function rme(){(0,yo._registerComponent)(new ka.uA("storage",nme,"PUBLIC").setMultipleInstances(!0)),(0,yo.registerVersion)(aH,"0.12.2",""),(0,yo.registerVersion)(aH,"0.12.2","esm2017")}();class $b{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class hH{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new $b(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new $b(r,this,this._ref))},n)}on(e,n,r,i){let o;return n&&(o="function"==typeof n?s=>n(new $b(s,this,this._ref)):{next:n.next?s=>n.next(new $b(s,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class fH{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new lc(e,this._service))}get items(){return this._delegate.items.map(e=>new lc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class lc{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=function tme(t,e){return iH(t,e)}(this._delegate,e);return new lc(n,this.storage)}get root(){return new lc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new lc(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new hH(function Kge(t,e,n){return function Lge(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new eH(t,new yl(e),n)}(t=(0,x.Ku)(t),e,n)}(this._delegate,e,n),this)}putString(e,n=Ms.RAW,r){this._throwIfRoot("putString");const i=$P(n,e),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new hH(new eH(this._delegate,new yl(i.data,!0),o),this)}listAll(){return function Jge(t){return function Bge(t){const e={prefixes:[],items:[]};return nH(t,e).then(()=>e)}(t=(0,x.Ku)(t))}(this._delegate).then(e=>new fH(e,this.storage))}list(e){return function Xge(t,e){return rH(t=(0,x.Ku)(t),e)}(this._delegate,e||void 0).then(n=>new fH(n,this.storage))}getMetadata(){return function Qge(t){return function $ge(t){t._throwIfRoot("getMetadata");const e=Kz(t.storage,t._location,cy());return t.storage.makeRequestWithTokens(e,Fa)}(t=(0,x.Ku)(t))}(this._delegate)}updateMetadata(e){return function Yge(t,e){return function Uge(t,e){t._throwIfRoot("updateMetadata");const n=function Ege(t,e,n,r){const o=ac(e.fullServerUrl(),t.host,t._protocol),a=jP(n,r),c=t.maxOperationRetryTime,h=new Il(o,"PATCH",Vb(t,r),c);return h.headers={"Content-Type":"application/json; charset=utf-8"},h.body=a,h.errorHandler=uy(e),h}(t.storage,t._location,e,cy());return t.storage.makeRequestWithTokens(n,Fa)}(t=(0,x.Ku)(t),e)}(this._delegate,e)}getDownloadURL(){return function Zge(t){return jge(t=(0,x.Ku)(t))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function eme(t){return function zge(t){t._throwIfRoot("deleteObject");const e=function wge(t,e){const r=ac(e.fullServerUrl(),t.host,t._protocol),a=new Il(r,"DELETE",function s(l,c){},t.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=uy(e),a}(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Fa)}(t=(0,x.Ku)(t))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Lz(e)}}class pH{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(gH(e))throw og("ref() expected a child path but got a URL, use refFromURL instead.");return new lc(uH(this._delegate,e),this)}refFromURL(e){if(!gH(e))throw og("refFromURL() expected a full URL but got a child path, use ref() instead.");try{To.makeFromUrl(e,this._delegate.host)}catch{throw og("refFromUrl() expected a valid full URL but got an invalid one.")}return new lc(uH(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){!function dH(t,e,n,r={}){!function qge(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken="string"==typeof i?i:(0,x.Fy)(i,t.app.options.projectId))}(t,e,n,r)}(this._delegate,e,n,r)}}function gH(t){return/^[A-Za-z]+:\/\//.test(t)}function ame(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new pH(n,r)}function qP(){return Rt((t,e)=>{let n,r=!1;t.subscribe(Bt(e,i=>{const o=n;n=i,r&&e.next([o,i]),r=!0}))})}function mH(t,e){return function cme(t,e=m1){return new Un(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function KP(t,e){return mH(t,e).pipe(xt(n=>({payload:n,type:"query"})))}!function lme(t){const e={TaskState:Ko,TaskEvent:Dge,StringFormat:Ms,Storage:pH,Reference:lc};t.INTERNAL.registerComponent(new ka.uA("storage-compat",ame,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage-compat","0.3.5")}(Dn.A);class _H{constructor(e,n){kn(this,"ref",void 0),kn(this,"afs",void 0),this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:o}=EH(r,n);return new IH(i,o,this.afs)}snapshotChanges(){return function ume(t,e){return mH(t,e).pipe(GE(void 0),qP(),xt(n=>{const[r,i]=n;return i.exists?null!=r&&r.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(jo)}valueChanges(e={}){return this.snapshotChanges().pipe(xt(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return er(this.ref.get(e)).pipe(jo)}}function Ub(t,e){return KP(t,e).pipe(GE(void 0),qP(),xt(n=>{const[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,l)=>{const c=o.find(f=>f.doc.ref.isEqual(a.ref)),h=null==r?void 0:r.payload.docs.find(f=>f.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),s}))}function vH(t,e,n){return Ub(t,n).pipe(qE((r,i)=>function dme(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function hme(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return QP(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return QP(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return QP(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(o=>o.payload),e),[]),t4(),xt(r=>r.map(i=>({type:i.type,payload:i}))))}function QP(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function yH(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class IH{constructor(e,n,r){kn(this,"ref",void 0),kn(this,"query",void 0),kn(this,"afs",void 0),this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Ub(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(xt(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(GE(void 0),qP(),As(([r,i])=>i.length>0||!r),xt(([,r])=>r),jo)}auditTrail(e){return this.stateChanges(e).pipe(qE((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=yH(e);return vH(this.query,n,this.afs.schedulers.outsideAngular).pipe(jo)}valueChanges(e={}){return KP(this.query,this.afs.schedulers.outsideAngular).pipe(xt(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),jo)}get(e){return er(this.query.get(e)).pipe(jo)}add(e){return this.ref.add(e)}doc(e){return new _H(this.ref.doc(e),this.afs)}}class fme{constructor(e,n){kn(this,"query",void 0),kn(this,"afs",void 0),this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?Ub(this.query,this.afs.schedulers.outsideAngular).pipe(xt(n=>n.filter(r=>e.indexOf(r.type)>-1)),As(n=>n.length>0),jo):Ub(this.query,this.afs.schedulers.outsideAngular).pipe(jo)}auditTrail(e){return this.stateChanges(e).pipe(qE((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=yH(e);return vH(this.query,n,this.afs.schedulers.outsideAngular).pipe(jo)}valueChanges(e={}){return KP(this.query,this.afs.schedulers.outsideAngular).pipe(xt(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),jo)}get(e){return er(this.query.get(e)).pipe(jo)}}const pme=new ft("angularfire2.enableFirestorePersistence"),gme=new ft("angularfire2.firestore.persistenceSettings"),mme=new ft("angularfire2.firestore.settings"),_me=new ft("angularfire2.firestore.use-emulator");function EH(t,e=(n=>n)){return{query:e(t),ref:t}}let ks=(()=>{var t;class e{constructor(r,i,o,s,a,l,c,h,f,m,v,w,R,N,z,Q,Te){kn(this,"schedulers",void 0),kn(this,"firestore",void 0),kn(this,"persistenceEnabled$",void 0),this.schedulers=c;const Ae=dw(r,l,i),Je=f;m&&O4(Ae,l,v,R,N,z,w,Q),[this.firestore,this.persistenceEnabled$]=I1(`${Ae.name}.firestore`,"AngularFirestore",Ae.name,()=>{const mt=l.runOutsideAngular(()=>Ae.firestore());if(s&&mt.settings(s),Je&&mt.useEmulator(...Je),o&&!SE(a)){const Xt=()=>{try{return er(mt.enablePersistence(h||void 0).then(()=>!0,()=>!1))}catch(tn){return typeof console<"u"&&console.warn(tn),Kt(!1)}};return[mt,l.runOutsideAngular(Xt)]}return[mt,Kt(!1)]},[s,Je,o])}collection(r,i){let o;o="string"==typeof r?this.firestore.collection(r):r;const{ref:s,query:a}=EH(o,i),l=this.schedulers.ngZone.run(()=>s);return new IH(l,a,this)}collectionGroup(r,i){const o=i||(a=>a),s=this.firestore.collectionGroup(r);return new fme(o(s),this)}doc(r){let i;i="string"==typeof r?this.firestore.doc(r):r;const o=this.schedulers.ngZone.run(()=>i);return new _H(o,this)}createId(){return this.firestore.collection("_").doc().id}}return t=e,kn(e,"\u0275fac",function(r){return new(r||t)(Ke(Q_),Ke(Y_,8),Ke(pme,8),Ke(mme,8),Ke(Ca),Ke(ze),Ke(y1),Ke(gme,8),Ke(_me,8),Ke(to,8),Ke(R4,8),Ke(x4,8),Ke(P4,8),Ke(M4,8),Ke(k4,8),Ke(N4,8),Ke(v1,8))}),kn(e,"\u0275prov",Qe({token:t,factory:t.\u0275fac,providedIn:"any"})),e})(),sa=(()=>{var t;class e{constructor(r,i,o){this.firestore=r,this.afAuth=i,this.router=o}initialize(){console.log("The fetched user's data from the server won't be available for 1 to 5 seconds"),this.getPublicUserData(),this.getPrivateUserData()}getPublicUserData(){this.afAuth.authState.subscribe(r=>{r?this.firestore.collection("public_users_data").doc(r.uid).get().subscribe(i=>{if(i.exists){const o=i.data();this.public_user_data=o,this.canGoOn="true"}else this.router.navigate(["/splash"])}):this.router.navigate(["/log"])})}getPrivateUserData(){this.afAuth.authState.subscribe(r=>{r?this.firestore.collection("private_users_data").doc(r.uid).get().subscribe(i=>{if(i.exists){const o=i.data();this.private_user_data=o}else this.router.navigate(["/splash"])}):this.router.navigate(["/log"])})}addLikeToSpot(r){this.firestore.collection("spots").doc(r).set({likes:Dn.A.firestore.FieldValue.increment(1)},{merge:!0})}}return(t=e).\u0275fac=function(r){return new(r||t)(Ke(ks),Ke(to),Ke(lr))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),vme=(()=>{var t;class e{constructor(r,i,o){this.afAuth=r,this.router=i,this.firebaseService=o,this.afAuth.authState.subscribe(s=>{this.router.navigate(s?["/home"]:["/log"])})}ngOnInit(){}}return(t=e).\u0275fac=function(r){return new(r||t)(E(to),E(lr),E(sa))},t.\u0275cmp=et({type:t,selectors:[["app-splash"]],decls:3,vars:0,consts:[[2,"height","100%","width","100%","display","flex","flex-direction","column","align-items","center","justify-content","center"],["src","assets\\img\\trasparent_logo.png"]],template:function(r,i){1&r&&(b(0,"body")(1,"div",0),me(2,"img",1),T()())}}),e})();const wH="@firebase/database";let YP="";function XP(t){YP=t}class yme{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){null==n?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,x.As)(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return null==n?null:(0,x.$L)(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Ime{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){null==n?delete this.cache_[e]:this.cache_[e]=n}get(e){return(0,x.gR)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const CH=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new yme(e)}}catch{}return new Ime},Jd=CH("localStorage"),JP=CH("sessionStorage"),cg=new Ss.Vy("@firebase/database"),TH=function(){let t=1;return function(){return t++}}(),AH=function(t){const e=(0,x.kj)(t),n=new x.gz;n.update(e);const r=n.digest();return x.K3.encodeByteArray(r)},dy=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=dy.apply(null,r):e+="object"==typeof r?(0,x.As)(r):r,e+=" "}return e};let Zd=null,DH=!0;const SH=function(t,e){(0,x.vA)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(cg.logLevel=Ss.$b.VERBOSE,Zd=cg.log.bind(cg),e&&JP.set("logging_enabled",!0)):"function"==typeof t?Zd=t:(Zd=null,JP.remove("logging_enabled"))},Gi=function(...t){if(!0===DH&&(DH=!1,null===Zd&&!0===JP.get("logging_enabled")&&SH(!0)),Zd){const e=dy.apply(null,t);Zd(e)}},hy=function(t){return function(...e){Gi(t,...e)}},ZP=function(...t){const e="FIREBASE INTERNAL ERROR: "+dy(...t);cg.error(e)},wl=function(...t){const e=`FIREBASE FATAL ERROR: ${dy(...t)}`;throw cg.error(e),new Error(e)},Ao=function(...t){const e="FIREBASE WARNING: "+dy(...t);cg.warn(e)},jb=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Eu="[MIN_NAME]",cc="[MAX_NAME]",eh=function(t,e){if(t===e)return 0;if(t===Eu||e===cc)return-1;if(e===Eu||t===cc)return 1;{const n=PH(t),r=PH(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1}},bme=function(t,e){return t===e?0:t<e?-1:1},fy=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,x.As)(e))},eM=function(t){if("object"!=typeof t||null===t)return(0,x.As)(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)0!==r&&(n+=","),n+=(0,x.As)(e[r]),n+=":",n+=eM(t[e[r]]);return n+="}",n},RH=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function Wi(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const xH=function(t){(0,x.vA)(!jb(t),"Invalid JSON number");const r=1023;let i,o,s,a,l;0===t?(o=0,s=0,i=1/t==-1/0?1:0):(i=t<0,(t=Math.abs(t))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,52-a)-Math.pow(2,52))):(o=0,s=Math.round(t/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);for(l=11;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(i?1:0),c.reverse();const h=c.join("");let f="";for(l=0;l<64;l+=8){let m=parseInt(h.substr(l,8),2).toString(16);1===m.length&&(m="0"+m),f+=m}return f.toLowerCase()},Dme=new RegExp("^-?(0*)\\d{1,10}$"),PH=function(t){if(Dme.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},ug=function(t){try{t()}catch(e){setTimeout(()=>{throw Ao("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},py=function(t,e){const n=setTimeout(t,e);return"number"==typeof n&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class Pme{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=null==n?void 0:n.getImmediate({optional:!0}),this.appCheck||null==n||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ao(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Mme{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&"auth/token-not-initialized"===n.code?(Gi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ao(e)}}let gy=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return t.OWNER="owner",t})();const FH=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,BH="websocket",$H="long_polling";class nM{constructor(e,n,r,i,o=!1,s="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Jd.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Jd.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function UH(t,e,n){let r;if((0,x.vA)("string"==typeof e,"typeof type must == string"),(0,x.vA)("object"==typeof n,"typeof params must == object"),e===BH)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==$H)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function kme(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);const i=[];return Wi(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}class Nme{constructor(){this.counters_={}}incrementCounter(e,n=1){(0,x.gR)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return(0,x.A4)(this.counters_)}}const rM={},iM={};function oM(t){const e=t.toString();return rM[e]||(rM[e]=new Nme),rM[e]}class Fme{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ug(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class wu{constructor(e,n,r,i,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hy(e),this.stats_=oM(n),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),UH(n,$H,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Fme(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if((0,x.$g)()||"complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new sM((...o)=>{const[s,a,l,c,h]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===s)this.id=a,this.password=l;else{if("close"!==s)throw new Error("Unrecognized command received: "+s);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&FH.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){wu.forceAllow_=!0}static forceDisallow(){wu.forceDisallow_=!0}static isAvailable(){return!((0,x.$g)()||!wu.forceAllow_&&(wu.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=(0,x.As)(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=(0,x.KA)(n),i=RH(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if((0,x.$g)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=(0,x.As)(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class sM{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,x.$g)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=TH(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=sM.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Gi("frame writing exception"),a.stack&&Gi(a.stack),Gi(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Gi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const s=this.pendingSegs.shift();r=r+"&seg"+i+"="+s.seg+"&ts"+i+"="+s.ts+"&d"+i+"="+s.d,i++}return n+=r,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,n){(0,x.$g)()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Gi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Hb=null;typeof MozWebSocket<"u"?Hb=MozWebSocket:typeof WebSocket<"u"&&(Hb=WebSocket);let dg=(()=>{class t{constructor(n,r,i,o,s,a,l){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hy(this.connId),this.stats_=oM(r),this.connURL=t.connectionURL_(r,a,l,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){const a={v:"5"};return!(0,x.$g)()&&typeof location<"u"&&location.hostname&&FH.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),o&&(a.ac=o),s&&(a.p=s),UH(n,BH,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Jd.set("previous_websocket_failure",!0);try{let i;if((0,x.$g)()){i={headers:{"User-Agent":`Firebase/5/${YP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const s=process.env,a=0===this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Hb(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&null!==Hb&&!t.forceDisallow_}static previouslyFailed(){return Jd.isInMemoryStorage||!0===Jd.get("previous_websocket_failure")}markConnectionHealthy(){Jd.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,x.$L)(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if((0,x.vA)(null===this.frames,"We already have a frame buffer"),n.length<=6){const r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();const r=(0,x.As)(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=RH(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t})(),KH=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[wu,dg]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const r=dg&&dg.isAvailable();let i=r&&!dg.previouslyFailed();if(n.webSocketOnly&&(r||Ao("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[dg];else{const o=this.transports_=[];for(const s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return t.globalTransportInitialized_=!1,t})();class t8{constructor(e,n,r,i,o,s,a,l,c,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hy("c:"+this.id+":"),this.transportManager_=new KH(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=py(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const n=e.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=fy("t",e),r=fy("d",e);if("c"===n)this.onSecondaryControl_(r);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=fy("t",e),r=fy("d",e);"c"===n?this.onControl_(r):"d"===n&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=fy("t",e);if("d"in e){const r=e.d;if("h"===n){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(r):"r"===n?this.onReset_(r):"e"===n?ZP("Server Error: "+r):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ZP("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==r&&Ao("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),py(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):py(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Jd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class n8{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}class r8{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,x.vA)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,x.vA)(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class Gb extends r8{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,x.jZ)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Gb}getInitialEvent(e){return(0,x.vA)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class or{constructor(e,n){if(void 0===n){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(e+="/"+this.pieces_[n]);return e||"/"}}function Qn(){return new or("")}function Tn(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function bu(t){return t.pieces_.length-t.pieceNum_}function yr(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new or(t.pieces_,e)}function lM(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function my(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function s8(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new or(e,0)}function jr(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof or)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new or(n,0)}function An(t){return t.pieceNum_>=t.pieces_.length}function Qo(t,e){const n=Tn(t),r=Tn(e);if(null===n)return e;if(n===r)return Qo(yr(t),yr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function i_e(t,e){const n=my(t,0),r=my(e,0);for(let i=0;i<n.length&&i<r.length;i++){const o=eh(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function cM(t,e){if(bu(t)!==bu(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function aa(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(bu(t)>bu(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class o_e{constructor(e,n){this.errorPrefix_=n,this.parts_=my(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,x.OE)(this.parts_[r]);a8(this)}}function a8(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+th(t))}function th(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}class uM extends r8{constructor(){let e,n;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new uM}getInitialEvent(e){return(0,x.vA)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const _y=1e3;let qb,nh=(()=>{class t extends n8{constructor(n,r,i,o,s,a,l,c){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=t.nextPersistentConnectionId_++,this.log_=hy("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_y,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!(0,x.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");uM.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&Gb.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){const o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_((0,x.As)(s)),(0,x.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();const r=new x.cY,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(n,r,i,o){this.initConnection_();const s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),(0,x.vA)(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,x.vA)(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const l={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(n){const r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){const r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const s={p:i};n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest("q",s,l=>{const c=l.d,h=l.s;t.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",l),"ok"!==h&&this.removeListen_(i,o),n.onComplete&&n.onComplete(h,c))})}static warnOnListenWarnings_(n,r){if(n&&"object"==typeof n&&(0,x.gR)(n,"w")){const i=(0,x.yw)(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();Ao(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||(0,x.qc)(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,r=(0,x.Cv)(n)?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const s=o.s,a=o.d||"error";this.authToken_===n&&("ok"===s?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const r=n.s,i=n.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){const i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,x.vA)(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);const s={p:n};o&&(s.q=i,s.t=o),this.sendRequest("n",s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){const s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();const a={p:r,d:i};void 0!==s&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(n){const r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){const r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+(0,x.As)(n));const r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),"d"===n?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===n?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===n?this.onListenRevoked_(r.p,r.q):"ac"===n?this.onAuthRevoked_(r.s,r.d):"apc"===n?this.onAppCheckRevoked_(r.s,r.d):"sd"===n?this.onSecurityDebugPacket_(r):ZP("Unrecognized action received from server: "+(0,x.As)(n)+"\nAre you using the latest client?")}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){(0,x.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_y,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=_y,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=_y),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return(0,_.A)(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const r=n.onDataMessage_.bind(n),i=n.onReady_.bind(n),o=n.onRealtimeDisconnect_.bind(n),s=n.id+":"+t.nextConnectionId_++,a=n.lastSessionId;let l=!1,c=null;const h=function(){c?c.close():(l=!0,o())};n.realtime_={close:h,sendRequest:function(v){(0,x.vA)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(v)}};const m=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[v,w]=yield Promise.all([n.authTokenProvider_.getToken(m),n.appCheckTokenProvider_.getToken(m)]);l?Gi("getToken() completed but was canceled"):(Gi("getToken() completed. Creating connection."),n.authToken_=v&&v.accessToken,n.appCheckToken_=w&&w.token,c=new t8(s,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,r,i,o,R=>{Ao(R+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},a))}catch(v){n.log_("Failed to get token: "+v),l||(n.repoInfo_.nodeAdmin&&Ao(v),h())}}})()}interrupt(n){Gi("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Gi("Resuming connection for reason: "+n),delete this.interruptReasons_[n],(0,x.Im)(this.interruptReasons_)&&(this.reconnectDelay_=_y,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const r=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;i=r?r.map(s=>eM(s)).join("$"):"default";const o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){const i=new or(n).toString();let o;if(this.listens.has(i)){const s=this.listens.get(i);o=s.get(r),s.delete(r),0===s.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){Gi("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Gi("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let r="js";(0,x.$g)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),n["sdk."+r+"."+YP.replace(/\./g,"-")]=1,(0,x.jZ)()?n["framework.cordova"]=1:(0,x.lV)()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=Gb.getInstance().currentlyOnline();return(0,x.Im)(this.interruptReasons_)&&n}}return t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t})();class Sn{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Sn(e,n)}}class Wb{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Sn(Eu,e),i=new Sn(Eu,n);return 0!==this.compare(r,i)}minPost(){return Sn.MIN}}class u8 extends Wb{static get __EMPTY_NODE(){return qb}static set __EMPTY_NODE(e){qb=e}compare(e,n){return eh(e.name,n.name)}isDefinedOn(e){throw(0,x.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Sn.MIN}maxPost(){return new Sn(cc,qb)}makePost(e,n){return(0,x.vA)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Sn(e,qb)}toString(){return".key"}}const bl=new u8;class Kb{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,e=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let hM,La=(()=>{class t{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=null!=i?i:t.RED,this.left=null!=o?o:ds.EMPTY_NODE,this.right=null!=s?s:ds.EMPTY_NODE}copy(n,r,i,o,s){return new t(null!=n?n:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=o?o:this.left,null!=s?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this;const s=i(n,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(n,r,i),null):0===s?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return ds.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(n,i.key)){if(i.right.isEmpty())return ds.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})();class ds{constructor(e,n=ds.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ds(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,La.BLACK,null,null))}remove(e){return new ds(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,La.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}n<0?r=r.left:n>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Kb(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Kb(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Kb(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Kb(this.root_,null,this.comparator_,!0,e)}}function f_e(t,e){return eh(t.name,e.name)}function dM(t,e){return eh(t,e)}ds.EMPTY_NODE=new class h_e{copy(e,n,r,i,o){return this}insert(e,n,r){return new La(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const d8=function(t){return"number"==typeof t?"number:"+xH(t):"string:"+t},h8=function(t){if(t.isLeafNode()){const e=t.val();(0,x.vA)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,x.gR)(e,".sv"),"Priority must be a string or number.")}else(0,x.vA)(t===hM||t.isEmpty(),"priority of unexpected type.");(0,x.vA)(t===hM||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let f8,p8,g8,hg=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,(0,x.vA)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),h8(this.priorityNode_)}static set __childrenNodeConstructor(n){f8=n}static get __childrenNodeConstructor(){return f8}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return An(n)?this:".priority"===Tn(n)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return".priority"===n?this.updatePriority(r):r.isEmpty()&&".priority"!==n?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){const i=Tn(n);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,x.vA)(".priority"!==i||1===bu(n),".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(yr(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+d8(this.priorityNode_.val())+":");const r=typeof this.value_;n+=r+":",n+="number"===r?xH(this.value_):this.value_,this.lazyHash_=AH(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:((0,x.vA)(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),s=t.VALUE_TYPE_ORDER.indexOf(i);return(0,x.vA)(o>=0,"Unknown leaf type: "+r),(0,x.vA)(s>=0,"Unknown leaf type: "+i),o===s?"object"===i?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){return n===this||!!n.isLeafNode()&&(this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_))}}return t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t})();const Dr=new class __e extends Wb{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return 0===o?eh(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Sn.MIN}maxPost(){return new Sn(cc,new hg("[PRIORITY-POST]",g8))}makePost(e,n){const r=p8(e);return new Sn(n,new hg("[PRIORITY-POST]",r))}toString(){return".priority"}},v_e=Math.log(2);class y_e{constructor(e){this.count=parseInt(Math.log(e+1)/v_e,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Qb=function(t,e,n,r){t.sort(e);const i=function(l,c){const h=c-l;let f,m;if(0===h)return null;if(1===h)return f=t[l],m=n?n(f):f,new La(m,f.node,La.BLACK,null,null);{const v=parseInt(h/2,10)+l,w=i(l,v),R=i(v+1,c);return f=t[v],m=n?n(f):f,new La(m,f.node,La.BLACK,w,R)}},a=function(l){let c=null,h=null,f=t.length;const m=function(w,R){const N=f-w,z=f;f-=w;const Q=i(N+1,z),Te=t[N],Ae=n?n(Te):Te;v(new La(Ae,Te.node,R,null,Q))},v=function(w){c?(c.left=w,c=w):(h=w,c=w)};for(let w=0;w<l.count;++w){const R=l.nextBitIsOne(),N=Math.pow(2,l.count-(w+1));R?m(N,La.BLACK):(m(N,La.BLACK),m(N,La.RED))}return h}(new y_e(t.length));return new ds(r||e,a)};let fM;const fg={};class uc{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return(0,x.vA)(fg&&Dr,"ChildrenNode.ts has not been loaded"),fM=fM||new uc({".priority":fg},{".priority":Dr}),fM}get(e){const n=(0,x.yw)(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ds?n:null}hasIndex(e){return(0,x.gR)(this.indexSet_,e.toString())}addIndex(e,n){(0,x.vA)(e!==bl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=n.getIterator(Sn.Wrap);let a,s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();a=i?Qb(r,e.getCompare()):fg;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new uc(h,c)}addToIndexes(e,n){const r=(0,x.kH)(this.indexes_,(i,o)=>{const s=(0,x.yw)(this.indexSet_,o);if((0,x.vA)(s,"Missing index implementation for "+o),i===fg){if(s.isDefinedOn(e.node)){const a=[],l=n.getIterator(Sn.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Qb(a,s.getCompare())}return fg}{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new Sn(e.name,a))),l.insert(e,e.node)}});return new uc(r,this.indexSet_)}removeFromIndexes(e,n){const r=(0,x.kH)(this.indexes_,i=>{if(i===fg)return i;{const o=n.get(e.name);return o?i.remove(new Sn(e.name,o)):i}});return new uc(r,this.indexSet_)}}let vy,vn=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&h8(this.priorityNode_),this.children_.isEmpty()&&(0,x.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return vy||(vy=new t(new ds(dM),null,uc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||vy}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const r=this.children_.get(n);return null===r?vy:r}}getChild(n){const r=Tn(n);return null===r?this:this.getImmediateChild(r).getChild(yr(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,r){if((0,x.vA)(r,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(r);{const i=new Sn(n,r);let o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));const a=o.isEmpty()?vy:this.priorityNode_;return new t(o,a,s)}}updateChild(n,r){const i=Tn(n);if(null===i)return r;{(0,x.vA)(".priority"!==Tn(n)||1===bu(n),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(yr(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const r={};let i=0,o=0,s=!0;if(this.forEachChild(Dr,(a,l)=>{r[a]=l.val(n),i++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+d8(this.getPriority().val())+":"),this.forEachChild(Dr,(r,i)=>{const o=i.hash();""!==o&&(n+=":"+r+":"+o)}),this.lazyHash_=""===n?"":AH(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){const o=this.resolveIndex_(i);if(o){const s=o.getPredecessorKey(new Sn(n,r));return s?s.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(n){const r=this.getFirstChildName(n);return r?new Sn(r,this.children_.get(r)):null}getLastChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(n){const r=this.getLastChildName(n);return r?new Sn(r,this.children_.get(r)):null}forEachChild(n,r){const i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{const o=this.children_.getIteratorFrom(n.name,Sn.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{const o=this.children_.getReverseIteratorFrom(n.name,Sn.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===yy?-1:0}withIndex(n){if(n===bl||this.indexMap_.hasIndex(n))return this;{const r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===bl||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const r=n;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Dr),o=r.getIterator(Dr);let s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return null===s&&null===a}return!1}return!1}}resolveIndex_(n){return n===bl?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})();const yy=new class I_e extends vn{constructor(){super(new ds(dM),vn.EMPTY_NODE,uc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return vn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Sn,{MIN:{value:new Sn(Eu,vn.EMPTY_NODE)},MAX:{value:new Sn(cc,yy)}}),u8.__EMPTY_NODE=vn.EMPTY_NODE,hg.__childrenNodeConstructor=vn,function p_e(t){hM=t}(yy),function m_e(t){g8=t}(yy);const E_e=!0;function Kr(t,e=null){if(null===t)return vn.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),(0,x.vA)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new hg(t,Kr(e));if(t instanceof Array||!E_e){let n=vn.EMPTY_NODE;return Wi(t,(r,i)=>{if((0,x.gR)(t,r)&&"."!==r.substring(0,1)){const o=Kr(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(Kr(e))}{const n=[];let r=!1;if(Wi(t,(s,a)=>{if("."!==s.substring(0,1)){const l=Kr(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Sn(s,l)))}}),0===n.length)return vn.EMPTY_NODE;const o=Qb(n,f_e,s=>s.name,dM);if(r){const s=Qb(n,Dr.getCompare());return new vn(o,Kr(e),new uc({".priority":s},{".priority":Dr}))}return new vn(o,Kr(e),uc.Default)}}!function g_e(t){p8=t}(Kr);class pM extends Wb{constructor(e){super(),this.indexPath_=e,(0,x.vA)(!An(e)&&".priority"!==Tn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return 0===o?eh(e.name,n.name):o}makePost(e,n){const r=Kr(e),i=vn.EMPTY_NODE.updateChild(this.indexPath_,r);return new Sn(n,i)}maxPost(){const e=vn.EMPTY_NODE.updateChild(this.indexPath_,yy);return new Sn(cc,e)}toString(){return my(this.indexPath_,0).join("/")}}const gM=new class w_e extends Wb{compare(e,n){const r=e.node.compareTo(n.node);return 0===r?eh(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Sn.MIN}maxPost(){return Sn.MAX}makePost(e,n){const r=Kr(e);return new Sn(n,r)}toString(){return".value"}};function m8(t){return{type:"value",snapshotNode:t}}function pg(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Iy(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ey(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}class mM{constructor(e){this.index_=e}updateChild(e,n,r,i,o,s){(0,x.vA)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=s&&(r.isEmpty()?e.hasChild(n)?s.trackChildChange(Iy(n,a)):(0,x.vA)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(pg(n,r)):s.trackChildChange(Ey(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Dr,(i,o)=>{n.hasChild(i)||r.trackChildChange(Iy(i,o))}),n.isLeafNode()||n.forEachChild(Dr,(i,o)=>{if(e.hasChild(i)){const s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(Ey(i,o,s))}else r.trackChildChange(pg(i,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?vn.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class wy{constructor(e){this.indexedFilter_=new mM(e.getIndex()),this.index_=e.getIndex(),this.startPost_=wy.getStartPost_(e),this.endPost_=wy.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,o,s){return this.matches(new Sn(n,r))||(r=vn.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,s)}updateFullNode(e,n,r){n.isLeafNode()&&(n=vn.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(vn.EMPTY_NODE);const o=this;return n.forEachChild(Dr,(s,a)=>{o.matches(new Sn(s,a))||(i=i.updateImmediateChild(s,vn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}return e.getIndex().maxPost()}}class C_e{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new wy(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,o,s){return this.rangedFilter_.matches(new Sn(n,r))||(r=vn.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,s):this.fullLimitUpdateChild_(e,n,r,o,s)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=vn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<n.numChildren()&&n.isIndexed(this.index_)){let o;i=vn.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){const a=o.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),s++}}}else{let o;i=n.withIndex(this.index_),i=i.updatePriority(vn.EMPTY_NODE),o=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let s=0;for(;o.hasNext();){const a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,vn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let s;if(this.reverse_){const f=this.index_.getCompare();s=(m,v)=>f(v,m)}else s=this.index_.getCompare();const a=e;(0,x.vA)(a.numChildren()===this.limit_,"");const l=new Sn(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(n)){const f=a.getImmediateChild(n);let m=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=m&&(m.name===n||a.hasChild(m.name));)m=i.getChildAfterChild(this.index_,m,this.reverse_);const v=null==m?1:s(m,l);if(h&&!r.isEmpty()&&v>=0)return null!=o&&o.trackChildChange(Ey(n,r,f)),a.updateImmediateChild(n,r);{null!=o&&o.trackChildChange(Iy(n,f));const R=a.updateImmediateChild(n,vn.EMPTY_NODE);return null!=m&&this.rangedFilter_.matches(m)?(null!=o&&o.trackChildChange(pg(m.name,m.node)),R.updateImmediateChild(m.name,m.node)):R}}return r.isEmpty()?e:h&&s(c,l)>=0?(null!=o&&(o.trackChildChange(Iy(c.name,c.node)),o.trackChildChange(pg(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,vn.EMPTY_NODE)):e}}class Yb{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Dr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,x.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,x.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Eu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,x.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,x.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:cc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,x.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Dr}copy(){const e=new Yb;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function _M(t,e,n){const r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function vM(t,e,n){const r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Xb(t,e){const n=t.copy();return n.index_=e,n}function _8(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Dr?n="$priority":t.index_===gM?n="$value":t.index_===bl?n="$key":((0,x.vA)(t.index_ instanceof pM,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=(0,x.As)(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=(0,x.As)(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+(0,x.As)(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=(0,x.As)(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+(0,x.As)(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function v8(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Dr&&(e.i=t.index_.toString()),e}class Jb extends n8{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=hy("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return void 0!==n?"tag$"+n:((0,x.vA)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const s=Jb.getListenId_(e,r),a={};this.listens_[s]=a;const l=_8(e._queryParams);this.restRequest_(o+".json",l,(c,h)=>{let f=h;if(404===c&&(f=null,c=null),null===c&&this.onDataUpdate_(o,f,!1,r),(0,x.yw)(this.listens_,s)===a){let m;m=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(m,null)}})}unlisten(e,n){const r=Jb.getListenId_(e,n);delete this.listens_[r]}get(e){const n=_8(e._queryParams),r=e._path.toString(),i=new x.cY;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;404===o&&(a=null,o=null),null===o?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,x.Am)(n);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,x.$L)(a.responseText)}catch{Ao("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&Ao("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}}class x_e{constructor(){this.rootNode_=vn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function Zb(){return{value:null,children:new Map}}function gg(t,e,n){if(An(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const r=Tn(e);t.children.has(r)||t.children.set(r,Zb()),gg(t.children.get(r),e=yr(e),n)}}function yM(t,e){if(An(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(Dr,(r,i)=>{gg(t,new or(r),i)}),yM(t,e)}}if(t.children.size>0){const n=Tn(e);return e=yr(e),t.children.has(n)&&yM(t.children.get(n),e)&&t.children.delete(n),0===t.children.size}return!0}function IM(t,e,n){null!==t.value?n(e,t.value):function P_e(t,e){t.children.forEach((n,r)=>{e(r,n)})}(t,(r,i)=>{IM(i,new or(e.toString()+"/"+r),n)})}class M_e{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Wi(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}class O_e{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new M_e(e);const r=1e4+2e4*Math.random();py(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Wi(e,(i,o)=>{o>0&&(0,x.gR)(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),py(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Cl=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Cl||{});function bM(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class eC{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Cl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(An(this.path)){if(null!=this.affectedTree.value)return(0,x.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new or(e));return new eC(Qn(),n,this.revert)}}return(0,x.vA)(Tn(this.path)===e,"operationForChild called for unrelated child."),new eC(yr(this.path),this.affectedTree,this.revert)}}class by{constructor(e,n){this.source=e,this.path=n,this.type=Cl.LISTEN_COMPLETE}operationForChild(e){return An(this.path)?new by(this.source,Qn()):new by(this.source,yr(this.path))}}class rh{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Cl.OVERWRITE}operationForChild(e){return An(this.path)?new rh(this.source,Qn(),this.snap.getImmediateChild(e)):new rh(this.source,yr(this.path),this.snap)}}class mg{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Cl.MERGE}operationForChild(e){if(An(this.path)){const n=this.children.subtree(new or(e));return n.isEmpty()?null:n.value?new rh(this.source,Qn(),n.value):new mg(this.source,Qn(),n)}return(0,x.vA)(Tn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new mg(this.source,yr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Cu{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(An(e))return this.isFullyInitialized()&&!this.filtered_;const n=Tn(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class F_e{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Cy(t,e,n,r,i,o){const s=r.filter(a=>a.type===n);s.sort((a,l)=>function B_e(t,e,n){if(null==e.childName||null==n.childName)throw(0,x.Hk)("Should only compare child_ events.");const r=new Sn(e.childName,e.snapshotNode),i=new Sn(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,a,l)),s.forEach(a=>{const l=function V_e(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,a,o);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function tC(t,e){return{eventCache:t,serverCache:e}}function Ty(t,e,n,r){return tC(new Cu(e,n,r),t.serverCache)}function I8(t,e,n,r){return tC(t.eventCache,new Cu(e,n,r))}function nC(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ih(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let CM;class Sr{constructor(e,n=(()=>(CM||(CM=new ds(bme)),CM))()){this.value=e,this.children=n}static fromObject(e){let n=new Sr(null);return Wi(e,(r,i)=>{n=n.set(new or(r),i)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(null!=this.value&&n(this.value))return{path:Qn(),value:this.value};if(An(e))return null;{const r=Tn(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(yr(e),n);return null!=o?{path:jr(new or(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(An(e))return this;{const n=Tn(e),r=this.children.get(n);return null!==r?r.subtree(yr(e)):new Sr(null)}}set(e,n){if(An(e))return new Sr(n,this.children);{const r=Tn(e),o=(this.children.get(r)||new Sr(null)).set(yr(e),n),s=this.children.insert(r,o);return new Sr(this.value,s)}}remove(e){if(An(e))return this.children.isEmpty()?new Sr(null):new Sr(null,this.children);{const n=Tn(e),r=this.children.get(n);if(r){const i=r.remove(yr(e));let o;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new Sr(null):new Sr(this.value,o)}return this}}get(e){if(An(e))return this.value;{const n=Tn(e),r=this.children.get(n);return r?r.get(yr(e)):null}}setTree(e,n){if(An(e))return n;{const r=Tn(e),o=(this.children.get(r)||new Sr(null)).setTree(yr(e),n);let s;return s=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new Sr(this.value,s)}}fold(e){return this.fold_(Qn(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(jr(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Qn(),n)}findOnPath_(e,n,r){const i=!!this.value&&r(n,this.value);if(i)return i;if(An(e))return null;{const o=Tn(e),s=this.children.get(o);return s?s.findOnPath_(yr(e),jr(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Qn(),n)}foreachOnPath_(e,n,r){if(An(e))return this;{this.value&&r(n,this.value);const i=Tn(e),o=this.children.get(i);return o?o.foreachOnPath_(yr(e),jr(n,i),r):new Sr(null)}}foreach(e){this.foreach_(Qn(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(jr(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}class Va{constructor(e){this.writeTree_=e}static empty(){return new Va(new Sr(null))}}function Ay(t,e,n){if(An(e))return new Va(new Sr(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const s=Qo(i,e);return o=o.updateChild(s,n),new Va(t.writeTree_.set(i,o))}{const i=new Sr(n),o=t.writeTree_.setTree(e,i);return new Va(o)}}}function TM(t,e,n){let r=t;return Wi(n,(i,o)=>{r=Ay(r,jr(e,i),o)}),r}function E8(t,e){if(An(e))return Va.empty();{const n=t.writeTree_.setTree(e,new Sr(null));return new Va(n)}}function AM(t,e){return null!=oh(t,e)}function oh(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Qo(n.path,e)):null}function w8(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Dr,(r,i)=>{e.push(new Sn(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Sn(r,i.value))}),e}function Tu(t,e){if(An(e))return t;{const n=oh(t,e);return new Va(null!=n?new Sr(n):t.writeTree_.subtree(e))}}function DM(t){return t.writeTree_.isEmpty()}function _g(t,e){return b8(Qn(),t.writeTree_,e)}function b8(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,x.vA)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=b8(jr(t,i),o,n)}),!n.getChild(t).isEmpty()&&null!==r&&(n=n.updateChild(jr(t,".priority"),r)),n}}function rC(t,e){return S8(e,t)}function G_e(t,e){if(t.snap)return aa(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&aa(jr(t.path,n),e))return!0;return!1}function q_e(t){return t.visible}function C8(t,e,n){let r=Va.empty();for(let i=0;i<t.length;++i){const o=t[i];if(e(o)){const s=o.path;let a;if(o.snap)aa(n,s)?(a=Qo(n,s),r=Ay(r,a,o.snap)):aa(s,n)&&(a=Qo(s,n),r=Ay(r,Qn(),o.snap.getChild(a)));else{if(!o.children)throw(0,x.Hk)("WriteRecord should have .snap or .children");if(aa(n,s))a=Qo(n,s),r=TM(r,a,o.children);else if(aa(s,n))if(a=Qo(s,n),An(a))r=TM(r,Qn(),o.children);else{const l=(0,x.yw)(o.children,Tn(a));if(l){const c=l.getChild(yr(a));r=Ay(r,Qn(),c)}}}}}return r}function T8(t,e,n,r,i){if(r||i){const o=Tu(t.visibleWrites,e);return!i&&DM(o)?n:i||null!=n||AM(o,Qn())?_g(C8(t.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(aa(c.path,e)||aa(e,c.path))},e),n||vn.EMPTY_NODE):null}{const o=oh(t.visibleWrites,e);if(null!=o)return o;{const s=Tu(t.visibleWrites,e);return DM(s)?n:null!=n||AM(s,Qn())?_g(s,n||vn.EMPTY_NODE):null}}}function iC(t,e,n,r){return T8(t.writeTree,t.treePath,e,n,r)}function SM(t,e){return function K_e(t,e,n){let r=vn.EMPTY_NODE;const i=oh(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Dr,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){const o=Tu(t.visibleWrites,e);return n.forEachChild(Dr,(s,a)=>{const l=_g(Tu(o,new or(s)),a);r=r.updateImmediateChild(s,l)}),w8(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}return w8(Tu(t.visibleWrites,e)).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}(t.writeTree,t.treePath,e)}function A8(t,e,n,r){return function Q_e(t,e,n,r,i){(0,x.vA)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=jr(e,n);if(AM(t.visibleWrites,o))return null;{const s=Tu(t.visibleWrites,o);return DM(s)?i.getChild(n):_g(s,i.getChild(n))}}(t.writeTree,t.treePath,e,n,r)}function oC(t,e){return function X_e(t,e){return oh(t.visibleWrites,e)}(t.writeTree,jr(t.treePath,e))}function RM(t,e,n){return function Y_e(t,e,n,r){const i=jr(e,n),o=oh(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?_g(Tu(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function D8(t,e){return S8(jr(t.treePath,e),t.writeTree)}function S8(t,e){return{treePath:t,writeTree:e}}class tve{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;(0,x.vA)("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),(0,x.vA)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===n&&"child_removed"===o)this.changeMap.set(r,Ey(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===n&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===n&&"child_changed"===o)this.changeMap.set(r,Iy(r,i.oldSnap));else if("child_changed"===n&&"child_added"===o)this.changeMap.set(r,pg(r,e.snapshotNode));else{if("child_changed"!==n||"child_changed"!==o)throw(0,x.Hk)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Ey(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const R8=new class nve{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}};class xM{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Cu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return RM(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ih(this.viewCache_),o=function eve(t,e,n,r,i,o){return function J_e(t,e,n,r,i,o,s){let a;const l=Tu(t.visibleWrites,e),c=oh(l,Qn());if(null!=c)a=c;else{if(null==n)return[];a=_g(l,n)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const h=[],f=s.getCompare(),m=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let v=m.getNext();for(;v&&h.length<i;)0!==f(v,r)&&h.push(v),v=m.getNext();return h}}(t.writeTree,t.treePath,e,n,r,i,o)}(this.writes_,i,n,1,r,e);return 0===o.length?null:o[0]}}function x8(t,e,n,r,i,o){const s=e.eventCache;if(null!=oC(r,n))return e;{let a,l;if(An(n))if((0,x.vA)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=ih(e),f=SM(r,c instanceof vn?c:vn.EMPTY_NODE);a=t.filter.updateFullNode(e.eventCache.getNode(),f,o)}else{const c=iC(r,ih(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,o)}else{const c=Tn(n);if(".priority"===c){(0,x.vA)(1===bu(n),"Can't have a priority with additional path components");const h=s.getNode();l=e.serverCache.getNode();const f=A8(r,n,h,l);a=null!=f?t.filter.updatePriority(h,f):s.getNode()}else{const h=yr(n);let f;if(s.isCompleteForChild(c)){l=e.serverCache.getNode();const m=A8(r,n,s.getNode(),l);f=null!=m?s.getNode().getImmediateChild(c).updateChild(h,m):s.getNode().getImmediateChild(c)}else f=RM(r,c,e.serverCache);a=null!=f?t.filter.updateChild(s.getNode(),c,f,h,i,o):s.getNode()}}return Ty(e,a,s.isFullyInitialized()||An(n),t.filter.filtersNodes())}}function sC(t,e,n,r,i,o,s,a){const l=e.serverCache;let c;const h=s?t.filter:t.filter.getIndexedFilter();if(An(n))c=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const v=l.getNode().updateChild(n,r);c=h.updateFullNode(l.getNode(),v,null)}else{const v=Tn(n);if(!l.isCompleteForPath(n)&&bu(n)>1)return e;const w=yr(n),N=l.getNode().getImmediateChild(v).updateChild(w,r);c=".priority"===v?h.updatePriority(l.getNode(),N):h.updateChild(l.getNode(),v,N,w,R8,null)}const f=I8(e,c,l.isFullyInitialized()||An(n),h.filtersNodes());return x8(t,f,n,i,new xM(i,f,o),a)}function PM(t,e,n,r,i,o,s){const a=e.eventCache;let l,c;const h=new xM(i,e,o);if(An(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,s),l=Ty(e,c,!0,t.filter.filtersNodes());else{const f=Tn(n);if(".priority"===f)c=t.filter.updatePriority(e.eventCache.getNode(),r),l=Ty(e,c,a.isFullyInitialized(),a.isFiltered());else{const m=yr(n),v=a.getNode().getImmediateChild(f);let w;if(An(m))w=r;else{const R=h.getCompleteChild(f);w=null!=R?".priority"===lM(m)&&R.getChild(s8(m)).isEmpty()?R:R.updateChild(m,r):vn.EMPTY_NODE}l=v.equals(w)?e:Ty(e,t.filter.updateChild(a.getNode(),f,w,m,h,s),a.isFullyInitialized(),t.filter.filtersNodes())}}return l}function P8(t,e){return t.eventCache.isCompleteForChild(e)}function M8(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function MM(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=An(n)?r:new Sr(null).setTree(n,r);const h=e.serverCache.getNode();return c.children.inorderTraversal((f,m)=>{if(h.hasChild(f)){const w=M8(0,e.serverCache.getNode().getImmediateChild(f),m);l=sC(t,l,new or(f),w,i,o,s,a)}}),c.children.inorderTraversal((f,m)=>{const v=!e.serverCache.isCompleteForChild(f)&&null===m.value;if(!h.hasChild(f)&&!v){const R=M8(0,e.serverCache.getNode().getImmediateChild(f),m);l=sC(t,l,new or(f),R,i,o,s,a)}}),l}class dve{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new mM(r.getIndex()),o=function T_e(t){return t.loadsAllData()?new mM(t.getIndex()):t.hasLimit()?new C_e(t):new wy(t)}(r);this.processor_=function rve(t){return{filter:t}}(o);const s=n.serverCache,a=n.eventCache,l=i.updateFullNode(vn.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(vn.EMPTY_NODE,a.getNode(),null),h=new Cu(l,s.isFullyInitialized(),i.filtersNodes()),f=new Cu(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=tC(f,h),this.eventGenerator_=new F_e(this.query_)}get query(){return this.query_}}function pve(t,e){const n=ih(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!An(e)&&!n.getImmediateChild(Tn(e)).isEmpty())?n.getChild(e):null}function k8(t){return 0===t.eventRegistrations_.length}function N8(t,e,n){const r=[];if(n){(0,x.vA)(null==e,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(o=>{const s=o.createCancelEvent(n,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){const s=t.eventRegistrations_[o];if(s.matches(e)){if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}else i.push(s)}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function O8(t,e,n,r){e.type===Cl.MERGE&&null!==e.source.queryId&&((0,x.vA)(ih(t.viewCache_),"We should always have a full cache before handling merges"),(0,x.vA)(nC(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,o=function ove(t,e,n,r,i){const o=new tve;let s,a;if(n.type===Cl.OVERWRITE){const c=n;c.source.fromUser?s=PM(t,e,c.path,c.snap,r,i,o):((0,x.vA)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!An(c.path),s=sC(t,e,c.path,c.snap,r,i,a,o))}else if(n.type===Cl.MERGE){const c=n;c.source.fromUser?s=function ave(t,e,n,r,i,o,s){let a=e;return r.foreach((l,c)=>{const h=jr(n,l);P8(e,Tn(h))&&(a=PM(t,a,h,c,i,o,s))}),r.foreach((l,c)=>{const h=jr(n,l);P8(e,Tn(h))||(a=PM(t,a,h,c,i,o,s))}),a}(t,e,c.path,c.children,r,i,o):((0,x.vA)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),s=MM(t,e,c.path,c.children,r,i,a,o))}else if(n.type===Cl.ACK_USER_WRITE){const c=n;s=c.revert?function uve(t,e,n,r,i,o){let s;if(null!=oC(r,n))return e;{const a=new xM(r,e,i),l=e.eventCache.getNode();let c;if(An(n)||".priority"===Tn(n)){let h;if(e.serverCache.isFullyInitialized())h=iC(r,ih(e));else{const f=e.serverCache.getNode();(0,x.vA)(f instanceof vn,"serverChildren would be complete if leaf node"),h=SM(r,f)}c=t.filter.updateFullNode(l,h,o)}else{const h=Tn(n);let f=RM(r,h,e.serverCache);null==f&&e.serverCache.isCompleteForChild(h)&&(f=l.getImmediateChild(h)),c=null!=f?t.filter.updateChild(l,h,f,yr(n),a,o):e.eventCache.getNode().hasChild(h)?t.filter.updateChild(l,h,vn.EMPTY_NODE,yr(n),a,o):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=iC(r,ih(e)),s.isLeafNode()&&(c=t.filter.updateFullNode(c,s,o)))}return s=e.serverCache.isFullyInitialized()||null!=oC(r,Qn()),Ty(e,c,s,t.filter.filtersNodes())}}(t,e,c.path,r,i,o):function lve(t,e,n,r,i,o,s){if(null!=oC(i,n))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(An(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return sC(t,e,n,l.getNode().getChild(n),i,o,a,s);if(An(n)){let c=new Sr(null);return l.getNode().forEachChild(bl,(h,f)=>{c=c.set(new or(h),f)}),MM(t,e,n,c,i,o,a,s)}return e}{let c=new Sr(null);return r.foreach((h,f)=>{const m=jr(n,h);l.isCompleteForPath(m)&&(c=c.set(h,l.getNode().getChild(m)))}),MM(t,e,n,c,i,o,a,s)}}(t,e,c.path,c.affectedTree,r,i,o)}else{if(n.type!==Cl.LISTEN_COMPLETE)throw(0,x.Hk)("Unknown operation type: "+n.type);s=function cve(t,e,n,r,i){const o=e.serverCache;return x8(t,I8(e,o.getNode(),o.isFullyInitialized()||An(n),o.isFiltered()),n,r,R8,i)}(t,e,n.path,r,o)}const l=o.getChanges();return function sve(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=nC(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(m8(nC(e)))}}(e,s,l),{viewCache:s,changes:l}}(t.processor_,i,e,n,r);return function ive(t,e){(0,x.vA)(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),(0,x.vA)(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}(t.processor_,o.viewCache),(0,x.vA)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,F8(t,o.changes,o.viewCache.eventCache.getNode(),null)}function F8(t,e,n,r){return function L_e(t,e,n,r){const i=[],o=[];return e.forEach(s=>{"child_changed"===s.type&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(function b_e(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}(s.childName,s.snapshotNode))}),Cy(t,i,"child_removed",e,r,n),Cy(t,i,"child_added",e,r,n),Cy(t,i,"child_moved",o,r,n),Cy(t,i,"child_changed",e,r,n),Cy(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}let aC,cC;class L8{constructor(){this.views=new Map}}function kM(t,e,n,r){const i=e.source.queryId;if(null!==i){const o=t.views.get(i);return(0,x.vA)(null!=o,"SyncTree gave us an op for an invalid query."),O8(o,e,n,r)}{let o=[];for(const s of t.views.values())o=o.concat(O8(s,e,n,r));return o}}function V8(t,e,n,r,i){const s=t.views.get(e._queryIdentifier);if(!s){let a=iC(n,i?r:null),l=!1;a?l=!0:r instanceof vn?(a=SM(n,r),l=!1):(a=vn.EMPTY_NODE,l=!1);const c=tC(new Cu(a,l,!1),new Cu(r,i,!1));return new dve(e,c)}return s}function B8(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Au(t,e){let n=null;for(const r of t.views.values())n=n||pve(r,e);return n}function $8(t,e){return e._queryParams.loadsAllData()?lC(t):t.views.get(e._queryIdentifier)}function U8(t,e){return null!=$8(t,e)}function Du(t){return null!=lC(t)}function lC(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Cve=1;class j8{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Sr(null),this.pendingWriteTree_=function Z_e(){return{visibleWrites:Va.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function NM(t,e,n,r,i){return function U_e(t,e,n,r,i){(0,x.vA)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ay(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?vg(t,new rh({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Su(t,e,n=!1){const r=function z_e(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function H_e(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);(0,x.vA)(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){const a=t.allWrites[s];a.visible&&(s>=n&&G_e(a,r.path)?i=!1:aa(r.path,a.path)&&(o=!0)),s--}return!!i&&(o?(function W_e(t){t.visibleWrites=C8(t.allWrites,q_e,Qn()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=E8(t.visibleWrites,r.path):Wi(r.children,l=>{t.visibleWrites=E8(t.visibleWrites,jr(r.path,l))}),!0))}(t.pendingWriteTree_,e)){let o=new Sr(null);return null!=r.snap?o=o.set(Qn(),!0):Wi(r.children,s=>{o=o.set(new or(s),!0)}),vg(t,new eC(r.path,o,n))}return[]}function Dy(t,e,n){return vg(t,new rh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function uC(t,e,n,r,i=!1){const o=e._path,s=t.syncPointTree_.get(o);let a=[];if(s&&("default"===e._queryIdentifier||U8(s,e))){const l=function Eve(t,e,n,r){const i=e._queryIdentifier,o=[];let s=[];const a=Du(t);if("default"===i)for(const[l,c]of t.views.entries())s=s.concat(N8(c,n,r)),k8(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{const l=t.views.get(i);l&&(s=s.concat(N8(l,n,r)),k8(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||o.push(l.query)))}return a&&!Du(t)&&o.push(new(function vve(){return(0,x.vA)(aC,"Reference.ts has not been loaded"),aC}())(e._repo,e._path)),{removed:o,events:s}}(s,e,n,r);(function yve(t){return 0===t.views.size})(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const c=l.removed;if(a=l.events,!i){const h=-1!==c.findIndex(m=>m._queryParams.loadsAllData()),f=t.syncPointTree_.findOnPath(o,(m,v)=>Du(v));if(h&&!f){const m=t.syncPointTree_.subtree(o);if(!m.isEmpty()){const v=function Pve(t){return t.fold((e,n,r)=>{if(n&&Du(n))return[lC(n)];{let i=[];return n&&(i=B8(n)),Wi(r,(o,s)=>{i=i.concat(s)}),i}})}(m);for(let w=0;w<v.length;++w){const R=v[w],N=R.query,z=W8(t,R);t.listenProvider_.startListening(Ry(N),Sy(t,N),z.hashFn,z.onComplete)}}}!f&&c.length>0&&!r&&(h?t.listenProvider_.stopListening(Ry(e),null):c.forEach(m=>{const v=t.queryToTagMap.get(hC(m));t.listenProvider_.stopListening(Ry(m),v)}))}!function Mve(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=hC(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,c)}return a}function z8(t,e,n,r){const i=FM(t,r);if(null!=i){const o=LM(i),s=o.path,a=o.queryId,l=Qo(s,e);return VM(t,s,new rh(bM(a),l,n))}return[]}function OM(t,e,n,r=!1){const i=e._path;let o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(m,v)=>{const w=Qo(m,i);o=o||Au(v,w),s=s||Du(v)});let l,a=t.syncPointTree_.get(i);a?(s=s||Du(a),o=o||Au(a,Qn())):(a=new L8,t.syncPointTree_=t.syncPointTree_.set(i,a)),null!=o?l=!0:(l=!1,o=vn.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((v,w)=>{const R=Au(w,Qn());R&&(o=o.updateImmediateChild(v,R))}));const c=U8(a,e);if(!c&&!e._queryParams.loadsAllData()){const m=hC(e);(0,x.vA)(!t.queryToTagMap.has(m),"View does not exist, but we have a tag");const v=function kve(){return Cve++}();t.queryToTagMap.set(m,v),t.tagToQueryMap.set(v,m)}let f=function Ive(t,e,n,r,i,o){const s=V8(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function gve(t,e){t.eventRegistrations_.push(e)}(s,n),function mve(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Dr,(o,s)=>{r.push(pg(o,s))}),n.isFullyInitialized()&&r.push(m8(n.getNode())),F8(t,r,n.getNode(),e)}(s,n)}(a,e,n,rC(t.pendingWriteTree_,i),o,l);if(!c&&!s&&!r){const m=$8(a,e);f=f.concat(function Nve(t,e,n){const r=e._path,i=Sy(t,e),o=W8(t,n),s=t.listenProvider_.startListening(Ry(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(r);if(i)(0,x.vA)(!Du(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,h,f)=>{if(!An(c)&&h&&Du(h))return[lC(h).query];{let m=[];return h&&(m=m.concat(B8(h).map(v=>v.query))),Wi(f,(v,w)=>{m=m.concat(w)}),m}});for(let c=0;c<l.length;++c){const h=l[c];t.listenProvider_.stopListening(Ry(h),Sy(t,h))}}return s}(t,e,m))}return f}function dC(t,e,n){const i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{const c=Au(a,Qo(s,e));if(c)return c});return T8(i,e,o,n,!0)}function vg(t,e){return H8(e,t.syncPointTree_,null,rC(t.pendingWriteTree_,Qn()))}function H8(t,e,n,r){if(An(t.path))return G8(t,e,n,r);{const i=e.get(Qn());null==n&&null!=i&&(n=Au(i,Qn()));let o=[];const s=Tn(t.path),a=t.operationForChild(s),l=e.children.get(s);if(l&&a){const c=n?n.getImmediateChild(s):null,h=D8(r,s);o=o.concat(H8(a,l,c,h))}return i&&(o=o.concat(kM(i,t,r,n))),o}}function G8(t,e,n,r){const i=e.get(Qn());null==n&&null!=i&&(n=Au(i,Qn()));let o=[];return e.children.inorderTraversal((s,a)=>{const l=n?n.getImmediateChild(s):null,c=D8(r,s),h=t.operationForChild(s);h&&(o=o.concat(G8(h,a,l,c)))}),i&&(o=o.concat(kM(i,t,r,n))),o}function W8(t,e){const n=e.query,r=Sy(t,n);return{hashFn:()=>(function hve(t){return t.viewCache_.serverCache.getNode()}(e)||vn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Sve(t,e,n){const r=FM(t,n);if(r){const i=LM(r),o=i.path,s=i.queryId,a=Qo(o,e);return VM(t,o,new by(bM(s),a))}return[]}(t,n._path,r):function Dve(t,e){return vg(t,new by({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);{const o=function Ame(t,e){let n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(i,n);return uC(t,n,null,o)}}}}function Sy(t,e){const n=hC(e);return t.queryToTagMap.get(n)}function hC(t){return t._path.toString()+"$"+t._queryIdentifier}function FM(t,e){return t.tagToQueryMap.get(e)}function LM(t){const e=t.indexOf("$");return(0,x.vA)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new or(t.substr(0,e))}}function VM(t,e,n){const r=t.syncPointTree_.get(e);return(0,x.vA)(r,"Missing sync point for query tag that we're tracking"),kM(r,n,rC(t.pendingWriteTree_,e),null)}function Ry(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(function bve(){return(0,x.vA)(cC,"Reference.ts has not been loaded"),cC}())(t._repo,t._path):t}class BM{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new BM(n)}node(){return this.node_}}class $M{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=jr(this.path_,e);return new $M(this.syncTree_,n)}node(){return dC(this.syncTree_,this.path_)}}const Ove=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},q8=function(t,e,n){return t&&"object"==typeof t?((0,x.vA)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Fve(t[".sv"],e,n):"object"==typeof t[".sv"]?Lve(t[".sv"],e):void(0,x.vA)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Fve=function(t,e,n){if("timestamp"===t)return n.timestamp;(0,x.vA)(!1,"Unexpected server value: "+t)},Lve=function(t,e,n){t.hasOwnProperty("increment")||(0,x.vA)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;"number"!=typeof r&&(0,x.vA)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,x.vA)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!=typeof s?r:s+r},K8=function(t,e,n,r){return jM(e,new $M(n,t),r)},UM=function(t,e,n){return jM(t,new BM(e),n)};function jM(t,e,n){const r=t.getPriority().val(),i=q8(r,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const s=t,a=q8(s.getValue(),e,n);return a!==s.getValue()||i!==s.getPriority().val()?new hg(a,Kr(i)):t}{const s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new hg(i))),s.forEachChild(Dr,(a,l)=>{const c=jM(l,e.getImmediateChild(a),n);c!==l&&(o=o.updateImmediateChild(a,c))}),o}}class zM{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function fC(t,e){let n=e instanceof or?e:new or(e),r=t,i=Tn(n);for(;null!==i;){const o=(0,x.yw)(r.node.children,i)||{children:{},childCount:0};r=new zM(i,r,o),n=yr(n),i=Tn(n)}return r}function sh(t){return t.node.value}function HM(t,e){t.node.value=e,GM(t)}function Q8(t){return t.node.childCount>0}function pC(t,e){Wi(t.node.children,(n,r)=>{e(new zM(n,t,r))})}function Y8(t,e,n,r){n&&!r&&e(t),pC(t,i=>{Y8(i,e,!0,r)}),n&&r&&e(t)}function xy(t){return new or(null===t.parent?t.name:xy(t.parent)+"/"+t.name)}function GM(t){null!==t.parent&&function $ve(t,e,n){const r=function Vve(t){return void 0===sh(t)&&!Q8(t)}(n),i=(0,x.gR)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,GM(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,GM(t))}(t.parent,t.name,t)}const Uve=/[\[\].#$\/\u0000-\u001F\u007F]/,jve=/[\[\].#$\u0000-\u001F\u007F]/,WM=10485760,gC=function(t){return"string"==typeof t&&0!==t.length&&!Uve.test(t)},X8=function(t){return"string"==typeof t&&0!==t.length&&!jve.test(t)},Py=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!jb(t)||t&&"object"==typeof t&&(0,x.gR)(t,".sv")},Tl=function(t,e,n,r){r&&void 0===e||My((0,x.dI)(t,"value"),e,n)},My=function(t,e,n){const r=n instanceof or?new o_e(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+th(r));if("function"==typeof e)throw new Error(t+"contains a function "+th(r)+" with contents = "+e.toString());if(jb(e))throw new Error(t+"contains "+e.toString()+" "+th(r));if("string"==typeof e&&e.length>WM/3&&(0,x.OE)(e)>WM)throw new Error(t+"contains a string greater than "+WM+" utf8 bytes "+th(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(Wi(e,(s,a)=>{if(".value"===s)i=!0;else if(".priority"!==s&&".sv"!==s&&(o=!0,!gC(s)))throw new Error(t+" contains an invalid key ("+s+") "+th(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function s_e(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=(0,x.OE)(e),a8(t)})(r,s),My(t,a,r),function a_e(t){const e=t.parts_.pop();t.byteLength_-=(0,x.OE)(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),i&&o)throw new Error(t+' contains ".value" child '+th(r)+" in addition to actual children.")}},J8=function(t,e,n,r){if(r&&void 0===e)return;const i=(0,x.dI)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];Wi(e,(s,a)=>{const l=new or(s);if(My(i,a,jr(n,l)),".priority"===lM(l)&&!Py(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(l)}),function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const o=my(r);for(let s=0;s<o.length;s++)if((".priority"!==o[s]||s!==o.length-1)&&!gC(o[s]))throw new Error(t+"contains an invalid key ("+o[s]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(i_e);let i=null;for(n=0;n<e.length;n++){if(r=e[n],null!==i&&aa(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},qM=function(t,e,n){if(!n||void 0!==e){if(jb(e))throw new Error((0,x.dI)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Py(e))throw new Error((0,x.dI)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ky=function(t,e,n,r){if(!(r&&void 0===n||gC(n)))throw new Error((0,x.dI)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ny=function(t,e,n,r){if(!(r&&void 0===n||X8(n)))throw new Error((0,x.dI)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Gve=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ny(t,e,n,r)},la=function(t,e){if(".info"===Tn(e))throw new Error(t+" failed = Can't modify data under /.info/")},Z8=function(t,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!gC(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),X8(t)}(n))throw new Error((0,x.dI)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Wve{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function mC(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==n&&!cM(o,n.path)&&(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function e9(t,e,n){mC(t,n),t9(t,r=>cM(r,e))}function Ns(t,e,n){mC(t,n),t9(t,r=>aa(r,e)||aa(e,r))}function t9(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];i&&(e(i.path)?(qve(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function qve(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const r=n.getEventRunner();Zd&&Gi("event: "+n.toString()),ug(r)}}}const n9="repo_interrupt",Kve=25;class Qve{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Wve,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Zb(),this.transactionQueueTree_=new zM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function r9(t){const n=t.infoData_.getNode(new or(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function Oy(t){return Ove({timestamp:r9(t)})}function i9(t,e,n,r,i){t.dataUpdateCount++;const o=new or(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){const l=(0,x.kH)(n,c=>Kr(c));s=function Rve(t,e,n,r){const i=FM(t,r);if(i){const o=LM(i),s=o.path,a=o.queryId,l=Qo(s,e),c=Sr.fromObject(n);return VM(t,s,new mg(bM(a),l,c))}return[]}(t.serverSyncTree_,o,l,i)}else{const l=Kr(n);s=z8(t.serverSyncTree_,o,l,i)}else if(r){const l=(0,x.kH)(n,c=>Kr(c));s=function Ave(t,e,n){const r=Sr.fromObject(n);return vg(t,new mg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,o,l)}else{const l=Kr(n);s=Dy(t.serverSyncTree_,o,l)}let a=o;s.length>0&&(a=Ig(t,o)),Ns(t.eventQueue_,a,s)}function o9(t,e){KM(t,"connected",e),!1===e&&function eye(t){yg(t,"onDisconnectEvents");const e=Oy(t),n=Zb();IM(t.onDisconnect_,Qn(),(i,o)=>{const s=K8(i,o,t.serverSyncTree_,e);gg(n,i,s)});let r=[];IM(n,Qn(),(i,o)=>{r=r.concat(Dy(t.serverSyncTree_,i,o));const s=JM(t,i);Ig(t,s)}),t.onDisconnect_=Zb(),Ns(t.eventQueue_,Qn(),r)}(t)}function KM(t,e,n){const r=new or("/.info/"+e),i=Kr(n);t.infoData_.updateSnapshot(r,i);const o=Dy(t.infoSyncTree_,r,i);Ns(t.eventQueue_,r,o)}function _C(t){return t.nextWriteId_++}function QM(t,e,n,r,i){yg(t,"set",{path:e.toString(),value:n,priority:r});const o=Oy(t),s=Kr(n,r),a=dC(t.serverSyncTree_,e),l=UM(s,a,o),c=_C(t),h=NM(t.serverSyncTree_,e,l,c,!0);mC(t.eventQueue_,h),t.server_.put(e.toString(),s.val(!0),(m,v)=>{const w="ok"===m;w||Ao("set at "+e+" failed: "+m);const R=Su(t.serverSyncTree_,c,!w);Ns(t.eventQueue_,e,R),Ru(0,i,m,v)});const f=JM(t,e);Ig(t,f),Ns(t.eventQueue_,f,[])}function tye(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&yM(t.onDisconnect_,e),Ru(0,n,r,i)})}function s9(t,e,n,r){const i=Kr(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(o,s)=>{"ok"===o&&gg(t.onDisconnect_,e,i),Ru(0,r,o,s)})}function YM(t,e,n){let r;r=".info"===Tn(e._path)?uC(t.infoSyncTree_,e,n):uC(t.serverSyncTree_,e,n),e9(t.eventQueue_,e._path,r)}function a9(t){t.persistentConnection_&&t.persistentConnection_.interrupt(n9)}function yg(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Gi(n,...e)}function Ru(t,e,n,r){e&&ug(()=>{if("ok"===n)e(null);else{const i=(n||"error").toUpperCase();let o=i;r&&(o+=": "+r);const s=new Error(o);s.code=i,e(s)}})}function XM(t,e,n){return dC(t.serverSyncTree_,e,n)||vn.EMPTY_NODE}function vC(t,e=t.transactionQueueTree_){if(e||yC(t,e),sh(e)){const n=c9(t,e);(0,x.vA)(n.length>0,"Sending zero length transaction queue"),n.every(i=>0===i.status)&&function aye(t,e,n){const r=n.map(c=>c.currentWriteId),i=XM(t,e,r);let o=i;const s=i.hash();for(let c=0;c<n.length;c++){const h=n[c];(0,x.vA)(0===h.status,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const f=Qo(e,h.path);o=o.updateChild(f,h.currentOutputSnapshotRaw)}const a=o.val(!0),l=e;t.server_.put(l.toString(),a,c=>{yg(t,"transaction put response",{path:l.toString(),status:c});let h=[];if("ok"===c){const f=[];for(let m=0;m<n.length;m++)n[m].status=2,h=h.concat(Su(t.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&f.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();yC(t,fC(t.transactionQueueTree_,e)),vC(t,t.transactionQueueTree_),Ns(t.eventQueue_,e,h);for(let m=0;m<f.length;m++)ug(f[m])}else{if("datastale"===c)for(let f=0;f<n.length;f++)n[f].status=3===n[f].status?4:0;else{Ao("transaction at "+l.toString()+" failed: "+c);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=c}Ig(t,e)}},s)}(t,xy(e),n)}else Q8(e)&&pC(e,n=>{vC(t,n)})}function Ig(t,e){const n=l9(t,e),r=xy(n);return function lye(t,e,n){if(0===e.length)return;const r=[];let i=[];const s=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Qo(n,l.path);let f,h=!1;if((0,x.vA)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)h=!0,f=l.abortReason,i=i.concat(Su(t.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=Kve)h=!0,f="maxretry",i=i.concat(Su(t.serverSyncTree_,l.currentWriteId,!0));else{const m=XM(t,l.path,s);l.currentInputSnapshot=m;const v=e[a].update(m.val());if(void 0!==v){My("transaction failed: Data returned ",v,l.path);let w=Kr(v);"object"==typeof v&&null!=v&&(0,x.gR)(v,".priority")||(w=w.updatePriority(m.getPriority()));const N=l.currentWriteId,z=Oy(t),Q=UM(w,m,z);l.currentOutputSnapshotRaw=w,l.currentOutputSnapshotResolved=Q,l.currentWriteId=_C(t),s.splice(s.indexOf(N),1),i=i.concat(NM(t.serverSyncTree_,l.path,Q,l.currentWriteId,l.applyLocally)),i=i.concat(Su(t.serverSyncTree_,N,!0))}else h=!0,f="nodata",i=i.concat(Su(t.serverSyncTree_,l.currentWriteId,!0))}Ns(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===f?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(f),!1,null)))}yC(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)ug(r[a]);vC(t,t.transactionQueueTree_)}(t,c9(t,n),r),r}function l9(t,e){let n,r=t.transactionQueueTree_;for(n=Tn(e);null!==n&&void 0===sh(r);)r=fC(r,n),n=Tn(e=yr(e));return r}function c9(t,e){const n=[];return u9(t,e,n),n.sort((r,i)=>r.order-i.order),n}function u9(t,e,n){const r=sh(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);pC(e,i=>{u9(t,i,n)})}function yC(t,e){const n=sh(e);if(n){let r=0;for(let i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,HM(e,n.length>0?n:void 0)}pC(e,r=>{yC(t,r)})}function JM(t,e){const n=xy(l9(t,e)),r=fC(t.transactionQueueTree_,e);return function Bve(t,e,n){let r=n?t:t.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{ZM(t,i)}),ZM(t,r),Y8(r,i=>{ZM(t,i)}),n}function ZM(t,e){const n=sh(e);if(n){const r=[];let i=[],o=-1;for(let s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?((0,x.vA)(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):((0,x.vA)(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Su(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?HM(e,void 0):n.length=o+1,Ns(t.eventQueue_,xy(e),i);for(let s=0;s<r.length;s++)ug(r[s])}}const ek=function(t,e){const n=dye(t),r=n.namespace;return"firebase.com"===n.domain&&wl(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==n.domain&&wl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ao("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new nM(n.host,n.secure,r,"ws"===n.scheme||"wss"===n.scheme,e,"",r!==n.subdomain),path:new or(n.pathString)}},dye=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",l=443;if("string"==typeof t){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let h=t.indexOf("/");-1===h&&(h=t.length);let f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=function cye(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(t.substring(h,f)));const m=function uye(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ao(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,f)));c=e.indexOf(":"),c>=0?(s="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const v=e.slice(0,c);if("localhost"===v.toLowerCase())n="localhost";else if(v.split(".").length<=2)n=v;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),o=r}"ns"in m&&(o=m.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},d9="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",hye=function(){let t=0;const e=[];return function(n){const r=n===t;let i;t=n;const o=new Array(8);for(i=7;i>=0;i--)o[i]=d9.charAt(n%64),n=Math.floor(n/64);(0,x.vA)(0===n,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)s+=d9.charAt(e[i]);return(0,x.vA)(20===s.length,"nextPushId: Length should be 20."),s}}();class h9{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,x.As)(this.snapshot.exportVal())}}class f9{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class tk{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return(0,x.vA)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class p9{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new x.cY;return tye(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){la("OnDisconnect.remove",this._path);const e=new x.cY;return s9(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){la("OnDisconnect.set",this._path),Tl("OnDisconnect.set",e,this._path,!1);const n=new x.cY;return s9(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){la("OnDisconnect.setWithPriority",this._path),Tl("OnDisconnect.setWithPriority",e,this._path,!1),qM("OnDisconnect.setWithPriority",n,!1);const r=new x.cY;return function nye(t,e,n,r,i){const o=Kr(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(s,a)=>{"ok"===s&&gg(t.onDisconnect_,e,o),Ru(0,i,s,a)})}(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){la("OnDisconnect.update",this._path),J8("OnDisconnect.update",e,this._path,!1);const n=new x.cY;return function rye(t,e,n,r){if((0,x.Im)(n))return Gi("onDisconnect().update() called with empty data.  Don't do anything."),void Ru(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(i,o)=>{"ok"===i&&Wi(n,(s,a)=>{const l=Kr(a);gg(t.onDisconnect_,jr(e,s),l)}),Ru(0,r,i,o)})}(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}class hs{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return An(this._path)?null:lM(this._path)}get ref(){return new ca(this._repo,this._path)}get _queryIdentifier(){const e=v8(this._queryParams),n=eM(e);return"{}"===n?"default":n}get _queryObject(){return v8(this._queryParams)}isEqual(e){if(!((e=(0,x.Ku)(e))instanceof hs))return!1;const n=this._repo===e._repo,r=cM(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function r_e(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}function IC(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function xu(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===bl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Eu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==cc)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Dr){if(null!=e&&!Py(e)||null!=n&&!Py(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,x.vA)(t.getIndex()instanceof pM||t.getIndex()===gM,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function EC(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ca extends hs{constructor(e,n){super(e,n,new Yb,!1)}get parent(){const e=s8(this._path);return null===e?null:new ca(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class ah{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new or(e),r=lh(this.ref,e);return new ah(this._node.getChild(n),r,Dr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new ah(i,lh(this.ref,r),Dr)))}hasChild(e){const n=new or(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function g9(t,e){return(t=(0,x.Ku)(t))._checkNotDeleted("ref"),void 0!==e?lh(t._root,e):t._root}function m9(t,e){(t=(0,x.Ku)(t))._checkNotDeleted("refFromURL");const n=ek(e,t._repo.repoInfo_.nodeAdmin);Z8("refFromURL",n);const r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&wl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),g9(t,n.path.toString())}function lh(t,e){return null===Tn((t=(0,x.Ku)(t))._path)?Gve("child","path",e,!1):Ny("child","path",e,!1),new ca(t._repo,jr(t._path,e))}function nk(t,e){t=(0,x.Ku)(t),la("set",t._path),Tl("set",e,t._path,!1);const n=new x.cY;return QM(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function _ye(t,e){J8("update",e,t._path,!1);const n=new x.cY;return function Zve(t,e,n,r){yg(t,"update",{path:e.toString(),value:n});let i=!0;const o=Oy(t),s={};if(Wi(n,(a,l)=>{i=!1,s[a]=K8(jr(e,a),Kr(l),t.serverSyncTree_,o)}),i)Gi("update() called with empty data.  Don't do anything."),Ru(0,r,"ok",void 0);else{const a=_C(t),l=function Tve(t,e,n,r){!function j_e(t,e,n,r){(0,x.vA)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=TM(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);const i=Sr.fromObject(n);return vg(t,new mg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,s,a);mC(t.eventQueue_,l),t.server_.merge(e.toString(),n,(c,h)=>{const f="ok"===c;f||Ao("update at "+e+" failed: "+c);const m=Su(t.serverSyncTree_,a,!f),v=m.length>0?Ig(t,e):e;Ns(t.eventQueue_,v,m),Ru(0,r,c,h)}),Wi(n,c=>{const h=JM(t,jr(e,c));Ig(t,h)}),Ns(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function vye(t){t=(0,x.Ku)(t);const e=new tk(()=>{}),n=new Fy(e);return function Jve(t,e,n){const r=function xve(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(c,h)=>{const f=Qo(c,n);r=r||Au(h,f)});let i=t.syncPointTree_.get(n);i?r=r||Au(i,Qn()):(i=new L8,t.syncPointTree_=t.syncPointTree_.set(n,i));const o=null!=r,s=o?new Cu(r,!0,!1):null;return function fve(t){return nC(t.viewCache_)}(V8(i,e,rC(t.pendingWriteTree_,e._path),o?s.getNode():vn.EMPTY_NODE,o))}(t.serverSyncTree_,e);return null!=r?Promise.resolve(r):t.server_.get(e).then(i=>{const o=Kr(i).withIndex(e._queryParams.getIndex());let s;if(OM(t.serverSyncTree_,e,n,!0),e._queryParams.loadsAllData())s=Dy(t.serverSyncTree_,e._path,o);else{const a=Sy(t.serverSyncTree_,e);s=z8(t.serverSyncTree_,e._path,o,a)}return Ns(t.eventQueue_,e._path,s),uC(t.serverSyncTree_,e,n,null,!0),o},i=>(yg(t,"get for query "+(0,x.As)(e)+" failed: "+i),Promise.reject(new Error(i))))}(t._repo,t,n).then(r=>new ah(r,new ca(t._repo,t._path),t._queryParams.getIndex()))}class Fy{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,n){const r=n._queryParams.getIndex();return new h9("value",this,new ah(e.snapshotNode,new ca(n._repo,n._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new f9(this,e,n):null}matches(e){return e instanceof Fy&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class wC{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n="children_added"===e?"child_added":e;return n="children_removed"===n?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new f9(this,e,n):null}createEvent(e,n){(0,x.vA)(null!=e.childName,"Child events should have a childName.");const r=lh(new ca(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new h9(e.type,this,new ah(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof wC&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Ly(t,e,n,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const l=n,c=(h,f)=>{YM(t._repo,t,a),l(h,f)};c.userCallback=n.userCallback,c.context=n.context,n=c}const s=new tk(n,o||void 0),a="value"===e?new Fy(s):new wC(e,s);return function iye(t,e,n){let r;r=".info"===Tn(e._path)?OM(t.infoSyncTree_,e,n):OM(t.serverSyncTree_,e,n),e9(t.eventQueue_,e._path,r)}(t._repo,t,a),()=>YM(t._repo,t,a)}function rk(t,e,n,r){return Ly(t,"value",e,n,r)}function _9(t,e,n,r){return Ly(t,"child_added",e,n,r)}function v9(t,e,n,r){return Ly(t,"child_changed",e,n,r)}function y9(t,e,n,r){return Ly(t,"child_moved",e,n,r)}function I9(t,e,n,r){return Ly(t,"child_removed",e,n,r)}function E9(t,e,n){let r=null;const i=n?new tk(n):null;"value"===e?r=new Fy(i):e&&(r=new wC(e,i)),YM(t._repo,t,r)}class Ba{}class w9 extends Ba{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){Tl("endAt",this._value,e._path,!0);const n=vM(e._queryParams,this._value,this._key);if(EC(n),xu(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new hs(e._repo,e._path,n,e._orderByCalled)}}class Iye extends Ba{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){Tl("endBefore",this._value,e._path,!1);const n=function R_e(t,e,n){let r;return r=vM(t,e,t.index_===bl||n?n:Eu),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(EC(n),xu(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new hs(e._repo,e._path,n,e._orderByCalled)}}class b9 extends Ba{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){Tl("startAt",this._value,e._path,!0);const n=_M(e._queryParams,this._value,this._key);if(EC(n),xu(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new hs(e._repo,e._path,n,e._orderByCalled)}}class bye extends Ba{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){Tl("startAfter",this._value,e._path,!1);const n=function S_e(t,e,n){let r;return r=_M(t,e,t.index_===bl||n?n:cc),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(EC(n),xu(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new hs(e._repo,e._path,n,e._orderByCalled)}}class Tye extends Ba{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new hs(e._repo,e._path,function A_e(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class Dye extends Ba{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new hs(e._repo,e._path,function D_e(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class Rye extends Ba{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){IC(e,"orderByChild");const n=new or(this._path);if(An(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new pM(n),i=Xb(e._queryParams,r);return xu(i),new hs(e._repo,e._path,i,!0)}}class Pye extends Ba{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){IC(e,"orderByKey");const n=Xb(e._queryParams,bl);return xu(n),new hs(e._repo,e._path,n,!0)}}class kye extends Ba{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){IC(e,"orderByPriority");const n=Xb(e._queryParams,Dr);return xu(n),new hs(e._repo,e._path,n,!0)}}class Oye extends Ba{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){IC(e,"orderByValue");const n=Xb(e._queryParams,gM);return xu(n),new hs(e._repo,e._path,n,!0)}}class Lye extends Ba{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(Tl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new w9(this._value,this._key)._apply(new b9(this._value,this._key)._apply(e))}}function $a(t,...e){let n=(0,x.Ku)(t);for(const r of e)n=r._apply(n);return n}(function _ve(t){(0,x.vA)(!aC,"__referenceConstructor has already been defined"),aC=t})(ca),function wve(t){(0,x.vA)(!cC,"__referenceConstructor has already been defined"),cC=t}(ca);const ik={};function ok(t,e,n,r,i){let o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||wl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Gi("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l,c,s=ek(o,i),a=s.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,o=`http://${c}?ns=${a.namespace}`,s=ek(o,i),a=s.repoInfo):l=!s.repoInfo.secure;const h=i&&l?new gy(gy.OWNER):new Mme(t.name,t.options,e);Z8("Invalid Firebase Database URL",s),An(s.path)||wl("Database URL must point to the root of a Firebase Database (not including a child path).");const f=function jye(t,e,n,r){let i=ik[e.name];i||(i={},ik[e.name]=i);let o=i[t.toURLString()];return o&&wl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Qve(t,false,n,r),i[t.toURLString()]=o,o}(a,t,h,new Pme(t.name,n));return new Hye(f,t)}class Hye{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Yve(t,e,n){if(t.stats_=oM(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Jb(t.repoInfo_,(r,i,o,s)=>{i9(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>o9(t,!0),0);else{if(typeof n<"u"&&null!==n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,x.As)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new nh(t.repoInfo_,e,(r,i,o,s)=>{i9(t,r,i,o,s)},r=>{o9(t,r)},r=>{!function Xve(t,e){Wi(e,(n,r)=>{KM(t,n,r)})}(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=function Ome(t,e){const n=t.toString();return iM[n]||(iM[n]=e()),iM[n]}(t.repoInfo_,()=>new O_e(t.stats_,t.server_)),t.infoData_=new x_e,t.infoSyncTree_=new j8({startListening:(r,i,o,s)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Dy(t.infoSyncTree_,r._path,l),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),KM(t,"connected",!1),t.serverSyncTree_=new j8({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(a,l)=>{const c=s(a,l);Ns(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ca(this._repo,Qn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Uye(t,e){const n=ik[e];(!n||n[t.key]!==t)&&wl(`Database ${e}(${t.repoInfo_}) has already been deleted.`),a9(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&wl("Cannot call "+e+" on a deleted database.")}}function T9(){KH.IS_TRANSPORT_INITIALIZED&&Ao("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Gye(){T9(),wu.forceDisallow()}function Wye(){T9(),dg.forceDisallow(),wu.forceAllow()}function Qye(t,e){SH(t,e)}const Xye={".sv":"timestamp"};class e0e{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}nh.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},nh.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},function Yye(t){XP(yo.SDK_VERSION),(0,yo._registerComponent)(new ka.uA("database",(e,{instanceIdentifier:n})=>ok(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),(0,yo.registerVersion)(wH,"1.0.3",t),(0,yo.registerVersion)(wH,"1.0.3","esm2017")}();const i0e=new Ss.Vy("@firebase/database-compat"),D9=function(t){i0e.warn("FIREBASE WARNING: "+t)};class a0e{constructor(e){this._delegate=e}cancel(e){(0,x.od)("OnDisconnect.cancel",0,1,arguments.length),(0,x.oD)("OnDisconnect.cancel","onComplete",e,!0);const n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){(0,x.od)("OnDisconnect.remove",0,1,arguments.length),(0,x.oD)("OnDisconnect.remove","onComplete",e,!0);const n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){(0,x.od)("OnDisconnect.set",1,2,arguments.length),(0,x.oD)("OnDisconnect.set","onComplete",n,!0);const r=this._delegate.set(e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){(0,x.od)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,x.oD)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,n);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,n){if((0,x.od)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,D9("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,x.oD)("OnDisconnect.update","onComplete",n,!0);const r=this._delegate.update(e);return n&&r.then(()=>n(null),i=>n(i)),r}}class l0e{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return(0,x.od)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Pu{constructor(e,n){this._database=e,this._delegate=n}val(){return(0,x.od)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,x.od)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,x.od)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,x.od)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,x.od)("DataSnapshot.child",0,1,arguments.length),e=String(e),Ny("DataSnapshot.child","path",e,!1),new Pu(this._database,this._delegate.child(e))}hasChild(e){return(0,x.od)("DataSnapshot.hasChild",1,1,arguments.length),Ny("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,x.od)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,x.od)("DataSnapshot.forEach",1,1,arguments.length),(0,x.oD)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new Pu(this._database,n)))}hasChildren(){return(0,x.od)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,x.od)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,x.od)("DataSnapshot.ref",0,0,arguments.length),new Os(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ao{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,i){var o;(0,x.od)("Query.on",2,4,arguments.length),(0,x.oD)("Query.on","callback",n,!1);const s=ao.getCancelAndContextArgs_("Query.on",r,i),a=(c,h)=>{n.call(s.context,new Pu(this.database,c),h)};a.userCallback=n,a.context=s.context;const l=null===(o=s.cancel)||void 0===o?void 0:o.bind(s.context);switch(e){case"value":return rk(this._delegate,a,l),n;case"child_added":return _9(this._delegate,a,l),n;case"child_removed":return I9(this._delegate,a,l),n;case"child_changed":return v9(this._delegate,a,l),n;case"child_moved":return y9(this._delegate,a,l),n;default:throw new Error((0,x.dI)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if((0,x.od)("Query.off",0,3,arguments.length),function(t,e,n){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,x.dI)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,x.oD)("Query.off","callback",n,!0),(0,x.HN)("Query.off","context",r,!0),n){const i=()=>{};i.userCallback=n,i.context=r,E9(this._delegate,e,i)}else E9(this._delegate,e)}get(){return vye(this._delegate).then(e=>new Pu(this.database,e))}once(e,n,r,i){(0,x.od)("Query.once",1,4,arguments.length),(0,x.oD)("Query.once","callback",n,!0);const o=ao.getCancelAndContextArgs_("Query.once",r,i),s=new x.cY,a=(c,h)=>{const f=new Pu(this.database,c);n&&n.call(o.context,f,h),s.resolve(f)};a.userCallback=n,a.context=o.context;const l=c=>{o.cancel&&o.cancel.call(o.context,c),s.reject(c)};switch(e){case"value":rk(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":_9(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":I9(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":v9(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":y9(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,x.dI)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return(0,x.od)("Query.limitToFirst",1,1,arguments.length),new ao(this.database,$a(this._delegate,function Aye(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Tye(t)}(e)))}limitToLast(e){return(0,x.od)("Query.limitToLast",1,1,arguments.length),new ao(this.database,$a(this._delegate,function Sye(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Dye(t)}(e)))}orderByChild(e){return(0,x.od)("Query.orderByChild",1,1,arguments.length),new ao(this.database,$a(this._delegate,function xye(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ny("orderByChild","path",t,!1),new Rye(t)}(e)))}orderByKey(){return(0,x.od)("Query.orderByKey",0,0,arguments.length),new ao(this.database,$a(this._delegate,function Mye(){return new Pye}()))}orderByPriority(){return(0,x.od)("Query.orderByPriority",0,0,arguments.length),new ao(this.database,$a(this._delegate,function Nye(){return new kye}()))}orderByValue(){return(0,x.od)("Query.orderByValue",0,0,arguments.length),new ao(this.database,$a(this._delegate,function Fye(){return new Oye}()))}startAt(e=null,n){return(0,x.od)("Query.startAt",0,2,arguments.length),new ao(this.database,$a(this._delegate,function wye(t=null,e){return ky("startAt","key",e,!0),new b9(t,e)}(e,n)))}startAfter(e=null,n){return(0,x.od)("Query.startAfter",0,2,arguments.length),new ao(this.database,$a(this._delegate,function Cye(t,e){return ky("startAfter","key",e,!0),new bye(t,e)}(e,n)))}endAt(e=null,n){return(0,x.od)("Query.endAt",0,2,arguments.length),new ao(this.database,$a(this._delegate,function yye(t,e){return ky("endAt","key",e,!0),new w9(t,e)}(e,n)))}endBefore(e=null,n){return(0,x.od)("Query.endBefore",0,2,arguments.length),new ao(this.database,$a(this._delegate,function Eye(t,e){return ky("endBefore","key",e,!0),new Iye(t,e)}(e,n)))}equalTo(e,n){return(0,x.od)("Query.equalTo",1,2,arguments.length),new ao(this.database,$a(this._delegate,function Vye(t,e){return ky("equalTo","key",e,!0),new Lye(t,e)}(e,n)))}toString(){return(0,x.od)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,x.od)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,x.od)("Query.isEqual",1,1,arguments.length),!(e instanceof ao))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){const i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,(0,x.oD)(e,"cancel",i.cancel,!0),i.context=r,(0,x.HN)(e,"context",i.context,!0);else if(n)if("object"==typeof n&&null!==n)i.context=n;else{if("function"!=typeof n)throw new Error((0,x.dI)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=n}return i}get ref(){return new Os(this.database,new ca(this._delegate._repo,this._delegate._path))}}class Os extends ao{constructor(e,n){super(e,new hs(n._repo,n._path,new Yb,!1)),this.database=e,this._delegate=n}getKey(){return(0,x.od)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,x.od)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Os(this.database,lh(this._delegate,e))}getParent(){(0,x.od)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Os(this.database,e):null}getRoot(){return(0,x.od)("Reference.root",0,0,arguments.length),new Os(this.database,this._delegate.root)}set(e,n){(0,x.od)("Reference.set",1,2,arguments.length),(0,x.oD)("Reference.set","onComplete",n,!0);const r=nk(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}update(e,n){if((0,x.od)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,D9("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}la("Reference.update",this._delegate._path),(0,x.oD)("Reference.update","onComplete",n,!0);const r=_ye(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){(0,x.od)("Reference.setWithPriority",2,3,arguments.length),(0,x.oD)("Reference.setWithPriority","onComplete",r,!0);const i=function mye(t,e,n){if(la("setWithPriority",t._path),Tl("setWithPriority",e,t._path,!1),qM("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";const r=new x.cY;return QM(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,n);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,x.od)("Reference.remove",0,1,arguments.length),(0,x.oD)("Reference.remove","onComplete",e,!0);const n=function pye(t){return la("remove",t._path),nk(t,null)}(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){(0,x.od)("Reference.transaction",1,3,arguments.length),(0,x.oD)("Reference.transaction","transactionUpdate",e,!1),(0,x.oD)("Reference.transaction","onComplete",n,!0),function(t,e,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error((0,x.dI)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function t0e(t,e,n){var r;if(t=(0,x.Ku)(t),la("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";const i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,o=new x.cY,a=rk(t,()=>{});return function sye(t,e,n,r,i,o){yg(t,"transaction on "+e);const s={path:e,update:n,onComplete:r,status:null,order:TH(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=XM(t,e,void 0);s.currentInputSnapshot=a;const l=s.update(a.val());if(void 0===l)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{My("transaction failed: Data returned ",l,s.path),s.status=0;const c=fC(t.transactionQueueTree_,e),h=sh(c)||[];let f;h.push(s),HM(c,h),"object"==typeof l&&null!==l&&(0,x.gR)(l,".priority")?(f=(0,x.yw)(l,".priority"),(0,x.vA)(Py(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(dC(t.serverSyncTree_,e)||vn.EMPTY_NODE).getPriority().val();const m=Oy(t),v=Kr(l,f),w=UM(v,a,m);s.currentOutputSnapshotRaw=v,s.currentOutputSnapshotResolved=w,s.currentWriteId=_C(t);const R=NM(t.serverSyncTree_,e,w,s.currentWriteId,s.applyLocally);Ns(t.eventQueue_,e,R),vC(t,t.transactionQueueTree_)}}(t._repo,t._path,e,(l,c,h)=>{let f=null;l?o.reject(l):(f=new ah(h,new ca(t._repo,t._path),Dr),o.resolve(new e0e(c,f)))},a,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new l0e(o.committed,new Pu(this.database,o.snapshot)));return n&&i.then(o=>n(null,o.committed,o.snapshot),o=>n(o,!1,null)),i}setPriority(e,n){(0,x.od)("Reference.setPriority",1,2,arguments.length),(0,x.oD)("Reference.setPriority","onComplete",n,!0);const r=function gye(t,e){t=(0,x.Ku)(t),la("setPriority",t._path),qM("setPriority",e,!1);const n=new x.cY;return QM(t._repo,jr(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}push(e,n){(0,x.od)("Reference.push",0,2,arguments.length),(0,x.oD)("Reference.push","onComplete",n,!0);const r=function fye(t,e){t=(0,x.Ku)(t),la("push",t._path),Tl("push",e,t._path,!0);const n=r9(t._repo),r=hye(n),i=lh(t,r),o=lh(t,r);let s;return s=null!=e?nk(o,e).then(()=>o):Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}(this._delegate,e),i=r.then(s=>new Os(this.database,s));n&&i.then(()=>n(null),s=>n(s));const o=new Os(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return la("Reference.onDisconnect",this._delegate._path),new a0e(new p9(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Vy{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Gye,forceLongPolling:Wye}}useEmulator(e,n,r={}){!function A9(t,e,n,r={}){(t=(0,x.Ku)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&wl("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&wl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new gy(gy.OWNER);else if(r.mockUserToken){const s="string"==typeof r.mockUserToken?r.mockUserToken:(0,x.Fy)(r.mockUserToken,t.app.options.projectId);o=new gy(s)}!function $ye(t,e,n,r){t.repoInfo_=new nM(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}(i,e,n,o)}(this._delegate,e,n,r)}ref(e){if((0,x.od)("database.ref",0,1,arguments.length),e instanceof Os){const n=m9(this._delegate,e.toString());return new Os(this,n)}{const n=g9(this._delegate,e);return new Os(this,n)}}refFromURL(e){(0,x.od)("database.refFromURL",1,1,arguments.length);const r=m9(this._delegate,e);return new Os(this,r)}goOffline(){return(0,x.od)("database.goOffline",0,0,arguments.length),function qye(t){(t=(0,x.Ku)(t))._checkNotDeleted("goOffline"),a9(t._repo)}(this._delegate)}goOnline(){return(0,x.od)("database.goOnline",0,0,arguments.length),function Kye(t){(t=(0,x.Ku)(t))._checkNotDeleted("goOnline"),function oye(t){t.persistentConnection_&&t.persistentConnection_.resume(n9)}(t._repo)}(this._delegate)}}Vy.ServerValue={TIMESTAMP:function Jye(){return Xye}(),increment:t=>function Zye(t){return{".sv":{increment:t}}}(t)};var u0e=Object.freeze({__proto__:null,initStandalone:function c0e({app:t,url:e,version:n,customAuthImpl:r,customAppCheckImpl:i,namespace:o,nodeAdmin:s=!1}){XP(n);const a=new ka.h1("database-standalone"),l=new ka.Kq("auth-internal",a);let c;return l.setComponent(new ka.uA("auth-internal",()=>r,"PRIVATE")),i&&(c=new ka.Kq("app-check-internal",a),c.setComponent(new ka.uA("app-check-internal",()=>i,"PRIVATE"))),{instance:new Vy(ok(t,l,c,e,s),t),namespace:o}}});const d0e=Vy.ServerValue;!function h0e(t){t.INTERNAL.registerComponent(new ka.uA("database-compat",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new Vy(i,r)},"PUBLIC").setServiceProps({Reference:Os,Query:ao,Database:Vy,DataSnapshot:Pu,enableLogging:Qye,INTERNAL:u0e,ServerValue:d0e}).setMultipleInstances(!0)),t.registerVersion("@firebase/database-compat","1.0.3")}(Dn.A);let Al=(()=>{var t;class e{constructor(){}ngOnInit(){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=et({type:t,selectors:[["app-footer"]],decls:6,vars:0,consts:[["id","under_bar"],["routerLink","/home","name","albums",2,"font-size","1.8rem"],["routerLink","/spot","name","people",2,"font-size","1.8rem"],["routerLink","/add","name","add-circle",2,"font-size","1.8rem"],["routerLink","/car-pooling","name","car",2,"font-size","1.8rem"],["routerLink","/account","name","person-circle",2,"font-size","1.8rem"]],template:function(r,i){1&r&&(b(0,"div",0),me(1,"ion-icon",1)(2,"ion-icon",2)(3,"ion-icon",3)(4,"ion-icon",4)(5,"ion-icon",5),T())},dependencies:[Uo,Ma,$o]}),e})();function f0e(t,e){if(1&t){const n=Ji();b(0,"div",55)(1,"div",56)(2,"ion-icon",57),Ze("click",function(){const i=rr(n).$implicit;return ir(En().goToPostAccount(i))}),T(),me(3,"ion-icon",58),T(),b(4,"img",59),Ze("click",function(){const i=rr(n).$implicit;return ir(En().showDetails(i))}),T(),b(5,"div",60)(6,"div",61)(7,"ion-icon",62),Ze("click",function(){const i=rr(n).$implicit;return ir(En().showComments(i))}),T(),b(8,"ion-icon",63),Ze("click",function(){const i=rr(n).$implicit;return ir(En().showPartecipations(i))}),T(),me(9,"div",11)(10,"div",6)(11,"div",11),b(12,"span",64),Ze("click",function(){const i=rr(n).$implicit;return ir(En().confirmPartecipation(i.id,i,"yes"))}),P(13,"done"),T(),b(14,"ion-icon",65),Ze("click",function(){const i=rr(n).$implicit;return ir(En().confirmPartecipation(i.id,i,"no"))}),T()(),b(15,"h5",66),P(16),b(17,"strong"),P(18),T()(),b(19,"p",67),P(20),T()()()}if(2&t){const n=e.$implicit,r=En();We(4),Vf("src",n.imageUrl,rs),We(12),Wt(n.title),We(2),Wt(r.getPaidType(n)),We(2),Wt(n.description)}}function p0e(t,e){if(1&t){const n=Ji();b(0,"div",68)(1,"div",69)(2,"ion-icon",70),Ze("click",function(){const i=rr(n).$implicit;return ir(En().goToPostAccount(i))}),T(),b(3,"strong"),P(4),T()(),b(5,"p",71),P(6),T()()}if(2&t){const n=e.$implicit;We(4),Wt(n.creator_name),We(2),Wt(n.text)}}function g0e(t,e){if(1&t){const n=Ji();b(0,"div",68)(1,"div",69)(2,"ion-icon",70),Ze("click",function(){const i=rr(n).$implicit;return ir(En().goToPostAccount(i))}),T(),b(3,"strong"),P(4),T()()()}if(2&t){const n=e.$implicit;We(4),Wt(n.name)}}let m0e=(()=>{var t;class e{constructor(r,i,o,s){this.firestore=r,this.firebaseService=i,this.router=o,this.afAuth=s,this.comments=[],this.newComment="",this.partecipations=[],this.documents=new ue([]),this.nextPageAvailable=!0}ngOnInit(){this.getEvents()}showComments(r){document.getElementById("comments").style.display="flex",this.currentEvent=r,Dn.A.database().ref("comments/"+r.id+"/").once("value").then(o=>{this.comments.splice(0),o.forEach(s=>{const a=s.val();this.comments.push(a)})})}addComment(){var r=this;this.afAuth.authState.subscribe(function(){var i=(0,_.A)(function*(o){o?(Dn.A.database().ref("comments/"+r.currentEvent.id+"/"+o.uid).set({text:r.newComment,creator_id:o.uid,creator_name:r.firebaseService.public_user_data.name,timestamp:(new Date).getTime()}),r.comments.push({text:r.newComment}),r.newComment=""):alert("Per pubblicare un commento devi essere loggato")});return function(o){return i.apply(this,arguments)}}())}goToPostAccount(r){this.router.navigate(["/account"],{queryParams:{uid:r.creator_id}})}showDetails(r){this.currentShowingEventDetails=r,document.getElementById("post-details").style.display="flex",document.getElementById("post-img-details").src=r.imageUrl,document.getElementById("post-title-details").innerHTML="Titolo: "+r.title,document.getElementById("post-description-details").innerHTML="Descrizione: "+r.description,document.getElementById("post-price-details").innerHTML="Prezzo: "+r.price+"\u20ac",document.getElementById("post-type-details").innerHTML="public"==r.type?"Tipologia evento: PUBBLICO":"Tipologia evento: PRIVATO"}bookEvent(){var r=this.currentShowingEventDetails;if("external"==r.payment_method){var i=document.getElementById("post-button-details");let o=r.payment_link;/^https?:\/\//i.test(o)||(o="https://"+o),i.href=o,window.open(o,"_blank")}else"free"==r.paid_type&&Dn.A.firestore().collection("booked_events").doc().set({user_name:this.firebaseService.public_user_data.name,uid:this.firebaseService.public_user_data.uid,imageUrl:this.firebaseService.public_user_data.imageUrl,phone:this.firebaseService.private_user_data.phone,mail:this.firebaseService.private_user_data.mail,event_title:r.title,event_id:r.id,event_creator_id:r.creator_id,paid_type:r.paid_type,payment_method:r.payment_method,booking_time:Dn.A.firestore.FieldValue.serverTimestamp()}).then(()=>{alert("Evento prenotato con successo")}).catch(o=>{alert("Errore durante la prenotazione dell'evento: "+o.message)})}getPaidType(r){return"paid"==r.paid_type?" Ticket: "+r.price+"\u20ac":" GRATIS"}getEvents(){this.currentFetchingEventType="all",this.firestore.collection("events",r=>r.limit(2)).get().subscribe(r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));2===i.length?this.lastVisible=r.docs[r.docs.length-1]:this.nextPageAvailable=!1,this.documents.next(i)})}getMoreEvents(){if("all"==this.currentFetchingEventType){if(!this.lastVisible)return;this.firestore.collection("events",r=>r.limit(2).startAfter(this.lastVisible)).get().subscribe(r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));if(i.length>0){const s=[...this.documents.getValue(),...i];this.documents.next(s),2===i.length?this.lastVisible=r.docs[r.docs.length-1]:this.nextPageAvailable=!1}else this.nextPageAvailable=!1})}else{if(!this.lastVisible)return;this.firestore.collection("events",r=>r.limit(2).where("type","==",this.currentFetchingEventType).startAfter(this.lastVisible)).get().subscribe(r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));if(i.length>0){const s=[...this.documents.getValue(),...i];this.documents.next(s),2===i.length?this.lastVisible=r.docs[r.docs.length-1]:this.nextPageAvailable=!1}else this.nextPageAvailable=!1})}}getPrivateEvents(){this.documents=new ue([]),this.currentFetchingEventType="private",this.lastVisible&&this.firestore.collection("events",r=>r.limit(2).where("type","==","private")).get().subscribe(r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));if(i.length>0){const s=[...this.documents.getValue(),...i];this.documents.next(s),2===i.length?this.lastVisible=r.docs[r.docs.length-1]:this.nextPageAvailable=!1}else this.nextPageAvailable=!1})}getPublicEvents(){this.documents=new ue([]),this.currentFetchingEventType="public",this.lastVisible&&this.firestore.collection("events",r=>r.limit(3).where("type","==","public")).get().subscribe(r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));if(i.length>0){const s=[...this.documents.getValue(),...i];this.documents.next(s),3===i.length?this.lastVisible=r.docs[r.docs.length-1]:this.nextPageAvailable=!1}else this.nextPageAvailable=!1})}showPartecipations(r){document.getElementById("partecipations").style.display="flex",this.currentEvent=r,Dn.A.database().ref("partecipations/"+r.id+"/").once("value").then(o=>{this.partecipations.splice(0),o.forEach(s=>{const a=s.val();this.partecipations.push(a)})})}confirmPartecipation(r,i,o){var s=this;this.afAuth.authState.subscribe(function(){var a=(0,_.A)(function*(l){l?"yes"==o?(Dn.A.database().ref("partecipations/"+r+"/"+l.uid).set({uid:l.uid,name:s.firebaseService.public_user_data.name,timestamp:(new Date).getTime(),participate:o}),alert("Partecipazione confermata con successo")):Dn.A.database().ref("partecipations/"+r+"/"+l.uid).remove().then(()=>{alert("Conferma di presenza annullata")}).catch(h=>{alert("Errore durante la rimozione della tua presenza da questo evento: "+h.message)}):alert("Per confermare la tua presenza ad un evento devi essere loggato")});return function(l){return a.apply(this,arguments)}}())}}return(t=e).\u0275fac=function(r){return new(r||t)(E(ks),E(sa),E(lr),E(to))},t.\u0275cmp=et({type:t,selectors:[["app-home"]],decls:97,vars:6,consts:[[1,"body1"],[2,"width","100%","height","100%","display","flex","flex-direction","column","align-items","center","padding-bottom","3.5rem","overflow-y","auto"],[1,"up_bar",2,"width","100%","min-height","6.5rem","display","flex","flex-direction","column","align-items","center","overflow","hidden","margin-bottom","1rem"],[2,"width","100%","padding-left","0.5rem","margin-top","0.5rem","margin-bottom","0rem","display","flex","flex-direction","row","align-items","center"],["src","assets\\img\\icon-logo.jpg","alt","",2,"width","2.5rem","height","2.5rem","object-fit","contain"],[2,"font-size","1.6rem","padding-top","0.4rem","padding-left","0.2rem"],[2,"flex","1"],["routerLink","/search","name","search",2,"font-size","1.8rem"],["routerLink","/notifications","name","notifications",2,"font-size","1.8rem","padding-right","0.5rem","padding-left","0.5rem"],[2,"width","100%","height","3rem","display","flex","flex-direction","row","align-items","center","justify-content","space-evenly"],[2,"color","gray","font-size","14px",3,"click"],[2,"background","rgba(255, 255, 255, 0.082)","width","1px","height","70%"],["style","width: 95%; border-bottom: 1px solid rgba(255, 255, 255, 0.068); border-radius: 1rem; border: 1px solid rgba(255, 255, 255, 0.199); margin-bottom: 1rem;",4,"ngFor","ngForOf"],[2,"width","95%","height","2.5rem","border-radius","0.5rem","margin-top","1rem","margin-bottom","1rem","flex-shrink","0",3,"click"],[1,"overflow1"],["id","spacer"],["id","weekly-questions",2,"position","absolute","z-index","999","height","100%","width","100%","display","none","flex-direction","column-reverse","overflow-y","auto","overflow-x","hidden","background","rgba(0, 0, 0, 0.498)"],[2,"width","100%","min-height","25rem","border-start-end-radius","1.5rem","border-start-start-radius","1.5rem","background","black","display","flex","flex-direction","column","align-items","center","border-top","1px solid rgba(255, 255, 255, 0.084)"],[2,"width","100%","display","flex","align-items","center","justify-content","space-between","padding-right","1rem","padding-top","1rem","padding-bottom","0rem","padding-left","1rem"],["onclick","document.getElementById('weekly-questions').style.display = 'none'; ","name","close-outline",2,"font-size","2rem"],[2,"padding-left","1rem","padding-right","1rem"],[1,"input1",2,"margin-top","1rem","width","95%","padding-left","0.5rem"],[1,"material-symbols-outlined","notranslate"],["type","text","placeholder","Tipologia di evento?",1,"field1",2,"border-radius","2rem","height","4rem"],["type","text","placeholder","Tipologia di musica?",1,"field1",2,"border-radius","2rem","height","4rem"],["type","text","placeholder","Dove?",1,"field1",2,"border-radius","2rem","height","4rem"],["type","text","placeholder","Con quale artista/celebrit\xe0?",1,"field1",2,"border-radius","2rem","height","4rem"],[2,"width","100%","display","flex","flex-direction","column","align-items","center","margin-bottom","1rem","margin-top","1rem"],["onclick","document.getElementById('reserve-details').style.display = 'flex'; ",1,"button2",2,"width","95%","height","2.5rem"],["id","comments",2,"position","absolute","z-index","999","height","100%","width","100%","display","none","flex-direction","column-reverse","overflow-y","auto","overflow-x","hidden","background","rgba(0, 0, 0, 0.498)"],[2,"width","100%","height","25rem","border-start-end-radius","1.5rem","border-start-start-radius","1.5rem","background","black","display","flex","flex-direction","column","align-items","center","border-top","1px solid rgba(255, 255, 255, 0.084)"],["onclick","document.getElementById('comments').style.display = 'none';","name","close-outline",2,"font-size","2rem"],[2,"padding-left","1rem","padding-right","1rem","font-size","14px"],[2,"width","100%","overflow-x","hidden","overflow-y","auto"],["style","width: 100%; border-bottom: 1px solid rgba(255, 255, 255, 0.226); padding-left: 1rem; padding-top: 1rem;",4,"ngFor","ngForOf"],[1,"input1",2,"margin-top","1rem","width","95%","padding-left","0.5rem","padding-right","0.5rem","margin-bottom","0.5rem"],["type","text","id","comment-input","placeholder","Cosa ne pensi?",1,"field1",2,"border-radius","2rem","height","4rem",3,"ngModelChange","ngModel"],[1,"material-symbols-outlined","notranslate",3,"click"],["id","partecipations",2,"position","absolute","z-index","999","height","100%","width","100%","display","none","flex-direction","column-reverse","overflow-y","auto","overflow-x","hidden","background","rgba(0, 0, 0, 0.498)"],["onclick","document.getElementById('partecipations').style.display = 'none';","name","close-outline",2,"font-size","2rem"],["id","post-details",2,"position","absolute","z-index","999","height","100%","width","100%","display","none","flex-direction","column","overflow-y","auto","overflow-x","hidden","background","black"],[2,"width","100%","height","calc(100% - 5rem)","overflow-y","auto","overflow-x","hidden"],[2,"width","100%","display","flex","align-items","center","justify-content","space-between","padding-right","1rem","padding-top","1rem","padding-bottom","1rem","padding-left","1rem"],["id","post-title-details"],["onclick","document.getElementById('post-details').style.display = 'none'; ","name","close-outline",2,"font-size","2rem"],["id","post-img-details",2,"width","100%"],[2,"width","100%","display","flex","flex-direction","column","padding-left","1rem"],["id","post-description-details",2,"margin-top","0.5rem","margin-bottom","0.5rem"],["id","post-price-details",2,"margin-top","0.5rem","margin-bottom","0.5rem"],["id","post-type-details",2,"margin-top","0.5rem","margin-bottom","0.5rem"],[2,"width","100%","display","flex","flex-direction","column","align-items","center","justify-content","center","height","3rem","background","black"],["id","post-button-details",1,"button2",2,"width","95%","height","2.5rem",3,"click"],["id","notification",2,"display","none","width","100%","height","100%","z-index","999","position","absolute","pointer-events","none"],[1,"card1",2,"display","flex","flex-direction","row","width","95%"],["name","notifications",2,"font-size","1.5rem"],[2,"width","95%","border-bottom","1px solid rgba(255, 255, 255, 0.068)","border-radius","1rem","border","1px solid rgba(255, 255, 255, 0.199)","margin-bottom","1rem"],[2,"width","100%","height","2.8rem","display","flex","flex-direction","row","align-items","center","justify-content","space-between"],["name","person-circle-outline",2,"font-size","1.8rem","padding-left","0.5rem",3,"click"],["name","ellipsis-vertical",2,"font-size","1.8rem","padding-right","0.5rem"],[2,"width","100%","object-fit","cover",3,"click","src"],[2,"padding-left","0.5rem","padding-top","0.5rem"],[2,"width","100%","height","2rem","display","flex","flex-direction","row","gap","0.8rem","margin-bottom","0.5rem","align-items","center"],["name","chatbubble-outline",2,"font-size","1.8rem",3,"click"],["name","people-outline",2,"font-size","1.8rem",3,"click"],["onfocus","this.style.backgroundColor = 'gray'; this.style.borderRadius = '1rem'; ","onblur","this.style.backgroundColor = 'transparent';","tabindex","0",1,"material-symbols-outlined","notranslate",2,"font-size","1.8rem",3,"click"],["onfocus","this.style.backgroundColor = 'gray'; this.style.borderRadius = '1rem';","onblur","this.style.backgroundColor = 'transparent';","tabindex","0","name","close-outline",2,"font-size","1.8rem","margin-right","1rem",3,"click"],[2,"margin-bottom","0.5rem","margin-top","0rem"],[2,"margin-top","0rem","font-weight","200","max-height","5rem","overflow","hidden"],[2,"width","100%","border-bottom","1px solid rgba(255, 255, 255, 0.226)","padding-left","1rem","padding-top","1rem"],[2,"display","flex","flex-direction","row","align-items","center"],["name","person-circle-outline",2,"font-size","1.8rem",3,"click"],[2,"margin-top","0.5rem"]],template:function(r,i){1&r&&(b(0,"body",0)(1,"div",1)(2,"div",2)(3,"div",3),me(4,"img",4),b(5,"strong",5),P(6,"Eventi"),T(),me(7,"div",6)(8,"ion-icon",7)(9,"ion-icon",8),T(),b(10,"div",9)(11,"p",10),Ze("click",function(){return i.getPublicEvents()}),P(12,"Pubblici"),T(),me(13,"div",11),b(14,"p",10),Ze("click",function(){return i.getPrivateEvents()}),P(15,"Privati"),T(),me(16,"div",11),b(17,"p",10),Ze("click",function(){return i.getEvents()}),P(18,"Tutti"),T()()(),Mn(19,f0e,21,4,"div",12),_o(20,"async"),b(21,"button",13),Ze("click",function(){return i.getMoreEvents()}),P(22,"Carica altri"),T()(),b(23,"div",14),me(24,"div",15)(25,"app-footer"),T(),b(26,"div",16)(27,"div",17)(28,"div",18)(29,"h3"),P(30,"Sondaggio"),T(),me(31,"ion-icon",19),T(),b(32,"p",20),P(33,"In questo sondaggio ti viene richiesto di rispondere a queste domande per migliorare la qualit\xe0 e la quantit\xe0 degli eventi proposti e offerti da ClubO e dai suoi utenti"),T(),b(34,"div",21)(35,"span",22),P(36,"celebration"),T(),me(37,"input",23),T(),b(38,"div",21)(39,"span",22),P(40,"play_circle"),T(),me(41,"input",24),T(),b(42,"div",21)(43,"span",22),P(44,"location_on"),T(),me(45,"input",25),T(),b(46,"div",21)(47,"span",22),P(48,"artist"),T(),me(49,"input",26),T(),me(50,"div",6),b(51,"div",27)(52,"button",28),P(53,"Invia"),T()()()(),b(54,"div",29)(55,"div",30)(56,"div",18)(57,"h3"),P(58,"Commenti"),T(),me(59,"ion-icon",31),T(),b(60,"p",32),P(61,"Ricorda di mantenere un tono educato quando pubblichi un commento, per modificare un commento basta scriverne uno nuovo"),T(),b(62,"div",33),Mn(63,p0e,7,2,"div",34),T(),me(64,"div",6),b(65,"div",35)(66,"input",36),rE("ngModelChange",function(s){return sD(i.newComment,s)||(i.newComment=s),s}),T(),b(67,"span",37),Ze("click",function(){return i.addComment()}),P(68,"send"),T()()()(),b(69,"div",38)(70,"div",30)(71,"div",18)(72,"h3"),P(73,"Partecipazioni"),T(),me(74,"ion-icon",39),T(),b(75,"p",32),P(76,"In questa lista sono elencati tutti coloro che hanno dichiarato di voler essere presenti a questo evento"),T(),b(77,"div",33),Mn(78,g0e,5,1,"div",34),T()()(),b(79,"div",40)(80,"div",41)(81,"div",42),me(82,"h3",43)(83,"ion-icon",44),T(),me(84,"img",45),b(85,"div",46),me(86,"p",47)(87,"p",48)(88,"p",49),T()(),b(89,"div",50)(90,"button",51),Ze("click",function(){return i.bookEvent()}),P(91,"Prenota"),T()()(),b(92,"div",52)(93,"div",53),me(94,"ion-icon",54),b(95,"p"),P(96,"Notification!"),T()()()()),2&r&&(We(19),ln("ngForOf",vo(20,4,i.documents)),We(44),ln("ngForOf",i.comments),We(3),nE("ngModel",i.newComment),We(12),ln("ngForOf",i.partecipations))},dependencies:[Wc,Uo,Ma,$o,C_,uS,UE,Al,qc]}),e})(),_0e=(()=>{var t;class e{constructor(){}ngOnInit(){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=et({type:t,selectors:[["app-search"]],decls:11,vars:0,consts:[[1,"up_bar",2,"width","100%","min-height","3.5rem","display","flex","flex-direction","row","align-items","center","justify-content","center"],[1,"input1",2,"width","95%"],["type","text","id","","placeholder","Cerca",1,"field1"],["name","search",2,"color","rgb(190, 190, 190)","font-size","1.5rem","margin-left","0.5rem","margin-right","0.5rem"],[2,"width","100%","height","100%","display","flex","flex-direction","column","align-items","center","justify-content","center"],[1,"overflow1"],["id","spacer"]],template:function(r,i){1&r&&(b(0,"body")(1,"div",0)(2,"div",1),me(3,"input",2)(4,"ion-icon",3),T()(),b(5,"div",4)(6,"p"),P(7,"In fase di sviluppo"),T()(),b(8,"div",5),me(9,"div",6)(10,"app-footer"),T()())},dependencies:[Uo,Al]}),e})(),v0e=(()=>{var t;class e{constructor(){}ngOnInit(){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=et({type:t,selectors:[["app-notifications"]],decls:11,vars:0,consts:[[1,"body1"],[2,"width","100%","height","100%","display","flex","flex-direction","column","align-items","center","padding-bottom","3.5rem","overflow-y","auto"],[1,"up_bar",2,"width","100%","min-height","3rem","display","flex","flex-direction","row","align-items","center","overflow","hidden"],[2,"width","100%","font-size","1.6rem","padding-left","0.5rem"],[2,"width","100%","height","100%","display","flex","flex-direction","column","justify-content","center","overflow-y","auto","overflow-x","hidden"],[2,"width","100%","text-align","center"],[1,"overflow1"],["id","spacer"]],template:function(r,i){1&r&&(b(0,"body",0)(1,"div",1)(2,"div",2)(3,"strong",3),P(4,"Tutte le notifiche"),T()(),b(5,"div",4)(6,"p",5),P(7,"Nessuna notifica"),T()()(),b(8,"div",6),me(9,"div",7)(10,"app-footer"),T()())},dependencies:[Al]}),e})();function S9(t){const e=function I0e(t){return new Un(e=>{const n=s=>e.next(s);n(t.snapshot);const o=t.on("state_changed",n);return t.then(s=>{n(s),e.complete()},s=>{n(t.snapshot),(s=>{e.error(s)})(s)}),function(){o()}}).pipe(function y0e(t,e=m1){return Rt((n,r)=>{let i=null,o=null,s=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=o;o=null,r.next(c)}};function l(){const c=s+t,h=e.now();if(h<c)return i=this.schedule(void 0,c-h),void r.add(i);a()}n.subscribe(Bt(r,c=>{o=c,s=e.now(),i||(i=e.schedule(l,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(xt(n=>n.bytesTransferred/n.totalBytes*100))}}function bC(t){return{getDownloadURL:()=>Kt(void 0).pipe(C4,Vr(()=>t.getDownloadURL()),jo),getMetadata:()=>Kt(void 0).pipe(C4,Vr(()=>t.getMetadata()),jo),delete:()=>er(t.delete()),child:e=>bC(t.child(e)),updateMetadata:e=>er(t.updateMetadata(e)),put:(e,n)=>S9(t.put(e,n)),putString:(e,n,r)=>S9(t.putString(e,n,r)),list:e=>er(t.list(e)),listAll:()=>er(t.listAll())}}const E0e=new ft("angularfire2.storageBucket"),w0e=new ft("angularfire2.storage.maxUploadRetryTime"),b0e=new ft("angularfire2.storage.maxOperationRetryTime"),C0e=new ft("angularfire2.storage.use-emulator");let By=(()=>{var t;class e{constructor(r,i,o,s,a,l,c,h,f,m){kn(this,"storage",void 0);const v=dw(r,a,i);this.storage=I1(`${v.name}.storage.${o}`,"AngularFireStorage",v.name,()=>{const w=a.runOutsideAngular(()=>v.storage(o||void 0)),R=f;return R&&w.useEmulator(...R),c&&w.setMaxUploadRetryTime(c),h&&w.setMaxOperationRetryTime(h),w},[c,h])}ref(r){return bC(this.storage.ref(r))}refFromURL(r){return bC(this.storage.refFromURL(r))}upload(r,i,o){return bC(this.storage.ref(r)).put(i,o)}}return t=e,kn(e,"\u0275fac",function(r){return new(r||t)(Ke(Q_),Ke(Y_,8),Ke(E0e,8),Ke(Ca),Ke(ze),Ke(y1),Ke(w0e,8),Ke(b0e,8),Ke(C0e,8),Ke(v1,8))}),kn(e,"\u0275prov",Qe({token:t,factory:t.\u0275fac,providedIn:"any"})),e})();var A0e=function T0e(t,e){return t(e={exports:{}},e.exports),e.exports}(function(t){var e,n,r,i,o,s,a;e=window,n=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,r=e.Blob&&function(){try{return!!new Blob}catch{return!1}}(),i=r&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch{return!1}}(),o=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,s=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,a=(r||o)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(l){var c,h,f,m,v,w,R,N,z;if(!(c=l.match(s)))throw new Error("invalid data URI");for(h=c[2]?c[1]:"text/plain"+(c[3]||";charset=US-ASCII"),f=!!c[4],m=l.slice(c[0].length),v=f?atob(m):decodeURIComponent(m),w=new ArrayBuffer(v.length),R=new Uint8Array(w),N=0;N<v.length;N+=1)R[N]=v.charCodeAt(N);return r?new Blob([i?R:w],{type:h}):((z=new o).append(w),z.getBlob(h))},e.HTMLCanvasElement&&!n.toBlob&&(n.mozGetAsFile?n.toBlob=function(l,c,h){var f=this;setTimeout(function(){l(h&&n.toDataURL&&a?a(f.toDataURL(c,h)):f.mozGetAsFile("blob",c))})}:n.toDataURL&&a&&(n.toBlob=function(l,c,h){var f=this;setTimeout(function(){l(a(f.toDataURL(c,h)))})})),t.exports?t.exports=a:e.dataURLtoBlob=a}),D0e=Object.prototype.toString,R0e={checkOrientation:!0,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,quality:.8,mimeType:"auto",convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},x0e=/^image\/.+$/;function sk(t){return x0e.test(t)}var ak=String.fromCharCode,N0e=window.btoa;function O0e(t,e){var n=new Uint8Array(t),r="";if("function"==typeof n.forEach)n.forEach(function(s){r+=ak(s)});else for(var i=n.length,o=0;o<i;o+=1)r+=ak(n[o]);return"data:"+e+";base64,"+N0e(r)}var V0e=/\.\d*(?:0|9){12}\d*$/i;function Eg(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return V0e.test(t)?Math.round(t*e)/e:t}var $0e=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),lk=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R9=window,U0e=R9.ArrayBuffer,ck=R9.FileReader,$y=window.URL||window.webkitURL,j0e=/\.\w+$/,z0e=function(){function t(e,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.result=null,e&&this.compress(e,n)}return $0e(t,[{key:"compress",value:function(n,r){var i=this,o=new Image;return r=lk({},R0e,r),U0e||(r.checkOrientation=!1),new Promise(function(s,a){if(function(t){return t instanceof Blob||"[object Blob]"===D0e.call(t)}(n)){var l=n.type;if(sk(l))if($y||ck){if($y&&!r.checkOrientation)s({url:$y.createObjectURL(n)});else if(ck){var c=new ck,h=r.checkOrientation&&"image/jpeg"===l;c.onload=function(f){var v=f.target.result;s(h?lk({url:O0e(v,l)},function L0e(t){var e=0,n=1,r=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:r=-1;break;case 5:e=90,r=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90}return{rotate:e,scaleX:n,scaleY:r}}(function F0e(t){var e=new DataView(t),n=void 0,r=void 0,i=void 0,o=void 0;if(255===e.getUint8(0)&&216===e.getUint8(1))for(var s=e.byteLength,a=2;a<s;){if(255===e.getUint8(a)&&225===e.getUint8(a+1)){i=a;break}a+=1}if(i){var c=i+10;if("Exif"===function M0e(t,e,n){var r="",i=void 0;for(n+=e,i=e;i<n;i+=1)r+=ak(t.getUint8(i));return r}(e,i+4,4)){var h=e.getUint16(c);if(((r=18761===h)||19789===h)&&42===e.getUint16(c+2,r)){var f=e.getUint32(c+4,r);f>=8&&(o=c+f)}}}if(o){var m=e.getUint16(o,r),v=void 0,w=void 0;for(w=0;w<m;w+=1)if(274===e.getUint16(v=o+12*w+2,r)){n=e.getUint16(v+=8,r),e.setUint16(v,1,r);break}}return n}(v))):{url:v})},c.onabort=function(){a(new Error("Aborted to load the image with FileReader."))},c.onerror=function(){a(new Error("Failed to load the image with FileReader."))},h?c.readAsArrayBuffer(n):c.readAsDataURL(n)}}else a(new Error("The current browser does not support image compression."));else a(new Error("The first argument must be an image File or Blob object."))}else a(new Error("The first argument must be a File or Blob object."))}).then(function(s){return new Promise(function(a,l){o.onload=function(){return a(lk({},s,{naturalWidth:o.naturalWidth,naturalHeight:o.naturalHeight}))},o.onabort=function(){l(new Error("Aborted to load the image."))},o.onerror=function(){l(new Error("Failed to load the image."))},o.alt=n.name,o.src=s.url})}).then(function(s){var a=s.naturalWidth,l=s.naturalHeight,c=s.rotate,h=void 0===c?0:c,f=s.scaleX,m=void 0===f?1:f,v=s.scaleY,w=void 0===v?1:v;return new Promise(function(R){var N=document.createElement("canvas"),z=N.getContext("2d"),Q=a/l,Te=Math.max(r.maxWidth,0)||1/0,Ae=Math.max(r.maxHeight,0)||1/0,Je=Math.max(r.minWidth,0)||0,mt=Math.max(r.minHeight,0)||0,Xt=a,tn=l;Te<1/0&&Ae<1/0?Ae*Q>Te?Ae=Te/Q:Te=Ae*Q:Te<1/0?Ae=Te/Q:Ae<1/0&&(Te=Ae*Q),Je>0&&mt>0?mt*Q>Je?mt=Je/Q:Je=mt*Q:Je>0?mt=Je/Q:mt>0&&(Je=mt*Q),r.width>0?tn=(Xt=r.width)/Q:r.height>0&&(Xt=(tn=r.height)*Q);var hk=-(Xt=Math.min(Math.max(Xt,Je),Te))/2,fk=-(tn=Math.min(Math.max(tn,mt),Ae))/2,FIe=Xt,LIe=tn;if(Math.abs(h)%180==90){var P9={width:tn,height:Xt};Xt=P9.width,tn=P9.height}N.width=Eg(Xt),N.height=Eg(tn),sk(r.mimeType)||(r.mimeType=n.type);var M9="transparent";n.size>r.convertSize&&"image/png"===r.mimeType&&(M9="#fff",r.mimeType="image/jpeg"),z.fillStyle=M9,z.fillRect(0,0,Xt,tn),z.save(),z.translate(Xt/2,tn/2),z.rotate(h*Math.PI/180),z.scale(m,w),r.beforeDraw&&r.beforeDraw.call(i,z,N),z.drawImage(o,Math.floor(Eg(hk)),Math.floor(Eg(fk)),Math.floor(Eg(FIe)),Math.floor(Eg(LIe))),r.drew&&r.drew.call(i,z,N),z.restore();var k9=function(VIe){R({naturalWidth:a,naturalHeight:l,result:VIe})};N.toBlob?N.toBlob(k9,r.mimeType,r.quality):k9(A0e(N.toDataURL(r.mimeType,r.quality)))})}).then(function(s){var a=s.naturalWidth,l=s.naturalHeight,c=s.result;if($y&&!r.checkOrientation&&$y.revokeObjectURL(o.src),c)if(c.size>n.size&&r.mimeType===n.type&&!(r.width>a||r.height>l||r.minWidth>a||r.minHeight>l))c=n;else{var h=new Date;c.lastModified=h.getTime(),c.lastModifiedDate=h,c.name=n.name,c.name&&c.type!==n.type&&(c.name=c.name.replace(j0e,function P0e(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=sk(t)?t.substr(6):"";return"jpeg"===n&&(n="jpg"),n&&e&&(n="."+n),n}(c.type)))}else c=n;return i.result=c,r.success&&r.success.call(i,c),Promise.resolve(c)}).catch(function(s){if(!r.error)throw s;r.error.call(i,s)})}}]),t}();const H0e=z0e;let uk=(()=>{var t;class e{constructor(){this.nextPageAvailable=!0}initComments(){Dn.A.database().ref("comments").orderByKey().limitToFirst(3).once("value").then(i=>{const o=i.val();if(o){console.log(o);const s=Object.keys(o);this.lastKey=s[s.length-1],this.comments$=new Un(a=>{a.next(Object.values(o))})}else this.nextPageAvailable=!1})}loadNext3Comments(){Dn.A.database().ref("comments").orderByKey().startAt(this.lastKey).limitToFirst(4).once("value").then(i=>{const o=i.val();if(o){const s=Object.keys(o);s.shift(),this.lastKey=s[s.length-1],this.comments$=this.comments$.pipe(Vr(a=>new Un(l=>{l.next([...a,...Object.values(o)])})))}else this.nextPageAvailable=!1})}compressImage(r){return(0,_.A)(function*(){return new Promise((i,o)=>{(new H0e).compress(r,{quality:1,maxWidth:1e3,maxHeight:1e3,success(c){const h=new File([c],r.name,{type:"image/jpeg",lastModified:Date.now()});h.size>1e8?(o(new Error("L'immagine compressa supera la dimensione massima consentita")),alert("L'immagine compressa supera la dimensione massima consentita")):i(h)},error(c){o(c)}})})})()}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function G0e(t,e){1&t&&me(0,"img",41),2&t&&ln("src",En().imageSrc,rs)}function W0e(t,e){if(1&t&&(b(0,"div",42),me(1,"progress",43),b(2,"span"),P(3),T()()),2&t){const n=En();We(),ln("value",n.uploadProgress),We(2),mo("",n.uploadProgress,"%")}}function q0e(t,e){if(1&t&&(b(0,"div",42),me(1,"progress",43),b(2,"span"),P(3),T()()),2&t){const n=En();We(),ln("value",n.uploadProgress),We(2),mo("",n.uploadProgress,"%")}}function K0e(t,e){1&t&&me(0,"img",41),2&t&&ln("src",En().imageSrc,rs)}function Q0e(t,e){if(1&t&&(b(0,"div",42),me(1,"progress",43),b(2,"span"),P(3),T()()),2&t){const n=En();We(),ln("value",n.uploadProgress),We(2),mo("",n.uploadProgress,"%")}}let Y0e=(()=>{var t;class e{constructor(r,i,o,s,a,l){this.firestore=r,this.afAuth=i,this.storage=o,this.router=s,this.firebaseService=a,this.sharedFunctionsService=l,this.isPaidCheckboxSelected=!1,this.selectedImage=null,this.imageUrl=null,this.uploadProgress=null}ngOnInit(){"pro"==this.firebaseService.public_user_data.type?(document.getElementById("pro-add-selection").style.display="flex",document.getElementById("normal-add-selection").style.display="none"):(document.getElementById("pro-add-selection").style.display="none",document.getElementById("normal-add-selection").style.display="flex")}goBack(){"flex"==document.getElementById("add-selection").style.display?this.router.navigate(["/home"]):(document.getElementById("add-selection").style.display="flex",document.getElementById("add-spot").style.display="none",document.getElementById("add-drink").style.display="none",document.getElementById("add-event").style.display="none")}showEventCreation(){document.getElementById("add-selection").style.display="none",document.getElementById("add-spot").style.display="none",document.getElementById("add-drink").style.display="none",document.getElementById("add-event").style.display="flex"}showSpotCreation(){document.getElementById("add-selection").style.display="none",document.getElementById("add-event").style.display="none",document.getElementById("add-drink").style.display="none",document.getElementById("add-spot").style.display="flex"}showDrinkCreation(){document.getElementById("add-selection").style.display="none",document.getElementById("add-event").style.display="none",document.getElementById("add-drink").style.display="flex",document.getElementById("add-spot").style.display="none"}showTablesCreation(){document.getElementById("add-selection").style.display="none",document.getElementById("add-event").style.display="none",document.getElementById("add-drink").style.display="none",document.getElementById("add-spot").style.display="none"}onFileSelected(r){const i=r.target.files[0];if(i){const o=new FileReader;o.onload=s=>{this.imageSrc=s.target.result},o.readAsDataURL(i)}this.selectedImage=i}addEvent(){var r=this;return(0,_.A)(function*(){var l,c,h,i=document.getElementById("event-title-input").value,o=document.getElementById("event-description-input").value,s=document.getElementById("event-price-input").value,a=document.getElementById("event-payment-link-input").value;if(c=document.getElementById("paid-event-checkbox").checked?"paid":"free",h=document.getElementById("paid-mode-checkbox").checked?"external":"internal",l=a||"none","pro"==r.firebaseService.public_user_data.type)var w="public";else w="private";r.afAuth.authState.subscribe(function(){var R=(0,_.A)(function*(N){if(N)if(r.selectedImage)try{const z=yield r.sharedFunctionsService.compressImage(r.selectedImage),Ae=r.storage.ref("event-images/").child("event-user-"+N.uid+"-time-"+(new Date).getTime()).put(z);Ae.percentageChanges().subscribe(tn=>{r.uploadProgress=tn});const mt=yield(yield Ae).ref.getDownloadURL(),Xt={creator_id:N.uid,title:i,description:o,imageUrl:mt,type:w,price:s,payment_method:h,paid_type:c,payment_link:l,timestamp:Dn.A.firestore.FieldValue.serverTimestamp()};r.firestore.collection("events").add(Xt).then(()=>{alert("Evento aggiunto con successo")}).catch(tn=>{alert("Errore durante l'aggiunta dell'evento: "+tn.message.toString())})}catch(z){console.error("Errore durante il caricamento dell'immagine:",z)}else alert("Nessuna immagine selezionata");else alert("Per pubblicare un evento \xe8 necessario effettuare il login o la registrazione")});return function(N){return R.apply(this,arguments)}}())})()}hideOrShowPaidInput(){var r=document.getElementById("event-price-input");r.style.display="flex"==r.style.display?"none":"flex"}hideOrShowPaidModeInput(){var r=document.getElementById("event-payment-link-input");r.style.display="flex"==r.style.display?"none":"flex"}addDrink(){var r=this;return(0,_.A)(function*(){var i=document.getElementById("drink-title-input").value,o=document.getElementById("drink-description-input").value,s=document.getElementById("drink-price-input").value;"pro"==r.firebaseService.public_user_data.type?r.afAuth.authState.subscribe(function(){var l=(0,_.A)(function*(c){if(c)if(r.selectedImage)try{const h=yield r.sharedFunctionsService.compressImage(r.selectedImage),v=r.storage.ref("drink-images/").child("drink-user-"+c.uid+"-time-"+(new Date).getTime()).put(h);v.percentageChanges().subscribe(z=>{r.uploadProgress=z});const R=yield(yield v).ref.getDownloadURL(),N={creator_id:c.uid,title:i,description:o,imageUrl:R,price:s,timestamp:Dn.A.firestore.FieldValue.serverTimestamp()};r.firestore.collection("drinks").add(N).then(()=>{alert("Drink aggiunto con successo")}).catch(z=>{alert("Errore durante l'aggiunta del drink: "+z.message.toString())})}catch(h){console.error("Errore durante il caricamento dell'immagine:",h)}else alert("Nessuna immagine selezionata");else alert("Per pubblicare un drink \xe8 necessario effettuare il login o la registrazione")});return function(c){return l.apply(this,arguments)}}()):alert("Per aggiungere un drink \xe8 neccessario possedere un account di tipo professionale")})()}addSpot(){var r=this;return(0,_.A)(function*(){var i=document.getElementById("spot-datetime-input").value,o=document.getElementById("spot-where-input").value,s=document.getElementById("spot-description-input").value;r.afAuth.authState.subscribe(function(){var l=(0,_.A)(function*(c){if(c)try{const h={creator_id:c.uid,datetime:i,description:s,where:o,privacy:"null",timestamp:Dn.A.firestore.FieldValue.serverTimestamp()};r.firestore.collection("spots").add(h).then(()=>{alert("Spot aggiunto con successo")}).catch(f=>{alert("Errore durante l'aggiunta dello spot: "+f.message.toString())})}catch(h){console.error("Errore durante il caricamento dell'immagine:",h)}else alert("Per pubblicare uno spot \xe8 necessario effettuare il login o la registrazione")});return function(c){return l.apply(this,arguments)}}())})()}}return(t=e).\u0275fac=function(r){return new(r||t)(E(ks),E(to),E(By),E(lr),E(sa),E(uk))},t.\u0275cmp=et({type:t,selectors:[["app-add"]],decls:80,vars:5,consts:[[2,"height","100%","overflow-y","hidden"],[2,"width","100%","display","flex","align-items","center","padding-top","1rem","padding-left","1rem","pointer-events","all"],[2,"background","#950DE8","padding","0.5rem","border-radius","50%","display","flex","flex-direction","column","align-items","center",3,"click"],[1,"material-symbols-outlined","notranslate",2,"width","100","text-align","center"],["id","add-selection",2,"width","100%","height","100%","display","flex","flex-direction","column"],["id","normal-add-selection",2,"width","100%","display","flex","flex-direction","column"],[2,"width","100%","padding-left","0.5rem"],[1,"button3",2,"border-top","1px solid rgba(255, 255, 255, 0.062)",3,"click"],["id","pro-add-selection",2,"width","100%","display","flex","flex-direction","column"],["id","add-drink",2,"width","100%","height","100%","display","none","flex-direction","column","align-items","center","padding-top","1rem","padding-bottom","4rem","overflow-y","auto"],[1,"card1",2,"width","95%"],[2,"color","#FFFFFF80","margin-bottom","0rem","width","100%","padding-left","1rem","margin-top","1rem"],["style","width: 90%; height: 8rem; object-fit: contain; margin-top: 1rem;",3,"src",4,"ngIf"],["for","event-image-input",1,"card3",2,"width","90%","display","flex","flex-direction","row","align-items","center","justify-content","center","overflow","hidden","height","4rem"],["src","assets\\img\\material-symbols_perm-media.svg",2,"width","1.5rem","height","1.5rem","margin-right","0.2rem"],["id","event-image-input","type","file","accept","image/*",2,"display","none","position","relative","width","100%","height","100%","pointer-events","all","z-index","1",3,"change"],[2,"color","#FFFFFF80"],["id","drink-title-input","type","text","placeholder","Titolo",1,"card3","field2",2,"width","90%","height","2.5rem"],["id","drink-description-input","type","text","placeholder","Descrizione",1,"card3","field2",2,"width","90%","min-height","8rem","resize","vertical"],[2,"width","90%"],["id","drink-price-input","type","number","placeholder","Prezzo",1,"card3","field2",2,"width","90%","height","2.5rem"],["style","height: 4rem; display: flex; align-items: center; justify-content: center; gap: 0.5rem; margin-bottom: -1rem;",4,"ngIf"],[1,"button2",2,"width","90%","margin-top","1rem","margin-bottom","1rem","height","3rem",3,"click"],["id","add-spot",2,"width","100%","height","100%","display","none","flex-direction","column","align-items","center","padding-top","1rem","padding-bottom","4rem","overflow-y","auto"],["for","spot-datetime-input",2,"color","#FFFFFF80","margin-bottom","0rem","width","100%","padding-left","1rem","margin-top","1rem"],["id","spot-datetime-input","type","datetime-local",1,"card3","field2",2,"width","90%","height","2.5rem","padding-right","0.5rem","margin-top","0.2rem"],["id","spot-description-input","type","text","placeholder","Descrizione",1,"card3","field2",2,"width","90%","min-height","8rem","resize","vertical"],["for","spot-where-input",2,"color","#FFFFFF80","margin-bottom","0rem","width","100%","padding-left","1rem","margin-top","1rem"],["id","spot-where-input","type","text",1,"card3","field2",2,"width","90%","height","2.5rem","padding-right","0.5rem","margin-top","0.2rem"],["id","add-event",2,"width","100%","height","100%","display","none","flex-direction","column","align-items","center","padding-top","1rem","padding-bottom","4rem","overflow-y","auto"],["id","event-title-input","type","text","placeholder","Titolo",1,"card3","field2",2,"width","90%","height","2.5rem"],["id","event-description-input","type","text","placeholder","Descrizione",1,"card3","field2",2,"width","90%","min-height","8rem","resize","vertical"],[2,"width","90%","height","3rem","display","flex","flex-direction","row","align-items","center"],["id","paid-event-checkbox","type","checkbox",2,"width","1.2rem","height","1.2rem",3,"change"],["for","paid-event-checkbox",2,"padding-left","0.5rem"],["id","paid-mode-checkbox","type","checkbox",2,"width","1.2rem","height","1.2rem",3,"change"],["for","paid-mode-checkbox",2,"padding-left","0.5rem"],["id","event-payment-link-input","type","text","placeholder","Link esterno",1,"card3","field2",2,"width","90%","height","2.5rem","display","none"],["id","event-price-input","type","number","placeholder","Prezzo",1,"card3","field2",2,"width","90%","height","2.5rem","display","none"],[1,"overflow1"],["id","spacer"],[2,"width","90%","height","8rem","object-fit","contain","margin-top","1rem",3,"src"],[2,"height","4rem","display","flex","align-items","center","justify-content","center","gap","0.5rem","margin-bottom","-1rem"],["max","100",3,"value"]],template:function(r,i){1&r&&(b(0,"body",0)(1,"div",1)(2,"button",2),Ze("click",function(){return i.goBack()}),b(3,"span",3),P(4,"arrow_back_ios_new"),T()()(),b(5,"div",4)(6,"div",5)(7,"h3",6),P(8,"Cosa vuoi pubblicare"),T(),b(9,"button",7),Ze("click",function(){return i.showEventCreation()}),P(10,"Evento"),T(),b(11,"button",7),Ze("click",function(){return i.showSpotCreation()}),P(12,"Spot"),T()(),b(13,"div",8)(14,"h3",6),P(15,"Cosa vuoi pubblicare | Pro"),T(),b(16,"button",7),Ze("click",function(){return i.showEventCreation()}),P(17,"Evento"),T(),b(18,"button",7),Ze("click",function(){return i.showDrinkCreation()}),P(19,"Drink o bottiglia"),T()()(),b(20,"div",9)(21,"div",10)(22,"h3",11),P(23,"Nuovo drink"),T(),Mn(24,G0e,1,1,"img",12),b(25,"label",13),me(26,"img",14),b(27,"input",15),Ze("change",function(s){return i.onFileSelected(s)}),T(),b(28,"p",16),P(29,"Seleziona foto drink"),T()(),me(30,"input",17)(31,"textarea",18),b(32,"p",19),P(33,"Prezzo"),T(),me(34,"input",20),Mn(35,W0e,4,2,"div",21),b(36,"button",22),Ze("click",function(){return i.addDrink()}),P(37,"Aggiungi drink"),T()()(),b(38,"div",23)(39,"div",10)(40,"h3",11),P(41,"Nuovo spot"),T(),b(42,"label",24),P(43,"Data e ora"),T(),me(44,"input",25)(45,"textarea",26),b(46,"label",27),P(47,"Luogo"),T(),me(48,"input",28),Mn(49,q0e,4,2,"div",21),b(50,"button",22),Ze("click",function(){return i.addSpot()}),P(51,"Pubblica"),T()()(),b(52,"div",29)(53,"div",10)(54,"h3",11),P(55,"Nuovo evento"),T(),Mn(56,K0e,1,1,"img",12),b(57,"label",13),me(58,"img",14),b(59,"input",15),Ze("change",function(s){return i.onFileSelected(s)}),T(),b(60,"p",16),P(61,"Seleziona media"),T()(),me(62,"input",30)(63,"textarea",31),b(64,"div",32)(65,"input",33),Ze("change",function(){return i.hideOrShowPaidInput()}),T(),b(66,"label",34),P(67,"Evento a pagamento"),T()(),b(68,"div",32)(69,"input",35),Ze("change",function(){return i.hideOrShowPaidModeInput()}),T(),b(70,"label",36),P(71,"Pagamento esterno a ClubO"),T()(),me(72,"input",37)(73,"input",38),Mn(74,Q0e,4,2,"div",21),b(75,"button",22),Ze("click",function(){return i.addEvent()}),P(76,"Pubblica"),T()()(),b(77,"div",39),me(78,"div",40)(79,"app-footer"),T()()),2&r&&(We(24),ln("ngIf",i.imageSrc),We(11),ln("ngIf",null!==i.uploadProgress),We(14),ln("ngIf",null!==i.uploadProgress),We(7),ln("ngIf",i.imageSrc),We(18),ln("ngIf",null!==i.uploadProgress))},dependencies:[il,Al]}),e})();function X0e(t,e){if(1&t){const n=Ji();b(0,"div",57)(1,"p",106)(2,"strong"),P(3,"Posti totali locale:"),T(),P(4),T(),me(5,"img",107),b(6,"strong",108),P(7,"Nome reale utente"),T(),b(8,"div",109),me(9,"ion-icon",110)(10,"input",111),T(),b(11,"strong",108),P(12,"Nome tavolo"),T(),b(13,"div",109)(14,"span",112),P(15,"chair"),T(),me(16,"input",113),T(),b(17,"strong",108),P(18,"Numero di telefono"),T(),b(19,"div",109)(20,"span",112),P(21,"phone"),T(),me(22,"input",114),T(),b(23,"strong",108),P(24,"Numero persone"),T(),b(25,"div",109),me(26,"ion-icon",115)(27,"input",116),T(),b(28,"button",117),Ze("click",function(){const i=rr(n).$implicit;return ir(En().bookTable(i))}),P(29,"Prenota tavolo"),T()()}if(2&t){const n=e.$implicit;We(4),mo(" ",n.seats_number,""),We(),Vf("src",n.imageUrl,rs)}}function J0e(t,e){if(1&t&&(b(0,"div",57)(1,"p",118),P(2,"Nome: "),b(3,"strong"),P(4),T()(),b(5,"p",118),P(6,"Posti disponibili: "),b(7,"strong"),P(8),T()(),b(9,"p",118),P(10,"Zona: "),b(11,"strong"),P(12),T()(),b(13,"p",118),P(14,"Marchio/modello: "),b(15,"strong"),P(16),T()(),b(17,"p",118),P(18,"Colore: "),b(19,"strong"),P(20),T()(),b(21,"p",118),P(22,"Tipologia: "),b(23,"strong"),P(24),T()(),b(25,"p",118),P(26,"Targa: "),b(27,"strong"),P(28),T()(),b(29,"p",118),P(30,"Numero di telefono: "),b(31,"strong"),P(32),T()(),b(33,"p",118),P(34,"Quota: "),b(35,"strong"),P(36),T()(),b(37,"p",118),P(38,"Disponibilit\xe0: "),b(39,"strong"),P(40),T()()()),2&t){const n=e.$implicit;We(4),Wt(n.name),We(4),Wt(n.seats),We(4),Wt(n.zone),We(4),Wt(n.brand_model),We(4),Wt(n.color),We(4),Wt(n.type),We(4),Wt(n.signature),We(4),Wt(n.number),We(4),Wt(n.money),We(4),Wt(n.available)}}function Z0e(t,e){if(1&t&&(b(0,"div",119)(1,"div",120),me(2,"ion-icon",121),T(),b(3,"strong",58),P(4,"Dove:"),T(),b(5,"p",122),P(6),T(),b(7,"strong",58),P(8,"Quando:"),T(),b(9,"p",122),P(10),T(),b(11,"strong",58),P(12,"Descrizione:"),T(),b(13,"p",122),P(14),T(),b(15,"div",123)(16,"div",124),me(17,"ion-icon",125),T()()()),2&t){const n=e.$implicit,r=En();We(6),Wt(n.where),We(4),Wt(r.formatDate(n.datetime)),We(4),Wt(n.description)}}function eIe(t,e){if(1&t){const n=Ji();b(0,"div",126)(1,"div",127)(2,"ion-icon",128),Ze("click",function(){const i=rr(n).$implicit;return ir(En().showEventActions(i))}),T()(),b(3,"img",129),Ze("click",function(){const i=rr(n).$implicit;return ir(En().seeEventDetails(i))}),T(),b(4,"strong"),P(5),T(),b(6,"p",130),P(7),T()()}if(2&t){const n=e.$implicit;We(3),Vf("src",n.imageUrl,rs),We(2),Wt(n.title),We(2),Wt(n.description)}}function tIe(t,e){if(1&t){const n=Ji();b(0,"div",126)(1,"div",127)(2,"ion-icon",128),Ze("click",function(){const i=rr(n).$implicit;return ir(En().showDrinkActions(i))}),T()(),b(3,"img",129),Ze("click",function(){const i=rr(n).$implicit;return ir(En().showDrinkDetails(i))}),T(),b(4,"strong"),P(5),T(),b(6,"p",130),P(7),T()()}if(2&t){const n=e.$implicit;We(3),Vf("src",n.imageUrl,rs),We(2),Wt(n.title),We(2),Wt(n.description)}}function nIe(t,e){if(1&t){const n=Ji();b(0,"div",131)(1,"div",132)(2,"ion-icon",133),Ze("click",function(){const i=rr(n).$implicit;return ir(En().goToPostAccount(i))}),T(),b(3,"strong"),P(4),T()(),b(5,"div",134)(6,"p",135),P(7),T(),b(8,"p",135),P(9),T()()()}if(2&t){const n=e.$implicit;We(4),Wt(n.creator_name),We(3),mo("Drink: ",n.drink_name,""),We(2),mo("Id utente: ",n.creator_id,"")}}let rIe=(()=>{var t;class e{constructor(r,i,o,s,a,l,c){this.firestore=r,this.afAuth=i,this.firebaseService=o,this.route=s,this.storage=a,this.router=l,this.locationStrategy=c,this.isIntersecting=!1,this.reservedDrinks=[],this.selectedImage=null,this.imageUrl=null,this.uploadProgress=null,this.nextPageAvailable=!0,this.data$=new ue([]),this.drinksData$=new ue([]),this.spotsData$=new ue([])}ngOnInit(){this.route.queryParams.subscribe(r=>{if(this.see_uid=r.uid,this.see_uid)if(this.firestore.collection("public_users_data").doc(this.see_uid).get().subscribe(o=>{if(o.exists){const s=o.data();this.initializeProfile(s)}else alert("Utente non trovato")}),this.see_uid==this.firebaseService.public_user_data.uid){const o=document.getElementsByClassName("my-account-actions");for(let a=0;a<o.length;a++)o[a].style.display="flex";const s=document.getElementsByClassName("external-account-actions");for(let a=0;a<s.length;a++)s[a].style.display="none"}else{const o=document.getElementsByClassName("my-account-actions");for(let a=0;a<o.length;a++)o[a].style.display="none";const s=document.getElementsByClassName("external-account-actions");for(let a=0;a<s.length;a++)s[a].style.display="flex"}else{const o=document.getElementsByClassName("my-account-actions");for(let a=0;a<o.length;a++)o[a].style.display="flex";const s=document.getElementsByClassName("external-account-actions");for(let a=0;a<s.length;a++)s[a].style.display="none";this.initializeProfile(this.firebaseService.public_user_data)}})}initializeProfile(r){if(r){this.currentUserPublicData=r,"pro"==r.type?(document.getElementById("spots-toggle").style.display="flex",document.getElementById("events-toggle").style.display="flex",document.getElementById("car-pooling-toggle").style.display="none",document.getElementById("seat-toggle").style.display="flex",document.getElementById("drink-toggle").style.display="flex"):(document.getElementById("spots-toggle").style.display="flex",document.getElementById("events-toggle").style.display="flex",document.getElementById("car-pooling-toggle").style.display="flex",document.getElementById("seat-toggle").style.display="none",document.getElementById("drink-toggle").style.display="none");var i=document.getElementById("account-image");null!=i&&(i.src=r.imageUrl),document.getElementById("name-and-surname").innerHTML=r.name,document.getElementById("description").innerHTML=r.description,document.getElementById("username").innerHTML="@"+r.username,document.getElementById("send-message-button").href="https://wa.me/+39"+r.phone,this.getElements("events")}}goToChangeSelection(){this.firebaseService.getPrivateUserData(),document.getElementById("change-account-data-selection").style.display="flex"}seeEventDetails(r){document.getElementById("account-event-details").style.display="flex",document.getElementById("account-event-title-details").innerText=r.title,document.getElementById("account-event-description-details").innerText=r.description,document.getElementById("account-event-img-details").src=r.imageUrl}showDrinkDetails(r){this.currentShowingDetailsDrink=r,document.getElementById("account-drink-details").style.display="flex",document.getElementById("account-drink-title-details").innerText=r.title,document.getElementById("account-drink-title-details2").innerText="Nome: "+r.title,document.getElementById("account-drink-description-details").innerText="Descrizione: "+r.description,document.getElementById("account-drink-price-details").innerText="Prezzo: "+r.price+"\u20ac",document.getElementById("account-drink-img-details").src=r.imageUrl}getElements(r){document.getElementById("elements-container").style.display="flex",document.getElementById("drinks-container").style.display="none",document.getElementById("spots-container").style.display="none",document.getElementById("car-pooling-data-container").style.display="none",document.getElementById("commercial-activity-data-container").style.display="none",this.currentFetchingElementType=r,this.firestore.collection(r,i=>i.limit(3).where("creator_id","==",this.currentUserPublicData.uid)).get().subscribe(i=>{const o=i.docs.map(s=>({id:s.id,...s.data()}));3===o.length?this.lastVisible=i.docs[i.docs.length-1]:this.nextPageAvailable=!1,this.data$.next(o)})}getMoreElements(){this.lastVisible&&this.firestore.collection(this.currentFetchingElementType,r=>r.limit(3).where("creator_id","==",this.currentUserPublicData.uid).startAfter(this.lastVisible)).get().subscribe(r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));if(i.length>0){const s=[...this.data$.getValue(),...i];this.data$.next(s),3===i.length?this.lastVisible=r.docs[r.docs.length-1]:this.nextPageAvailable=!1}else this.nextPageAvailable=!1})}getAccountSpots(){document.getElementById("elements-container").style.display="none",document.getElementById("drinks-container").style.display="none",document.getElementById("spots-container").style.display="flex",document.getElementById("car-pooling-data-container").style.display="none",document.getElementById("commercial-activity-data-container").style.display="none",this.firestore.collection("spots",r=>r.limit(2).where("creator_id","==",this.currentUserPublicData.uid)).get().subscribe(r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));2===i.length?this.lastVisible=r.docs[r.docs.length-1]:this.nextPageAvailable=!1,this.spotsData$.next(i)})}getMoreAccountSpots(){this.lastVisible&&this.firestore.collection("spots",r=>r.limit(3).where("creator_id","==",this.currentUserPublicData.uid).startAfter(this.lastVisible)).get().subscribe(r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));if(i.length>0){const s=[...this.spotsData$.getValue(),...i];this.spotsData$.next(s),3===i.length?this.lastVisible=r.docs[r.docs.length-1]:this.nextPageAvailable=!1}else this.nextPageAvailable=!1})}formatDate(r){const i=new Date(r);return`${i.getDate()}/${i.getMonth()+1}/${i.getFullYear()} alle ${i.getHours()}:${i.getMinutes()}`}getAccountActivityInfo(){document.getElementById("elements-container").style.display="none",document.getElementById("spots-container").style.display="none",document.getElementById("car-pooling-data-container").style.display="none",document.getElementById("drinks-container").style.display="none",document.getElementById("commercial-activity-data-container").style.display="flex",this.commercialActivityData$=er(this.firestore.collection("places_datas").doc(this.currentUserPublicData.uid).get()).pipe(xt(r=>r.exists?[{id:r.id,...r.data()}]:[]))}getAccountCarPooling(){document.getElementById("elements-container").style.display="none",document.getElementById("drinks-container").style.display="none",document.getElementById("spots-container").style.display="none",document.getElementById("car-pooling-data-container").style.display="flex",document.getElementById("commercial-activity-data-container").style.display="none",this.carPoolingData$=er(this.firestore.collection("car-pooling").doc(this.currentUserPublicData.uid).get()).pipe(xt(r=>r.exists?[r.data()]:[]),eo(r=>{document.getElementById("book-car-pooling-button").style.display="available"==r[0].available?"flex":"none"}))}showEventActions(r){this.currentActionEvent=r,document.getElementById("account-event-men\xf9").style.display="flex"}deleteEvent(){var r=this.currentActionEvent;Dn.A.firestore().collection("events").doc(r.id).delete().then(()=>{document.getElementById("account-event-men\xf9").style.display="none",this.getElements("events"),alert("Evento eliminato con successo!")}).catch(i=>{document.getElementById("account-event-men\xf9").style.display="none",alert("Errore durante l'eliminazione dell'evento: "+i.message)})}showDrinkActions(r){this.currentActionDrink=r,document.getElementById("account-drink-men\xf9").style.display="flex"}deleteDrink(){var r=this.currentActionDrink;Dn.A.firestore().collection("drinks").doc(r.id).delete().then(()=>{document.getElementById("account-drink-men\xf9").style.display="none",this.getDrinks(),alert("Drink eliminato con successo!")}).catch(i=>{document.getElementById("account-drink-men\xf9").style.display="none",alert("Errore durante l'eliminazione del drink: "+i.message)})}goToPostAccount(r){this.router.navigate(["/account"],{queryParams:{uid:r.creator_id}})}reserveDrink(){var r=this,i=this.currentShowingDetailsDrink;this.afAuth.authState.subscribe(function(){var o=(0,_.A)(function*(s){if(s){var a={drink_name:i.title,drink_id:i.id,pro_account_id:i.creator_id,creator_id:s.uid,price:i.price,creator_name:r.firebaseService.public_user_data.name,timestamp:Dn.A.firestore.FieldValue.serverTimestamp()};Dn.A.firestore().collection("booked_drinks").doc().set(a).then(()=>{alert("Drink o bottiglia prenotata con successo")}).catch(l=>{alert("Errore durante la prenotazione di una bottiglia o drink: "+l.message)})}else alert("Devi essere loggato per poter prenotare un drink o una bottiglia")});return function(s){return o.apply(this,arguments)}}())}getDrinks(){document.getElementById("elements-container").style.display="none",document.getElementById("drinks-container").style.display="flex",document.getElementById("spots-container").style.display="none",document.getElementById("car-pooling-data-container").style.display="none",document.getElementById("commercial-activity-data-container").style.display="none",this.firestore.collection("drinks",r=>r.limit(3).where("creator_id","==",this.currentUserPublicData.uid)).get().subscribe(r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));3===i.length?this.lastVisible=r.docs[r.docs.length-1]:this.nextPageAvailable=!1,this.drinksData$.next(i)})}getMoreDrinks(){this.lastVisible&&this.firestore.collection("drinks",r=>r.limit(3).where("creator_id","==",this.currentUserPublicData.uid).startAfter(this.lastVisible)).get().subscribe(r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));if(i.length>0){const s=[...this.drinksData$.getValue(),...i];this.drinksData$.next(s),3===i.length?this.lastVisible=r.docs[r.docs.length-1]:this.nextPageAvailable=!1}else this.nextPageAvailable=!1})}deleteReservedDrink(r){Dn.A.database().ref("booked_up_elements/drinks/"+r.pro_account_id+"/"+r.creator_id).remove().then(()=>{document.getElementById("reserved-drinks").style.display="flex",alert("Drink o bottiglia completata con successo")}).catch(i=>{alert("Errore durante la rimozione del drink o della bottiglia: "+i.message)})}logout(){window.confirm("Conferma la disconnessione")&&Dn.A.auth().signOut().then(()=>{this.router.navigate(["/splash"]),alert("Account disconnesso con successo")}).catch(function(i){alert("Errore durante la disconnessione: "+i.message)})}deleteAccount(){window.confirm("Conferma l'eliminazione dell'account, QUESTA OPERAZIONE \xc8 IRREVERSIBILE")&&Dn.A.auth().currentUser.delete().then(()=>{this.router.navigate(["/splash"]),alert("Account eliminato con successo")}).catch(function(i){alert("Errore durante l'eliminazione dell'account: "+i.message)})}bookTable(r){var i=this;this.afAuth.authState.subscribe(function(){var o=(0,_.A)(function*(s){if(s){var a=document.getElementById("book-table-user-real-name").value,l=document.getElementById("book-table-table-name").value,c=document.getElementById("book-table-total-people").value,h=document.getElementById("book-table-phone").value;i.firestore.collection("booked_tables").add({local_id:r.id,local_name:i.currentUserPublicData.name,uid:s.uid,phone:h,user_real_name:a,table_name:l,total_people:c,timestamp:Dn.A.firestore.FieldValue.serverTimestamp()}).then(()=>{alert("Tavolo prenotato con successo")}).catch(f=>{alert("Errore della prenotazione del tavolo: "+f.message)})}});return function(s){return o.apply(this,arguments)}}())}}return(t=e).\u0275fac=function(r){return new(r||t)(E(ks),E(to),E(sa),E(na),E(By),E(lr),E(Zs))},t.\u0275cmp=et({type:t,selectors:[["app-account"]],decls:204,vars:16,consts:[[1,"body1"],[2,"width","100%","height","100%","display","flex","flex-direction","column","align-items","center","padding-bottom","3.5rem","pointer-events","all","overflow-x","hidden"],[1,"up_bar",2,"width","100%","min-height","3.5rem","display","flex","flex-direction","row","align-items","center","justify-content","space-between"],["id","username",2,"margin-left","1rem"],[1,"my-account-actions",2,"display","flex","flex-direction","row","align-items","center","height","100%"],["name","menu-outline",2,"font-size","1.8rem","margin-right","1rem","margin-left","0.3rem",3,"click"],[2,"width","100%","height","auto"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","justify-content","start","gap","1rem","margin-top","1rem","margin-bottom","1rem","padding-left","1rem"],["id","account-image","src","assets\\icon\\favicon.png",2,"width","5rem","height","5rem","object-fit","cover","border-radius","50%"],[2,"height","100%","display","flex","flex-direction","column"],["id","name-and-surname",2,"font-size","1.2rem"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","gap","0.8rem","overflow-y","hidden","overflow-x","auto","margin-top","1rem"],["id","followers",2,"margin-bottom","0rem","margin-top","0rem"],[2,"margin-top","0.3rem","font-weight","200","color","#FFFFFF80","margin-bottom","0rem"],["id","followings",2,"margin-bottom","0rem","margin-top","0rem"],["id","description",2,"width","100%","padding-left","1rem","font-weight","200","color","#FFFFFF80","padding-right","0.5rem"],[1,"external-account-actions",2,"width","100%","display","flex","flex-direction","row","align-items","center","justify-content","space-between","margin-bottom","1rem","margin-top","1rem","padding-left","0.5rem","padding-right","0.5rem"],[1,"button2",2,"width","48%","height","2rem","border-radius","1rem","gap","0.5rem"],["name","add-outline",2,"font-size","1.8rem"],["id","send-message-button","target","_blank",1,"button2",2,"width","48%","height","2rem","border-radius","1rem","gap","0.5rem","color","white","cursor","pointer","text-decoration","none"],["name","send",2,"font-size","1.2rem"],[1,"card1",2,"width","95%","border-radius","2rem","min-height","2.5rem","display","flex","flex-direction","row","align-items","center","justify-content","space-between"],["id","events-toggle","tabindex","0","onfocus","this.style.backgroundColor = 'gray';","onblur","this.style.backgroundColor = 'transparent';",1,"card1",2,"width","30%","height","100%","display","flex","align-items","center","justify-content","center","border-radius","2rem",3,"click"],["name","id-card-outline",2,"font-size","1.8rem"],["id","spots-toggle","tabindex","0","onfocus","this.style.backgroundColor = 'gray';","onblur","this.style.backgroundColor = 'transparent';",1,"card1",2,"width","30%","height","100%","display","flex","align-items","center","justify-content","center","border-radius","2rem",3,"click"],["name","pricetags-outline",2,"font-size","1.8rem"],["id","car-pooling-toggle","tabindex","0","onfocus","this.style.backgroundColor = 'gray';","onblur","this.style.backgroundColor = 'transparent';",1,"card1",2,"width","30%","height","100%","display","flex","align-items","center","justify-content","center","border-radius","2rem",3,"click"],["name","car",2,"font-size","1.8rem"],["id","seat-toggle","tabindex","0","onfocus","this.style.backgroundColor = 'gray';","onblur","this.style.backgroundColor = 'transparent';",1,"card1",2,"width","30%","height","100%","display","flex","align-items","center","justify-content","center","border-radius","2rem",3,"click"],[1,"material-symbols-outlined","notranslate"],["id","drink-toggle","tabindex","0","onfocus","this.style.backgroundColor = 'gray';","onblur","this.style.backgroundColor = 'transparent';",1,"card1",2,"width","30%","height","100%","display","flex","align-items","center","justify-content","center","border-radius","2rem",3,"click"],["id","commercial-activity-data-container",2,"display","none","flex-direction","unset","flex-wrap","wrap","justify-content","space-between","width","100%","height","100%","padding-left","1rem","padding-right","1rem"],[2,"width","100%"],["style","width: 100%; display: flex; flex-direction: column;",4,"ngFor","ngForOf"],["id","car-pooling-data-container",2,"display","none","flex-direction","unset","flex-wrap","wrap","justify-content","space-between","width","100%","height","100%","padding-left","1rem","padding-right","1rem"],["id","book-car-pooling-button",1,"button2",2,"width","100%","height","2.5rem","margin-top","1rem","margin-bottom","1rem"],["id","spots-container",2,"width","100%","display","none","flex-direction","column","align-items","center"],[2,"width","100%","padding-left","1rem"],["style","width: 100%; border-bottom: 1px solid rgba(255, 255, 255, 0.082);",4,"ngFor","ngForOf"],[2,"width","95%","height","2.5rem","border-radius","0.5rem","margin-top","1rem","margin-bottom","1rem",3,"click"],["id","elements-container",2,"display","flex","flex-direction","unset","flex-wrap","wrap","justify-content","space-between","width","100%","height","100%","padding-left","1rem","padding-right","1rem"],["style","width: 48%; height: 15rem; border-radius: 0.5rem; margin-bottom: 1rem; overflow: hidden; border: 1px solid rgba(255, 255, 255, 0.082);",4,"ngFor","ngForOf"],[2,"width","48%","height","15rem","border-radius","0.5rem","margin-bottom","1rem",3,"click"],["id","drinks-container",2,"display","flex","flex-direction","unset","flex-wrap","wrap","justify-content","space-between","width","100%","height","100%","padding-left","1rem","padding-right","1rem"],["id","change-account-data-selection",2,"position","absolute","z-index","2","display","none","flex-direction","column","align-items","center","width","100%","height","100%","background","black","pointer-events","all","overflow-x","hidden","overflow-y","auto","padding-bottom","4rem"],[2,"width","100%","display","flex","align-items","center","justify-content","space-between","padding-right","1rem","padding-top","0rem","padding-bottom","0rem","padding-left","0.5rem"],["onclick","document.getElementById('change-account-data-selection').style.display = 'none'; ","name","close-outline",2,"font-size","2rem"],["routerLink","/account/change-account-data",1,"button3",2,"display","flex","flex-direction","row","align-items","center","gap","0.5rem"],["name","person",2,"font-size","1.4rem"],["routerLink","/balance",1,"button3",2,"display","flex","flex-direction","row","align-items","center","gap","0.5rem"],["name","wallet",2,"font-size","1.4rem"],["routerLink","/change-password",1,"button3",2,"display","flex","flex-direction","row","align-items","center","gap","0.5rem"],["name","key",2,"font-size","1.4rem"],["routerLink","/account/change-place-data",1,"button3",2,"display","flex","flex-direction","row","align-items","center","gap","0.5rem"],["name","fast-food",2,"font-size","1.4rem"],["routerLink","/account/change-car-pooling",1,"button3",2,"display","flex","flex-direction","row","align-items","center","gap","0.5rem"],["name","car",2,"font-size","1.4rem"],[2,"width","100%","display","flex","flex-direction","column"],[2,"width","100%","padding-left","0.5rem"],["routerLink","/booked-events",1,"button3",2,"display","flex","flex-direction","row","align-items","center","gap","0.5rem"],[1,"material-symbols-outlined","notranslate",2,"font-size","1.4rem"],["routerLink","/booked-tables",1,"button3",2,"display","flex","flex-direction","row","align-items","center","gap","0.5rem"],["routerLink","/booked-drinks","onclick","document.getElementById('reserved-elements-men\xf9').style.display = 'none';",1,"button3",2,"display","flex","flex-direction","row","align-items","center","gap","0.5rem"],["href","https://verdevweb.github.io/Club0/assets/legal/Termini-e-condizioni.html",1,"button3",2,"display","flex","flex-direction","row","align-items","center","gap","0.5rem","text-decoration","none"],["href","https://verdevweb.github.io/Club0/assets/legal/PrivacyPolicydiClubo.html",1,"button3",2,"display","flex","flex-direction","row","align-items","center","gap","0.5rem","text-decoration","none","color","white"],[1,"button3",2,"display","flex","flex-direction","row","align-items","center","gap","0.5rem","color","rgb(250, 50, 50)",3,"click"],["name","log-out",2,"font-size","1.4rem","color","rgb(250, 50, 50)"],["name","trash",2,"font-size","1.4rem","color","rgb(250, 50, 50)"],["id","account-event-details",2,"position","absolute","z-index","2","display","none","flex-direction","column","align-items","center","width","100%","height","100%","background","black","pointer-events","all","padding-bottom","2.5rem"],[2,"width","100%","display","flex","align-items","center","justify-content","space-between","padding-right","1rem","padding-top","1rem","padding-bottom","1rem","padding-left","1rem"],["id","account-event-title-details"],["onclick","document.getElementById('account-event-details').style.display = 'none'; ","name","close-outline",2,"font-size","2rem"],["id","account-event-img-details",2,"width","100%","height","15rem","object-fit","cover"],[2,"width","100%","display","flex","padding-left","1rem","padding-right","1rem"],["id","account-event-description-details",2,"width","100%"],[2,"flex","1"],[2,"width","100%","display","flex","flex-direction","column","align-items","center","margin-bottom","2rem"],["onclick","document.getElementById('reserve-details').style.display = 'flex'; ",1,"button2",2,"width","95%","height","2.5rem"],["id","account-drink-details",2,"position","absolute","z-index","2","display","none","flex-direction","column","align-items","center","width","100%","height","100%","background","black","pointer-events","all","padding-bottom","2.5rem"],["id","account-drink-title-details"],["onclick","document.getElementById('account-drink-details').style.display = 'none'; ","name","close-outline",2,"font-size","2rem"],["id","account-drink-img-details",2,"width","100%","height","15rem","object-fit","cover"],[2,"width","100%","display","flex","flex-direction","column","padding-left","1rem","padding-right","1rem"],["id","account-drink-title-details2",2,"width","100%","margin-top","0.5rem","margin-bottom","0.5rem"],["id","account-drink-description-details",2,"width","100%","margin-top","0.5rem","margin-bottom","0.5rem"],["id","account-drink-price-details",2,"width","100%","margin-top","0.5rem","margin-bottom","0.5rem"],[1,"button2",2,"width","95%","height","2.5rem",3,"click"],["id","account-event-men\xf9",2,"position","absolute","z-index","999","height","100%","width","100%","display","none","flex-direction","column","align-items","center","justify-content","center","overflow-y","auto","overflow-x","hidden","background","rgba(0, 0, 0, 0.498)"],[2,"width","90%","height","25rem","border-radius","1rem","background","rgb(18, 18, 18)","display","flex","flex-direction","column","align-items","center","border-top","1px solid rgba(255, 255, 255, 0.084)"],[2,"width","100%","display","flex","align-items","center","justify-content","space-between","padding-right","1rem","padding-top","0.2rem","padding-bottom","0rem","padding-left","1rem"],["onclick","document.getElementById('account-event-men\xf9').style.display = 'none';","name","close-outline",2,"font-size","2rem"],[1,"button3",3,"click"],["onclick","alert('Funzione disponibile a breve')",1,"button3"],["id","account-drink-men\xf9",2,"position","absolute","z-index","999","height","100%","width","100%","display","none","flex-direction","column","align-items","center","justify-content","center","overflow-y","auto","overflow-x","hidden","background","rgba(0, 0, 0, 0.498)"],["onclick","document.getElementById('account-drink-men\xf9').style.display = 'none';","name","close-outline",2,"font-size","2rem"],["id","reserved-elements-men\xf9",2,"position","absolute","z-index","999","height","100%","width","100%","display","none","flex-direction","column","align-items","center","justify-content","center","overflow-y","auto","overflow-x","hidden","background","rgba(0, 0, 0, 0.498)"],["onclick","document.getElementById('reserved-elements-men\xf9').style.display = 'none';","name","close-outline",2,"font-size","2rem"],["onclick","document.getElementById('reserved-elements-men\xf9').style.display = 'none';",1,"button3"],["id","reserved-user-in-events",2,"position","absolute","z-index","999","height","100%","width","100%","display","none","flex-direction","column-reverse","overflow-y","auto","overflow-x","hidden","background","rgba(0, 0, 0, 0.498)"],[2,"width","100%","height","25rem","border-start-end-radius","1.5rem","border-start-start-radius","1.5rem","background","black","display","flex","flex-direction","column","align-items","center","border-top","1px solid rgba(255, 255, 255, 0.084)"],[2,"width","100%","display","flex","align-items","center","justify-content","space-between","padding-right","1rem","padding-top","1rem","padding-bottom","0rem","padding-left","1rem"],["onclick","document.getElementById('reserved-drinks').style.display = 'none'; ","name","close-outline",2,"font-size","2rem"],[2,"width","100%","overflow-x","hidden","overflow-y","auto"],["style","width: 100%; border-bottom: 1px solid rgba(255, 255, 255, 0.226); padding-left: 1rem; padding-top: 1rem;",4,"ngFor","ngForOf"],[1,"overflow1"],["id","spacer"],[2,"width","100%","margin-bottom","0.5rem","margin-top","0.5rem"],[2,"width","100%","border-radius","0.5rem","object-fit","contain","margin-top","0rem","object-fit","cover",3,"src"],[2,"margin-top","1rem","margin-bottom","0.5rem"],[1,"input1",2,"width","100%"],["name","person",2,"font-size","1.5rem","color","white","padding-left","0.5rem","padding-right","0.5rem"],["type","text","id","book-table-user-real-name","placeholder","Nome reale utente",1,"field1"],[1,"material-symbols-outlined","notranslate",2,"font-size","1.5rem","color","white","padding-left","0.5rem","padding-right","0.5rem"],["type","text","id","book-table-table-name","placeholder","Nome tavolo",1,"field1"],["type","text","id","book-table-phone","placeholder","Numero di telefono",1,"field1"],["name","people",2,"font-size","1.5rem","color","white","padding-left","0.5rem","padding-right","0.5rem"],["type","number","id","book-table-total-people",1,"field1"],[1,"button2",2,"width","100%","height","2.5rem","margin-top","1rem","margin-bottom","4rem",3,"click"],[2,"width","100%","margin-bottom","0rem"],[2,"width","100%","border-bottom","1px solid rgba(255, 255, 255, 0.082)"],[2,"width","100%","height","2.8rem","display","flex","flex-direction","row","align-items","center","justify-content","space-between"],["name","ellipsis-vertical",2,"font-size","1.8rem","padding-right","0.5rem"],[2,"margin-top","0rem","font-weight","200","max-height","5rem","overflow","hidden","padding-left","0.5rem"],[2,"padding-left","0.5rem","padding-top","0.5rem"],[2,"width","100%","height","2rem","display","flex","flex-direction","row","gap","0.8rem","margin-bottom","0.3rem"],["name","chatbubble-outline",2,"font-size","1.8rem"],[2,"width","48%","height","15rem","border-radius","0.5rem","margin-bottom","1rem","overflow","hidden","border","1px solid rgba(255, 255, 255, 0.082)"],[2,"width","100%","height","2.5rem","display","flex","flex-direction","row","align-items","center","justify-content","end"],["name","ellipsis-vertical",2,"font-size","1.5rem","padding-right","0.5rem",3,"click"],[2,"object-fit","cover","width","100%","height","50%",3,"click","src"],[2,"font-size","14px","margin-top","0.3rem"],[2,"width","100%","border-bottom","1px solid rgba(255, 255, 255, 0.226)","padding-left","1rem","padding-top","1rem"],[2,"display","flex","flex-direction","row","align-items","center"],["name","person-circle-outline",2,"font-size","1.8rem",3,"click"],[2,"display","flex","flex-direction","column","width","100%"],[2,"width","100%","margin-top","0.5rem","margin-bottom","0.5rem"]],template:function(r,i){1&r&&(b(0,"body",0)(1,"div",1)(2,"div",2)(3,"strong",3),P(4,"username"),T(),b(5,"div",4)(6,"ion-icon",5),Ze("click",function(){return i.goToChangeSelection()}),T()()(),b(7,"div",6)(8,"div",7),me(9,"img",8),b(10,"div",9)(11,"strong",10),P(12,"Name and surname"),T(),b(13,"div",11)(14,"div",9)(15,"p",12),P(16,"0"),T(),b(17,"p",13),P(18,"Followers"),T()(),b(19,"div",9)(20,"p",14),P(21,"0"),T(),b(22,"p",13),P(23,"Followings"),T()()()()(),me(24,"p",15),b(25,"div",16)(26,"button",17),me(27,"ion-icon",18),P(28,"Segui"),T(),b(29,"a",19),me(30,"ion-icon",20),P(31,"Messaggio"),T()()(),b(32,"div",21)(33,"div",22),Ze("click",function(){return i.getElements("events")}),me(34,"ion-icon",23),T(),b(35,"div",24),Ze("click",function(){return i.getAccountSpots()}),me(36,"ion-icon",25),T(),b(37,"div",26),Ze("click",function(){return i.getAccountCarPooling()}),me(38,"ion-icon",27),T(),b(39,"div",28),Ze("click",function(){return i.getAccountActivityInfo()}),b(40,"span",29),P(41,"chair"),T()(),b(42,"div",30),Ze("click",function(){return i.getDrinks()}),b(43,"span",29),P(44,"liquor"),T()()(),b(45,"div",31)(46,"h5",32),P(47,"Piantina del locale"),T(),Mn(48,X0e,30,2,"div",33),_o(49,"async"),T(),b(50,"div",34)(51,"h5",32),P(52,"Car-pooling"),T(),Mn(53,J0e,41,10,"div",33),_o(54,"async"),b(55,"button",35),P(56,"Prenota"),T()(),b(57,"div",36)(58,"h5",37),P(59,"Spot"),T(),Mn(60,Z0e,18,3,"div",38),_o(61,"async"),b(62,"button",39),Ze("click",function(){return i.getMoreAccountSpots()}),P(63,"Carica altri"),T()(),b(64,"div",40)(65,"h5",32),P(66,"Eventi"),T(),Mn(67,eIe,8,3,"div",41),_o(68,"async"),b(69,"button",42),Ze("click",function(){return i.getMoreElements()}),P(70,"Carica altri"),T()(),b(71,"div",43)(72,"h5",32),P(73,"Drink e Bottiglie"),T(),Mn(74,tIe,8,3,"div",41),_o(75,"async"),b(76,"button",42),Ze("click",function(){return i.getMoreDrinks()}),P(77,"Carica altri"),T()()(),P(78,"> "),b(79,"div",44)(80,"div",45)(81,"h3"),P(82,"Profilo"),T(),me(83,"ion-icon",46),T(),b(84,"button",47),me(85,"ion-icon",48),P(86,"Profilo"),T(),b(87,"button",49),me(88,"ion-icon",50),P(89,"Saldo"),T(),b(90,"button",51),me(91,"ion-icon",52),P(92,"Password"),T(),b(93,"button",53),me(94,"ion-icon",54),P(95,"Attivit\xe0"),T(),b(96,"button",55),me(97,"ion-icon",56),P(98,"La mia auto"),T(),b(99,"div",57)(100,"h3",58),P(101,"Prenotazioni"),T(),b(102,"button",59)(103,"span",60),P(104,"nightlife"),T(),P(105,"Eventi prenotati"),T(),b(106,"button",61)(107,"span",60),P(108,"chair"),T(),P(109,"Tavoli prenotati"),T(),b(110,"button",62)(111,"span",60),P(112,"liquor"),T(),P(113,"Drink e bottiglie prenotate"),T()(),b(114,"div",57)(115,"h3",58),P(116,"Legale"),T(),b(117,"a",63)(118,"span",60),P(119,"gavel"),T(),P(120,"Termini e condizioni"),T(),b(121,"a",64)(122,"span",60),P(123,"policy"),T(),P(124,"Privacy Policy"),T()(),b(125,"h3",58),P(126,"Azioni"),T(),b(127,"button",65),Ze("click",function(){return i.logout()}),me(128,"ion-icon",66),P(129,"Disconnetti"),T(),b(130,"button",65),Ze("click",function(){return i.deleteAccount()}),me(131,"ion-icon",67),P(132,"Elimina account"),T()(),b(133,"div",68)(134,"div",69),me(135,"h3",70)(136,"ion-icon",71),T(),me(137,"img",72),b(138,"div",73),me(139,"p",74),T(),me(140,"div",75),b(141,"div",76)(142,"button",77),P(143,"Prenota"),T()()(),b(144,"div",78)(145,"div",69),me(146,"h3",79)(147,"ion-icon",80),T(),me(148,"img",81),b(149,"div",82),me(150,"p",83)(151,"p",84)(152,"p",85),T(),me(153,"div",75),b(154,"div",76)(155,"button",86),Ze("click",function(){return i.reserveDrink()}),P(156,"Prenota"),T()()(),b(157,"div",87)(158,"div",88)(159,"div",89)(160,"h3"),P(161,"Azioni"),T(),me(162,"ion-icon",90),T(),b(163,"button",91),Ze("click",function(){return i.deleteEvent()}),P(164,"Elimina"),T(),b(165,"button",92),P(166,"Modifica"),T(),b(167,"button",92),P(168,"Condividi"),T()()(),b(169,"div",93)(170,"div",88)(171,"div",89)(172,"h3"),P(173,"Azioni"),T(),me(174,"ion-icon",94),T(),b(175,"button",91),Ze("click",function(){return i.deleteDrink()}),P(176,"Elimina"),T(),b(177,"button",92),P(178,"Modifica"),T(),b(179,"button",92),P(180,"Condividi"),T()()(),b(181,"div",95)(182,"div",88)(183,"div",89)(184,"h3"),P(185,"Selezione prenotazioni"),T(),me(186,"ion-icon",96),T(),b(187,"button",97),P(188,"Drink e bottiglie prenotate"),T(),b(189,"button",92),P(190,"Eventi prenotati"),T(),b(191,"button",92),P(192,"Tavoli prenotati"),T()()(),b(193,"div",98)(194,"div",99)(195,"div",100)(196,"h3"),P(197,"Scegli l'evento"),T(),me(198,"ion-icon",101),T(),b(199,"div",102),Mn(200,nIe,10,3,"div",103),T()()(),b(201,"div",104),me(202,"div",105)(203,"app-footer"),T()()),2&r&&(We(48),ln("ngForOf",vo(49,6,i.commercialActivityData$)),We(5),ln("ngForOf",vo(54,8,i.carPoolingData$)),We(7),ln("ngForOf",vo(61,10,i.spotsData$)),We(7),ln("ngForOf",vo(68,12,i.data$)),We(7),ln("ngForOf",vo(75,14,i.drinksData$)),We(126),ln("ngForOf",i.reservedDrinks))},dependencies:[Wc,Uo,Ma,$o,Al,qc]}),e})();function iIe(t,e){1&t&&me(0,"img",19),2&t&&ln("src",En().imageSrc,rs)}let oIe=(()=>{var t;class e{constructor(r,i,o,s,a){this.firestore=r,this.afAuth=i,this.firebaseService=o,this.storage=s,this.sharedFunctionsService=a,this.selectedImage=null,this.uploadProgress=null}ngOnInit(){const r=this.firebaseService.public_user_data,i=this.firebaseService.private_user_data;if(i){const o=document.getElementById("account-phone-number-change");i.phone&&(o.value=i.phone)}if(r){const o=document.getElementById("account-name-and-surname-change"),s=document.getElementById("account-username-change"),a=document.getElementById("account-description-change"),l=document.getElementById("account-image-change");o.value=r.name,s.value=r.username,r.imageUrl&&(l.src=r.imageUrl),r.description&&(a.value=r.description)}}onFileSelected(r){document.getElementById("changed-image-preview").style.display="flex";const i=r.target.files[0];if(i){const o=new FileReader;o.onload=s=>{this.imageSrc=s.target.result},o.readAsDataURL(i)}this.selectedImage=i}updateAccountDatas(){var r=this;return(0,_.A)(function*(){const i=document.getElementById("account-name-and-surname-change").value,o=document.getElementById("account-username-change").value,s=document.getElementById("account-description-change").value,a=document.getElementById("account-phone-number-change").value;r.afAuth.authState.subscribe(function(){var l=(0,_.A)(function*(c){if(c)try{const h={phone:a};if(r.selectedImage){const f=yield r.sharedFunctionsService.compressImage(r.selectedImage),w=r.storage.ref("account-images/").child("account-image-user-"+c.uid+"-time-"+(new Date).getTime()).put(f);w.percentageChanges().subscribe(Q=>{r.uploadProgress=Q});const N=yield(yield w).ref.getDownloadURL(),z={name:i,description:s,username:o,phone:a,imageUrl:N};yield r.firestore.collection("public_users_data").doc(c.uid).set(z,{merge:!0}),yield r.firestore.collection("private_users_data").doc(c.uid).set(h,{merge:!0})}else{const f={name:i,description:s,username:o};yield r.firestore.collection("public_users_data").doc(c.uid).set(f,{merge:!0}),yield r.firestore.collection("private_users_data").doc(c.uid).set(h,{merge:!0})}r.firebaseService.initialize(),alert("Dati dell'account aggiornati con successo")}catch(h){console.error("Si \xe8 verificato un errore durante l'aggiornamento dei dati dell'account:",h),alert("Si \xe8 verificato un errore durante l'aggiornamento dei dati dell'account"+h)}else alert("Per aggiornare i dati dell'account \xe8 necessario effettuare il login")});return function(c){return l.apply(this,arguments)}}())})()}}return(t=e).\u0275fac=function(r){return new(r||t)(E(ks),E(to),E(sa),E(By),E(uk))},t.\u0275cmp=et({type:t,selectors:[["app-change-account-data"]],decls:24,vars:1,consts:[[2,"height","100%","width","100%","display","flex","flex-direction","column","overflow-y","auto","overflow-x","hidden","background","black"],[1,"up_bar",2,"width","100%","display","flex","align-items","center","justify-content","start","padding-right","1rem","padding-top","1rem","padding-bottom","1rem","padding-left","1rem"],["routerLink","/account","name","chevron-back-outline",2,"font-size","2rem"],[2,"width","100%","display","flex","flex-direction","column","align-items","center","margin-bottom","2rem","margin-top","2rem"],["for","spot-image-input",2,"width","100%","display","flex","flex-direction","row","align-items","center","justify-content","center","padding-left","1rem","padding-right","1rem","margin-bottom","1rem"],["id","account-image-change",2,"width","8rem","height","8rem","object-fit","cover","border-radius","50%"],["id","changed-image-preview",2,"display","none","flex-direction","row","align-items","center"],["name","chevron-forward-outline",2,"font-size","2rem","margin-left","1rem"],["style","width: 8rem; height: 8rem; border-radius: 50%; margin-left: 1rem;",3,"src",4,"ngIf"],["id","spot-image-input","type","file","accept","image/*",2,"display","none","position","relative","width","100%","height","100%","z-index","1",3,"change"],[1,"input1",2,"margin-top","1rem","width","95%"],["src","assets\\img\\octicon_person-24 (1).png",1,"input1_img1"],["type","text","id","account-name-and-surname-change","placeholder","Nome e cognome",1,"field1"],["name","at-outline",2,"color","rgb(190, 190, 190)","font-size","1.5rem","margin-left","0.5rem","margin-right","0.5rem"],["type","text","id","account-username-change","placeholder","Username",1,"field1"],["name","call-outline",2,"color","rgb(190, 190, 190)","font-size","1.3rem","margin-left","0.5rem","margin-right","0.5rem"],["type","number","id","account-phone-number-change","placeholder","Numero di telefono",1,"field1"],["id","account-description-change","type","text","placeholder","Descrizione",1,"card3","field2",2,"width","95%","min-height","8rem","resize","vertical","background","rgb(114, 114, 114)","border-radius","1rem"],[1,"button2",2,"width","95%","height","3rem","margin-top","1rem",3,"click"],[2,"width","8rem","height","8rem","border-radius","50%","margin-left","1rem",3,"src"]],template:function(r,i){1&r&&(b(0,"div",0)(1,"div",1),me(2,"ion-icon",2),b(3,"h3"),P(4,"Profilo utente"),T()(),b(5,"div",3)(6,"label",4),me(7,"img",5),b(8,"div",6),me(9,"ion-icon",7),Mn(10,iIe,1,1,"img",8),T(),b(11,"input",9),Ze("change",function(s){return i.onFileSelected(s)}),T()(),b(12,"div",10),me(13,"img",11)(14,"input",12),T(),b(15,"div",10),me(16,"ion-icon",13)(17,"input",14),T(),b(18,"div",10),me(19,"ion-icon",15)(20,"input",16),T(),me(21,"textarea",17),b(22,"button",18),Ze("click",function(){return i.updateAccountDatas()}),P(23,"Applica"),T()()()),2&r&&(We(10),ln("ngIf",i.imageSrc))},dependencies:[il,Uo,Ma,$o]}),e})(),sIe=(()=>{var t;class e{constructor(r,i){this.afAuth=r,this.router=i}login(){const i=document.getElementById("login-email").value,s=document.getElementById("login-password").value;return this.afAuth.signInWithEmailAndPassword(i,s).then(()=>{alert("Login riuscito!"),this.router.navigate(["/home"])}).catch(a=>{alert("Errore durante il login: "+a.message)})}toRegister(){this.router.navigate(["/register"])}ngOnInit(){}}return(t=e).\u0275fac=function(r){return new(r||t)(E(to),E(lr))},t.\u0275cmp=et({type:t,selectors:[["app-login"]],decls:20,vars:0,consts:[["src","assets/img/extended_logo.jpg",2,"width","90%","height","20rem","object-fit","contain"],[1,"card1",2,"width","90%"],[1,"input1",2,"margin-top","1rem"],["src","assets\\img\\mdi_password-outline.png",1,"input1_img1"],["type","email","id","login-email","placeholder","Email",1,"field1"],["src","assets\\img\\octicon_person-24 (1).png",1,"input1_img1"],["type","password","id","login-password","placeholder","Password",1,"field1"],[1,"button1",2,"width","90%","margin-top","1rem","margin-bottom","1rem","justify-content","center","height","2.5rem",3,"click"],[1,"div1",2,"margin-left","0rem"],["src","assets/img/Vector.png"],[1,"general_paragraph1",2,"margin-left","0.5rem"],[2,"width","100%","text-align","center"],[2,"cursor","pointer",3,"click"],["routerLink","/change-password",2,"width","100%","text-align","center","margin-bottom","1rem"]],template:function(r,i){1&r&&(b(0,"body"),me(1,"img",0),b(2,"div",1)(3,"div",2),me(4,"img",3)(5,"input",4),T(),b(6,"div",2),me(7,"img",5)(8,"input",6),T(),b(9,"button",7),Ze("click",function(){return i.login()}),b(10,"div",8),me(11,"img",9),b(12,"p",10),P(13,"Login"),T()()()(),b(14,"p",11),P(15,"Non possiedi un account?"),b(16,"strong",12),Ze("click",function(){return i.toRegister()}),P(17,"Registrati"),T()(),b(18,"p",13),P(19,"Password dimenticata?"),T()())},dependencies:[Ma,$o]}),e})(),aIe=(()=>{var t;class e{constructor(r,i,o){this.afAuth=r,this.router=i,this.firestore=o}register(r){var i=this;return(0,_.A)(function*(){const s=document.getElementById("register-email").value;if("pro"==r)var a="pro";else a="normal";const c=document.getElementById("password1").value;if(c===document.getElementById("password2").value)try{const v=(yield i.afAuth.createUserWithEmailAndPassword(s,c)).user;if(v){const w=v.uid,N=document.getElementById("name_input1").value,Q=document.getElementById("username_input1").value,Ae=document.getElementById("phone_input1").value,Je=v.uid,mt={uid:w,name:N,username:Q,phone:Ae,type:a},Xt={uid:w,mail:s,phone:Ae};yield i.firestore.collection("public_users_data").doc(Je).set(mt),yield i.firestore.collection("private_users_data").doc(Je).set(Xt),console.log("Account registrato con successo"),i.router.navigate(["/home"])}else console.error("L'utente \xe8 null")}catch(m){alert("Errore durante la registrazione: "+m.message)}else alert("Le password inserite non corrispondono")})()}toLogin(){this.router.navigate(["/login"])}ngOnInit(){}}return(t=e).\u0275fac=function(r){return new(r||t)(E(to),E(lr),E(ks))},t.\u0275cmp=et({type:t,selectors:[["app-register"]],decls:37,vars:0,consts:[["src","assets/img/extended_logo.jpg",2,"height","18rem","object-fit","contain"],[1,"card1",2,"width","90%","margin-bottom","1.5rem"],[1,"input1",2,"margin-top","1rem"],["src","assets\\img\\octicon_person-24 (1).png",1,"input1_img1"],["id","name_input1","type","text","placeholder","Nome",1,"field1"],["id","username_input1","type","text","placeholder","Username",1,"field1"],["src","assets\\img\\mdi_password-outline.png",1,"input1_img1"],["id","register-email","type","email","placeholder","Email",1,"field1"],["id","phone_input1","type","number","placeholder","Cellulare",1,"field1"],["id","password1","type","password","placeholder","Password",1,"field1"],["id","password2","type","password","placeholder","Conferma Password",1,"field1"],[1,"button1",2,"width","90%","margin-top","1rem","margin-bottom","1rem","justify-content","center",3,"click"],[1,"div1",2,"margin-left","0rem"],["src","assets/img/Vector.png"],[1,"general_paragraph1",2,"margin-left","0.5rem"],[2,"width","100%","text-align","center","margin-top","0rem","margin-bottom","0rem"],[1,"button1",2,"width","90%","margin-top","1rem","margin-bottom","1rem","background","white",3,"click"],[1,"div1"],["src","assets/img/Vector (1).png"],[1,"general_paragraph1",2,"margin-left","0.5rem","color","black"],[2,"width","100%","text-align","center"],[2,"cursor","pointer",3,"click"]],template:function(r,i){1&r&&(b(0,"body"),me(1,"img",0),b(2,"div",1)(3,"div",2),me(4,"img",3)(5,"input",4),T(),b(6,"div",2),me(7,"img",3)(8,"input",5),T(),b(9,"div",2),me(10,"img",6)(11,"input",7),T(),b(12,"div",2),me(13,"img",3)(14,"input",8),T(),b(15,"div",2),me(16,"img",6)(17,"input",9),T(),b(18,"div",2),me(19,"img",6)(20,"input",10),T(),b(21,"button",11),Ze("click",function(){return i.register("normal")}),b(22,"div",12),me(23,"img",13),b(24,"p",14),P(25,"Registrati"),T()()(),b(26,"p",15),P(27,"Oppure:"),T(),b(28,"button",16),Ze("click",function(){return i.register("pro")}),b(29,"div",17),me(30,"img",18),b(31,"p",19),P(32,"Registrati come organizzatore"),T()()()(),b(33,"p",20),P(34,"Hai gi\xe0 un account?"),b(35,"strong",21),Ze("click",function(){return i.toLogin()}),P(36,"Accedi"),T()()())}}),e})(),lIe=(()=>{var t;class e{constructor(r){this.router=r}ngOnInit(){}toLogin(){this.router.navigate(["/login"])}toRegister(){this.router.navigate(["/register"])}}return(t=e).\u0275fac=function(r){return new(r||t)(E(lr))},t.\u0275cmp=et({type:t,selectors:[["app-log"]],decls:18,vars:0,consts:[["src","assets/img/extended_logo.jpg",2,"width","90%","height","20rem","object-fit","contain"],[1,"card1",2,"width","90%"],[1,"button1",2,"width","90%","margin-top","1rem",3,"click"],[1,"div1"],["src","assets/img/Vector.png"],[1,"general_paragraph1",2,"margin-left","0.5rem","color","white !important"],[1,"button1",2,"width","90%","margin-top","1rem","margin-bottom","1rem","background","white",3,"click"],["src","assets/img/Vector (1).png"],[1,"general_paragraph1",2,"margin-left","0.5rem","color","black"]],template:function(r,i){1&r&&(b(0,"body"),me(1,"img",0),b(2,"div",1)(3,"button",2),Ze("click",function(){return i.toLogin()}),b(4,"div",3),me(5,"img",4),b(6,"p",5),P(7,"Accedi al tuo account"),T()()(),b(8,"button",2),Ze("click",function(){return i.toRegister()}),b(9,"div",3),me(10,"img",4),b(11,"p",5),P(12,"Iscriviti come utente"),T()()(),b(13,"button",6),Ze("click",function(){return i.toRegister()}),b(14,"div",3),me(15,"img",7),b(16,"p",8),P(17,"Iscriviti come organizzatore"),T()()()()())},styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:start;font-family:Public Sans;background:#000;overflow-x:hidden;overflow-y:auto}.button1[_ngcontent-%COMP%]{font-family:Public Sans;background:#000;padding:.5rem;border-radius:.5rem;display:flex;flex-direction:row;align-items:center;justify-content:start}.div1[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-items:start;margin-left:2rem;height:100%}.card1[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;background:#474747;border-radius:1rem}"]}),e})();function cIe(t,e){if(1&t&&(b(0,"div",10)(1,"strong"),P(2),T(),b(3,"div",11)(4,"span",12),P(5,"airline_seat_recline_extra"),T(),b(6,"p",13),P(7),T()(),b(8,"div",14)(9,"span",12),P(10,"location_on"),T(),b(11,"p",13),P(12),T()(),b(13,"div",14)(14,"span",12),P(15,"directions_car"),T(),b(16,"p",13),P(17),T()(),b(18,"div",14)(19,"span",12),P(20,"palette"),T(),b(21,"p",13),P(22),T()(),b(23,"div",14)(24,"span",12),P(25,"blur_short"),T(),b(26,"p",13),P(27),T()(),b(28,"div",14)(29,"span",12),P(30,"more_horiz"),T(),b(31,"p",13),P(32),T()(),b(33,"div",14)(34,"span",12),P(35,"euro_symbol"),T(),b(36,"p",13),P(37),T()(),b(38,"div",15)(39,"a",16),P(40,"Contatta"),T()()()),2&t){const n=e.$implicit;We(2),Wt(n.name),We(5),mo("Posti disponibili: ",n.seats,""),We(5),mo("Zona: ",n.location,""),We(5),mo("Marchio/modello: ",n.brand_model,""),We(5),mo("Colore: ",n.color,""),We(5),mo("Tipologia: ",n.type,""),We(5),mo("Targa: ",n.signature,""),We(5),mo("Quota: ",n.money,"\u20ac"),We(2),tE("href","https://wa.me/+39",n.phone,"",rs)}}function uIe(t,e){if(1&t){const n=Ji();b(0,"button",17),Ze("click",function(){return rr(n),ir(En().loadOtherCarPoolers())}),P(1,"Carica altri"),T()}}let dIe=(()=>{var t;class e{constructor(r){this.firestore=r,this.data$=new ue([]),this.nextPageAvailable=!0}ngOnInit(){this.load3CarPoolers()}load3CarPoolers(){this.firestore.collection("car-pooling",r=>r.limit(3).where("available","==","available")).get().subscribe(r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));3===i.length?this.lastVisible=r.docs[r.docs.length-1]:this.nextPageAvailable=!1,this.data$.next(i)})}loadOtherCarPoolers(){this.lastVisible&&this.firestore.collection("car-pooling",r=>r.limit(3).where("available","==","available").startAfter(this.lastVisible)).get().subscribe(r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));if(i.length>0){const s=[...this.data$.getValue(),...i];this.data$.next(s),3===i.length?this.lastVisible=r.docs[r.docs.length-1]:this.nextPageAvailable=!1}else this.nextPageAvailable=!1})}}return(t=e).\u0275fac=function(r){return new(r||t)(E(ks))},t.\u0275cmp=et({type:t,selectors:[["app-car-pooling"]],decls:14,vars:4,consts:[[2,"width","100%","height","100%","display","flex","flex-direction","column","align-items","center","overflow-y","auto","padding-bottom","4rem"],[1,"up_bar",2,"width","100%","min-height","3.5rem","display","flex","flex-direction","row","align-items","center","justify-content","center"],[2,"width","100%","padding-left","1rem","font-size","1.6rem"],[1,"input1",2,"width","95%","margin-top","1rem","margin-bottom","1rem","min-height","2.5rem"],["type","text","id","","placeholder","Cerca",1,"field1"],["name","search",2,"color","rgb(190, 190, 190)","font-size","1.5rem","margin-left","0.5rem","margin-right","0.5rem"],["style","width: 100%; flex-direction: column; border-bottom: 1px solid rgba(255, 255, 255, 0.148); padding-left: 0.5rem; padding-bottom: 0.5rem; padding-top: 0.2rem;",4,"ngFor","ngForOf"],["class","button3",3,"click",4,"ngIf"],[1,"overflow1"],["id","spacer"],[2,"width","100%","flex-direction","column","border-bottom","1px solid rgba(255, 255, 255, 0.148)","padding-left","0.5rem","padding-bottom","0.5rem","padding-top","0.2rem"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","margin-top","0.5rem"],[1,"material-symbols-outlined","notranslate"],[2,"margin-top","0.2rem","margin-bottom","0.2rem"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","margin-top","0.2rem"],[2,"width","100%","display","flex","flex-direction","row","align-items","center","padding-top","0.5rem","gap","0.5rem"],["target","_blank",1,"button2",2,"padding-left","-0.5rem","height","2rem","text-decoration","none","color","white",3,"href"],[1,"button3",3,"click"]],template:function(r,i){1&r&&(b(0,"body")(1,"div",0)(2,"div",1)(3,"strong",2),P(4,"Car Pooling"),T()(),b(5,"div",3),me(6,"input",4)(7,"ion-icon",5),T(),Mn(8,cIe,41,10,"div",6),_o(9,"async"),Mn(10,uIe,2,0,"button",7),T(),b(11,"div",8),me(12,"div",9)(13,"app-footer"),T()()),2&r&&(We(8),ln("ngForOf",vo(9,2,i.data$)),We(2),ln("ngIf",i.nextPageAvailable))},dependencies:[Wc,il,Uo,Al,qc]}),e})();function hIe(t,e){if(1&t){const n=Ji();b(0,"div",38)(1,"strong",39),P(2,"Dove:"),T(),b(3,"p",40),P(4),T(),b(5,"strong",39),P(6,"Quando:"),T(),b(7,"p",40),P(8),T(),b(9,"strong",39),P(10,"Descrizione:"),T(),b(11,"p",40),P(12),T(),b(13,"div",41)(14,"div",42)(15,"ion-icon",43),Ze("click",function(){const i=rr(n).$implicit;return ir(En().showSpotComments(i))}),T()()()()}if(2&t){const n=e.$implicit,r=En();We(4),Wt(n.where),We(4),Wt(r.formatDate(n.datetime)),We(4),Wt(n.description)}}function fIe(t,e){if(1&t){const n=Ji();b(0,"div",44)(1,"div",45)(2,"ion-icon",46),Ze("click",function(){const i=rr(n).$implicit;return ir(En().goToPostAccount(i))}),T(),b(3,"strong"),P(4),T()(),b(5,"p",47),P(6),T()()}if(2&t){const n=e.$implicit;We(4),Wt(n.creator_name),We(2),Wt(n.text)}}let pIe=(()=>{var t;class e{constructor(r,i,o,s){this.firestore=r,this.firebaseService=i,this.router=o,this.afAuth=s,this.comments=[],this.newComment=""}ngOnInit(){this.documents=this.firestore.collection("spots").valueChanges({idField:"id"}).pipe(xt(r=>r.map(i=>({id:i.id,...i}))))}formatDate(r){const i=new Date(r);return`${i.getDate()}/${i.getMonth()+1}/${i.getFullYear()} alle ${i.getHours()}:${i.getMinutes()}`}showDetails(r){document.getElementById("post-details").style.display="flex",document.getElementById("post-img-details").src=r.imageUrl,document.getElementById("post-title-details").innerHTML=r.title,document.getElementById("post-description-details").innerHTML=r.description}goToAccountFromSpot(r){this.router.navigate(["/account"],{queryParams:{uid:r}})}getAllSpots(){this.documents=this.firestore.collection("spots").valueChanges({idField:"id"}).pipe(xt(r=>r.map(i=>({id:i.id,...i}))))}getTodaySpots(){const r=new Date;r.setHours(0,0,0,0),this.firestore.collection("spots",i=>i.where("datetime",">=",r).where("datetime","<=",r)).get().subscribe(i=>{const o=i.docs.map(s=>({id:s.id,...s.data()}));this.documents=Kt(o)})}addLikeToSpot(r){this.firebaseService.addLikeToSpot(r)}goToPostAccount(r){this.router.navigate(["/account"],{queryParams:{uid:r.creator_id}})}showSpotComments(r){document.getElementById("spot_comments").style.display="flex",this.currentSpot=r,Dn.A.database().ref("spots_comments/"+r.id+"/").once("value").then(o=>{this.comments.splice(0),o.forEach(s=>{const a=s.val();this.comments.push(a)})})}addComment(){var r=this;this.afAuth.authState.subscribe(function(){var i=(0,_.A)(function*(o){o?(Dn.A.database().ref("spots_comments/"+r.currentSpot.id+"/"+o.uid).set({text:r.newComment,creator_id:o.uid,creator_name:r.firebaseService.public_user_data.name,timestamp:(new Date).getTime()}),r.comments.push({text:r.newComment}),r.newComment=""):alert("Per pubblicare un commento devi essere loggato")});return function(o){return i.apply(this,arguments)}}())}}return(t=e).\u0275fac=function(r){return new(r||t)(E(ks),E(sa),E(lr),E(to))},t.\u0275cmp=et({type:t,selectors:[["app-spot"]],decls:59,vars:5,consts:[[1,"body1"],[2,"width","100%","height","100%","display","flex","flex-direction","column","align-items","center","padding-bottom","3.5rem","overflow-y","auto"],[1,"up_bar",2,"width","100%","min-height","6.5rem","display","flex","flex-direction","column","align-items","center","overflow","hidden","margin-bottom","1rem"],[2,"width","100%","padding-left","0.5rem","margin-top","0.5rem","margin-bottom","0rem","display","flex","flex-direction","row","align-items","center"],["src","assets\\img\\icon-logo.jpg","alt","",2,"width","2.5rem","height","2.5rem","object-fit","contain"],[1,"notranslate",2,"font-size","1.6rem","padding-top","0.4rem","padding-left","0.2rem"],[2,"flex","1"],["routerLink","/search","name","search",2,"font-size","1.8rem"],["routerLink","/notifications","name","notifications",2,"font-size","1.8rem","padding-right","0.5rem","padding-left","0.5rem"],[2,"width","100%","height","3rem","display","flex","flex-direction","row","align-items","center","justify-content","space-evenly"],[3,"click"],[2,"background","rgba(255, 255, 255, 0.082)","width","1px","height","70%"],["style","width: 95%; border: 1px solid rgba(255, 255, 255, 0.221); padding-top: 1rem; border-radius: 1rem; margin-bottom: 1rem;",4,"ngFor","ngForOf"],[1,"overflow1"],["id","spacer"],["id","post-details",2,"position","absolute","z-index","999","height","100%","width","100%","display","none","flex-direction","column","overflow-y","auto","overflow-x","hidden","background","black"],[2,"width","100%","display","flex","align-items","center","justify-content","space-between","padding-right","1rem","padding-top","1rem","padding-bottom","1rem","padding-left","1rem"],["id","post-title-details"],["onclick","document.getElementById('post-details').style.display = 'none'; ","name","close-outline",2,"font-size","2rem"],[2,"width","100%","display","flex","align-items","center","justify-content","center","padding-left","1rem","padding-right","1rem"],["id","post-img-details",2,"width","100%"],[2,"width","100%","display","flex","padding-left","1rem"],["id","post-description-details"],[2,"width","100%","display","flex","flex-direction","column","align-items","center","margin-bottom","2rem"],["onclick","document.getElementById('reserve-details').style.display = 'flex'; ",1,"button2",2,"width","95%","height","2.5rem"],["id","reserve-details",2,"position","absolute","z-index","1000","height","100%","width","100%","display","none","flex-direction","column","overflow-y","auto","overflow-x","hidden","background","black"],["onclick","document.getElementById('reserve-details').style.display = 'none'; ","name","close-outline",2,"font-size","2rem"],[1,"button2",2,"width","95%","height","2.5rem"],["id","spot_comments",2,"position","absolute","z-index","999","height","100%","width","100%","display","none","flex-direction","column-reverse","overflow-y","auto","overflow-x","hidden","background","rgba(0, 0, 0, 0.498)"],[2,"width","100%","height","25rem","border-start-end-radius","1.5rem","border-start-start-radius","1.5rem","background","black","display","flex","flex-direction","column","align-items","center","border-top","1px solid rgba(255, 255, 255, 0.084)"],[2,"width","100%","display","flex","align-items","center","justify-content","space-between","padding-right","1rem","padding-top","1rem","padding-bottom","0rem","padding-left","1rem"],["onclick","document.getElementById('spot_comments').style.display = 'none';","name","close-outline",2,"font-size","2rem"],[2,"padding-left","1rem","padding-right","1rem","font-size","14px"],[2,"width","100%","overflow-x","hidden","overflow-y","auto"],["style","width: 100%; border-bottom: 1px solid rgba(255, 255, 255, 0.226); padding-left: 1rem; padding-top: 1rem;",4,"ngFor","ngForOf"],[1,"input1",2,"margin-top","1rem","width","95%","padding-left","0.5rem","padding-right","0.5rem","margin-bottom","0.5rem"],["type","text","id","comment-input","placeholder","Cosa ne pensi?",1,"field1",2,"border-radius","2rem","height","4rem",3,"ngModelChange","ngModel"],[1,"material-symbols-outlined","notranslate",3,"click"],[2,"width","95%","border","1px solid rgba(255, 255, 255, 0.221)","padding-top","1rem","border-radius","1rem","margin-bottom","1rem"],[2,"width","100%","padding-left","0.5rem"],[2,"margin-top","0rem","font-weight","200","max-height","5rem","overflow","hidden","padding-left","0.5rem"],[2,"padding-left","0.5rem","padding-top","0.5rem"],[2,"width","100%","height","2rem","display","flex","flex-direction","row","gap","0.8rem","margin-bottom","0.3rem"],["name","chatbubble-outline",2,"font-size","1.8rem",3,"click"],[2,"width","100%","border-bottom","1px solid rgba(255, 255, 255, 0.226)","padding-left","1rem","padding-top","1rem"],[2,"display","flex","flex-direction","row","align-items","center"],["name","person-circle-outline",2,"font-size","1.8rem",3,"click"],[2,"margin-top","0.5rem"]],template:function(r,i){1&r&&(b(0,"body",0)(1,"div",1)(2,"div",2)(3,"div",3),me(4,"img",4),b(5,"strong",5),P(6,"Spot"),T(),me(7,"div",6)(8,"ion-icon",7)(9,"ion-icon",8),T(),b(10,"div",9)(11,"strong",10),Ze("click",function(){return i.getAllSpots()}),P(12,"Tutti"),T(),me(13,"div",11),b(14,"strong",10),Ze("click",function(){return i.getTodaySpots()}),P(15,"Oggi"),T()()(),Mn(16,hIe,16,3,"div",12),_o(17,"async"),T(),b(18,"div",13),me(19,"div",14)(20,"app-footer"),T(),b(21,"div",15)(22,"div",16),me(23,"h3",17)(24,"ion-icon",18),T(),b(25,"div",19),me(26,"img",20),T(),b(27,"div",21),me(28,"p",22),T(),b(29,"div",23)(30,"button",24),P(31,"Prenota"),T()()(),b(32,"div",25)(33,"div",16)(34,"h3"),P(35,"Prenota l'evento"),T(),me(36,"ion-icon",26),T(),b(37,"div",19),me(38,"img",20),T(),b(39,"div",21),me(40,"p",22),T(),b(41,"div",23)(42,"button",27),P(43,"Conferma"),T()()(),b(44,"div",28)(45,"div",29)(46,"div",30)(47,"h3"),P(48,"Commenti"),T(),me(49,"ion-icon",31),T(),b(50,"p",32),P(51,"Ricorda di mantenere un tono educato quando pubblichi un commento, per modificare un commento basta scriverne uno nuovo"),T(),b(52,"div",33),Mn(53,fIe,7,2,"div",34),T(),me(54,"div",6),b(55,"div",35)(56,"input",36),rE("ngModelChange",function(s){return sD(i.newComment,s)||(i.newComment=s),s}),T(),b(57,"span",37),Ze("click",function(){return i.addComment()}),P(58,"send"),T()()()()()),2&r&&(We(16),ln("ngForOf",vo(17,3,i.documents)),We(37),ln("ngForOf",i.comments),We(3),nE("ngModel",i.newComment))},dependencies:[Wc,Uo,Ma,$o,C_,uS,UE,Al,qc]}),e})();function gIe(t,e){1&t&&me(0,"img",17),2&t&&ln("src",En().imageSrc,rs)}let mIe=(()=>{var t;class e{constructor(r,i,o,s,a){this.firestore=r,this.afAuth=i,this.firebaseService=o,this.storage=s,this.sharedFunctionsService=a,this.selectedImage=null,this.imageUrl=null,this.uploadProgress=null}ngOnInit(){}onFileSelected(r){const i=r.target.files[0];if(i){const o=new FileReader;o.onload=s=>{this.imageSrc=s.target.result},o.readAsDataURL(i)}this.selectedImage=i}saveActivityDatas(){var r=this,i=document.getElementById("account-local-total-seats-input").value,o=document.getElementById("account-local-status-selector").value;this.afAuth.authState.subscribe(function(){var a=(0,_.A)(function*(l){if(l)if(r.selectedImage)try{const c=yield r.sharedFunctionsService.compressImage(r.selectedImage),m=r.storage.ref("commercial_activity-images/").child("activity-user-"+l.uid+"-time-"+(new Date).getTime()).put(c);m.percentageChanges().subscribe(N=>{r.uploadProgress=N});const w=yield(yield m).ref.getDownloadURL(),R={creator_id:l.uid,seats_number:i,status:o,imageUrl:w,timestamp:Dn.A.firestore.FieldValue.serverTimestamp()};r.firestore.collection("places_datas").doc(l.uid).set(R,{merge:!0}).then(()=>{alert("Dati del locale salvati con successo")}).catch(N=>{alert("Errore durante l'aggiunta deli dati del locale: "+N.message.toString())})}catch(c){console.error("Errore durante il caricamento dell'immagine:",c)}else alert("Nessuna immagine selezionata");else alert("Per salvare le informazioni del proprio locale \xe8 necessario effettuare il login o la registrazione")});return function(l){return a.apply(this,arguments)}}())}}return(t=e).\u0275fac=function(r){return new(r||t)(E(ks),E(to),E(sa),E(By),E(uk))},t.\u0275cmp=et({type:t,selectors:[["app-change-place-data"]],decls:27,vars:1,consts:[["id","my-seats-container",2,"height","100%","width","100%","display","flex","flex-direction","column","overflow-y","auto","overflow-x","hidden","background","black","align-items","center"],[1,"up_bar",2,"width","100%","display","flex","align-items","center","justify-content","start","padding-right","1rem","padding-top","1rem","padding-bottom","1rem","padding-left","1rem"],["routerLink","/account","name","chevron-back-outline",2,"font-size","2rem"],[1,"card1",2,"width","95%","padding-top","0.5rem","padding-bottom","1rem","margin-top","3rem"],["style","width: 90%; height: 8rem; object-fit: contain; margin-top: 1rem;",3,"src",4,"ngIf"],["for","local-seats-image-input",1,"card3",2,"width","90%","display","flex","flex-direction","row","align-items","center","justify-content","center","overflow","hidden","height","4rem"],["src","assets\\img\\material-symbols_perm-media.svg",2,"width","1.5rem","height","1.5rem","margin-right","0.2rem"],["id","local-seats-image-input","type","file","accept","image/*",2,"display","none","position","relative","width","100%","height","100%","pointer-events","all","z-index","1",3,"change"],[2,"color","#FFFFFF80"],["for","account-total-seats-input",2,"width","100%","padding-left","0.5rem","margin-top","1rem"],[1,"input1",2,"margin-top","0rem","width","95%","padding-left","0.5rem","margin-top","0.5rem"],[1,"material-symbols-outlined","notranslate"],["type","number","id","account-local-total-seats-input","placeholder","Numero di posti totali",1,"field1"],["id","account-local-status-selector",1,"input1",2,"width","95%","margin-top","0.5rem"],["value","open"],["value","closed"],[1,"button2",2,"width","95%","height","2.5rem","margin-top","1rem",3,"click"],[2,"width","90%","height","8rem","object-fit","contain","margin-top","1rem",3,"src"]],template:function(r,i){1&r&&(b(0,"div",0)(1,"div",1),me(2,"ion-icon",2),b(3,"h3"),P(4,"La mia attivit\xe0"),T()(),b(5,"div",3),Mn(6,gIe,1,1,"img",4),b(7,"label",5),me(8,"img",6),b(9,"input",7),Ze("change",function(s){return i.onFileSelected(s)}),T(),b(10,"p",8),P(11,"Seleziona piantina locale"),T()(),b(12,"label",9),P(13,"Numero di posti totali"),T(),b(14,"div",10)(15,"span",11),P(16,"chair"),T(),me(17,"input",12),T(),b(18,"label",9),P(19,"Stato del locale"),T(),b(20,"select",13)(21,"option",14),P(22,"In attivit\xe0"),T(),b(23,"option",15),P(24,"Chiuso"),T()(),b(25,"button",16),Ze("click",function(){return i.saveActivityDatas()}),P(26,"Salva"),T()()()),2&r&&(We(6),ln("ngIf",i.imageSrc))},dependencies:[il,Uo,Ma,$o,AS,SS]}),e})(),_Ie=(()=>{var t;class e{constructor(r,i,o){this.firestore=r,this.afAuth=i,this.firebaseService=o}ngOnInit(){var r=this.firebaseService.private_user_data,i=document.getElementById("account-car-pooling-name-input"),o=document.getElementById("account-car-pooling-phone-input");r.phone&&(o.value=r.phone),r.name&&(i.value=r.name)}saveCarPooling(){var r=document.getElementById("account-car-pooling-seats-input"),i=document.getElementById("account-car-pooling-location-input"),o=document.getElementById("account-car-pooling-brand-model-input"),s=document.getElementById("account-car-pooling-color-input"),a=document.getElementById("account-car-pooling-type-input"),l=document.getElementById("account-car-pooling-car-signature-input"),c=document.getElementById("account-car-pooling-money-input"),h=document.getElementById("account-car-pooling-phone-input"),f=document.getElementById("account-car-pooling-name-input"),m=document.getElementById("car-pooling-available-selector");const v={seats:r.value,location:i.value,brand_model:o.value,color:s.value,type:a.value,signature:l.value,money:c.value,phone:h.value,name:f.value,available:m.value,timestamp:Dn.A.firestore.FieldValue.serverTimestamp()};this.afAuth.authState.subscribe(w=>{w&&this.firestore.collection("car-pooling").doc(w.uid).set(v,{merge:!0}).then(()=>{alert("Car pooling salvato con successo")}).catch(R=>{console.error("Errore durante il salvataggio del car pooling:",R)})})}}return(t=e).\u0275fac=function(r){return new(r||t)(E(ks),E(to),E(sa))},t.\u0275cmp=et({type:t,selectors:[["app-change-car-pooling"]],decls:49,vars:0,consts:[[2,"height","100%","width","100%","display","flex","flex-direction","column","overflow-y","auto","overflow-x","hidden","background","black","align-items","center"],[1,"up_bar",2,"width","100%","display","flex","align-items","center","justify-content","start","padding-right","1rem","padding-top","1rem","padding-bottom","1rem","padding-left","1rem"],["routerLink","/account","name","chevron-back-outline",2,"font-size","2rem"],[1,"card1",2,"width","95%","padding-top","0.5rem","padding-bottom","1rem","margin-top","1rem","margin-bottom","1rem"],[1,"input1",2,"margin-top","0rem","width","95%","padding-left","0.5rem"],[1,"material-symbols-outlined","notranslate"],["type","text","id","account-car-pooling-name-input","placeholder","Nome e Cognome",1,"field1"],[1,"input1",2,"margin-top","0rem","width","95%","padding-left","0.5rem","margin-top","0.5rem"],["type","number","id","account-car-pooling-seats-input","placeholder","Posti disponibili",1,"field1"],["type","text","id","account-car-pooling-location-input","placeholder","Zona",1,"field1"],["type","text","id","account-car-pooling-brand-model-input","placeholder","Marchio/modello",1,"field1"],["type","text","id","account-car-pooling-color-input","placeholder","Colore",1,"field1"],["type","text","id","account-car-pooling-type-input","placeholder","Tipologia",1,"field1"],["type","text","id","account-car-pooling-car-signature-input","placeholder","Targa",1,"field1"],["type","number","id","account-car-pooling-phone-input","placeholder","Numero di telefono contatto",1,"field1"],["type","number","id","account-car-pooling-money-input","placeholder","Quota",1,"field1"],["id","car-pooling-available-selector",1,"input1",2,"width","95%","margin-top","0.5rem"],["value","not-available"],["value","available"],[1,"button2",2,"width","95%","height","2.5rem","margin-top","1rem",3,"click"]],template:function(r,i){1&r&&(b(0,"div",0)(1,"div",1),me(2,"ion-icon",2),b(3,"h3"),P(4,"La mia auto"),T()(),b(5,"div",3)(6,"div",4)(7,"span",5),P(8,"person"),T(),me(9,"input",6),T(),b(10,"div",7)(11,"span",5),P(12,"airline_seat_recline_extra"),T(),me(13,"input",8),T(),b(14,"div",7)(15,"span",5),P(16,"location_on"),T(),me(17,"input",9),T(),b(18,"div",7)(19,"span",5),P(20,"directions_car"),T(),me(21,"input",10),T(),b(22,"div",7)(23,"span",5),P(24,"palette"),T(),me(25,"input",11),T(),b(26,"div",7)(27,"span",5),P(28,"blur_short"),T(),me(29,"input",12),T(),b(30,"div",7)(31,"span",5),P(32,"more_horiz"),T(),me(33,"input",13),T(),b(34,"div",7)(35,"span",5),P(36,"phone"),T(),me(37,"input",14),T(),b(38,"div",7)(39,"span",5),P(40,"euro_symbol"),T(),me(41,"input",15),T(),b(42,"select",16)(43,"option",17),P(44,"Non disponibile"),T(),b(45,"option",18),P(46,"Disponibile"),T()(),b(47,"button",19),Ze("click",function(){return i.saveCarPooling()}),P(48,"Salva"),T()()())},dependencies:[Uo,Ma,$o,AS,SS]}),e})(),vIe=(()=>{var t;class e{constructor(){}ngOnInit(){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=et({type:t,selectors:[["app-balance"]],decls:17,vars:0,consts:[[1,"up_bar",2,"width","100%","display","flex","align-items","center","justify-content","start","padding-right","1rem","padding-top","1rem","padding-bottom","1rem","padding-left","1rem"],["routerLink","/account","name","chevron-back-outline",2,"font-size","2rem"],[2,"width","100%","height","100%","display","flex","flex-direction","column","align-items","center","padding-top","1rem","padding-bottom","5rem"],[2,"height","10rem","width","90%","background","rgb(19, 19, 19)","border-radius","1rem"],[2,"padding-left","1rem"],[2,"flex","1"],[1,"button2",2,"height","2.5rem","width","90%"],[1,"overflow1"],["id","spacer"]],template:function(r,i){1&r&&(b(0,"div",0),me(1,"ion-icon",1),b(2,"h3"),P(3,"Saldo"),T()(),b(4,"div",2)(5,"div",3)(6,"div",4)(7,"h3"),P(8,"Disponibilit\xe0"),T(),b(9,"h2"),P(10,"\u20ac0"),T()()(),me(11,"div",5),b(12,"button",6),P(13,"Ritira"),T()(),b(14,"div",7),me(15,"div",8)(16,"app-footer"),T())},dependencies:[Uo,Ma,$o,Al]}),e})(),yIe=(()=>{var t;class e{constructor(){}ngOnInit(){}changePassword(){var r=document.getElementById("change-password-email-input").value;Dn.A.auth().sendPasswordResetEmail(r).then(()=>{alert("Email di conferma inviata, controllare anche la casella spam se non si nota nessuna email in arrivo")}).catch(o=>{alert("Errore durante l'invio dell'email di conferma: "+o.message)})}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=et({type:t,selectors:[["app-password-change"]],decls:14,vars:0,consts:[[2,"width","100%","height","100%","display","flex","flex-direction","column","overflow-x","hidden","overflow-y","auto","align-items","center"],[2,"flex","1"],[2,"width","95%","display","flex","flex-direction","column","align-items","center","padding-top","0.2rem","padding-bottom","0.2rem","background","rgb(16, 16, 16)","border-radius","1rem","border","1px solid rgba(255, 255, 255, 0.058)"],[1,"input1",2,"margin-top","1rem","flex-shrink","0"],["name","mail-outline",2,"font-size","1.5rem","color","white","margin-left","0.5rem","margin-right","0.5rem"],["type","text","id","change-password-email-input","placeholder","Indirizzo email",1,"field1"],[2,"width","90%","color","white"],[1,"button1",2,"width","90%","margin-top","1rem","margin-bottom","1rem","justify-content","center","height","2.5rem","background","#950DE8",3,"click"],[1,"div1",2,"margin-left","0rem"],["name","send",2,"font-size","1.5rem","color","white"],[1,"general_paragraph1",2,"margin-left","0.5rem"]],template:function(r,i){1&r&&(b(0,"div",0),me(1,"div",1),b(2,"div",2)(3,"div",3),me(4,"ion-icon",4)(5,"input",5),T(),b(6,"p",6),P(7,"Hai dimenticato la tua password oppure \xe8 arrivato il momento di cambiarla? Inserisci qui la mail e conferma per continuare"),T(),b(8,"button",7),Ze("click",function(){return i.changePassword()}),b(9,"div",8),me(10,"ion-icon",9),b(11,"p",10),P(12,"Conferma"),T()()()(),me(13,"div",1),T())},dependencies:[Uo]}),e})();var dk=F(8314);function IIe(t,e){1&t&&me(0,"img",2),2&t&&ln("src",En().qrCodeDataUrl,rs)}let EIe=(()=>{var t;class e{constructor(){}ngOnInit(){}generateQRCode(){dk.dY("www.google.com",{margin:2,scale:10,version:1}).then(i=>{this.qrCodeDataUrl=i}).catch(i=>{console.error("Error generating QR code:",i)})}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=et({type:t,selectors:[["app-validate"]],decls:3,vars:1,consts:[[3,"click"],["alt","QR Code",3,"src",4,"ngIf"],["alt","QR Code",3,"src"]],template:function(r,i){1&r&&(b(0,"button",0),Ze("click",function(){return i.generateQRCode()}),P(1,"Generate QR Code"),T(),Mn(2,IIe,1,1,"img",1)),2&r&&(We(2),ln("ngIf",i.qrCodeDataUrl))},dependencies:[il]}),e})();function wIe(t,e){if(1&t){const n=Ji();b(0,"div",19)(1,"div",20)(2,"h3",21),P(3,"Evento: "),b(4,"strong"),P(5),T()(),b(6,"p",22),P(7,"Prezzo: "),b(8,"strong"),P(9),T()(),b(10,"p",22),P(11,"ID evento: "),b(12,"strong"),P(13),T()(),b(14,"div",23),me(15,"div",24),T(),b(16,"button",25),Ze("click",function(){const i=rr(n).$implicit;return ir(En().proEventDetails(i))}),me(17,"ion-icon",26),P(18,"Visualizza elenco prenotazioni"),T()()()}if(2&t){const n=e.$implicit;We(5),Wt(n.title),We(4),l_("\u20ac",n.price," (",n.paid_type,")"),We(4),Wt(n.id)}}function bIe(t,e){if(1&t&&(b(0,"div",19)(1,"div",20)(2,"h3",21),P(3,"Evento: "),b(4,"strong"),P(5),T()(),b(6,"p",27),P(7,"Nominativo: "),b(8,"strong"),P(9),T()(),b(10,"p",28),P(11,"Prezzo: "),b(12,"strong"),P(13),T()(),b(14,"p",22),P(15,"ID prenotazione: "),b(16,"strong"),P(17),T()(),b(18,"div",23),me(19,"div",24),T(),b(20,"button",29),me(21,"ion-icon",30),P(22,"Annulla prenotazione"),T()()()),2&t){const n=e.$implicit;We(5),Wt(n.event_title),We(4),Wt(n.user_name),We(4),l_("\u20ac",n.price," (",n.paid_type,")"),We(4),Wt(n.id)}}function CIe(t,e){if(1&t){const n=Ji();b(0,"div",19)(1,"div",20)(2,"h3",21),P(3,"Evento: "),b(4,"strong"),P(5),T()(),b(6,"p",27),P(7,"Nominativo: "),b(8,"strong"),P(9),T()(),b(10,"p",28),P(11,"Prezzo: "),b(12,"strong"),P(13),T()(),b(14,"p",22),P(15,"ID prenotazione: "),b(16,"strong"),P(17),T()(),b(18,"div",23),me(19,"div",24),T(),b(20,"button",25),Ze("click",function(){const i=rr(n).$implicit;return ir(En().generateQRCode(i))}),me(21,"ion-icon",31),P(22,"QRcode"),T(),b(23,"button",29),me(24,"ion-icon",30),P(25,"Annulla prenotazione"),T()()()}if(2&t){const n=e.$implicit;We(5),Wt(n.event_title),We(4),Wt(n.user_name),We(4),l_("\u20ac",n.price," (",n.paid_type,")"),We(4),Wt(n.id)}}function TIe(t,e){1&t&&me(0,"img",32),2&t&&ln("src",En().qrCodeDataUrl,rs)}let AIe=(()=>{var t;class e{constructor(r,i,o,s,a){this.firestore=r,this.firebaseService=i,this.router=o,this.afAuth=s,this.location=a,this.documents=new ue([]),this.nextPageAvailable=!0,this.eventBookingDocuments=new ue([])}ngOnInit(){"pro"==this.firebaseService.public_user_data.type?(document.getElementById("pro-booked-events").style.display="flex",document.getElementById("normal-booked-events").style.display="none",this.getMyEvents()):(document.getElementById("pro-booked-events").style.display="none",document.getElementById("normal-booked-events").style.display="flex",this.getNormalEvents())}goBack(){this.location.back()}getMyEvents(){this.afAuth.authState.subscribe(r=>{r&&(this.currentFetchingEventType="all",this.firestore.collection("events",i=>i.where("creator_id","==",r.uid).orderBy("timestamp","desc").limit(2)).get().subscribe(i=>{const o=i.docs.map(s=>({id:s.id,...s.data()}));2===o.length?this.lastVisible=i.docs[i.docs.length-1]:this.nextPageAvailable=!1,this.documents.next(o)}))})}getMoreMyEvents(){this.afAuth.authState.subscribe(r=>{if(r){if(!this.lastVisible)return;this.firestore.collection("events",i=>i.where("creator_id","==",r.uid).orderBy("timestamp","desc").limit(2).startAfter(this.lastVisible)).get().subscribe(i=>{const o=i.docs.map(s=>({id:s.id,...s.data()}));if(o.length>0){const a=[...this.documents.getValue(),...o];this.documents.next(a),2===o.length?this.lastVisible=i.docs[i.docs.length-1]:this.nextPageAvailable=!1}else this.nextPageAvailable=!1})}})}proEventDetails(r){document.getElementById("booked-pro-event-details").style.display="flex",document.getElementById("current-pro-event-details-booking-id").innerText="ID evento: "+r.id,this.getEventBookings(r),this.currentEvent=r}getEventBookings(r){this.afAuth.authState.subscribe(i=>{i&&(this.currentFetchingEventType="all",this.firestore.collection("booked_events",o=>o.orderBy("booking_time","desc").where("event_creator_id","==",i.uid).where("event_id","==",r.id).limit(2)).get().subscribe(o=>{const s=o.docs.map(a=>({id:a.id,...a.data()}));2===s.length?this.lastVisible=o.docs[o.docs.length-1]:this.nextPageAvailable=!1,this.eventBookingDocuments.next(s)}))})}getMoreEventBookings(){this.afAuth.authState.subscribe(r=>{if(r){if(!this.lastVisible)return;this.firestore.collection("booked_events",i=>i.where("event_creator_id","==",r.uid).where("event_id","==",this.currentEvent.id).limit(2).startAfter(this.lastVisible)).get().subscribe(i=>{const o=i.docs.map(s=>({id:s.id,...s.data()}));if(o.length>0){const a=[...this.eventBookingDocuments.getValue(),...o];this.eventBookingDocuments.next(a),2===o.length?this.lastVisible=i.docs[i.docs.length-1]:this.nextPageAvailable=!1}else this.nextPageAvailable=!1})}})}getNormalEvents(){this.afAuth.authState.subscribe(r=>{r&&(this.currentFetchingEventType="all",this.firestore.collection("booked_events",i=>i.where("uid","==",r.uid).orderBy("booking_time","desc").limit(2)).get().subscribe(i=>{const o=i.docs.map(s=>({id:s.id,...s.data()}));2===o.length?this.lastVisible=i.docs[i.docs.length-1]:this.nextPageAvailable=!1,this.documents.next(o)}))})}getMoreNormalEvents(){this.afAuth.authState.subscribe(r=>{if(r){if(!this.lastVisible)return;this.firestore.collection("booked_events",i=>i.where("uid","==",r.uid).orderBy("booking_time","desc").limit(2).startAfter(this.lastVisible)).get().subscribe(i=>{const o=i.docs.map(s=>({id:s.id,...s.data()}));if(o.length>0){const a=[...this.documents.getValue(),...o];this.documents.next(a),2===o.length?this.lastVisible=i.docs[i.docs.length-1]:this.nextPageAvailable=!1}else this.nextPageAvailable=!1})}})}generateQRCode(r){document.getElementById("booked-event-details").style.display="flex",document.getElementById("current-details-booking-id").innerText="ID prenotazione: "+r.id,dk.dY(r.id,{margin:2,scale:10,version:2}).then(i=>{this.qrCodeDataUrl=i}).catch(i=>{console.error("Error generating QR code:",i)})}}return(t=e).\u0275fac=function(r){return new(r||t)(E(ks),E(sa),E(lr),E(to),E(rl))},t.\u0275cmp=et({type:t,selectors:[["app-booked-events"]],decls:47,vars:10,consts:[["id","pro-booked-events",2,"width","100%","height","100%","display","flex","flex-direction","column","padding-bottom","3.5rem","overflow-y","auto","overflow-x","hidden"],[1,"up_bar",2,"width","100%","display","flex","align-items","center","justify-content","start","padding-right","1rem","padding-top","1rem","padding-bottom","1rem","padding-left","0.5rem"],["name","chevron-back-outline",2,"font-size","2rem",3,"click"],[2,"padding-left","0.5rem","margin-top","0rem","margin-bottom","0rem"],["style","width: 100%;",4,"ngFor","ngForOf"],[2,"flex","1"],[2,"width","100%","display","flex","align-items","center","justify-content","center"],[2,"width","95%","height","2.5rem","border-radius","0.5rem","margin-top","1rem","margin-bottom","1rem","flex-shrink","0",3,"click"],["id","booked-pro-event-details",2,"display","none","flex-direction","column","align-items","center","height","100%","width","100%","background","black","z-index","99","position","absolute","overflow-y","auto","overflow-x","hidden"],["onclick","document.getElementById('booked-pro-event-details').style.display = 'none';","name","close-outline",2,"font-size","2rem"],["id","current-pro-event-details-booking-id",2,"width","100%","text-align","center","margin-bottom","1rem"],["id","normal-booked-events",2,"width","100%","height","100%","display","flex","flex-direction","column","padding-bottom","3.5rem","overflow-y","auto","overflow-x","hidden"],["id","booked-event-details",2,"display","none","flex-direction","column","align-items","center","height","100%","width","100%","background","black","z-index","99","position","absolute"],["onclick","document.getElementById('booked-event-details').style.display = 'none';","name","close-outline",2,"font-size","2rem"],["style","height: 15rem; width: 15rem; margin-top: 2rem;",3,"src",4,"ngIf"],[2,"width","100%","text-align","center","margin-bottom","1rem","margin-top","1rem","padding-left","1rem","padding-right","1rem"],["id","current-details-booking-id",2,"width","100%","text-align","center","margin-bottom","1rem"],[1,"overflow1"],["id","spacer"],[2,"width","100%"],[2,"width","100%","background","#212121"],[2,"padding-left","0.5rem","padding-top","1rem","margin-bottom","0rem"],[2,"padding-left","0.5rem","margin-top","0.5rem"],[2,"width","100%","display","flex","justify-content","center"],[2,"width","95%","height","1px","background","rgba(255, 255, 255, 0.141)"],[1,"button3",2,"display","flex","flex-direction","row","align-items","center","gap","0.5rem",3,"click"],["name","people",2,"color","white","font-size","1.5rem"],[2,"padding-left","0.5rem","padding-top","1rem","margin-top","0rem"],[2,"padding-left","0.5rem","margin-top","0rem"],["onclick","alert('Per annullare una prenotazione di un evento contatta il nostro supporto all\\'indirizzo email assistenzaclubo@gmail.com')",1,"button3",2,"display","flex","flex-direction","row","align-items","center","gap","0.5rem"],["name","close-outline",2,"color","white","font-size","1.5rem"],["name","qr-code-outline",2,"color","white","font-size","1.5rem"],[2,"height","15rem","width","15rem","margin-top","2rem",3,"src"]],template:function(r,i){1&r&&(b(0,"div",0)(1,"div",1)(2,"ion-icon",2),Ze("click",function(){return i.goBack()}),T(),b(3,"h3",3),P(4,"I miei eventi prenotati"),T()(),Mn(5,wIe,19,4,"div",4),_o(6,"async"),me(7,"div",5),b(8,"div",6)(9,"button",7),Ze("click",function(){return i.getMoreMyEvents()}),P(10,"Carica altri"),T()(),b(11,"div",8)(12,"div",1),me(13,"ion-icon",9),b(14,"h3",3),P(15,"Elenco prenotazioni"),T()(),Mn(16,bIe,23,5,"div",4),_o(17,"async"),me(18,"div",5),b(19,"div",6)(20,"button",7),Ze("click",function(){return i.getMoreEventBookings()}),P(21,"Carica altri"),T()(),me(22,"strong",10),T()(),b(23,"div",11)(24,"div",1)(25,"ion-icon",2),Ze("click",function(){return i.goBack()}),T(),b(26,"h3",3),P(27,"I miei eventi prenotati"),T()(),Mn(28,CIe,26,5,"div",4),_o(29,"async"),me(30,"div",5),b(31,"div",6)(32,"button",7),Ze("click",function(){return i.getMoreNormalEvents()}),P(33,"Carica altri"),T()(),b(34,"div",12)(35,"div",1),me(36,"ion-icon",13),b(37,"h3",3),P(38,"Oblitera"),T()(),Mn(39,TIe,1,1,"img",14),b(40,"p",15),P(41,"Puoi mostrare questo QR code agli addetti per convalidare il biglietto, oppure comunicare l'id prenotazione riportato qui sotto"),T(),me(42,"div",5)(43,"strong",16),T()(),b(44,"div",17),me(45,"div",18)(46,"app-footer"),T()),2&r&&(We(5),ln("ngForOf",vo(6,4,i.documents)),We(11),ln("ngForOf",vo(17,6,i.eventBookingDocuments)),We(12),ln("ngForOf",vo(29,8,i.documents)),We(11),ln("ngIf",i.qrCodeDataUrl))},dependencies:[Wc,il,Uo,Al,qc]}),e})();function DIe(t,e){if(1&t&&(b(0,"div",16)(1,"div",17)(2,"h3",18),P(3,"Locale: "),b(4,"strong"),P(5),T()(),b(6,"p",18),P(7,"Nominativo: "),b(8,"strong"),P(9),T()(),b(10,"p",18),P(11,"Nome tavolo: "),b(12,"strong"),P(13),T()(),b(14,"p",18),P(15,"Totale persone: "),b(16,"strong"),P(17),T()(),b(18,"p",19),P(19,"ID prenotazione: "),b(20,"strong"),P(21),T()(),b(22,"div",20),me(23,"div",21),T(),b(24,"button",22),me(25,"ion-icon",23),P(26,"Annulla prenotazione"),T()()()),2&t){const n=e.$implicit;We(5),Wt(n.local_name),We(4),Wt(n.user_real_name),We(4),Wt(n.table_name),We(4),Wt(n.total_people),We(4),Wt(n.id)}}function SIe(t,e){if(1&t){const n=Ji();b(0,"div",16)(1,"div",17)(2,"h3",18),P(3,"Nome locale: "),b(4,"strong"),P(5),T()(),b(6,"p",24),P(7,"Nominativo: "),b(8,"strong"),P(9),T()(),b(10,"p",25),P(11,"Telefono: "),b(12,"strong"),P(13),T()(),b(14,"p",19),P(15,"ID locale: "),b(16,"strong"),P(17),T()(),b(18,"p",19),P(19,"ID prenotazione: "),b(20,"strong"),P(21),T()(),b(22,"div",20),me(23,"div",21),T(),b(24,"button",26),Ze("click",function(){const i=rr(n).$implicit;return ir(En().generateQRCode(i))}),me(25,"ion-icon",27),P(26,"QRcode"),T(),b(27,"button",26),Ze("click",function(){const i=rr(n).$implicit;return ir(En().deleteBookedTable(i))}),me(28,"ion-icon",23),P(29,"Annulla prenotazione"),T()()()}if(2&t){const n=e.$implicit;We(5),Wt(n.local_name),We(4),Wt(n.user_real_name),We(4),Wt(n.phone),We(4),Wt(n.local_id),We(4),Wt(n.id)}}function RIe(t,e){1&t&&me(0,"img",28),2&t&&ln("src",En().qrCodeDataUrl,rs)}let xIe=(()=>{var t;class e{constructor(r,i,o,s,a){this.firestore=r,this.firebaseService=i,this.router=o,this.afAuth=s,this.location=a,this.documents=new ue([]),this.nextPageAvailable=!0,this.localBookingDocuments=new ue([])}ngOnInit(){"pro"==this.firebaseService.public_user_data.type?(document.getElementById("pro-booked-tables").style.display="flex",document.getElementById("normal-booked-tables").style.display="none",this.getLocalBookings()):(document.getElementById("pro-booked-tables").style.display="none",document.getElementById("normal-booked-tables").style.display="flex",this.getNormalTables())}goBack(){this.location.back()}getMoreMyTables(){this.afAuth.authState.subscribe(r=>{if(r){if(!this.lastVisible)return;this.firestore.collection("tables",i=>i.where("creator_id","==",r.uid).orderBy("timestamp","desc").limit(2).startAfter(this.lastVisible)).get().subscribe(i=>{const o=i.docs.map(s=>({id:s.id,...s.data()}));if(o.length>0){const a=[...this.documents.getValue(),...o];this.documents.next(a),2===o.length?this.lastVisible=i.docs[i.docs.length-1]:this.nextPageAvailable=!1}else this.nextPageAvailable=!1})}})}proLocalDetails(r){document.getElementById("booked-pro-local-details").style.display="flex",document.getElementById("current-pro-local-details-booking-id").innerText="ID locale: "+r.id,this.getLocalBookings()}getLocalBookings(){this.afAuth.authState.subscribe(r=>{r&&(this.currentFetchingLocalType="all",this.firestore.collection("booked_tables",i=>i.where("local_id","==",r.uid).orderBy("timestamp","desc").limit(2)).get().subscribe(i=>{const o=i.docs.map(s=>({id:s.id,...s.data()}));2===o.length?this.lastVisible=i.docs[i.docs.length-1]:this.nextPageAvailable=!1,this.localBookingDocuments.next(o)}))})}getMoreLocalBookings(){this.afAuth.authState.subscribe(r=>{if(r){if(!this.lastVisible)return;this.firestore.collection("booked_tables",i=>i.where("local_id","==",r.uid).orderBy("timestamp","desc").limit(2).startAfter(this.lastVisible)).get().subscribe(i=>{const o=i.docs.map(s=>({id:s.id,...s.data()}));if(o.length>0){const a=[...this.documents.getValue(),...o];this.localBookingDocuments.next(a),2===o.length?this.lastVisible=i.docs[i.docs.length-1]:this.nextPageAvailable=!1}else this.nextPageAvailable=!1})}})}getNormalTables(){this.afAuth.authState.subscribe(r=>{r&&(this.currentFetchingLocalType="all",this.firestore.collection("booked_tables",i=>i.where("uid","==",r.uid).orderBy("timestamp","desc").limit(2)).get().subscribe(i=>{const o=i.docs.map(s=>({id:s.id,...s.data()}));2===o.length?this.lastVisible=i.docs[i.docs.length-1]:this.nextPageAvailable=!1,this.documents.next(o)}))})}getMoreNormalTables(){this.afAuth.authState.subscribe(r=>{if(r){if(!this.lastVisible)return;this.firestore.collection("booked_tables",i=>i.where("uid","==",r.uid).orderBy("booking_time","desc").limit(2).startAfter(this.lastVisible)).get().subscribe(i=>{const o=i.docs.map(s=>({id:s.id,...s.data()}));if(o.length>0){const a=[...this.documents.getValue(),...o];this.documents.next(a),2===o.length?this.lastVisible=i.docs[i.docs.length-1]:this.nextPageAvailable=!1}else this.nextPageAvailable=!1})}})}deleteBookedTable(r){confirm("Sei sicuro di voler eliminare la tua prenotazione?")&&Dn.A.firestore().collection("booked_tables").doc(r.id).delete().then(()=>{alert("Prenotazione del tavolo rimossa con successo")}).catch(o=>{alert("Errore durante la rimozione della prenotazione del tavolo: "+o.message)})}generateQRCode(r){document.getElementById("booked-local-details").style.display="flex",document.getElementById("current-details-booking-id").innerText="ID prenotazione: "+r.id,dk.dY(r.id,{margin:2,scale:10,version:2}).then(i=>{this.qrCodeDataUrl=i}).catch(i=>{console.error("Error generating QR code:",i)})}}return(t=e).\u0275fac=function(r){return new(r||t)(E(ks),E(sa),E(lr),E(to),E(rl))},t.\u0275cmp=et({type:t,selectors:[["app-booked-tables"]],decls:35,vars:7,consts:[["id","pro-booked-tables",2,"width","100%","height","100%","display","flex","flex-direction","column","padding-bottom","3.5rem","overflow-y","auto","overflow-x","hidden"],[1,"up_bar",2,"width","100%","display","flex","align-items","center","justify-content","start","padding-right","1rem","padding-top","1rem","padding-bottom","1rem","padding-left","0.5rem"],["name","chevron-back-outline",2,"font-size","2rem",3,"click"],[2,"padding-left","0.5rem","margin-top","0rem","margin-bottom","0rem"],["style","width: 100%;",4,"ngFor","ngForOf"],[2,"flex","1"],[2,"width","100%","display","flex","align-items","center","justify-content","center"],[2,"width","95%","height","2.5rem","border-radius","0.5rem","margin-top","1rem","margin-bottom","1rem","flex-shrink","0",3,"click"],["id","normal-booked-tables",2,"width","100%","height","100%","display","flex","flex-direction","column","padding-bottom","3.5rem","overflow-y","auto","overflow-x","hidden"],["id","booked-local-details",2,"display","none","flex-direction","column","align-items","center","height","100%","width","100%","background","black","z-index","99","position","absolute"],["onclick","document.getElementById('booked-local-details').style.display = 'none';","name","close-outline",2,"font-size","2rem"],["style","height: 15rem; width: 15rem; margin-top: 2rem;",3,"src",4,"ngIf"],[2,"width","100%","text-align","center","margin-bottom","1rem","margin-top","1rem","padding-left","1rem","padding-right","1rem"],["id","current-details-booking-id",2,"width","100%","text-align","center","margin-bottom","1rem"],[1,"overflow1"],["id","spacer"],[2,"width","100%"],[2,"width","100%","background","#212121"],[2,"padding-left","0.5rem","padding-top","1rem","margin-bottom","0rem"],[2,"padding-left","0.5rem","margin-top","0.5rem"],[2,"width","100%","display","flex","justify-content","center"],[2,"width","95%","height","1px","background","rgba(255, 255, 255, 0.141)"],["onclick","alert('Per annullare una prenotazione di un locale contatta il nostro supporto all\\'indirizzo email assistenzaclubo@gmail.com')",1,"button3",2,"display","flex","flex-direction","row","align-items","center","gap","0.5rem"],["name","close-outline",2,"color","white","font-size","1.5rem"],[2,"padding-left","0.5rem","padding-top","1rem","margin-top","0rem"],[2,"padding-left","0.5rem","margin-top","0rem"],[1,"button3",2,"display","flex","flex-direction","row","align-items","center","gap","0.5rem",3,"click"],["name","qr-code-outline",2,"color","white","font-size","1.5rem"],[2,"height","15rem","width","15rem","margin-top","2rem",3,"src"]],template:function(r,i){1&r&&(b(0,"div",0)(1,"div",1)(2,"ion-icon",2),Ze("click",function(){return i.goBack()}),T(),b(3,"h3",3),P(4,"I miei tavoli prenotati"),T()(),Mn(5,DIe,27,5,"div",4),_o(6,"async"),me(7,"div",5),b(8,"div",6)(9,"button",7),Ze("click",function(){return i.getMoreLocalBookings()}),P(10,"Carica altri"),T()()(),b(11,"div",8)(12,"div",1)(13,"ion-icon",2),Ze("click",function(){return i.goBack()}),T(),b(14,"h3",3),P(15,"I miei tavoli prenotati"),T()(),Mn(16,SIe,30,5,"div",4),_o(17,"async"),me(18,"div",5),b(19,"div",6)(20,"button",7),Ze("click",function(){return i.getMoreNormalTables()}),P(21,"Carica altri"),T()(),b(22,"div",9)(23,"div",1),me(24,"ion-icon",10),b(25,"h3",3),P(26,"Oblitera"),T()(),Mn(27,RIe,1,1,"img",11),b(28,"p",12),P(29,"Puoi mostrare questo QR code agli addetti per convalidare il biglietto, oppure comunicare l'id prenotazione riportato qui sotto"),T(),me(30,"div",5)(31,"strong",13),T()(),b(32,"div",14),me(33,"div",15)(34,"app-footer"),T()),2&r&&(We(5),ln("ngForOf",vo(6,3,i.localBookingDocuments)),We(11),ln("ngForOf",vo(17,5,i.documents)),We(11),ln("ngIf",i.qrCodeDataUrl))},dependencies:[Wc,il,Uo,Al,qc]}),e})();function PIe(t,e){if(1&t){const n=Ji();b(0,"div",11)(1,"div",12)(2,"ion-icon",13),Ze("click",function(){const i=rr(n).$implicit;return ir(En().goToPostAccount(i))}),T(),b(3,"strong"),P(4),T()(),b(5,"div",14)(6,"div",15)(7,"strong"),P(8,"Completato?"),T(),me(9,"div",5),b(10,"ion-icon",16),Ze("click",function(){const i=rr(n).$implicit;return ir(En().deleteReservedDrink(i))}),T()(),b(11,"p",17),P(12,"Nome drink: "),b(13,"strong"),P(14),T()(),b(15,"p",17),P(16,"Prezzo: \u20ac"),b(17,"strong"),P(18),T()(),b(19,"p",17),P(20,"Id utente: "),b(21,"strong"),P(22),T()()()()}if(2&t){const n=e.$implicit;We(4),Wt(n.creator_name),We(10),Wt(n.drink_name),We(4),Wt(n.price),We(4),Wt(n.creator_id)}}function MIe(t,e){if(1&t){const n=Ji();b(0,"div",18)(1,"div",19)(2,"ion-icon",13),Ze("click",function(){const i=rr(n).$implicit;return ir(En().goToPostAccount(i))}),T(),b(3,"strong"),P(4),T()(),b(5,"div",20)(6,"p",17),P(7,"Nome drink: "),b(8,"strong"),P(9),T()(),b(10,"p",17),P(11,"Prezzo: \u20ac"),b(12,"strong"),P(13),T()(),b(14,"p",17),P(15,"Id utente: "),b(16,"strong"),P(17),T()()(),b(18,"button",21),Ze("click",function(){const i=rr(n).$implicit;return ir(En().deleteReservedDrink(i))}),me(19,"ion-icon",22),b(20,"strong"),P(21,"Annulla prenotazione"),T()()()}if(2&t){const n=e.$implicit;We(4),Wt(n.creator_name),We(5),Wt(n.drink_name),We(4),Wt(n.price),We(4),Wt(n.creator_id)}}const kIe=[{path:"",redirectTo:"splash",pathMatch:"full"},{path:"splash",component:vme},{path:"account",component:rIe},{path:"account/change-account-data",component:oIe},{path:"account/change-place-data",component:mIe},{path:"account/change-car-pooling",component:_Ie},{path:"booked-events",component:AIe},{path:"booked-tables",component:xIe},{path:"booked-drinks",component:(()=>{var t;class e{constructor(r,i,o,s,a,l,c){this.firestore=r,this.afAuth=i,this.firebaseService=o,this.route=s,this.storage=a,this.router=l,this.locationStrategy=c,this.reservedDrinks=[],this.nextPageAvailable=!0,this.documents=new ue([]),this.comments=[],this.newComment="",this.partecipations=[]}ngOnInit(){"pro"==this.firebaseService.public_user_data.type?(document.getElementById("pro-reserved-drink").style.display="flex",document.getElementById("normal-reserved-drink").style.display="none",this.getProBookedDrinks(),this.countProBookedDrinks()):(document.getElementById("normal-reserved-drink").style.display="flex",document.getElementById("pro-reserved-drink").style.display="none",this.getNormalBookedDrinks(),this.countNormalBookedDrinks())}getTotalUsers(){return(0,_.A)(function*(){const i=Yv(mP(),"users");return(yield RP(i)).data().count})()}countProBookedDrinks(){var r=this;return(0,_.A)(function*(){r.afAuth.authState.subscribe(function(){var i=(0,_.A)(function*(o){if(o){const s=yield RP(vl(Yv(mP(),"booked_drinks"),TP("pro_account_id","==",o.uid)));document.getElementById("pro_booked_drink_display").innerText=s.data().count.toString()}});return function(o){return i.apply(this,arguments)}}())})()}countNormalBookedDrinks(){var r=this;return(0,_.A)(function*(){r.afAuth.authState.subscribe(function(){var i=(0,_.A)(function*(o){if(o){const s=yield RP(vl(Yv(mP(),"booked_drinks"),TP("creator_id","==",o.uid)));document.getElementById("normal_booked_drink_display").innerText=s.data().count.toString()}});return function(o){return i.apply(this,arguments)}}())})()}getProBookedDrinks(){var r=this;this.afAuth.authState.subscribe(function(){var i=(0,_.A)(function*(o){o&&r.firestore.collection("booked_drinks",s=>s.where("pro_account_id","==",o.uid).orderBy("timestamp","asc").limit(2)).get().subscribe(s=>{const a=s.docs.map(l=>({id:l.id,...l.data()}));2===a.length?r.lastVisible=s.docs[s.docs.length-1]:r.nextPageAvailable=!1,r.documents.next(a)})});return function(o){return i.apply(this,arguments)}}())}getMoreProBookedDrinks(){var r=this;this.afAuth.authState.subscribe(function(){var i=(0,_.A)(function*(o){if(o){if(!r.lastVisible)return;r.firestore.collection("booked_drinks",s=>s.where("pro_account_id","==",o.uid).orderBy("timestamp","asc").limit(2).startAfter(r.lastVisible)).get().subscribe(s=>{const a=s.docs.map(l=>({id:l.id,...l.data()}));if(a.length>0){const c=[...r.documents.getValue(),...a];r.documents.next(c),2===a.length?r.lastVisible=s.docs[s.docs.length-1]:r.nextPageAvailable=!1}else r.nextPageAvailable=!1})}});return function(o){return i.apply(this,arguments)}}())}getNormalBookedDrinks(){var r=this;this.afAuth.authState.subscribe(function(){var i=(0,_.A)(function*(o){o&&r.firestore.collection("booked_drinks",s=>s.where("creator_id","==",o.uid).orderBy("timestamp","asc").limit(2)).get().subscribe(s=>{const a=s.docs.map(l=>({id:l.id,...l.data()}));2===a.length?r.lastVisible=s.docs[s.docs.length-1]:r.nextPageAvailable=!1,r.documents.next(a)})});return function(o){return i.apply(this,arguments)}}())}getMoreNormalBookedDrinks(){var r=this;this.afAuth.authState.subscribe(function(){var i=(0,_.A)(function*(o){if(o){if(!r.lastVisible)return;r.firestore.collection("booked_drinks",s=>s.where("creator_id","==",o.uid).orderBy("timestamp","asc").limit(2).startAfter(r.lastVisible)).get().subscribe(s=>{const a=s.docs.map(l=>({id:l.id,...l.data()}));if(a.length>0){const c=[...r.documents.getValue(),...a];r.documents.next(c),2===a.length?r.lastVisible=s.docs[s.docs.length-1]:r.nextPageAvailable=!1}else r.nextPageAvailable=!1})}});return function(o){return i.apply(this,arguments)}}())}showDrinkActions(r){this.currentActionDrink=r,document.getElementById("account-drink-men\xf9").style.display="flex"}goToPostAccount(r){this.router.navigate(["/account"],{queryParams:{uid:r.creator_id}})}deleteReservedDrink(r){confirm("Conferma")&&Dn.A.firestore().collection("booked_drinks").doc(r.id).delete().then(()=>{alert("Drink o bottiglia completata con successo")}).catch(i=>{alert("Errore durante la rimozione del drink o della bottiglia: "+i.message)})}}return(t=e).\u0275fac=function(r){return new(r||t)(E(ks),E(to),E(sa),E(na),E(By),E(lr),E(Zs))},t.\u0275cmp=et({type:t,selectors:[["app-booked-drinks"]],decls:28,vars:6,consts:[["id","pro-reserved-drink",2,"width","100%","height","100%","background","black","display","flex","flex-direction","column","align-items","center","overflow-y","auto","overflow-x","hidden"],[1,"up_bar",2,"width","100%","display","flex","align-items","center","justify-content","start","padding-right","1rem","padding-top","1rem","padding-bottom","1rem","padding-left","1rem"],["routerLink","/account","name","chevron-back-outline",2,"font-size","2rem"],["id","pro_booked_drink_display"],["style","width: 100%; border-bottom: 1px solid rgba(255, 255, 255, 0.226); padding-left: 1rem; padding-top: 1rem;",4,"ngFor","ngForOf"],[2,"flex","1"],[2,"width","100%","display","flex","align-items","center","justify-content","center","padding-top","2rem","padding-bottom","1rem"],[2,"width","95%","height","2.5rem","border-radius","0.5rem","margin-top","1rem","margin-bottom","1rem","flex-shrink","0",3,"click"],["id","normal-reserved-drink",2,"width","100%","height","100%","background","black","display","flex","flex-direction","column","align-items","center","overflow-y","auto","overflow-x","hidden"],["id","normal_booked_drink_display"],["style","width: 100%; border-bottom: 1px solid rgba(255, 255, 255, 0.226); padding-top: 1rem;",4,"ngFor","ngForOf"],[2,"width","100%","border-bottom","1px solid rgba(255, 255, 255, 0.226)","padding-left","1rem","padding-top","1rem"],[2,"display","flex","flex-direction","row","align-items","center"],["name","person-circle-outline",2,"font-size","1.8rem","margin-right","0.5rem",3,"click"],[2,"display","flex","flex-direction","column","width","100%"],[2,"display","flex","flex-direction","row","align-items","center","padding-top","0.5rem"],["name","checkmark-outline",2,"font-size","1.8rem","margin-right","1rem",3,"click"],[2,"width","100%","margin-top","0.5rem","margin-bottom","0.5rem"],[2,"width","100%","border-bottom","1px solid rgba(255, 255, 255, 0.226)","padding-top","1rem"],[2,"display","flex","flex-direction","row","align-items","center","padding-left","1rem"],[2,"display","flex","flex-direction","column","width","100%","padding-left","1rem"],[1,"button3",2,"width","100%","display","flex","align-items","center",3,"click"],["name","close",2,"font-size","1.5rem","margin-right","1rem"]],template:function(r,i){1&r&&(b(0,"div",0)(1,"div",1),me(2,"ion-icon",2),b(3,"h3"),P(4,"Drink prenotati"),T()(),b(5,"h3"),P(6,"Drink prenotati: "),me(7,"strong",3),T(),Mn(8,PIe,23,4,"div",4),_o(9,"async"),me(10,"div",5),b(11,"div",6)(12,"button",7),Ze("click",function(){return i.getMoreProBookedDrinks()}),P(13,"Carica altri"),T()()(),b(14,"div",8)(15,"div",1),me(16,"ion-icon",2),b(17,"h3"),P(18,"Drink prenotati"),T()(),b(19,"h3"),P(20,"Drink prenotati: "),me(21,"strong",9),T(),Mn(22,MIe,22,4,"div",10),_o(23,"async"),me(24,"div",5),b(25,"div",6)(26,"button",7),Ze("click",function(){return i.getMoreNormalBookedDrinks()}),P(27,"Carica altri"),T()()()),2&r&&(We(8),ln("ngForOf",vo(9,2,i.documents)),We(14),ln("ngForOf",vo(23,4,i.documents)))},dependencies:[Wc,Uo,Ma,$o,qc]}),e})()},{path:"change-password",component:yIe},{path:"log",component:lIe},{path:"login",component:sIe},{path:"register",component:aIe},{path:"home",component:m0e},{path:"add",component:Y0e},{path:"search",component:_0e},{path:"car-pooling",component:dIe},{path:"spot",component:pIe},{path:"notifications",component:v0e},{path:"balance",component:vIe},{path:"validate",component:EIe}];let NIe=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Jo({type:t,bootstrap:[I4]}),t.\u0275inj=zn({imports:[a1.forRoot(kIe,{preloadingStrategy:hoe}),a1]}),e})();const x9_firebaseConfig={apiKey:"AIzaSyCBAWFeVOqgBOCrTH9pDMjG_1DA6lbJZdA",authDomain:"codb-54514.firebaseapp.com",databaseURL:"https://codb-54514-default-rtdb.europe-west1.firebasedatabase.app",projectId:"codb-54514",storageBucket:"codb-54514.appspot.com",messagingSenderId:"377890774552",appId:"1:377890774552:web:4f408209f000ade59ead6d",measurementId:"G-CJ7SJDWPXP"};let OIe=(()=>{var t;class e{constructor(r){this.firebaseService=r,this.firebaseService.initialize()}}return(t=e).\u0275fac=function(r){return new(r||t)(Ke(sa))},t.\u0275mod=Jo({type:t,bootstrap:[I4]}),t.\u0275inj=zn({providers:[{provide:Zs,useClass:$V}],imports:[Ate,xle.forRoot(),NIe,Jle.initializeApp(x9_firebaseConfig),oce,a1,Qne]}),e})();Cte().bootstrapModule(OIe).catch(t=>console.log(t))},243:Nt=>{"use strict";var le={single_source_shortest_paths:function(F,_,V){var C={},L={};L[_]=0;var H,M,ie,Ce,ee,de,G=le.PriorityQueue.make();for(G.push(_,0);!G.empty();)for(ie in Ce=(H=G.pop()).cost,ee=F[M=H.value]||{})ee.hasOwnProperty(ie)&&(de=Ce+ee[ie],(typeof L[ie]>"u"||L[ie]>de)&&(L[ie]=de,G.push(ie,de),C[ie]=M));if(typeof V<"u"&&typeof L[V]>"u"){var ye=["Could not find a path from ",_," to ",V,"."].join("");throw new Error(ye)}return C},extract_shortest_path_from_predecessor_list:function(F,_){for(var V=[],C=_;C;)V.push(C),C=F[C];return V.reverse(),V},find_path:function(F,_,V){var C=le.single_source_shortest_paths(F,_,V);return le.extract_shortest_path_from_predecessor_list(C,V)},PriorityQueue:{make:function(F){var C,_=le.PriorityQueue,V={};for(C in F=F||{},_)_.hasOwnProperty(C)&&(V[C]=_[C]);return V.queue=[],V.sorter=F.sorter||_.default_sorter,V},default_sorter:function(F,_){return F.cost-_.cost},push:function(F,_){this.queue.push({value:F,cost:_}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};Nt.exports=le},3174:Nt=>{"use strict";Nt.exports=function(F){for(var _=[],V=F.length,C=0;C<V;C++){var L=F.charCodeAt(C);if(L>=55296&&L<=56319&&V>C+1){var G=F.charCodeAt(C+1);G>=56320&&G<=57343&&(L=1024*(L-55296)+G-56320+65536,C+=1)}L<128?_.push(L):L<2048?(_.push(L>>6|192),_.push(63&L|128)):L<55296||L>=57344&&L<65536?(_.push(L>>12|224),_.push(L>>6&63|128),_.push(63&L|128)):L>=65536&&L<=1114111?(_.push(L>>18|240),_.push(L>>12&63|128),_.push(L>>6&63|128),_.push(63&L|128)):_.push(239,191,189)}return new Uint8Array(_).buffer}},8314:(Nt,le,F)=>{const V=F(2836),C=F(9460),L=F(7030),G=F(6511);function H(M,ie,Ce,ee,X){const de=[].slice.call(arguments,1),oe=de.length,pe="function"==typeof de[oe-1];if(!pe&&!V())throw new Error("Callback required as last argument");if(!pe){if(oe<1)throw new Error("Too few arguments provided");return 1===oe?(Ce=ie,ie=ee=void 0):2===oe&&!ie.getContext&&(ee=Ce,Ce=ie,ie=void 0),new Promise(function(ye,ke){try{const ne=C.create(Ce,ee);ye(M(ne,ie,ee))}catch(ne){ke(ne)}})}if(oe<2)throw new Error("Too few arguments provided");2===oe?(X=Ce,Ce=ie,ie=ee=void 0):3===oe&&(ie.getContext&&typeof X>"u"?(X=ee,ee=void 0):(X=ee,ee=Ce,Ce=ie,ie=void 0));try{const ye=C.create(Ce,ee);X(null,M(ye,ie,ee))}catch(ye){X(ye)}}H.bind(null,L.render),le.dY=H.bind(null,L.renderToDataURL),H.bind(null,function(M,ie,Ce){return G.render(M,Ce)})},2836:Nt=>{Nt.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},6214:(Nt,le,F)=>{const _=F(9089).getSymbolSize;le.getRowColCoords=function(C){if(1===C)return[];const L=Math.floor(C/7)+2,G=_(C),H=145===G?26:2*Math.ceil((G-13)/(2*L-2)),M=[G-7];for(let ie=1;ie<L-1;ie++)M[ie]=M[ie-1]-H;return M.push(6),M.reverse()},le.getPositions=function(C){const L=[],G=le.getRowColCoords(C),H=G.length;for(let M=0;M<H;M++)for(let ie=0;ie<H;ie++)0===M&&0===ie||0===M&&ie===H-1||M===H-1&&0===ie||L.push([G[M],G[ie]]);return L}},1018:(Nt,le,F)=>{const _=F(1677),V=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function C(L){this.mode=_.ALPHANUMERIC,this.data=L}C.getBitsLength=function(G){return 11*Math.floor(G/2)+G%2*6},C.prototype.getLength=function(){return this.data.length},C.prototype.getBitsLength=function(){return C.getBitsLength(this.data.length)},C.prototype.write=function(G){let H;for(H=0;H+2<=this.data.length;H+=2){let M=45*V.indexOf(this.data[H]);M+=V.indexOf(this.data[H+1]),G.put(M,11)}this.data.length%2&&G.put(V.indexOf(this.data[H]),6)},Nt.exports=C},4662:Nt=>{function le(){this.buffer=[],this.length=0}le.prototype={get:function(F){const _=Math.floor(F/8);return 1==(this.buffer[_]>>>7-F%8&1)},put:function(F,_){for(let V=0;V<_;V++)this.putBit(1==(F>>>_-V-1&1))},getLengthInBits:function(){return this.length},putBit:function(F){const _=Math.floor(this.length/8);this.buffer.length<=_&&this.buffer.push(0),F&&(this.buffer[_]|=128>>>this.length%8),this.length++}},Nt.exports=le},5941:Nt=>{function le(F){if(!F||F<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=F,this.data=new Uint8Array(F*F),this.reservedBit=new Uint8Array(F*F)}le.prototype.set=function(F,_,V,C){const L=F*this.size+_;this.data[L]=V,C&&(this.reservedBit[L]=!0)},le.prototype.get=function(F,_){return this.data[F*this.size+_]},le.prototype.xor=function(F,_,V){this.data[F*this.size+_]^=V},le.prototype.isReserved=function(F,_){return this.reservedBit[F*this.size+_]},Nt.exports=le},4969:(Nt,le,F)=>{const _=F(3174),V=F(1677);function C(L){this.mode=V.BYTE,"string"==typeof L&&(L=_(L)),this.data=new Uint8Array(L)}C.getBitsLength=function(G){return 8*G},C.prototype.getLength=function(){return this.data.length},C.prototype.getBitsLength=function(){return C.getBitsLength(this.data.length)},C.prototype.write=function(L){for(let G=0,H=this.data.length;G<H;G++)L.put(this.data[G],8)},Nt.exports=C},3677:(Nt,le,F)=>{const _=F(7424),V=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],C=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];le.getBlocksCount=function(G,H){switch(H){case _.L:return V[4*(G-1)+0];case _.M:return V[4*(G-1)+1];case _.Q:return V[4*(G-1)+2];case _.H:return V[4*(G-1)+3];default:return}},le.getTotalCodewordsCount=function(G,H){switch(H){case _.L:return C[4*(G-1)+0];case _.M:return C[4*(G-1)+1];case _.Q:return C[4*(G-1)+2];case _.H:return C[4*(G-1)+3];default:return}}},7424:(Nt,le)=>{le.L={bit:1},le.M={bit:0},le.Q={bit:3},le.H={bit:2},le.isValid=function(V){return V&&typeof V.bit<"u"&&V.bit>=0&&V.bit<4},le.from=function(V,C){if(le.isValid(V))return V;try{return function F(_){if("string"!=typeof _)throw new Error("Param is not a string");switch(_.toLowerCase()){case"l":case"low":return le.L;case"m":case"medium":return le.M;case"q":case"quartile":return le.Q;case"h":case"high":return le.H;default:throw new Error("Unknown EC Level: "+_)}}(V)}catch{return C}}},6269:(Nt,le,F)=>{const _=F(9089).getSymbolSize;le.getPositions=function(L){const G=_(L);return[[0,0],[G-7,0],[0,G-7]]}},6254:(Nt,le,F)=>{const _=F(9089),L=_.getBCHDigit(1335);le.getEncodedBits=function(H,M){const ie=H.bit<<3|M;let Ce=ie<<10;for(;_.getBCHDigit(Ce)-L>=0;)Ce^=1335<<_.getBCHDigit(Ce)-L;return 21522^(ie<<10|Ce)}},6686:(Nt,le)=>{const F=new Uint8Array(512),_=new Uint8Array(256);(function(){let C=1;for(let L=0;L<255;L++)F[L]=C,_[C]=L,C<<=1,256&C&&(C^=285);for(let L=255;L<512;L++)F[L]=F[L-255]})(),le.log=function(C){if(C<1)throw new Error("log("+C+")");return _[C]},le.exp=function(C){return F[C]},le.mul=function(C,L){return 0===C||0===L?0:F[_[C]+_[L]]}},3264:(Nt,le,F)=>{const _=F(1677),V=F(9089);function C(L){this.mode=_.KANJI,this.data=L}C.getBitsLength=function(G){return 13*G},C.prototype.getLength=function(){return this.data.length},C.prototype.getBitsLength=function(){return C.getBitsLength(this.data.length)},C.prototype.write=function(L){let G;for(G=0;G<this.data.length;G++){let H=V.toSJIS(this.data[G]);if(H>=33088&&H<=40956)H-=33088;else{if(!(H>=57408&&H<=60351))throw new Error("Invalid SJIS character: "+this.data[G]+"\nMake sure your charset is UTF-8");H-=49472}H=192*(H>>>8&255)+(255&H),L.put(H,13)}},Nt.exports=C},3361:(Nt,le)=>{le.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function _(V,C,L){switch(V){case le.Patterns.PATTERN000:return(C+L)%2==0;case le.Patterns.PATTERN001:return C%2==0;case le.Patterns.PATTERN010:return L%3==0;case le.Patterns.PATTERN011:return(C+L)%3==0;case le.Patterns.PATTERN100:return(Math.floor(C/2)+Math.floor(L/3))%2==0;case le.Patterns.PATTERN101:return C*L%2+C*L%3==0;case le.Patterns.PATTERN110:return(C*L%2+C*L%3)%2==0;case le.Patterns.PATTERN111:return(C*L%3+(C+L)%2)%2==0;default:throw new Error("bad maskPattern:"+V)}}le.isValid=function(C){return null!=C&&""!==C&&!isNaN(C)&&C>=0&&C<=7},le.from=function(C){return le.isValid(C)?parseInt(C,10):void 0},le.getPenaltyN1=function(C){const L=C.size;let G=0,H=0,M=0,ie=null,Ce=null;for(let ee=0;ee<L;ee++){H=M=0,ie=Ce=null;for(let X=0;X<L;X++){let de=C.get(ee,X);de===ie?H++:(H>=5&&(G+=H-5+3),ie=de,H=1),de=C.get(X,ee),de===Ce?M++:(M>=5&&(G+=M-5+3),Ce=de,M=1)}H>=5&&(G+=H-5+3),M>=5&&(G+=M-5+3)}return G},le.getPenaltyN2=function(C){const L=C.size;let G=0;for(let H=0;H<L-1;H++)for(let M=0;M<L-1;M++){const ie=C.get(H,M)+C.get(H,M+1)+C.get(H+1,M)+C.get(H+1,M+1);(4===ie||0===ie)&&G++}return 3*G},le.getPenaltyN3=function(C){const L=C.size;let G=0,H=0,M=0;for(let ie=0;ie<L;ie++){H=M=0;for(let Ce=0;Ce<L;Ce++)H=H<<1&2047|C.get(ie,Ce),Ce>=10&&(1488===H||93===H)&&G++,M=M<<1&2047|C.get(Ce,ie),Ce>=10&&(1488===M||93===M)&&G++}return 40*G},le.getPenaltyN4=function(C){let L=0;const G=C.data.length;for(let M=0;M<G;M++)L+=C.data[M];return 10*Math.abs(Math.ceil(100*L/G/5)-10)},le.applyMask=function(C,L){const G=L.size;for(let H=0;H<G;H++)for(let M=0;M<G;M++)L.isReserved(M,H)||L.xor(M,H,_(C,M,H))},le.getBestMask=function(C,L){const G=Object.keys(le.Patterns).length;let H=0,M=1/0;for(let ie=0;ie<G;ie++){L(ie),le.applyMask(ie,C);const Ce=le.getPenaltyN1(C)+le.getPenaltyN2(C)+le.getPenaltyN3(C)+le.getPenaltyN4(C);le.applyMask(ie,C),Ce<M&&(M=Ce,H=ie)}return H}},1677:(Nt,le,F)=>{const _=F(377),V=F(9359);le.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},le.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},le.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},le.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},le.MIXED={bit:-1},le.getCharCountIndicator=function(G,H){if(!G.ccBits)throw new Error("Invalid mode: "+G);if(!_.isValid(H))throw new Error("Invalid version: "+H);return H>=1&&H<10?G.ccBits[0]:H<27?G.ccBits[1]:G.ccBits[2]},le.getBestModeForData=function(G){return V.testNumeric(G)?le.NUMERIC:V.testAlphanumeric(G)?le.ALPHANUMERIC:V.testKanji(G)?le.KANJI:le.BYTE},le.toString=function(G){if(G&&G.id)return G.id;throw new Error("Invalid mode")},le.isValid=function(G){return G&&G.bit&&G.ccBits},le.from=function(G,H){if(le.isValid(G))return G;try{return function C(L){if("string"!=typeof L)throw new Error("Param is not a string");switch(L.toLowerCase()){case"numeric":return le.NUMERIC;case"alphanumeric":return le.ALPHANUMERIC;case"kanji":return le.KANJI;case"byte":return le.BYTE;default:throw new Error("Unknown mode: "+L)}}(G)}catch{return H}}},6628:(Nt,le,F)=>{const _=F(1677);function V(C){this.mode=_.NUMERIC,this.data=C.toString()}V.getBitsLength=function(L){return 10*Math.floor(L/3)+(L%3?L%3*3+1:0)},V.prototype.getLength=function(){return this.data.length},V.prototype.getBitsLength=function(){return V.getBitsLength(this.data.length)},V.prototype.write=function(L){let G,H,M;for(G=0;G+3<=this.data.length;G+=3)H=this.data.substr(G,3),M=parseInt(H,10),L.put(M,10);const ie=this.data.length-G;ie>0&&(H=this.data.substr(G),M=parseInt(H,10),L.put(M,3*ie+1))},Nt.exports=V},1744:(Nt,le,F)=>{const _=F(6686);le.mul=function(C,L){const G=new Uint8Array(C.length+L.length-1);for(let H=0;H<C.length;H++)for(let M=0;M<L.length;M++)G[H+M]^=_.mul(C[H],L[M]);return G},le.mod=function(C,L){let G=new Uint8Array(C);for(;G.length-L.length>=0;){const H=G[0];for(let ie=0;ie<L.length;ie++)G[ie]^=_.mul(L[ie],H);let M=0;for(;M<G.length&&0===G[M];)M++;G=G.slice(M)}return G},le.generateECPolynomial=function(C){let L=new Uint8Array([1]);for(let G=0;G<C;G++)L=le.mul(L,new Uint8Array([1,_.exp(G)]));return L}},9460:(Nt,le,F)=>{const _=F(9089),V=F(7424),C=F(4662),L=F(5941),G=F(6214),H=F(6269),M=F(3361),ie=F(3677),Ce=F(6289),ee=F(1252),X=F(6254),de=F(1677),oe=F(2868);function Y(_e,Fe,k){const O=_e.size,S=X.getEncodedBits(Fe,k);let $,K;for($=0;$<15;$++)K=1==(S>>$&1),_e.set($<6?$:$<8?$+1:O-15+$,8,K,!0),_e.set(8,$<8?O-$-1:$<9?15-$-1+1:15-$-1,K,!0);_e.set(O-8,8,1,!0)}function Ge(_e,Fe,k,O){let S;if(Array.isArray(_e))S=oe.fromArray(_e);else{if("string"!=typeof _e)throw new Error("Invalid data");{let nt=Fe;if(!nt){const wt=oe.rawSplit(_e);nt=ee.getBestVersionForData(wt,k)}S=oe.fromString(_e,nt||40)}}const $=ee.getBestVersionForData(S,k);if(!$)throw new Error("The amount of data is too big to be stored in a QR Code");if(Fe){if(Fe<$)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+$+".\n")}else Fe=$;const K=function be(_e,Fe,k){const O=new C;k.forEach(function(fe){O.put(fe.mode.bit,4),O.put(fe.getLength(),de.getCharCountIndicator(fe.mode,_e)),fe.write(O)});const K=8*(_.getSymbolTotalCodewords(_e)-ie.getTotalCodewordsCount(_e,Fe));for(O.getLengthInBits()+4<=K&&O.put(0,4);O.getLengthInBits()%8!=0;)O.putBit(0);const se=(K-O.getLengthInBits())/8;for(let fe=0;fe<se;fe++)O.put(fe%2?17:236,8);return function Oe(_e,Fe,k){const O=_.getSymbolTotalCodewords(Fe),$=O-ie.getTotalCodewordsCount(Fe,k),K=ie.getBlocksCount(Fe,k),fe=K-O%K,nt=Math.floor(O/K),wt=Math.floor($/K),nn=wt+1,Ve=nt-wt,q=new Ce(Ve);let B=0;const j=new Array(K),ce=new Array(K);let Ie=0;const he=new Uint8Array(_e.buffer);for(let Vt=0;Vt<K;Vt++){const un=Vt<fe?wt:nn;j[Vt]=he.slice(B,B+un),ce[Vt]=q.encode(j[Vt]),B+=un,Ie=Math.max(Ie,un)}const it=new Uint8Array(O);let ot,ut,gt=0;for(ot=0;ot<Ie;ot++)for(ut=0;ut<K;ut++)ot<j[ut].length&&(it[gt++]=j[ut][ot]);for(ot=0;ot<Ve;ot++)for(ut=0;ut<K;ut++)it[gt++]=ce[ut][ot];return it}(O,_e,Fe)}(Fe,k,S),se=_.getSymbolSize(Fe),fe=new L(se);return function pe(_e,Fe){const k=_e.size,O=H.getPositions(Fe);for(let S=0;S<O.length;S++){const $=O[S][0],K=O[S][1];for(let se=-1;se<=7;se++)if(!($+se<=-1||k<=$+se))for(let fe=-1;fe<=7;fe++)K+fe<=-1||k<=K+fe||_e.set($+se,K+fe,se>=0&&se<=6&&(0===fe||6===fe)||fe>=0&&fe<=6&&(0===se||6===se)||se>=2&&se<=4&&fe>=2&&fe<=4,!0)}}(fe,Fe),function ye(_e){const Fe=_e.size;for(let k=8;k<Fe-8;k++){const O=k%2==0;_e.set(k,6,O,!0),_e.set(6,k,O,!0)}}(fe),function ke(_e,Fe){const k=G.getPositions(Fe);for(let O=0;O<k.length;O++){const S=k[O][0],$=k[O][1];for(let K=-2;K<=2;K++)for(let se=-2;se<=2;se++)_e.set(S+K,$+se,-2===K||2===K||-2===se||2===se||0===K&&0===se,!0)}}(fe,Fe),Y(fe,k,0),Fe>=7&&function ne(_e,Fe){const k=_e.size,O=ee.getEncodedBits(Fe);let S,$,K;for(let se=0;se<18;se++)S=Math.floor(se/3),$=se%3+k-8-3,K=1==(O>>se&1),_e.set(S,$,K,!0),_e.set($,S,K,!0)}(fe,Fe),function re(_e,Fe){const k=_e.size;let O=-1,S=k-1,$=7,K=0;for(let se=k-1;se>0;se-=2)for(6===se&&se--;;){for(let fe=0;fe<2;fe++)if(!_e.isReserved(S,se-fe)){let nt=!1;K<Fe.length&&(nt=1==(Fe[K]>>>$&1)),_e.set(S,se-fe,nt),$--,-1===$&&(K++,$=7)}if(S+=O,S<0||k<=S){S-=O,O=-O;break}}}(fe,K),isNaN(O)&&(O=M.getBestMask(fe,Y.bind(null,fe,k))),M.applyMask(O,fe),Y(fe,k,O),{modules:fe,version:Fe,errorCorrectionLevel:k,maskPattern:O,segments:S}}le.create=function(Fe,k){if(typeof Fe>"u"||""===Fe)throw new Error("No input text");let S,$,O=V.M;return typeof k<"u"&&(O=V.from(k.errorCorrectionLevel,V.M),S=ee.from(k.version),$=M.from(k.maskPattern),k.toSJISFunc&&_.setToSJISFunction(k.toSJISFunc)),Ge(Fe,S,O,$)}},6289:(Nt,le,F)=>{const _=F(1744);function V(C){this.genPoly=void 0,this.degree=C,this.degree&&this.initialize(this.degree)}V.prototype.initialize=function(L){this.degree=L,this.genPoly=_.generateECPolynomial(this.degree)},V.prototype.encode=function(L){if(!this.genPoly)throw new Error("Encoder not initialized");const G=new Uint8Array(L.length+this.degree);G.set(L);const H=_.mod(G,this.genPoly),M=this.degree-H.length;if(M>0){const ie=new Uint8Array(this.degree);return ie.set(H,M),ie}return H},Nt.exports=V},9359:(Nt,le)=>{const F="[0-9]+";let V="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";V=V.replace(/u/g,"\\u");const C="(?:(?![A-Z0-9 $%*+\\-./:]|"+V+")(?:.|[\r\n]))+";le.KANJI=new RegExp(V,"g"),le.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),le.BYTE=new RegExp(C,"g"),le.NUMERIC=new RegExp(F,"g"),le.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const L=new RegExp("^"+V+"$"),G=new RegExp("^"+F+"$"),H=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");le.testKanji=function(ie){return L.test(ie)},le.testNumeric=function(ie){return G.test(ie)},le.testAlphanumeric=function(ie){return H.test(ie)}},2868:(Nt,le,F)=>{const _=F(1677),V=F(6628),C=F(1018),L=F(4969),G=F(3264),H=F(9359),M=F(9089),ie=F(243);function Ce(ne){return unescape(encodeURIComponent(ne)).length}function ee(ne,Y,re){const be=[];let Oe;for(;null!==(Oe=ne.exec(re));)be.push({data:Oe[0],index:Oe.index,mode:Y,length:Oe[0].length});return be}function X(ne){const Y=ee(H.NUMERIC,_.NUMERIC,ne),re=ee(H.ALPHANUMERIC,_.ALPHANUMERIC,ne);let be,Oe;return M.isKanjiModeEnabled()?(be=ee(H.BYTE,_.BYTE,ne),Oe=ee(H.KANJI,_.KANJI,ne)):(be=ee(H.BYTE_KANJI,_.BYTE,ne),Oe=[]),Y.concat(re,be,Oe).sort(function(_e,Fe){return _e.index-Fe.index}).map(function(_e){return{data:_e.data,mode:_e.mode,length:_e.length}})}function de(ne,Y){switch(Y){case _.NUMERIC:return V.getBitsLength(ne);case _.ALPHANUMERIC:return C.getBitsLength(ne);case _.KANJI:return G.getBitsLength(ne);case _.BYTE:return L.getBitsLength(ne)}}function ke(ne,Y){let re;const be=_.getBestModeForData(ne);if(re=_.from(Y,be),re!==_.BYTE&&re.bit<be.bit)throw new Error('"'+ne+'" cannot be encoded with mode '+_.toString(re)+".\n Suggested mode is: "+_.toString(be));switch(re===_.KANJI&&!M.isKanjiModeEnabled()&&(re=_.BYTE),re){case _.NUMERIC:return new V(ne);case _.ALPHANUMERIC:return new C(ne);case _.KANJI:return new G(ne);case _.BYTE:return new L(ne)}}le.fromArray=function(Y){return Y.reduce(function(re,be){return"string"==typeof be?re.push(ke(be,null)):be.data&&re.push(ke(be.data,be.mode)),re},[])},le.fromString=function(Y,re){const Oe=function pe(ne){const Y=[];for(let re=0;re<ne.length;re++){const be=ne[re];switch(be.mode){case _.NUMERIC:Y.push([be,{data:be.data,mode:_.ALPHANUMERIC,length:be.length},{data:be.data,mode:_.BYTE,length:be.length}]);break;case _.ALPHANUMERIC:Y.push([be,{data:be.data,mode:_.BYTE,length:be.length}]);break;case _.KANJI:Y.push([be,{data:be.data,mode:_.BYTE,length:Ce(be.data)}]);break;case _.BYTE:Y.push([{data:be.data,mode:_.BYTE,length:Ce(be.data)}])}}return Y}(X(Y,M.isKanjiModeEnabled())),Ge=function ye(ne,Y){const re={},be={start:{}};let Oe=["start"];for(let Ge=0;Ge<ne.length;Ge++){const _e=ne[Ge],Fe=[];for(let k=0;k<_e.length;k++){const O=_e[k],S=""+Ge+k;Fe.push(S),re[S]={node:O,lastCount:0},be[S]={};for(let $=0;$<Oe.length;$++){const K=Oe[$];re[K]&&re[K].node.mode===O.mode?(be[K][S]=de(re[K].lastCount+O.length,O.mode)-de(re[K].lastCount,O.mode),re[K].lastCount+=O.length):(re[K]&&(re[K].lastCount=O.length),be[K][S]=de(O.length,O.mode)+4+_.getCharCountIndicator(O.mode,Y))}}Oe=Fe}for(let Ge=0;Ge<Oe.length;Ge++)be[Oe[Ge]].end=0;return{map:be,table:re}}(Oe,re),_e=ie.find_path(Ge.map,"start","end"),Fe=[];for(let k=1;k<_e.length-1;k++)Fe.push(Ge.table[_e[k]].node);return le.fromArray(function oe(ne){return ne.reduce(function(Y,re){const be=Y.length-1>=0?Y[Y.length-1]:null;return be&&be.mode===re.mode?(Y[Y.length-1].data+=re.data,Y):(Y.push(re),Y)},[])}(Fe))},le.rawSplit=function(Y){return le.fromArray(X(Y,M.isKanjiModeEnabled()))}},9089:(Nt,le)=>{let F;const _=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];le.getSymbolSize=function(C){if(!C)throw new Error('"version" cannot be null or undefined');if(C<1||C>40)throw new Error('"version" should be in range from 1 to 40');return 4*C+17},le.getSymbolTotalCodewords=function(C){return _[C]},le.getBCHDigit=function(V){let C=0;for(;0!==V;)C++,V>>>=1;return C},le.setToSJISFunction=function(C){if("function"!=typeof C)throw new Error('"toSJISFunc" is not a valid function.');F=C},le.isKanjiModeEnabled=function(){return typeof F<"u"},le.toSJIS=function(C){return F(C)}},377:(Nt,le)=>{le.isValid=function(_){return!isNaN(_)&&_>=1&&_<=40}},1252:(Nt,le,F)=>{const _=F(9089),V=F(3677),C=F(7424),L=F(1677),G=F(377),M=_.getBCHDigit(7973);function Ce(de,oe){return L.getCharCountIndicator(de,oe)+4}function ee(de,oe){let pe=0;return de.forEach(function(ye){const ke=Ce(ye.mode,oe);pe+=ke+ye.getBitsLength()}),pe}le.from=function(oe,pe){return G.isValid(oe)?parseInt(oe,10):pe},le.getCapacity=function(oe,pe,ye){if(!G.isValid(oe))throw new Error("Invalid QR Code version");typeof ye>"u"&&(ye=L.BYTE);const Y=8*(_.getSymbolTotalCodewords(oe)-V.getTotalCodewordsCount(oe,pe));if(ye===L.MIXED)return Y;const re=Y-Ce(ye,oe);switch(ye){case L.NUMERIC:return Math.floor(re/10*3);case L.ALPHANUMERIC:return Math.floor(re/11*2);case L.KANJI:return Math.floor(re/13);default:return Math.floor(re/8)}},le.getBestVersionForData=function(oe,pe){let ye;const ke=C.from(pe,C.M);if(Array.isArray(oe)){if(oe.length>1)return function X(de,oe){for(let pe=1;pe<=40;pe++)if(ee(de,pe)<=le.getCapacity(pe,oe,L.MIXED))return pe}(oe,ke);if(0===oe.length)return 1;ye=oe[0]}else ye=oe;return function ie(de,oe,pe){for(let ye=1;ye<=40;ye++)if(oe<=le.getCapacity(ye,pe,de))return ye}(ye.mode,ye.getLength(),ke)},le.getEncodedBits=function(oe){if(!G.isValid(oe)||oe<7)throw new Error("Invalid QR Code version");let pe=oe<<12;for(;_.getBCHDigit(pe)-M>=0;)pe^=7973<<_.getBCHDigit(pe)-M;return oe<<12|pe}},7030:(Nt,le,F)=>{const _=F(7077);le.render=function(G,H,M){let ie=M,Ce=H;typeof ie>"u"&&(!H||!H.getContext)&&(ie=H,H=void 0),H||(Ce=function C(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}()),ie=_.getOptions(ie);const ee=_.getImageWidth(G.modules.size,ie),X=Ce.getContext("2d"),de=X.createImageData(ee,ee);return _.qrToImageData(de.data,G,ie),function V(L,G,H){L.clearRect(0,0,G.width,G.height),G.style||(G.style={}),G.height=H,G.width=H,G.style.height=H+"px",G.style.width=H+"px"}(X,Ce,ee),X.putImageData(de,0,0),Ce},le.renderToDataURL=function(G,H,M){let ie=M;return typeof ie>"u"&&(!H||!H.getContext)&&(ie=H,H=void 0),ie||(ie={}),le.render(G,H,ie).toDataURL(ie.type||"image/png",(ie.rendererOpts||{}).quality)}},6511:(Nt,le,F)=>{const _=F(7077);function V(G,H){const M=G.a/255,ie=H+'="'+G.hex+'"';return M<1?ie+" "+H+'-opacity="'+M.toFixed(2).slice(1)+'"':ie}function C(G,H,M){let ie=G+H;return typeof M<"u"&&(ie+=" "+M),ie}le.render=function(H,M,ie){const Ce=_.getOptions(M),ee=H.modules.size,X=H.modules.data,de=ee+2*Ce.margin,oe=Ce.color.light.a?"<path "+V(Ce.color.light,"fill")+' d="M0 0h'+de+"v"+de+'H0z"/>':"",pe="<path "+V(Ce.color.dark,"stroke")+' d="'+function L(G,H,M){let ie="",Ce=0,ee=!1,X=0;for(let de=0;de<G.length;de++){const oe=Math.floor(de%H),pe=Math.floor(de/H);!oe&&!ee&&(ee=!0),G[de]?(X++,de>0&&oe>0&&G[de-1]||(ie+=ee?C("M",oe+M,.5+pe+M):C("m",Ce,0),Ce=0,ee=!1),oe+1<H&&G[de+1]||(ie+=C("h",X),X=0)):Ce++}return ie}(X,ee,Ce.margin)+'"/>',ne='<svg xmlns="http://www.w3.org/2000/svg" '+(Ce.width?'width="'+Ce.width+'" height="'+Ce.width+'" ':"")+'viewBox="0 0 '+de+" "+de+'" shape-rendering="crispEdges">'+oe+pe+"</svg>\n";return"function"==typeof ie&&ie(null,ne),ne}},7077:(Nt,le)=>{function F(_){if("number"==typeof _&&(_=_.toString()),"string"!=typeof _)throw new Error("Color should be defined as hex string");let V=_.slice().replace("#","").split("");if(V.length<3||5===V.length||V.length>8)throw new Error("Invalid hex color: "+_);(3===V.length||4===V.length)&&(V=Array.prototype.concat.apply([],V.map(function(L){return[L,L]}))),6===V.length&&V.push("F","F");const C=parseInt(V.join(""),16);return{r:C>>24&255,g:C>>16&255,b:C>>8&255,a:255&C,hex:"#"+V.slice(0,6).join("")}}le.getOptions=function(V){V||(V={}),V.color||(V.color={});const L=V.width&&V.width>=21?V.width:void 0;return{width:L,scale:L?4:V.scale||4,margin:typeof V.margin>"u"||null===V.margin||V.margin<0?4:V.margin,color:{dark:F(V.color.dark||"#000000ff"),light:F(V.color.light||"#ffffffff")},type:V.type,rendererOpts:V.rendererOpts||{}}},le.getScale=function(V,C){return C.width&&C.width>=V+2*C.margin?C.width/(V+2*C.margin):C.scale},le.getImageWidth=function(V,C){const L=le.getScale(V,C);return Math.floor((V+2*C.margin)*L)},le.qrToImageData=function(V,C,L){const G=C.modules.size,H=C.modules.data,M=le.getScale(G,L),ie=Math.floor((G+2*L.margin)*M),Ce=L.margin*M,ee=[L.color.light,L.color.dark];for(let X=0;X<ie;X++)for(let de=0;de<ie;de++){let oe=4*(X*ie+de),pe=L.color.light;X>=Ce&&de>=Ce&&X<ie-Ce&&de<ie-Ce&&(pe=ee[H[Math.floor((X-Ce)/M)*G+Math.floor((de-Ce)/M)]?1:0]),V[oe++]=pe.r,V[oe++]=pe.g,V[oe++]=pe.b,V[oe]=pe.a}}},8996:(Nt,le,F)=>{var _={"./ion-accordion_2.entry.js":[2375,2076,2375],"./ion-action-sheet.entry.js":[8814,2076,8814],"./ion-alert.entry.js":[5222,2076,5222],"./ion-app_8.entry.js":[7720,2076,7720],"./ion-avatar_3.entry.js":[1049,1049],"./ion-back-button.entry.js":[3162,2076,3162],"./ion-backdrop.entry.js":[7240,7240],"./ion-breadcrumb_2.entry.js":[5933,2076,8314],"./ion-button_2.entry.js":[4591,4591],"./ion-card_5.entry.js":[8584,8584],"./ion-checkbox.entry.js":[3511,2076,3511],"./ion-chip.entry.js":[6024,6024],"./ion-col_3.entry.js":[5100,5100],"./ion-datetime-button.entry.js":[7428,771,7428],"./ion-datetime_3.entry.js":[5266,771,2076,2885],"./ion-fab_3.entry.js":[4463,2076,4463],"./ion-img.entry.js":[4183,4183],"./ion-infinite-scroll_2.entry.js":[4171,2076,4171],"./ion-input.entry.js":[9344,2076,9344],"./ion-item-option_3.entry.js":[5949,2076,5949],"./ion-item_8.entry.js":[3506,2076,3506],"./ion-loading.entry.js":[7372,2076,7372],"./ion-menu_3.entry.js":[2075,2076,2075],"./ion-modal.entry.js":[441,2076,441],"./ion-nav_2.entry.js":[5712,2076,5712],"./ion-picker-column-internal.entry.js":[1433,2076,1433],"./ion-picker-internal.entry.js":[2628,2628],"./ion-popover.entry.js":[6433,2076,6433],"./ion-progress-bar.entry.js":[9977,9977],"./ion-radio_2.entry.js":[8066,2076,8066],"./ion-range.entry.js":[8477,2076,8477],"./ion-refresher_2.entry.js":[5197,2076,5197],"./ion-reorder_2.entry.js":[4649,2076,7030],"./ion-ripple-effect.entry.js":[964,964],"./ion-route_4.entry.js":[8970,8970],"./ion-searchbar.entry.js":[8193,2076,8193],"./ion-segment_2.entry.js":[2560,2076,2560],"./ion-select_3.entry.js":[7076,2076,7076],"./ion-spinner.entry.js":[8805,2076,8805],"./ion-split-pane.entry.js":[5887,5887],"./ion-tab-bar_2.entry.js":[4406,2076,4406],"./ion-tab_2.entry.js":[1102,1102],"./ion-text.entry.js":[1577,1577],"./ion-textarea.entry.js":[2348,2076,2348],"./ion-toast.entry.js":[2415,2076,2415],"./ion-toggle.entry.js":[3814,2076,3814]};function V(C){if(!F.o(_,C))return Promise.resolve().then(()=>{var H=new Error("Cannot find module '"+C+"'");throw H.code="MODULE_NOT_FOUND",H});var L=_[C],G=L[0];return Promise.all(L.slice(1).map(F.e)).then(()=>F(G))}V.keys=()=>Object.keys(_),V.id=8996,Nt.exports=V},3345:(Nt,le,F)=>{"use strict";F.d(le,{A:()=>ye});var _=F(1076),V=F(1362),C=F(7852),L=F(8041);class G{constructor(ne,Y){this._delegate=ne,this.firebase=Y,(0,C._addComponent)(ne,new V.uA("app-compat",()=>this,"PUBLIC")),this.container=ne.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ne){this._delegate.automaticDataCollectionEnabled=ne}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ne=>{this._delegate.checkDestroyed(),ne()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,C.deleteApp)(this._delegate)))}_getService(ne,Y=C._DEFAULT_ENTRY_NAME){var re;this._delegate.checkDestroyed();const be=this._delegate.container.getProvider(ne);return!be.isInitialized()&&"EXPLICIT"===(null===(re=be.getComponent())||void 0===re?void 0:re.instantiationMode)&&be.initialize(),be.getImmediate({identifier:Y})}_removeServiceInstance(ne,Y=C._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ne).clearInstance(Y)}_addComponent(ne){(0,C._addComponent)(this._delegate,ne)}_addOrOverwriteComponent(ne){(0,C._addOrOverwriteComponent)(this._delegate,ne)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const M=new _.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ee=function Ce(){const ke=function ie(ke){const ne={},Y={__esModule:!0,initializeApp:function Oe(k,O={}){const S=C.initializeApp(k,O);if((0,_.gR)(ne,S.name))return ne[S.name];const $=new ke(S,Y);return ne[S.name]=$,$},app:be,registerVersion:C.registerVersion,setLogLevel:C.setLogLevel,onLog:C.onLog,apps:null,SDK_VERSION:C.SDK_VERSION,INTERNAL:{registerComponent:function _e(k){const O=k.name,S=O.replace("-compat","");if(C._registerComponent(k)&&"PUBLIC"===k.type){const $=(K=be())=>{if("function"!=typeof K[S])throw M.create("invalid-app-argument",{appName:O});return K[S]()};void 0!==k.serviceProps&&(0,_.zw)($,k.serviceProps),Y[S]=$,ke.prototype[S]=function(...K){return this._getService.bind(this,O).apply(this,k.multipleInstances?K:[])}}return"PUBLIC"===k.type?Y[S]:null},removeApp:function re(k){delete ne[k]},useAsService:function Fe(k,O){return"serverAuth"===O?null:O},modularAPIs:C}};function be(k){if(!(0,_.gR)(ne,k=k||C._DEFAULT_ENTRY_NAME))throw M.create("no-app",{appName:k});return ne[k]}return Y.default=Y,Object.defineProperty(Y,"apps",{get:function Ge(){return Object.keys(ne).map(k=>ne[k])}}),be.App=ke,Y}(G);return ke.INTERNAL=Object.assign(Object.assign({},ke.INTERNAL),{createFirebaseNamespace:Ce,extendNamespace:function ne(Y){(0,_.zw)(ke,Y)},createSubscribe:_.tD,ErrorFactory:_.FA,deepExtend:_.zw}),ke}(),X=new L.Vy("@firebase/app-compat");if((0,_.Bd)()&&void 0!==self.firebase){X.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ke=self.firebase.SDK_VERSION;ke&&ke.indexOf("LITE")>=0&&X.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ye=ee;!function pe(ke){(0,C.registerVersion)("@firebase/app-compat","0.2.29",ke)}()},7852:(Nt,le,F)=>{"use strict";F.r(le),F.d(le,{FirebaseError:()=>L.g,SDK_VERSION:()=>Ki,_DEFAULT_ENTRY_NAME:()=>Jt,_addComponent:()=>Si,_addOrOverwriteComponent:()=>zr,_apps:()=>$n,_clearComponents:()=>wi,_components:()=>Qr,_getProvider:()=>Ri,_registerComponent:()=>lo,_removeServiceInstance:()=>qi,deleteApp:()=>xi,getApp:()=>ps,getApps:()=>Fs,initializeApp:()=>fs,onLog:()=>Xo,registerVersion:()=>Yo,setLogLevel:()=>Un});var _=F(467),V=F(1362),C=F(8041),L=F(1076);const G=(Ne,we)=>we.some(qe=>Ne instanceof qe);let H,M;const ee=new WeakMap,X=new WeakMap,de=new WeakMap,oe=new WeakMap,pe=new WeakMap;let ne={get(Ne,we,qe){if(Ne instanceof IDBTransaction){if("done"===we)return X.get(Ne);if("objectStoreNames"===we)return Ne.objectStoreNames||de.get(Ne);if("store"===we)return qe.objectStoreNames[1]?void 0:qe.objectStore(qe.objectStoreNames[0])}return Oe(Ne[we])},set:(Ne,we,qe)=>(Ne[we]=qe,!0),has:(Ne,we)=>Ne instanceof IDBTransaction&&("done"===we||"store"===we)||we in Ne};function be(Ne){return"function"==typeof Ne?function re(Ne){return Ne!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ce(){return M||(M=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ne)?function(...we){return Ne.apply(Ge(this),we),Oe(ee.get(this))}:function(...we){return Oe(Ne.apply(Ge(this),we))}:function(we,...qe){const bt=Ne.call(Ge(this),we,...qe);return de.set(bt,we.sort?we.sort():[we]),Oe(bt)}}(Ne):(Ne instanceof IDBTransaction&&function ke(Ne){if(X.has(Ne))return;const we=new Promise((qe,bt)=>{const Gt=()=>{Ne.removeEventListener("complete",$t),Ne.removeEventListener("error",fn),Ne.removeEventListener("abort",fn)},$t=()=>{qe(),Gt()},fn=()=>{bt(Ne.error||new DOMException("AbortError","AbortError")),Gt()};Ne.addEventListener("complete",$t),Ne.addEventListener("error",fn),Ne.addEventListener("abort",fn)});X.set(Ne,we)}(Ne),G(Ne,function ie(){return H||(H=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ne,ne):Ne)}function Oe(Ne){if(Ne instanceof IDBRequest)return function ye(Ne){const we=new Promise((qe,bt)=>{const Gt=()=>{Ne.removeEventListener("success",$t),Ne.removeEventListener("error",fn)},$t=()=>{qe(Oe(Ne.result)),Gt()},fn=()=>{bt(Ne.error),Gt()};Ne.addEventListener("success",$t),Ne.addEventListener("error",fn)});return we.then(qe=>{qe instanceof IDBCursor&&ee.set(qe,Ne)}).catch(()=>{}),pe.set(we,Ne),we}(Ne);if(oe.has(Ne))return oe.get(Ne);const we=be(Ne);return we!==Ne&&(oe.set(Ne,we),pe.set(we,Ne)),we}const Ge=Ne=>pe.get(Ne),k=["get","getKey","getAll","getAllKeys","count"],O=["put","add","delete","clear"],S=new Map;function $(Ne,we){if(!(Ne instanceof IDBDatabase)||we in Ne||"string"!=typeof we)return;if(S.get(we))return S.get(we);const qe=we.replace(/FromIndex$/,""),bt=we!==qe,Gt=O.includes(qe);if(!(qe in(bt?IDBIndex:IDBObjectStore).prototype)||!Gt&&!k.includes(qe))return;const $t=function(){var fn=(0,_.A)(function*(Ir,...Kn){const nr=this.transaction(Ir,Gt?"readwrite":"readonly");let gs=nr.store;return bt&&(gs=gs.index(Kn.shift())),(yield Promise.all([gs[qe](...Kn),Gt&&nr.done]))[0]});return function(Kn){return fn.apply(this,arguments)}}();return S.set(we,$t),$t}!function Y(Ne){ne=Ne(ne)}(Ne=>({...Ne,get:(we,qe,bt)=>$(we,qe)||Ne.get(we,qe,bt),has:(we,qe)=>!!$(we,qe)||Ne.has(we,qe)}));class K{constructor(we){this.container=we}getPlatformInfoString(){return this.container.getProviders().map(qe=>{if(function se(Ne){const we=Ne.getComponent();return"VERSION"===(null==we?void 0:we.type)}(qe)){const bt=qe.getImmediate();return`${bt.library}/${bt.version}`}return null}).filter(qe=>qe).join(" ")}}const fe="@firebase/app",wt=new C.Vy("@firebase/app"),Jt="[DEFAULT]",_r={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},$n=new Map,Qr=new Map;function Si(Ne,we){try{Ne.container.addComponent(we)}catch(qe){wt.debug(`Component ${we.name} failed to register with FirebaseApp ${Ne.name}`,qe)}}function zr(Ne,we){Ne.container.addOrOverwriteComponent(we)}function lo(Ne){const we=Ne.name;if(Qr.has(we))return wt.debug(`There were multiple attempts to register component ${we}.`),!1;Qr.set(we,Ne);for(const qe of $n.values())Si(qe,Ne);return!0}function Ri(Ne,we){const qe=Ne.container.getProvider("heartbeat").getImmediate({optional:!0});return qe&&qe.triggerHeartbeat(),Ne.container.getProvider(we)}function qi(Ne,we,qe=Jt){Ri(Ne,we).clearInstance(qe)}function wi(){Qr.clear()}const ni=new L.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class qn{constructor(we,qe,bt){this._isDeleted=!1,this._options=Object.assign({},we),this._config=Object.assign({},qe),this._name=qe.name,this._automaticDataCollectionEnabled=qe.automaticDataCollectionEnabled,this._container=bt,this.container.addComponent(new V.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(we){this.checkDestroyed(),this._automaticDataCollectionEnabled=we}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(we){this._isDeleted=we}checkDestroyed(){if(this.isDeleted)throw ni.create("app-deleted",{appName:this._name})}}const Ki="10.9.0";function fs(Ne,we={}){let qe=Ne;"object"!=typeof we&&(we={name:we});const bt=Object.assign({name:Jt,automaticDataCollectionEnabled:!1},we),Gt=bt.name;if("string"!=typeof Gt||!Gt)throw ni.create("bad-app-name",{appName:String(Gt)});if(qe||(qe=(0,L.T9)()),!qe)throw ni.create("no-options");const $t=$n.get(Gt);if($t){if((0,L.bD)(qe,$t.options)&&(0,L.bD)(bt,$t.config))return $t;throw ni.create("duplicate-app",{appName:Gt})}const fn=new V.h1(Gt);for(const Kn of Qr.values())fn.addComponent(Kn);const Ir=new qn(qe,bt,fn);return $n.set(Gt,Ir),Ir}function ps(Ne=Jt){const we=$n.get(Ne);if(!we&&Ne===Jt&&(0,L.T9)())return fs();if(!we)throw ni.create("no-app",{appName:Ne});return we}function Fs(){return Array.from($n.values())}function xi(Ne){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,_.A)(function*(Ne){const we=Ne.name;$n.has(we)&&($n.delete(we),yield Promise.all(Ne.container.getProviders().map(qe=>qe.delete())),Ne.isDeleted=!0)})).apply(this,arguments)}function Yo(Ne,we,qe){var bt;let Gt=null!==(bt=_r[Ne])&&void 0!==bt?bt:Ne;qe&&(Gt+=`-${qe}`);const $t=Gt.match(/\s|\//),fn=we.match(/\s|\//);if($t||fn){const Ir=[`Unable to register library "${Gt}" with version "${we}":`];return $t&&Ir.push(`library name "${Gt}" contains illegal characters (whitespace or "/")`),$t&&fn&&Ir.push("and"),fn&&Ir.push(`version name "${we}" contains illegal characters (whitespace or "/")`),void wt.warn(Ir.join(" "))}lo(new V.uA(`${Gt}-version`,()=>({library:Gt,version:we}),"VERSION"))}function Xo(Ne,we){if(null!==Ne&&"function"!=typeof Ne)throw ni.create("invalid-log-argument");(0,C.Ey)(Ne,we)}function Un(Ne){(0,C.He)(Ne)}const Ls="firebase-heartbeat-database",ua=1,Z="firebase-heartbeat-store";let U=null;function te(){return U||(U=function _e(Ne,we,{blocked:qe,upgrade:bt,blocking:Gt,terminated:$t}={}){const fn=indexedDB.open(Ne,we),Ir=Oe(fn);return bt&&fn.addEventListener("upgradeneeded",Kn=>{bt(Oe(fn.result),Kn.oldVersion,Kn.newVersion,Oe(fn.transaction),Kn)}),qe&&fn.addEventListener("blocked",Kn=>qe(Kn.oldVersion,Kn.newVersion,Kn)),Ir.then(Kn=>{$t&&Kn.addEventListener("close",()=>$t()),Gt&&Kn.addEventListener("versionchange",nr=>Gt(nr.oldVersion,nr.newVersion,nr))}).catch(()=>{}),Ir}(Ls,ua,{upgrade:(Ne,we)=>{if(0===we)try{Ne.createObjectStore(Z)}catch(qe){console.warn(qe)}}}).catch(Ne=>{throw ni.create("idb-open",{originalErrorMessage:Ne.message})})),U}function ue(){return(ue=(0,_.A)(function*(Ne){try{const qe=(yield te()).transaction(Z),bt=yield qe.objectStore(Z).get(Bt(Ne));return yield qe.done,bt}catch(we){if(we instanceof L.g)wt.warn(we.message);else{const qe=ni.create("idb-get",{originalErrorMessage:null==we?void 0:we.message});wt.warn(qe.message)}}})).apply(this,arguments)}function _t(Ne,we){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,_.A)(function*(Ne,we){try{const bt=(yield te()).transaction(Z,"readwrite");yield bt.objectStore(Z).put(we,Bt(Ne)),yield bt.done}catch(qe){if(qe instanceof L.g)wt.warn(qe.message);else{const bt=ni.create("idb-set",{originalErrorMessage:null==qe?void 0:qe.message});wt.warn(bt.message)}}})).apply(this,arguments)}function Bt(Ne){return`${Ne.name}!${Ne.options.appId}`}class Hr{constructor(we){this.container=we,this._heartbeatsCache=null;const qe=this.container.getProvider("app").getImmediate();this._storage=new hi(qe),this._heartbeatsCachePromise=this._storage.read().then(bt=>(this._heartbeatsCache=bt,bt))}triggerHeartbeat(){var we=this;return(0,_.A)(function*(){var qe,bt;const $t=we.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),fn=dn();if((null!=(null===(qe=we._heartbeatsCache)||void 0===qe?void 0:qe.heartbeats)||(we._heartbeatsCache=yield we._heartbeatsCachePromise,null!=(null===(bt=we._heartbeatsCache)||void 0===bt?void 0:bt.heartbeats)))&&we._heartbeatsCache.lastSentHeartbeatDate!==fn&&!we._heartbeatsCache.heartbeats.some(Ir=>Ir.date===fn))return we._heartbeatsCache.heartbeats.push({date:fn,agent:$t}),we._heartbeatsCache.heartbeats=we._heartbeatsCache.heartbeats.filter(Ir=>{const Kn=new Date(Ir.date).valueOf();return Date.now()-Kn<=2592e6}),we._storage.overwrite(we._heartbeatsCache)})()}getHeartbeatsHeader(){var we=this;return(0,_.A)(function*(){var qe;if(null===we._heartbeatsCache&&(yield we._heartbeatsCachePromise),null==(null===(qe=we._heartbeatsCache)||void 0===qe?void 0:qe.heartbeats)||0===we._heartbeatsCache.heartbeats.length)return"";const bt=dn(),{heartbeatsToSend:Gt,unsentEntries:$t}=function Ue(Ne,we=1024){const qe=[];let bt=Ne.slice();for(const Gt of Ne){const $t=qe.find(fn=>fn.agent===Gt.agent);if($t){if($t.dates.push(Gt.date),Qi(qe)>we){$t.dates.pop();break}}else if(qe.push({agent:Gt.agent,dates:[Gt.date]}),Qi(qe)>we){qe.pop();break}bt=bt.slice(1)}return{heartbeatsToSend:qe,unsentEntries:bt}}(we._heartbeatsCache.heartbeats),fn=(0,L.Uj)(JSON.stringify({version:2,heartbeats:Gt}));return we._heartbeatsCache.lastSentHeartbeatDate=bt,$t.length>0?(we._heartbeatsCache.heartbeats=$t,yield we._storage.overwrite(we._heartbeatsCache)):(we._heartbeatsCache.heartbeats=[],we._storage.overwrite(we._heartbeatsCache)),fn})()}}function dn(){return(new Date).toISOString().substring(0,10)}class hi{constructor(we){this.app=we,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.A)(function*(){return!!(0,L.zW)()&&(0,L.eX)().then(()=>!0).catch(()=>!1)})()}read(){var we=this;return(0,_.A)(function*(){if(yield we._canUseIndexedDBPromise){const bt=yield function Le(Ne){return ue.apply(this,arguments)}(we.app);return null!=bt&&bt.heartbeats?bt:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(we){var qe=this;return(0,_.A)(function*(){var bt;if(yield qe._canUseIndexedDBPromise){const $t=yield qe.read();return _t(qe.app,{lastSentHeartbeatDate:null!==(bt=we.lastSentHeartbeatDate)&&void 0!==bt?bt:$t.lastSentHeartbeatDate,heartbeats:we.heartbeats})}})()}add(we){var qe=this;return(0,_.A)(function*(){var bt;if(yield qe._canUseIndexedDBPromise){const $t=yield qe.read();return _t(qe.app,{lastSentHeartbeatDate:null!==(bt=we.lastSentHeartbeatDate)&&void 0!==bt?bt:$t.lastSentHeartbeatDate,heartbeats:[...$t.heartbeats,...we.heartbeats]})}})()}}function Qi(Ne){return(0,L.Uj)(JSON.stringify({version:2,heartbeats:Ne})).length}!function Vs(Ne){lo(new V.uA("platform-logger",we=>new K(we),"PRIVATE")),lo(new V.uA("heartbeat",we=>new Hr(we),"PRIVATE")),Yo(fe,"0.9.29",Ne),Yo(fe,"0.9.29","esm2017"),Yo("fire-js","")}("")},1362:(Nt,le,F)=>{"use strict";F.d(le,{Kq:()=>G,h1:()=>ie,uA:()=>C});var _=F(467),V=F(1076);class C{constructor(ee,X,de){this.name=ee,this.instanceFactory=X,this.type=de,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ee){return this.instantiationMode=ee,this}setMultipleInstances(ee){return this.multipleInstances=ee,this}setServiceProps(ee){return this.serviceProps=ee,this}setInstanceCreatedCallback(ee){return this.onInstanceCreated=ee,this}}const L="[DEFAULT]";class G{constructor(ee,X){this.name=ee,this.container=X,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ee){const X=this.normalizeInstanceIdentifier(ee);if(!this.instancesDeferred.has(X)){const de=new V.cY;if(this.instancesDeferred.set(X,de),this.isInitialized(X)||this.shouldAutoInitialize())try{const oe=this.getOrInitializeService({instanceIdentifier:X});oe&&de.resolve(oe)}catch{}}return this.instancesDeferred.get(X).promise}getImmediate(ee){var X;const de=this.normalizeInstanceIdentifier(null==ee?void 0:ee.identifier),oe=null!==(X=null==ee?void 0:ee.optional)&&void 0!==X&&X;if(!this.isInitialized(de)&&!this.shouldAutoInitialize()){if(oe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:de})}catch(pe){if(oe)return null;throw pe}}getComponent(){return this.component}setComponent(ee){if(ee.name!==this.name)throw Error(`Mismatching Component ${ee.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ee,this.shouldAutoInitialize()){if(function M(Ce){return"EAGER"===Ce.instantiationMode}(ee))try{this.getOrInitializeService({instanceIdentifier:L})}catch{}for(const[X,de]of this.instancesDeferred.entries()){const oe=this.normalizeInstanceIdentifier(X);try{const pe=this.getOrInitializeService({instanceIdentifier:oe});de.resolve(pe)}catch{}}}}clearInstance(ee=L){this.instancesDeferred.delete(ee),this.instancesOptions.delete(ee),this.instances.delete(ee)}delete(){var ee=this;return(0,_.A)(function*(){const X=Array.from(ee.instances.values());yield Promise.all([...X.filter(de=>"INTERNAL"in de).map(de=>de.INTERNAL.delete()),...X.filter(de=>"_delete"in de).map(de=>de._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ee=L){return this.instances.has(ee)}getOptions(ee=L){return this.instancesOptions.get(ee)||{}}initialize(ee={}){const{options:X={}}=ee,de=this.normalizeInstanceIdentifier(ee.instanceIdentifier);if(this.isInitialized(de))throw Error(`${this.name}(${de}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const oe=this.getOrInitializeService({instanceIdentifier:de,options:X});for(const[pe,ye]of this.instancesDeferred.entries())de===this.normalizeInstanceIdentifier(pe)&&ye.resolve(oe);return oe}onInit(ee,X){var de;const oe=this.normalizeInstanceIdentifier(X),pe=null!==(de=this.onInitCallbacks.get(oe))&&void 0!==de?de:new Set;pe.add(ee),this.onInitCallbacks.set(oe,pe);const ye=this.instances.get(oe);return ye&&ee(ye,oe),()=>{pe.delete(ee)}}invokeOnInitCallbacks(ee,X){const de=this.onInitCallbacks.get(X);if(de)for(const oe of de)try{oe(ee,X)}catch{}}getOrInitializeService({instanceIdentifier:ee,options:X={}}){let de=this.instances.get(ee);if(!de&&this.component&&(de=this.component.instanceFactory(this.container,{instanceIdentifier:(Ce=ee,Ce===L?void 0:Ce),options:X}),this.instances.set(ee,de),this.instancesOptions.set(ee,X),this.invokeOnInitCallbacks(de,ee),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ee,de)}catch{}var Ce;return de||null}normalizeInstanceIdentifier(ee=L){return this.component?this.component.multipleInstances?ee:L:ee}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ie{constructor(ee){this.name=ee,this.providers=new Map}addComponent(ee){const X=this.getProvider(ee.name);if(X.isComponentSet())throw new Error(`Component ${ee.name} has already been registered with ${this.name}`);X.setComponent(ee)}addOrOverwriteComponent(ee){this.getProvider(ee.name).isComponentSet()&&this.providers.delete(ee.name),this.addComponent(ee)}getProvider(ee){if(this.providers.has(ee))return this.providers.get(ee);const X=new G(ee,this);return this.providers.set(ee,X),X}getProviders(){return Array.from(this.providers.values())}}},8041:(Nt,le,F)=>{"use strict";F.d(le,{$b:()=>V,Ey:()=>Ce,He:()=>ie,Vy:()=>M});const _=[];var V=function(ee){return ee[ee.DEBUG=0]="DEBUG",ee[ee.VERBOSE=1]="VERBOSE",ee[ee.INFO=2]="INFO",ee[ee.WARN=3]="WARN",ee[ee.ERROR=4]="ERROR",ee[ee.SILENT=5]="SILENT",ee}(V||{});const C={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},L=V.INFO,G={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},H=(ee,X,...de)=>{if(X<ee.logLevel)return;const oe=(new Date).toISOString(),pe=G[X];if(!pe)throw new Error(`Attempted to log a message with an invalid logType (value: ${X})`);console[pe](`[${oe}]  ${ee.name}:`,...de)};class M{constructor(X){this.name=X,this._logLevel=L,this._logHandler=H,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(X){if(!(X in V))throw new TypeError(`Invalid value "${X}" assigned to \`logLevel\``);this._logLevel=X}setLogLevel(X){this._logLevel="string"==typeof X?C[X]:X}get logHandler(){return this._logHandler}set logHandler(X){if("function"!=typeof X)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=X}get userLogHandler(){return this._userLogHandler}set userLogHandler(X){this._userLogHandler=X}debug(...X){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...X),this._logHandler(this,V.DEBUG,...X)}log(...X){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...X),this._logHandler(this,V.VERBOSE,...X)}info(...X){this._userLogHandler&&this._userLogHandler(this,V.INFO,...X),this._logHandler(this,V.INFO,...X)}warn(...X){this._userLogHandler&&this._userLogHandler(this,V.WARN,...X),this._logHandler(this,V.WARN,...X)}error(...X){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...X),this._logHandler(this,V.ERROR,...X)}}function ie(ee){_.forEach(X=>{X.setLogLevel(ee)})}function Ce(ee,X){for(const de of _){let oe=null;X&&X.level&&(oe=C[X.level]),de.userLogHandler=null===ee?null:(pe,ye,...ke)=>{const ne=ke.map(Y=>{if(null==Y)return null;if("string"==typeof Y)return Y;if("number"==typeof Y||"boolean"==typeof Y)return Y.toString();if(Y instanceof Error)return Y.message;try{return JSON.stringify(Y)}catch{return null}}).filter(Y=>Y).join(" ");ye>=(null!=oe?oe:pe.logLevel)&&ee({level:V[ye].toLowerCase(),message:ne,args:ke,type:pe.name})}}}},6020:(Nt,le,F)=>{"use strict";F.r(le);var _=F(467),V=F(3345),C=F(1076),L=F(7852),G=F(8041),H=F(1635),M=F(1362);const Ce={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const ye=function oe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},ke=function pe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ne=new C.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),re=new G.Vy("@firebase/auth");function Oe(p,...u){re.logLevel<=G.$b.ERROR&&re.error(`Auth (${L.SDK_VERSION}): ${p}`,...u)}function Ge(p,...u){throw O(p,...u)}function _e(p,...u){return O(p,...u)}function Fe(p,u,d){const g=Object.assign(Object.assign({},ke()),{[u]:d});return new C.FA("auth","Firebase",g).create(u,{appName:p.name})}function k(p,u,d){if(!(u instanceof d))throw d.name!==u.constructor.name&&Ge(p,"argument-error"),Fe(p,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function O(p,...u){if("string"!=typeof p){const d=u[0],g=[...u.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(d,...g)}return ne.create(p,...u)}function S(p,u,...d){if(!p)throw O(u,...d)}function $(p){const u="INTERNAL ASSERTION FAILED: "+p;throw Oe(u),new Error(u)}function K(p,u){p||$(u)}function se(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function fe(){return"http:"===nt()||"https:"===nt()}function nt(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class Ve{constructor(u,d){this.shortDelay=u,this.longDelay=d,K(d>u,"Short delay should be less than long delay!"),this.isMobile=(0,C.jZ)()||(0,C.lV)()}get(){return function wt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(fe()||(0,C.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function q(p,u){K(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return u?`${d}${u.startsWith("/")?u.slice(1):u}`:d}class B{static initialize(u,d,g){this.fetchImpl=u,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void $("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void $("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void $("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const j={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ce=new Ve(3e4,6e4);function Ie(p,u){return p.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:p.tenantId}):u}function he(p,u,d,g){return it.apply(this,arguments)}function it(){return(it=(0,_.A)(function*(p,u,d,g,y={}){return gt(p,y,(0,_.A)(function*(){let A={},W={};g&&("GET"===u?W=g:A={body:JSON.stringify(g)});const ge=(0,C.Am)(Object.assign({key:p.config.apiKey},W)).slice(1),He=yield p._getAdditionalHeaders();return He["Content-Type"]="application/json",p.languageCode&&(He["X-Firebase-Locale"]=p.languageCode),B.fetch()(un(p,p.config.apiHost,d,ge),Object.assign({method:u,headers:He,referrerPolicy:"no-referrer"},A))}))})).apply(this,arguments)}function gt(p,u,d){return ot.apply(this,arguments)}function ot(){return(ot=(0,_.A)(function*(p,u,d){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},j),u);try{const y=new mn(p),A=yield Promise.race([d(),y.promise]);y.clearNetworkTimeout();const W=yield A.json();if("needConfirmation"in W)throw Ht(p,"account-exists-with-different-credential",W);if(A.ok&&!("errorMessage"in W))return W;{const ge=A.ok?W.errorMessage:W.error.message,[He,yt]=ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===He)throw Ht(p,"credential-already-in-use",W);if("EMAIL_EXISTS"===He)throw Ht(p,"email-already-in-use",W);if("USER_DISABLED"===He)throw Ht(p,"user-disabled",W);const kt=g[He]||He.toLowerCase().replace(/[_\s]+/g,"-");if(yt)throw Fe(p,kt,yt);Ge(p,kt)}}catch(y){if(y instanceof C.g)throw y;Ge(p,"network-request-failed",{message:String(y)})}})).apply(this,arguments)}function ut(p,u,d,g){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,_.A)(function*(p,u,d,g,y={}){const A=yield he(p,u,d,g,y);return"mfaPendingCredential"in A&&Ge(p,"multi-factor-auth-required",{_serverResponse:A}),A})).apply(this,arguments)}function un(p,u,d,g){const y=`${u}${d}?${g}`;return p.config.emulator?q(p.config,y):`${p.config.apiScheme}://${y}`}function Dt(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mn{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(_e(this.auth,"network-request-failed")),ce.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ht(p,u,d){const g={appName:p.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const y=_e(p,u,g);return y.customData._tokenResponse=d,y}function Be(p){return void 0!==p&&void 0!==p.getResponse}function De(p){return void 0!==p&&void 0!==p.enterprise}class Me{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===u)return Dt(d.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function Qt(){return(Qt=(0,_.A)(function*(p){return(yield he(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function In(p,u){return sn.apply(this,arguments)}function sn(){return(sn=(0,_.A)(function*(p,u){return he(p,"GET","/v2/recaptchaConfig",Ie(p,u))})).apply(this,arguments)}function Jt(){return(Jt=(0,_.A)(function*(p,u){return he(p,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function $n(){return($n=(0,_.A)(function*(p,u){return he(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Si(){return(Si=(0,_.A)(function*(p,u){return he(p,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function zr(p){if(p)try{const u=new Date(Number(p));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function qi(){return(qi=(0,_.A)(function*(p,u=!1){const d=(0,C.Ku)(p),g=yield d.getIdToken(u),y=ui(g);S(y&&y.exp&&y.auth_time&&y.iat,d.auth,"internal-error");const A="object"==typeof y.firebase?y.firebase:void 0,W=null==A?void 0:A.sign_in_provider;return{claims:y,token:g,authTime:zr(wi(y.auth_time)),issuedAtTime:zr(wi(y.iat)),expirationTime:zr(wi(y.exp)),signInProvider:W||null,signInSecondFactor:(null==A?void 0:A.sign_in_second_factor)||null}})).apply(this,arguments)}function wi(p){return 1e3*Number(p)}function ui(p){const[u,d,g]=p.split(".");if(void 0===u||void 0===d||void 0===g)return Oe("JWT malformed, contained fewer than 3 sections"),null;try{const y=(0,C.u)(d);return y?JSON.parse(y):(Oe("Failed to decode base64 JWT payload"),null)}catch(y){return Oe("Caught error parsing JWT payload as JSON",null==y?void 0:y.toString()),null}}function qn(p,u){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,_.A)(function*(p,u,d=!1){if(d)return u;try{return yield u}catch(g){throw g instanceof C.g&&function fs({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class ps{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var d;if(u){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const y=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,y)}}schedule(u=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(u);this.timerId=setTimeout((0,_.A)(function*(){yield d.iteration()}),g)}iteration(){var u=this;return(0,_.A)(function*(){try{yield u.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===(null==d?void 0:d.code)&&u.schedule(!0))}u.schedule()})()}}class Fs{constructor(u,d){this.createdAt=u,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=zr(this.lastLoginAt),this.creationTime=zr(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function xi(p){return Rr.apply(this,arguments)}function Rr(){return Rr=(0,_.A)(function*(p){var u;const d=p.auth,g=yield p.getIdToken(),y=yield qn(p,function Qr(p,u){return Si.apply(this,arguments)}(d,{idToken:g}));S(null==y?void 0:y.users.length,d,"internal-error");const A=y.users[0];p._notifyReloadListener(A);const W=null!==(u=A.providerUserInfo)&&void 0!==u&&u.length?function Ls(p){return p.map(u=>{var{providerId:d}=u,g=(0,H.Tt)(u,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}(A.providerUserInfo):[],ge=function Un(p,u){return[...p.filter(g=>!u.some(y=>y.providerId===g.providerId)),...u]}(p.providerData,W),kt=!!p.isAnonymous&&!(p.email&&A.passwordHash||null!=ge&&ge.length),lt={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:ge,metadata:new Fs(A.createdAt,A.lastLoginAt),isAnonymous:kt};Object.assign(p,lt)}),Rr.apply(this,arguments)}function Xo(){return(Xo=(0,_.A)(function*(p){const u=(0,C.Ku)(p);yield xi(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function Z(){return(Z=(0,_.A)(function*(p,u){const d=yield gt(p,{},(0,_.A)(function*(){const g=(0,C.Am)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:y,apiKey:A}=p.config,W=un(p,y,"/v1/token",`key=${A}`),ge=yield p._getAdditionalHeaders();return ge["Content-Type"]="application/x-www-form-urlencoded",B.fetch()(W,{method:"POST",headers:ge,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function te(){return(te=(0,_.A)(function*(p,u){return he(p,"POST","/v2/accounts:revokeToken",Ie(p,u))})).apply(this,arguments)}class Le{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){S(u.idToken,"internal-error"),S(typeof u.idToken<"u","internal-error"),S(typeof u.refreshToken<"u","internal-error");const d="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):function ni(p){const u=ui(p);return S(u,"internal-error"),S(typeof u.exp<"u","internal-error"),S(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,d)}getToken(u,d=!1){var g=this;return(0,_.A)(function*(){return S(!g.accessToken||g.refreshToken,u,"user-token-expired"),d||!g.accessToken||g.isExpired?g.refreshToken?(yield g.refresh(u,g.refreshToken),g.accessToken):null:g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(u,d){var g=this;return(0,_.A)(function*(){const{accessToken:y,refreshToken:A,expiresIn:W}=yield function ua(p,u){return Z.apply(this,arguments)}(u,d);g.updateTokensAndExpiration(y,A,Number(W))})()}updateTokensAndExpiration(u,d,g){this.refreshToken=d||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(u,d){const{refreshToken:g,accessToken:y,expirationTime:A}=d,W=new Le;return g&&(S("string"==typeof g,"internal-error",{appName:u}),W.refreshToken=g),y&&(S("string"==typeof y,"internal-error",{appName:u}),W.accessToken=y),A&&(S("number"==typeof A,"internal-error",{appName:u}),W.expirationTime=A),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new Le,this.toJSON())}_performRefresh(){return $("not implemented")}}function ue(p,u){S("string"==typeof p||typeof p>"u","internal-error",{appName:u})}class _t{constructor(u){var{uid:d,auth:g,stsTokenManager:y}=u,A=(0,H.Tt)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ps(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=y,this.accessToken=y.accessToken,this.displayName=A.displayName||null,this.email=A.email||null,this.emailVerified=A.emailVerified||!1,this.phoneNumber=A.phoneNumber||null,this.photoURL=A.photoURL||null,this.isAnonymous=A.isAnonymous||!1,this.tenantId=A.tenantId||null,this.providerData=A.providerData?[...A.providerData]:[],this.metadata=new Fs(A.createdAt||void 0,A.lastLoginAt||void 0)}getIdToken(u){var d=this;return(0,_.A)(function*(){const g=yield qn(d,d.stsTokenManager.getToken(d.auth,u));return S(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(u){return function Ri(p){return qi.apply(this,arguments)}(this,u)}reload(){return function Yo(p){return Xo.apply(this,arguments)}(this)}_assign(u){this!==u&&(S(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(d=>Object.assign({},d)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const d=new _t(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(u){S(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u,d=!1){var g=this;return(0,_.A)(function*(){let y=!1;u.idToken&&u.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(u),y=!0),d&&(yield xi(g)),yield g.auth._persistUserIfCurrent(g),y&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var u=this;return(0,_.A)(function*(){const d=yield u.getIdToken();return yield qn(u,function Rn(p,u){return Jt.apply(this,arguments)}(u.auth,{idToken:d})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,d){var g,y,A,W,ge,He,yt,kt;const lt=null!==(g=d.displayName)&&void 0!==g?g:void 0,Lr=null!==(y=d.email)&&void 0!==y?y:void 0,es=null!==(A=d.phoneNumber)&&void 0!==A?A:void 0,vm=null!==(W=d.photoURL)&&void 0!==W?W:void 0,sf=null!==(ge=d.tenantId)&&void 0!==ge?ge:void 0,ts=null!==(He=d._redirectEventId)&&void 0!==He?He:void 0,ym=null!==(yt=d.createdAt)&&void 0!==yt?yt:void 0,Bl=null!==(kt=d.lastLoginAt)&&void 0!==kt?kt:void 0,{uid:Im,emailVerified:eI,isAnonymous:Em,providerData:tI,stsTokenManager:yT}=d;S(Im&&yT,u,"internal-error");const kk=Le.fromJSON(this.name,yT);S("string"==typeof Im,u,"internal-error"),ue(lt,u.name),ue(Lr,u.name),S("boolean"==typeof eI,u,"internal-error"),S("boolean"==typeof Em,u,"internal-error"),ue(es,u.name),ue(vm,u.name),ue(sf,u.name),ue(ts,u.name),ue(ym,u.name),ue(Bl,u.name);const nI=new _t({uid:Im,auth:u,email:Lr,emailVerified:eI,displayName:lt,isAnonymous:Em,photoURL:vm,phoneNumber:es,tenantId:sf,stsTokenManager:kk,createdAt:ym,lastLoginAt:Bl});return tI&&Array.isArray(tI)&&(nI.providerData=tI.map(Nk=>Object.assign({},Nk))),ts&&(nI._redirectEventId=ts),nI}static _fromIdTokenResponse(u,d,g=!1){return(0,_.A)(function*(){const y=new Le;y.updateFromServerResponse(d);const A=new _t({uid:d.localId,auth:u,stsTokenManager:y,isAnonymous:g});return yield xi(A),A})()}}const Rt=new Map;function Bt(p){K(p instanceof Function,"Expected a class definition");let u=Rt.get(p);return u?(K(u instanceof p,"Instance stored in cache mismatched with class"),u):(u=new p,Rt.set(p,u),u)}const xt=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.A)(function*(){return!0})()}_set(d,g){var y=this;return(0,_.A)(function*(){y.storage[d]=g})()}_get(d){var g=this;return(0,_.A)(function*(){const y=g.storage[d];return void 0===y?null:y})()}_remove(d){var g=this;return(0,_.A)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return p.type="NONE",p})();function Hr(p,u,d){return`firebase:${p}:${u}:${d}`}class dn{constructor(u,d,g){this.persistence=u,this.auth=d,this.userKey=g;const{config:y,name:A}=this.auth;this.fullUserKey=Hr(this.userKey,y.apiKey,A),this.fullPersistenceKey=Hr("persistence",y.apiKey,A),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,_.A)(function*(){const d=yield u.persistence._get(u.fullUserKey);return d?_t._fromJSON(u.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var d=this;return(0,_.A)(function*(){if(d.persistence===u)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=u,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,d,g="authUser"){return(0,_.A)(function*(){if(!d.length)return new dn(Bt(xt),u,g);const y=(yield Promise.all(d.map(function(){var yt=(0,_.A)(function*(kt){if(yield kt._isAvailable())return kt});return function(kt){return yt.apply(this,arguments)}}()))).filter(yt=>yt);let A=y[0]||Bt(xt);const W=Hr(g,u.config.apiKey,u.name);let ge=null;for(const yt of d)try{const kt=yield yt._get(W);if(kt){const lt=_t._fromJSON(u,kt);yt!==A&&(ge=lt),A=yt;break}}catch{}const He=y.filter(yt=>yt._shouldAllowMigration);return A._shouldAllowMigration&&He.length?(A=He[0],ge&&(yield A._set(W,ge.toJSON())),yield Promise.all(d.map(function(){var yt=(0,_.A)(function*(kt){if(kt!==A)try{yield kt._remove(W)}catch{}});return function(kt){return yt.apply(this,arguments)}}())),new dn(A,u,g)):new dn(A,u,g)})()}}function Ue(p){const u=p.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if(Ne(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(hi(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(qe(u))return"Blackberry";if(bt(u))return"Webos";if(Qi(u))return"Safari";if((u.includes("chrome/")||Vs(u))&&!u.includes("edge/"))return"Chrome";if(we(u))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==g?void 0:g.length))return g[1]}return"Other"}function hi(p=(0,C.ZQ)()){return/firefox\//i.test(p)}function Qi(p=(0,C.ZQ)()){const u=p.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function Vs(p=(0,C.ZQ)()){return/crios\//i.test(p)}function Ne(p=(0,C.ZQ)()){return/iemobile/i.test(p)}function we(p=(0,C.ZQ)()){return/android/i.test(p)}function qe(p=(0,C.ZQ)()){return/blackberry/i.test(p)}function bt(p=(0,C.ZQ)()){return/webos/i.test(p)}function Gt(p=(0,C.ZQ)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function Kn(p=(0,C.ZQ)()){return Gt(p)||we(p)||bt(p)||qe(p)||/windows phone/i.test(p)||Ne(p)}function gs(p,u=[]){let d;switch(p){case"Browser":d=Ue((0,C.ZQ)());break;case"Worker":d=`${Ue((0,C.ZQ)())}-${p}`;break;default:d=p}const g=u.length?u.join(","):"FirebaseCore-web";return`${d}/JsCore/${L.SDK_VERSION}/${g}`}class xn{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,d){const g=A=>new Promise((W,ge)=>{try{W(u(A))}catch(He){ge(He)}});g.onAbort=d,this.queue.push(g);const y=this.queue.length-1;return()=>{this.queue[y]=()=>Promise.resolve()}}runMiddleware(u){var d=this;return(0,_.A)(function*(){if(d.auth.currentUser===u)return;const g=[];try{for(const y of d.queue)yield y(u),y.onAbort&&g.push(y.onAbort)}catch(y){g.reverse();for(const A of g)try{A()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:null==y?void 0:y.message})}})()}}function Dl(){return(Dl=(0,_.A)(function*(p,u={}){return he(p,"GET","/v2/passwordPolicy",Ie(p,u))})).apply(this,arguments)}class xr{constructor(u){var d,g,y,A;const W=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=W.minPasswordLength)&&void 0!==d?d:6,W.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=W.maxPasswordLength),void 0!==W.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=W.containsLowercaseCharacter),void 0!==W.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=W.containsUppercaseCharacter),void 0!==W.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=W.containsNumericCharacter),void 0!==W.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=W.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(y=null===(g=u.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==y?y:"",this.forceUpgradeOnSignin=null!==(A=u.forceUpgradeOnSignin)&&void 0!==A&&A,this.schemaVersion=u.schemaVersion}validatePassword(u){var d,g,y,A,W,ge;const He={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,He),this.validatePasswordCharacterOptions(u,He),He.isValid&&(He.isValid=null===(d=He.meetsMinPasswordLength)||void 0===d||d),He.isValid&&(He.isValid=null===(g=He.meetsMaxPasswordLength)||void 0===g||g),He.isValid&&(He.isValid=null===(y=He.containsLowercaseLetter)||void 0===y||y),He.isValid&&(He.isValid=null===(A=He.containsUppercaseLetter)||void 0===A||A),He.isValid&&(He.isValid=null===(W=He.containsNumericCharacter)||void 0===W||W),He.isValid&&(He.isValid=null===(ge=He.containsNonAlphanumericCharacter)||void 0===ge||ge),He}validatePasswordLengthOptions(u,d){const g=this.customStrengthOptions.minPasswordLength,y=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=u.length>=g),y&&(d.meetsMaxPasswordLength=u.length<=y)}validatePasswordCharacterOptions(u,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let y=0;y<u.length;y++)g=u.charAt(y),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(u,d,g,y,A){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=y)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=A))}}class Yt{constructor(u,d,g,y){this.app=u,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ku(this),this.idTokenSubscription=new ku(this),this.beforeStateQueue=new xn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ne,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(u,d){var g=this;return d&&(this._popupRedirectResolver=Bt(d)),this._initializationPromise=this.queue((0,_.A)(function*(){var y,A;if(!g._deleted&&(g.persistenceManager=yield dn.create(g,u),!g._deleted)){if(null!==(y=g._popupRedirectResolver)&&void 0!==y&&y._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(A=g.currentUser)||void 0===A?void 0:A.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,_.A)(function*(){if(u._deleted)return;const d=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||d){if(u.currentUser&&d&&u.currentUser.uid===d.uid)return u._currentUser._assign(d),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(d,!0)}})()}initializeCurrentUser(u){var d=this;return(0,_.A)(function*(){var g;const y=yield d.assertedPersistence.getCurrentUser();let A=y,W=!1;if(u&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const ge=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,He=null==A?void 0:A._redirectEventId,yt=yield d.tryRedirectSignIn(u);(!ge||ge===He)&&null!=yt&&yt.user&&(A=yt.user,W=!0)}if(!A)return d.directlySetCurrentUser(null);if(!A._redirectEventId){if(W)try{yield d.beforeStateQueue.runMiddleware(A)}catch(ge){A=y,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(ge))}return A?d.reloadAndSetCurrentUserOrClear(A):d.directlySetCurrentUser(null)}return S(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===A._redirectEventId?d.directlySetCurrentUser(A):d.reloadAndSetCurrentUserOrClear(A)})()}tryRedirectSignIn(u){var d=this;return(0,_.A)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,u,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(u){var d=this;return(0,_.A)(function*(){try{yield xi(u)}catch(g){if("auth/network-request-failed"!==(null==g?void 0:g.code))return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function nn(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var u=this;return(0,_.A)(function*(){u._deleted=!0})()}updateCurrentUser(u){var d=this;return(0,_.A)(function*(){const g=u?(0,C.Ku)(u):null;return g&&S(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(u,d=!1){var g=this;return(0,_.A)(function*(){if(!g._deleted)return u&&S(g.tenantId===u.tenantId,g,"tenant-id-mismatch"),d||(yield g.beforeStateQueue.runMiddleware(u)),g.queue((0,_.A)(function*(){yield g.directlySetCurrentUser(u),g.notifyAuthListeners()}))})()}signOut(){var u=this;return(0,_.A)(function*(){return yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0)})()}setPersistence(u){var d=this;return this.queue((0,_.A)(function*(){yield d.assertedPersistence.setPersistence(Bt(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var d=this;return(0,_.A)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,_.A)(function*(){const d=yield function fi(p){return Dl.apply(this,arguments)}(u),g=new xr(d);null===u.tenantId?u._projectPasswordPolicy=g:u._tenantPasswordPolicies[u.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new C.FA("auth","Firebase",u())}onAuthStateChanged(u,d,g){return this.registerStateListener(this.authStateSubscription,u,d,g)}beforeAuthStateChanged(u,d){return this.beforeStateQueue.pushCallback(u,d)}onIdTokenChanged(u,d,g){return this.registerStateListener(this.idTokenSubscription,u,d,g)}authStateReady(){return new Promise((u,d)=>{if(this.currentUser)u();else{const g=this.onAuthStateChanged(()=>{g(),u()},d)}})}revokeAccessToken(u){var d=this;return(0,_.A)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),y={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:u,idToken:g};null!=d.tenantId&&(y.tenantId=d.tenantId),yield function U(p,u){return te.apply(this,arguments)}(d,y)}})()}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,d){var g=this;return(0,_.A)(function*(){const y=yield g.getOrInitRedirectPersistenceManager(d);return null===u?y.removeCurrentUser():y.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var d=this;return(0,_.A)(function*(){if(!d.redirectPersistenceManager){const g=u&&Bt(u)||d._popupRedirectResolver;S(g,d,"argument-error"),d.redirectPersistenceManager=yield dn.create(d,[Bt(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(u){var d=this;return(0,_.A)(function*(){var g,y;return d._isInitialized&&(yield d.queue((0,_.A)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===u?d._currentUser:(null===(y=d.redirectUser)||void 0===y?void 0:y._redirectEventId)===u?d.redirectUser:null})()}_persistUserIfCurrent(u){var d=this;return(0,_.A)(function*(){if(u===d.currentUser)return d.queue((0,_.A)(function*(){return d.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,d,g,y){if(this._deleted)return()=>{};const A="function"==typeof d?d:d.next.bind(d);let W=!1;const ge=this._isInitialized?Promise.resolve():this._initializationPromise;if(S(ge,this,"internal-error"),ge.then(()=>{W||A(this.currentUser)}),"function"==typeof d){const He=u.addObserver(d,g,y);return()=>{W=!0,He()}}{const He=u.addObserver(d);return()=>{W=!0,He()}}}directlySetCurrentUser(u){var d=this;return(0,_.A)(function*(){d.currentUser&&d.currentUser!==u&&d._currentUser._stopProactiveRefresh(),u&&d.isProactiveRefreshEnabled&&u._startProactiveRefresh(),d.currentUser=u,u?yield d.assertedPersistence.setCurrentUser(u):yield d.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return S(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=gs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,_.A)(function*(){var d;const g={"X-Client-Version":u.clientVersion};u.app.options.appId&&(g["X-Firebase-gmpid"]=u.app.options.appId);const y=yield null===(d=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();y&&(g["X-Firebase-Client"]=y);const A=yield u._getAppCheckToken();return A&&(g["X-Firebase-AppCheck"]=A),g})()}_getAppCheckToken(){var u=this;return(0,_.A)(function*(){var d;const g=yield null===(d=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return null!=g&&g.error&&function be(p,...u){re.logLevel<=G.$b.WARN&&re.warn(`Auth (${L.SDK_VERSION}): ${p}`,...u)}(`Error while retrieving App Check token: ${g.error}`),null==g?void 0:g.token})()}}function Gn(p){return(0,C.Ku)(p)}class ku{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,C.tD)(d=>this.observer=d)}get next(){return S(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ms={loadJS:()=>(0,_.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qt(p){return ms.loadJS(p)}function Sl(p){return`__${p}${Math.floor(1e6*Math.random())}`}class ch{constructor(u){this.type="recaptcha-enterprise",this.auth=Gn(u)}verify(u="verify",d=!1){var g=this;return(0,_.A)(function*(){function A(){return A=(0,_.A)(function*(ge){if(!d){if(null==ge.tenantId&&null!=ge._agentRecaptchaConfig)return ge._agentRecaptchaConfig.siteKey;if(null!=ge.tenantId&&void 0!==ge._tenantRecaptchaConfigs[ge.tenantId])return ge._tenantRecaptchaConfigs[ge.tenantId].siteKey}return new Promise(function(){var He=(0,_.A)(function*(yt,kt){In(ge,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(lt=>{if(void 0!==lt.recaptchaKey){const Lr=new Me(lt);return null==ge.tenantId?ge._agentRecaptchaConfig=Lr:ge._tenantRecaptchaConfigs[ge.tenantId]=Lr,yt(Lr.siteKey)}kt(new Error("recaptcha Enterprise site key undefined"))}).catch(lt=>{kt(lt)})});return function(yt,kt){return He.apply(this,arguments)}}())}),A.apply(this,arguments)}function W(ge,He,yt){const kt=window.grecaptcha;De(kt)?kt.enterprise.ready(()=>{kt.enterprise.execute(ge,{action:u}).then(lt=>{He(lt)}).catch(()=>{He("NO_RECAPTCHA")})}):yt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ge,He)=>{(function y(ge){return A.apply(this,arguments)})(g.auth).then(yt=>{if(!d&&De(window.grecaptcha))W(yt,ge,He);else{if(typeof window>"u")return void He(new Error("RecaptchaVerifier is only supported in browser"));let kt=function pi(){return ms.recaptchaEnterpriseScript}();0!==kt.length&&(kt+=yt),qt(kt).then(()=>{W(yt,ge,He)}).catch(lt=>{He(lt)})}}).catch(yt=>{He(yt)})})})()}}function Se(p,u,d){return I.apply(this,arguments)}function I(){return(I=(0,_.A)(function*(p,u,d,g=!1){const y=new ch(p);let A;try{A=yield y.verify(d)}catch{A=yield y.verify(d,!0)}const W=Object.assign({},u);return Object.assign(W,g?{captchaResp:A}:{captchaResponse:A}),Object.assign(W,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(W,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),W})).apply(this,arguments)}function D(p,u,d,g){return J.apply(this,arguments)}function J(){return J=(0,_.A)(function*(p,u,d,g){var y;if(null!==(y=p._getRecaptchaConfig())&&void 0!==y&&y.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const A=yield Se(p,u,d,"getOobCode"===d);return g(p,A)}return g(p,u).catch(function(){var A=(0,_.A)(function*(W){if("auth/missing-recaptcha-token"===W.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const ge=yield Se(p,u,d,"getOobCode"===d);return g(p,ge)}return Promise.reject(W)});return function(W){return A.apply(this,arguments)}}())}),J.apply(this,arguments)}function at(p){const u=p.indexOf(":");return u<0?"":p.substr(0,u+1)}function dt(p){if(!p)return null;const u=Number(p);return isNaN(u)?null:u}class Lt{constructor(u,d){this.providerId=u,this.signInMethod=d}toJSON(){return $("not implemented")}_getIdTokenResponse(u){return $("not implemented")}_linkToIdToken(u,d){return $("not implemented")}_getReauthenticationResolver(u){return $("not implemented")}}function Qe(p,u){return dr.apply(this,arguments)}function dr(){return(dr=(0,_.A)(function*(p,u){return he(p,"POST","/v1/accounts:resetPassword",Ie(p,u))})).apply(this,arguments)}function sr(){return(sr=(0,_.A)(function*(p,u){return he(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function gi(p,u){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,_.A)(function*(p,u){return he(p,"POST","/v1/accounts:signUp",u)})).apply(this,arguments)}function _s(){return(_s=(0,_.A)(function*(p,u){return he(p,"POST","/v1/accounts:update",Ie(p,u))})).apply(this,arguments)}function hc(p,u){return $s.apply(this,arguments)}function $s(){return($s=(0,_.A)(function*(p,u){return ut(p,"POST","/v1/accounts:signInWithPassword",Ie(p,u))})).apply(this,arguments)}function Nu(p,u){return wg.apply(this,arguments)}function wg(){return(wg=(0,_.A)(function*(p,u){return he(p,"POST","/v1/accounts:sendOobCode",Ie(p,u))})).apply(this,arguments)}function Ou(){return(Ou=(0,_.A)(function*(p,u){return Nu(p,u)})).apply(this,arguments)}function bg(p,u){return uh.apply(this,arguments)}function uh(){return(uh=(0,_.A)(function*(p,u){return Nu(p,u)})).apply(this,arguments)}function Cg(p,u){return Tg.apply(this,arguments)}function Tg(){return(Tg=(0,_.A)(function*(p,u){return Nu(p,u)})).apply(this,arguments)}function Uy(){return(Uy=(0,_.A)(function*(p,u){return Nu(p,u)})).apply(this,arguments)}function jy(){return(jy=(0,_.A)(function*(p,u){return ut(p,"POST","/v1/accounts:signInWithEmailLink",Ie(p,u))})).apply(this,arguments)}function Fu(){return(Fu=(0,_.A)(function*(p,u){return ut(p,"POST","/v1/accounts:signInWithEmailLink",Ie(p,u))})).apply(this,arguments)}class da extends Lt{constructor(u,d,g,y=null){super("password",g),this._email=u,this._password=d,this._tenantId=y}static _fromEmailAndPassword(u,d){return new da(u,d,"password")}static _fromEmailAndCode(u,d,g=null){return new da(u,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u;if(null!=d&&d.email&&null!=d&&d.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(u){var d=this;return(0,_.A)(function*(){switch(d.signInMethod){case"password":return D(u,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",hc);case"emailLink":return function pk(p,u){return jy.apply(this,arguments)}(u,{email:d._email,oobCode:d._password});default:Ge(u,"internal-error")}})()}_linkToIdToken(u,d){var g=this;return(0,_.A)(function*(){switch(g.signInMethod){case"password":return D(u,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gi);case"emailLink":return function gk(p,u){return Fu.apply(this,arguments)}(u,{idToken:d,email:g._email,oobCode:g._password});default:Ge(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function vs(p,u){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,_.A)(function*(p,u){return ut(p,"POST","/v1/accounts:signInWithIdp",Ie(p,u))})).apply(this,arguments)}class mi extends Lt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const d=new mi(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(d.idToken=u.idToken),u.accessToken&&(d.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(d.nonce=u.nonce),u.pendingToken&&(d.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(d.accessToken=u.oauthToken,d.secret=u.oauthTokenSecret):Ge("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:g,signInMethod:y}=d,A=(0,H.Tt)(d,["providerId","signInMethod"]);if(!g||!y)return null;const W=new mi(g,y);return W.idToken=A.idToken||void 0,W.accessToken=A.accessToken||void 0,W.secret=A.secret,W.nonce=A.nonce,W.pendingToken=A.pendingToken||null,W}_getIdTokenResponse(u){return vs(u,this.buildRequest())}_linkToIdToken(u,d){const g=this.buildRequest();return g.idToken=d,vs(u,g)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,vs(u,d)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),u.postBody=(0,C.Am)(d)}return u}}function dh(){return(dh=(0,_.A)(function*(p,u){return he(p,"POST","/v1/accounts:sendVerificationCode",Ie(p,u))})).apply(this,arguments)}function Ln(){return(Ln=(0,_.A)(function*(p,u){return ut(p,"POST","/v1/accounts:signInWithPhoneNumber",Ie(p,u))})).apply(this,arguments)}function Dg(){return(Dg=(0,_.A)(function*(p,u){const d=yield ut(p,"POST","/v1/accounts:signInWithPhoneNumber",Ie(p,u));if(d.temporaryProof)throw Ht(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const CC={USER_NOT_FOUND:"user-not-found"};function Sg(){return(Sg=(0,_.A)(function*(p,u){return ut(p,"POST","/v1/accounts:signInWithPhoneNumber",Ie(p,Object.assign(Object.assign({},u),{operation:"REAUTH"})),CC)})).apply(this,arguments)}class ha extends Lt{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,d){return new ha({verificationId:u,verificationCode:d})}static _fromTokenResponse(u,d){return new ha({phoneNumber:u,temporaryProof:d})}_getIdTokenResponse(u){return function rn(p,u){return Ln.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,d){return function mk(p,u){return Dg.apply(this,arguments)}(u,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function _k(p,u){return Sg.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:d,verificationId:g,verificationCode:y}=this.params;return u&&d?{temporaryProof:u,phoneNumber:d}:{sessionInfo:g,code:y}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:d,verificationCode:g,phoneNumber:y,temporaryProof:A}=u;return g||d||y||A?new ha({verificationId:d,verificationCode:g,phoneNumber:y,temporaryProof:A}):null}}class fc{constructor(u){var d,g,y,A,W,ge;const He=(0,C.I9)((0,C.hp)(u)),yt=null!==(d=He.apiKey)&&void 0!==d?d:null,kt=null!==(g=He.oobCode)&&void 0!==g?g:null,lt=function bn(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(y=He.mode)&&void 0!==y?y:null);S(yt&&kt&&lt,"argument-error"),this.apiKey=yt,this.operation=lt,this.code=kt,this.continueUrl=null!==(A=He.continueUrl)&&void 0!==A?A:null,this.languageCode=null!==(W=He.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(ge=He.tenantId)&&void 0!==ge?ge:null}static parseLink(u){const d=function Rg(p){const u=(0,C.I9)((0,C.hp)(p)).link,d=u?(0,C.I9)((0,C.hp)(u)).deep_link_id:null,g=(0,C.I9)((0,C.hp)(p)).deep_link_id;return(g?(0,C.I9)((0,C.hp)(g)).link:null)||g||d||u||p}(u);try{return new fc(d)}catch{return null}}}let hh=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,g){return da._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const y=fc.parseLink(g);return S(y,"argument-error"),da._fromEmailAndCode(d,y.code,y.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class ja{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class Bu extends ja{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class Us extends Bu{static credentialFromJSON(u){const d="string"==typeof u?JSON.parse(u):u;return S("providerId"in d&&"signInMethod"in d,"argument-error"),mi._fromParams(d)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return S(u.idToken||u.accessToken,"argument-error"),mi._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return Us.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return Us.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:y,pendingToken:A,nonce:W,providerId:ge}=u;if(!g&&!y&&!d&&!A||!ge)return null;try{return new Us(ge)._credential({idToken:d,accessToken:g,nonce:W,pendingToken:A})}catch{return null}}}let fh=(()=>{class p extends Bu{constructor(){super("facebook.com")}static credential(d){return mi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),$u=(()=>{class p extends Bu{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return mi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:y}=d;if(!g&&!y)return null;try{return p.credential(g,y)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),Hy=(()=>{class p extends Bu{constructor(){super("github.com")}static credential(d){return mi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class pc extends Lt{constructor(u,d){super(u,u),this.pendingToken=d}_getIdTokenResponse(u){return vs(u,this.buildRequest())}_linkToIdToken(u,d){const g=this.buildRequest();return g.idToken=d,vs(u,g)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,vs(u,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:g,signInMethod:y,pendingToken:A}=d;return g&&y&&A&&g===y?new pc(g,A):null}static _create(u,d){return new pc(u,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class fa extends ja{constructor(u){S(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return fa.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return fa.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const d=pc.fromJSON(u);return S(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:d,providerId:g}=u;if(!d||!g)return null;try{return pc._create(g,d)}catch{return null}}}let Wy=(()=>{class p extends Bu{constructor(){super("twitter.com")}static credential(d,g){return mi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:y}=d;if(!g||!y)return null;try{return p.credential(g,y)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function pa(p,u){return xg.apply(this,arguments)}function xg(){return(xg=(0,_.A)(function*(p,u){return ut(p,"POST","/v1/accounts:signUp",Ie(p,u))})).apply(this,arguments)}class Ke{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,d,g,y=!1){return(0,_.A)(function*(){const A=yield _t._fromIdTokenResponse(u,g,y),W=Pg(g);return new Ke({user:A,providerId:W,_tokenResponse:g,operationType:d})})()}static _forOperation(u,d,g){return(0,_.A)(function*(){yield u._updateTokensIfNecessary(g,!0);const y=Pg(g);return new Ke({user:u,providerId:y,_tokenResponse:g,operationType:d})})()}}function Pg(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function gc(){return(gc=(0,_.A)(function*(p){var u;const d=Gn(p);if(yield d._initializationPromise,null!==(u=d.currentUser)&&void 0!==u&&u.isAnonymous)return new Ke({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield pa(d,{returnSecureToken:!0}),y=yield Ke._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(y.user),y})).apply(this,arguments)}class mc extends C.g{constructor(u,d,g,y){var A;super(d.code,d.message),this.operationType=g,this.user=y,Object.setPrototypeOf(this,mc.prototype),this.customData={appName:u.name,tenantId:null!==(A=u.tenantId)&&void 0!==A?A:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(u,d,g,y){return new mc(u,d,g,y)}}function _c(p,u,d,g){return("reauthenticate"===u?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(A=>{throw"auth/multi-factor-auth-required"===A.code?mc._fromErrorAndOperation(p,A,u,g):A})}function qy(p){return new Set(p.map(({providerId:u})=>u).filter(u=>!!u))}function Mg(){return Mg=(0,_.A)(function*(p,u){const d=(0,C.Ku)(p);yield ph(!0,d,u);const{providerUserInfo:g}=yield function _r(p,u){return $n.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[u]}),y=qy(g||[]);return d.providerData=d.providerData.filter(A=>y.has(A.providerId)),y.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),Mg.apply(this,arguments)}function kg(p,u){return xl.apply(this,arguments)}function xl(){return(xl=(0,_.A)(function*(p,u,d=!1){const g=yield qn(p,u._linkToIdToken(p.auth,yield p.getIdToken()),d);return Ke._forOperation(p,"link",g)})).apply(this,arguments)}function ph(p,u,d){return vc.apply(this,arguments)}function vc(){return(vc=(0,_.A)(function*(p,u,d){yield xi(u);const y=!1===p?"provider-already-linked":"no-such-provider";S(qy(u.providerData).has(d)===p,u.auth,y)})).apply(this,arguments)}function Ky(p,u){return ga.apply(this,arguments)}function ga(){return(ga=(0,_.A)(function*(p,u,d=!1){const{auth:g}=p,y="reauthenticate";try{const A=yield qn(p,_c(g,y,u,p),d);S(A.idToken,g,"internal-error");const W=ui(A.idToken);S(W,g,"internal-error");const{sub:ge}=W;return S(p.uid===ge,g,"user-mismatch"),Ke._forOperation(p,y,A)}catch(A){throw"auth/user-not-found"===(null==A?void 0:A.code)&&Ge(g,"user-mismatch"),A}})).apply(this,arguments)}function Qy(p,u){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,_.A)(function*(p,u,d=!1){const g="signIn",y=yield _c(p,g,u),A=yield Ke._fromIdTokenResponse(p,g,y);return d||(yield p._updateCurrentUser(A.user)),A})).apply(this,arguments)}function ma(p,u){return gh.apply(this,arguments)}function gh(){return(gh=(0,_.A)(function*(p,u){return Qy(Gn(p),u)})).apply(this,arguments)}function Uu(p,u){return yc.apply(this,arguments)}function yc(){return(yc=(0,_.A)(function*(p,u){const d=(0,C.Ku)(p);return yield ph(!1,d,u.providerId),kg(d,u)})).apply(this,arguments)}function mh(p,u){return Yy.apply(this,arguments)}function Yy(){return(Yy=(0,_.A)(function*(p,u){return Ky((0,C.Ku)(p),u)})).apply(this,arguments)}function Jy(){return(Jy=(0,_.A)(function*(p,u){return ut(p,"POST","/v1/accounts:signInWithCustomToken",Ie(p,u))})).apply(this,arguments)}function ju(){return ju=(0,_.A)(function*(p,u){const d=Gn(p),g=yield function Xy(p,u){return Jy.apply(this,arguments)}(d,{token:u,returnSecureToken:!0}),y=yield Ke._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(y.user),y}),ju.apply(this,arguments)}class js{constructor(u,d){this.factorId=u,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(u,d){return"phoneInfo"in d?Zy._fromServerResponse(u,d):"totpInfo"in d?_h._fromServerResponse(u,d):Ge(u,"internal-error")}}class Zy extends js{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,d){return new Zy(d)}}class _h extends js{constructor(u){super("totp",u)}static _fromServerResponse(u,d){return new _h(d)}}function Mo(p,u,d){var g;S((null===(g=d.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),S(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),u.continueUrl=d.url,u.dynamicLinkDomain=d.dynamicLinkDomain,u.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(S(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),u.iOSBundleId=d.iOS.bundleId),d.android&&(S(d.android.packageName.length>0,p,"missing-android-pkg-name"),u.androidInstallApp=d.android.installApp,u.androidMinimumVersionCode=d.android.minimumVersion,u.androidPackageName=d.android.packageName)}function Pn(p){return _a.apply(this,arguments)}function _a(){return(_a=(0,_.A)(function*(p){const u=Gn(p);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function zu(){return(zu=(0,_.A)(function*(p,u,d){const g=Gn(p),y={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};d&&Mo(g,y,d),yield D(g,y,"getOobCode",bg)})).apply(this,arguments)}function Ic(){return Ic=(0,_.A)(function*(p,u,d){yield Qe((0,C.Ku)(p),{oobCode:u,newPassword:d}).catch(function(){var g=(0,_.A)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&Pn(p),y});return function(y){return g.apply(this,arguments)}}())}),Ic.apply(this,arguments)}function ar(){return ar=(0,_.A)(function*(p,u){yield function Ro(p,u){return _s.apply(this,arguments)}((0,C.Ku)(p),{oobCode:u})}),ar.apply(this,arguments)}function t0(p,u){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,_.A)(function*(p,u){const d=(0,C.Ku)(p),g=yield Qe(d,{oobCode:u}),y=g.requestType;switch(S(y,d,"internal-error"),y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":S(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":S(g.mfaInfo,d,"internal-error");default:S(g.email,d,"internal-error")}let A=null;return g.mfaInfo&&(A=js._fromServerResponse(Gn(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:A},operation:y}})).apply(this,arguments)}function yh(){return(yh=(0,_.A)(function*(p,u){const{data:d}=yield t0((0,C.Ku)(p),u);return d.email})).apply(this,arguments)}function Ih(){return(Ih=(0,_.A)(function*(p,u,d){const g=Gn(p),W=yield D(g,{returnSecureToken:!0,email:u,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pa).catch(He=>{throw"auth/password-does-not-meet-requirements"===He.code&&Pn(p),He}),ge=yield Ke._fromIdTokenResponse(g,"signIn",W);return yield g._updateCurrentUser(ge.user),ge})).apply(this,arguments)}function Wu(){return(Wu=(0,_.A)(function*(p,u,d){const g=Gn(p),y={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function A(W,ge){S(ge.handleCodeInApp,g,"argument-error"),ge&&Mo(g,W,ge)})(y,d),yield D(g,y,"getOobCode",Cg)})).apply(this,arguments)}function ko(){return(ko=(0,_.A)(function*(p,u,d){const g=(0,C.Ku)(p),y=hh.credentialWithLink(u,d||se());return S(y._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),ma(g,y)})).apply(this,arguments)}function Eh(){return(Eh=(0,_.A)(function*(p,u){return he(p,"POST","/v1/accounts:createAuthUri",Ie(p,u))})).apply(this,arguments)}function Ng(){return Ng=(0,_.A)(function*(p,u){const g={identifier:u,continueUri:fe()?se():"http://localhost"},{signinMethods:y}=yield function xC(p,u){return Eh.apply(this,arguments)}((0,C.Ku)(p),g);return y||[]}),Ng.apply(this,arguments)}function Og(){return Og=(0,_.A)(function*(p,u){const d=(0,C.Ku)(p),y={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};u&&Mo(d.auth,y,u);const{email:A}=yield function ft(p,u){return Ou.apply(this,arguments)}(d.auth,y);A!==p.email&&(yield p.reload())}),Og.apply(this,arguments)}function Fg(){return Fg=(0,_.A)(function*(p,u,d){const g=(0,C.Ku)(p),A={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:u};d&&Mo(g.auth,A,d);const{email:W}=yield function Ag(p,u){return Uy.apply(this,arguments)}(g.auth,A);W!==p.email&&(yield p.reload())}),Fg.apply(this,arguments)}function Lg(){return(Lg=(0,_.A)(function*(p,u){return he(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Vg(){return Vg=(0,_.A)(function*(p,{displayName:u,photoURL:d}){if(void 0===u&&void 0===d)return;const g=(0,C.Ku)(p),A={idToken:yield g.getIdToken(),displayName:u,photoUrl:d,returnSecureToken:!0},W=yield qn(g,function kC(p,u){return Lg.apply(this,arguments)}(g.auth,A));g.displayName=W.displayName||null,g.photoURL=W.photoUrl||null;const ge=g.providerData.find(({providerId:He})=>"password"===He);ge&&(ge.displayName=g.displayName,ge.photoURL=g.photoURL),yield g._updateTokensIfNecessary(W)}),Vg.apply(this,arguments)}function Bg(p,u,d){return Ot.apply(this,arguments)}function Ot(){return Ot=(0,_.A)(function*(p,u,d){const{auth:g}=p,A={idToken:yield p.getIdToken(),returnSecureToken:!0};u&&(A.email=u),d&&(A.password=d);const W=yield qn(p,function zn(p,u){return sr.apply(this,arguments)}(g,A));yield p._updateTokensIfNecessary(W,!0)}),Ot.apply(this,arguments)}class an{constructor(u,d,g={}){this.isNewUser=u,this.providerId=d,this.profile=g}}class Yr extends an{constructor(u,d,g,y){super(u,d,g),this.username=y}}class bi extends an{constructor(u,d){super(u,"facebook.com",d)}}class za extends Yr{constructor(u,d){super(u,"github.com",d,"string"==typeof(null==d?void 0:d.login)?null==d?void 0:d.login:null)}}class Mi extends an{constructor(u,d){super(u,"google.com",d)}}class s0 extends Yr{constructor(u,d,g){super(u,"twitter.com",d,g)}}function a0(p){const{user:u,_tokenResponse:d}=p;return u.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function co(p){var u,d;if(!p)return null;const{providerId:g}=p,y=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},A=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&null!=p&&p.idToken){const W=null===(d=null===(u=ui(p.idToken))||void 0===u?void 0:u.firebase)||void 0===d?void 0:d.sign_in_provider;if(W)return new an(A,"anonymous"!==W&&"custom"!==W?W:null)}if(!g)return null;switch(g){case"facebook.com":return new bi(A,y);case"github.com":return new za(A,y);case"google.com":return new Mi(A,y);case"twitter.com":return new s0(A,y,p.screenName||null);case"custom":case"anonymous":return new an(A,null);default:return new an(A,g,y)}}(d)}class Ha{constructor(u,d,g){this.type=u,this.credential=d,this.user=g}static _fromIdtoken(u,d){return new Ha("enroll",u,d)}static _fromMfaPendingCredential(u){return new Ha("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var d,g;if(null!=u&&u.multiFactorSession){if(null!==(d=u.multiFactorSession)&&void 0!==d&&d.pendingCredential)return Ha._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(g=u.multiFactorSession)&&void 0!==g&&g.idToken)return Ha._fromIdtoken(u.multiFactorSession.idToken)}return null}}class va{constructor(u,d,g){this.session=u,this.hints=d,this.signInResolver=g}static _fromError(u,d){const g=Gn(u),y=d.customData._serverResponse,A=(y.mfaInfo||[]).map(ge=>js._fromServerResponse(g,ge));S(y.mfaPendingCredential,g,"internal-error");const W=Ha._fromMfaPendingCredential(y.mfaPendingCredential);return new va(W,A,function(){var ge=(0,_.A)(function*(He){const yt=yield He._process(g,W);delete y.mfaInfo,delete y.mfaPendingCredential;const kt=Object.assign(Object.assign({},y),{idToken:yt.idToken,refreshToken:yt.refreshToken});switch(d.operationType){case"signIn":const lt=yield Ke._fromIdTokenResponse(g,d.operationType,kt);return yield g._updateCurrentUser(lt.user),lt;case"reauthenticate":return S(d.user,g,"internal-error"),Ke._forOperation(d.user,d.operationType,kt);default:Ge(g,"internal-error")}});return function(He){return ge.apply(this,arguments)}}())}resolveSignIn(u){var d=this;return(0,_.A)(function*(){return d.signInResolver(u)})()}}class Xr{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>js._fromServerResponse(u.auth,g)))})}static _fromUser(u){return new Xr(u)}getSession(){var u=this;return(0,_.A)(function*(){return Ha._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,d){var g=this;return(0,_.A)(function*(){const y=u,A=yield g.getSession(),W=yield qn(g.user,y._process(g.user.auth,A,d));return yield g.user._updateTokensIfNecessary(W),g.user.reload()})()}unenroll(u){var d=this;return(0,_.A)(function*(){const g="string"==typeof u?u:u.uid,y=yield d.user.getIdToken();try{const A=yield qn(d.user,function Ch(p,u){return he(p,"POST","/v2/accounts/mfaEnrollment:withdraw",Ie(p,u))}(d.user.auth,{idToken:y,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:W})=>W!==g),yield d.user._updateTokensIfNecessary(A),yield d.user.reload()}catch(A){throw A}})()}}const Ga=new WeakMap,Th="__sak";class u0{constructor(u,d){this.storageRetriever=u,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Th,"1"),this.storage.removeItem(Th),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,d){return this.storage.setItem(u,JSON.stringify(d)),Promise.resolve()}_get(u){const d=this.storage.getItem(u);return Promise.resolve(d?JSON.parse(d):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ah=(()=>{class p extends u0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function d0(){const p=(0,C.ZQ)();return Qi(p)||Gt(p)}()&&function nr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Kn(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const y=this.storage.getItem(g),A=this.localCache[g];y!==A&&d(g,A,y)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((ge,He,yt)=>{this.notifyListeners(ge,yt)});const y=d.key;if(g?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ge=this.storage.getItem(y);if(d.newValue!==ge)null!==d.newValue?this.storage.setItem(y,d.newValue):this.storage.removeItem(y);else if(this.localCache[y]===d.newValue&&!g)return}const A=()=>{const ge=this.storage.getItem(y);!g&&this.localCache[y]===ge||this.notifyListeners(y,ge)},W=this.storage.getItem(y);!function Ir(){return(0,C.lT)()&&10===document.documentMode}()||W===d.newValue||d.newValue===d.oldValue?A():setTimeout(A,10)}notifyListeners(d,g){this.localCache[d]=g;const y=this.listeners[d];if(y)for(const A of Array.from(y))A(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,y)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var y=()=>super._set,A=this;return(0,_.A)(function*(){yield y().call(A,d,g),A.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,y=this;return(0,_.A)(function*(){const A=yield g().call(y,d);return y.localCache[d]=JSON.stringify(A),A})()}_remove(d){var g=()=>super._remove,y=this;return(0,_.A)(function*(){yield g().call(y,d),delete y.localCache[d]})()}}return p.type="LOCAL",p})(),ki=(()=>{class p extends u0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return p.type="SESSION",p})();let Dh=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(A=>A.isListeningto(d));if(g)return g;const y=new p(d);return this.receivers.push(y),y}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,_.A)(function*(){const y=d,{eventId:A,eventType:W,data:ge}=y.data,He=g.handlersMap[W];if(null==He||!He.size)return;y.ports[0].postMessage({status:"ack",eventId:A,eventType:W});const yt=Array.from(He).map(function(){var lt=(0,_.A)(function*(Lr){return Lr(y.origin,ge)});return function(Lr){return lt.apply(this,arguments)}}()),kt=yield function f0(p){return Promise.all(p.map(function(){var u=(0,_.A)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return u.apply(this,arguments)}}()))}(yt);y.ports[0].postMessage({status:"done",eventId:A,eventType:W,response:kt})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function zs(p="",u=10){let d="";for(let g=0;g<u;g++)d+=Math.floor(10*Math.random());return p+d}class BC{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,d,g=50){var y=this;return(0,_.A)(function*(){const A=typeof MessageChannel<"u"?new MessageChannel:null;if(!A)throw new Error("connection_unavailable");let W,ge;return new Promise((He,yt)=>{const kt=zs("",20);A.port1.start();const lt=setTimeout(()=>{yt(new Error("unsupported_event"))},g);ge={messageChannel:A,onMessage(Lr){const es=Lr;if(es.data.eventId===kt)switch(es.data.status){case"ack":clearTimeout(lt),W=setTimeout(()=>{yt(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),He(es.data.response);break;default:clearTimeout(lt),clearTimeout(W),yt(new Error("invalid_response"))}}},y.handlers.add(ge),A.port1.addEventListener("message",ge.onMessage),y.target.postMessage({eventType:u,eventId:kt,data:d},[A.port2])}).finally(()=>{ge&&y.removeMessageHandler(ge)})})()}}function Jr(){return window}function Sh(){return typeof Jr().WorkerGlobalScope<"u"&&"function"==typeof Jr().importScripts}function Pl(){return(Pl=(0,_.A)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const p0="firebaseLocalStorageDb",Rh="firebaseLocalStorage",g0="fbase_key";class Ml{constructor(u){this.request=u}toPromise(){return new Promise((u,d)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function kl(p,u){return p.transaction([Rh],u?"readwrite":"readonly").objectStore(Rh)}function ct(){const p=indexedDB.open(p0,1);return new Promise((u,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(Rh,{keyPath:g0})}catch(y){d(y)}}),p.addEventListener("success",(0,_.A)(function*(){const g=p.result;g.objectStoreNames.contains(Rh)?u(g):(g.close(),yield function Er(){const p=indexedDB.deleteDatabase(p0);return new Ml(p).toPromise()}(),u(yield ct()))}))})}function jt(p,u,d){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,_.A)(function*(p,u,d){const g=kl(p,!0).put({[g0]:u,value:d});return new Ml(g).toPromise()})).apply(this,arguments)}function _i(){return(_i=(0,_.A)(function*(p,u){const d=kl(p,!1).get(u),g=yield new Ml(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function uo(p,u){const d=kl(p,!0).delete(u);return new Ml(d).toPromise()}const Oi=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,_.A)(function*(){return d.db||(d.db=yield ct()),d.db})()}_withRetries(d){var g=this;return(0,_.A)(function*(){let y=0;for(;;)try{const A=yield g._openDb();return yield d(A)}catch(A){if(y++>3)throw A;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,_.A)(function*(){return Sh()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,_.A)(function*(){d.receiver=Dh._getInstance(function jC(){return Sh()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,_.A)(function*(y,A){return{keyProcessed:(yield d._poll()).includes(A.key)}});return function(y,A){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,_.A)(function*(y,A){return["keyChanged"]});return function(y,A){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,_.A)(function*(){var g,y;if(d.activeServiceWorker=yield function $C(){return Pl.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new BC(d.activeServiceWorker);const A=yield d.sender._send("ping",{},800);A&&null!==(g=A[0])&&void 0!==g&&g.fulfilled&&null!==(y=A[0])&&void 0!==y&&y.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,_.A)(function*(){if(g.sender&&g.activeServiceWorker&&function UC(){var p;return(null===(p=null==navigator?void 0:navigator.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,_.A)(function*(){try{if(!indexedDB)return!1;const d=yield ct();return yield jt(d,Th,"1"),yield uo(d,Th),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,_.A)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var y=this;return(0,_.A)(function*(){return y._withPendingWrite((0,_.A)(function*(){return yield y._withRetries(A=>jt(A,d,g)),y.localCache[d]=g,y.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,_.A)(function*(){const y=yield g._withRetries(A=>function Is(p,u){return _i.apply(this,arguments)}(A,d));return g.localCache[d]=y,y})()}_remove(d){var g=this;return(0,_.A)(function*(){return g._withPendingWrite((0,_.A)(function*(){return yield g._withRetries(y=>uo(y,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,_.A)(function*(){const g=yield d._withRetries(W=>{const ge=kl(W,!1).getAll();return new Ml(ge).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const y=[],A=new Set;if(0!==g.length)for(const{fbase_key:W,value:ge}of g)A.add(W),JSON.stringify(d.localCache[W])!==JSON.stringify(ge)&&(d.notifyListeners(W,ge),y.push(W));for(const W of Object.keys(d.localCache))d.localCache[W]&&!A.has(W)&&(d.notifyListeners(W,null),y.push(W));return y})()}notifyListeners(d,g){this.localCache[d]=g;const y=this.listeners[d];if(y)for(const A of Array.from(y))A(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,_.A)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),Wa=1e12;class Tc{constructor(u){this.auth=u,this.counter=Wa,this._widgets=new Map}render(u,d){const g=this.counter;return this._widgets.set(g,new Hs(u,this.auth.name,d||{})),this.counter++,g}reset(u){var d;const g=u||Wa;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(u){var d;return(null===(d=this._widgets.get(u||Wa))||void 0===d?void 0:d.getResponse())||""}execute(u){var d=this;return(0,_.A)(function*(){var g;return null===(g=d._widgets.get(u||Wa))||void 0===g||g.execute(),""})()}}class Hs{constructor(u,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const y="string"==typeof u?document.getElementById(u):u;S(y,"argument-error",{appName:d}),this.container=y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ku(p){const u=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)u.push(d.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":d}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const xh=Sl("rcb"),qa=new Ve(3e4,6e4);class Qu{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=Jr().grecaptcha)||void 0===u||!u.render)}load(u,d=""){return S(function Nl(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),u,"argument-error"),this.shouldResolveImmediately(d)&&Be(Jr().grecaptcha)?Promise.resolve(Jr().grecaptcha):new Promise((g,y)=>{const A=Jr().setTimeout(()=>{y(_e(u,"network-request-failed"))},qa.get());Jr()[xh]=()=>{Jr().clearTimeout(A),delete Jr()[xh];const ge=Jr().grecaptcha;if(!ge||!Be(ge))return void y(_e(u,"internal-error"));const He=ge.render;ge.render=(yt,kt)=>{const lt=He(yt,kt);return this.counter++,lt},this.hostLanguage=d,g(ge)},qt(`${function Bs(){return ms.recaptchaV2Script}()}?${(0,C.Am)({onload:xh,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(A),y(_e(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var d;return!(null===(d=Jr().grecaptcha)||void 0===d||!d.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class on{load(u){return(0,_.A)(function*(){return new Tc(u)})()}clearedOneInstance(){}}const Ph="recaptcha",Yu={theme:"light",type:"image"};class Gs{constructor(u,d,g=Object.assign({},Yu)){this.parameters=g,this.type=Ph,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Gn(u),this.isInvisible="invisible"===this.parameters.size,S(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const y="string"==typeof d?document.getElementById(d):d;S(y,this.auth,"argument-error"),this.container=y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new on:new Qu,this.validateStartingState()}verify(){var u=this;return(0,_.A)(function*(){u.assertNotDestroyed();const d=yield u.render(),g=u.getAssertedRecaptcha();return g.getResponse(d)||new Promise(A=>{const W=ge=>{ge&&(u.tokenChangeListeners.delete(W),A(ge))};u.tokenChangeListeners.add(W),u.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){S(!this.parameters.sitekey,this.auth,"argument-error"),S(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),S(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof u)u(d);else if("string"==typeof u){const g=Jr()[u];"function"==typeof g&&g(d)}}}assertNotDestroyed(){S(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,_.A)(function*(){if(yield u.init(),!u.widgetId){let d=u.container;if(!u.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}u.widgetId=u.getAssertedRecaptcha().render(d,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,_.A)(function*(){S(fe()&&!Sh(),u.auth,"internal-error"),yield function Mh(){let p=null;return new Promise(u=>{"complete"!==document.readyState?(p=()=>u(),window.addEventListener("load",p)):u()}).catch(u=>{throw p&&window.removeEventListener("load",p),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const d=yield function At(p){return Qt.apply(this,arguments)}(u.auth);S(d,u.auth,"internal-error"),u.parameters.sitekey=d})()}getAssertedRecaptcha(){return S(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ka{constructor(u,d){this.verificationId=u,this.onConfirmation=d}confirm(u){const d=ha._fromVerification(this.verificationId,u);return this.onConfirmation(d)}}function Xu(){return(Xu=(0,_.A)(function*(p,u,d){const g=Gn(p),y=yield Ol(g,u,(0,C.Ku)(d));return new Ka(y,A=>ma(g,A))})).apply(this,arguments)}function vi(){return(vi=(0,_.A)(function*(p,u,d){const g=(0,C.Ku)(p);yield ph(!1,g,"phone");const y=yield Ol(g.auth,u,(0,C.Ku)(d));return new Ka(y,A=>Uu(g,A))})).apply(this,arguments)}function ya(){return(ya=(0,_.A)(function*(p,u,d){const g=(0,C.Ku)(p),y=yield Ol(g.auth,u,(0,C.Ku)(d));return new Ka(y,A=>mh(g,A))})).apply(this,arguments)}function Ol(p,u,d){return No.apply(this,arguments)}function No(){return No=(0,_.A)(function*(p,u,d){var g;const y=yield d.verify();try{let A;if(S("string"==typeof y,p,"argument-error"),S(d.type===Ph,p,"argument-error"),A="string"==typeof u?{phoneNumber:u}:u,"session"in A){const W=A.session;if("phoneNumber"in A)return S("enroll"===W.type,p,"internal-error"),(yield function zg(p,u){return he(p,"POST","/v2/accounts/mfaEnrollment:start",Ie(p,u))}(p,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:A.phoneNumber,recaptchaToken:y}})).phoneSessionInfo.sessionInfo;{S("signin"===W.type,p,"internal-error");const ge=(null===(g=A.multiFactorHint)||void 0===g?void 0:g.uid)||A.multiFactorUid;return S(ge,p,"missing-multi-factor-info"),(yield function Zt(p,u){return he(p,"POST","/v2/accounts/mfaSignIn:start",Ie(p,u))}(p,{mfaPendingCredential:W.credential,mfaEnrollmentId:ge,phoneSignInInfo:{recaptchaToken:y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield function Vu(p,u){return dh.apply(this,arguments)}(p,{phoneNumber:A.phoneNumber,recaptchaToken:y});return W}}finally{d._reset()}}),No.apply(this,arguments)}function Kg(){return(Kg=(0,_.A)(function*(p,u){yield kg((0,C.Ku)(p),u)})).apply(this,arguments)}let Ju=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=Gn(d)}verifyPhoneNumber(d,g){return Ol(this.auth,d,(0,C.Ku)(g))}static credential(d,g){return ha._fromVerification(d,g)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:y}=d;return g&&y?ha._fromTokenResponse(g,y):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function Ia(p,u){return u?Bt(u):(S(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class kh extends Lt{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return vs(u,this._buildIdpRequest())}_linkToIdToken(u,d){return vs(u,this._buildIdpRequest(d))}_getReauthenticationResolver(u){return vs(u,this._buildIdpRequest())}_buildIdpRequest(u){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(d.idToken=u),d}}function HC(p){return Qy(p.auth,new kh(p),p.bypassAuthState)}function Qg(p){const{auth:u,user:d}=p;return S(d,u,"internal-error"),Ky(d,new kh(p),p.bypassAuthState)}function bk(p){return _0.apply(this,arguments)}function _0(){return(_0=(0,_.A)(function*(p){const{auth:u,user:d}=p;return S(d,u,"internal-error"),kg(d,new kh(p),p.bypassAuthState)})).apply(this,arguments)}class GC{constructor(u,d,g,y,A=!1){this.auth=u,this.resolver=g,this.user=y,this.bypassAuthState=A,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var u=this;return new Promise(function(){var d=(0,_.A)(function*(g,y){u.pendingPromise={resolve:g,reject:y};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(A){u.reject(A)}});return function(g,y){return d.apply(this,arguments)}}())}onAuthEvent(u){var d=this;return(0,_.A)(function*(){const{urlResponse:g,sessionId:y,postBody:A,tenantId:W,error:ge,type:He}=u;if(ge)return void d.reject(ge);const yt={auth:d.auth,requestUri:g,sessionId:y,tenantId:W||void 0,postBody:A||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(He)(yt))}catch(kt){d.reject(kt)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return HC;case"linkViaPopup":case"linkViaRedirect":return bk;case"reauthViaPopup":case"reauthViaRedirect":return Qg;default:Ge(this.auth,"internal-error")}}resolve(u){K(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){K(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ck=new Ve(2e3,1e4);function v0(){return(v0=(0,_.A)(function*(p,u,d){const g=Gn(p);k(p,u,ja);const y=Ia(g,d);return new E0(g,"signInViaPopup",u,y).executeNotNull()})).apply(this,arguments)}function y0(){return(y0=(0,_.A)(function*(p,u,d){const g=(0,C.Ku)(p);k(g.auth,u,ja);const y=Ia(g.auth,d);return new E0(g.auth,"reauthViaPopup",u,y,g).executeNotNull()})).apply(this,arguments)}function I0(){return(I0=(0,_.A)(function*(p,u,d){const g=(0,C.Ku)(p);k(g.auth,u,ja);const y=Ia(g.auth,d);return new E0(g.auth,"linkViaPopup",u,y,g).executeNotNull()})).apply(this,arguments)}let E0=(()=>{class p extends GC{constructor(d,g,y,A,W){super(d,g,A,W),this.provider=y,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,_.A)(function*(){const g=yield d.execute();return S(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,_.A)(function*(){K(1===d.filter.length,"Popup operations only handle one event");const g=zs();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(y=>{d.reject(y)}),d.resolver._isIframeWebStorageSupported(d.auth,y=>{y||d.reject(_e(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,y;this.pollId=null!==(y=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==y&&y.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,Ck.get())};d()}}return p.currentPopupAction=null,p})();const Sk="pendingRedirect",Ac=new Map;class w0 extends GC{constructor(u,d,g=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var u=()=>super.execute,d=this;return(0,_.A)(function*(){let g=Ac.get(d.auth._key());if(!g){try{const A=(yield function Rk(p,u){return b0.apply(this,arguments)}(d.resolver,d.auth))?yield u().call(d):null;g=()=>Promise.resolve(A)}catch(y){g=()=>Promise.reject(y)}Ac.set(d.auth._key(),g)}return d.bypassAuthState||Ac.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(u){var d=()=>super.onAuthEvent,g=this;return(0,_.A)(function*(){if("signInViaRedirect"===u.type)return d().call(g,u);if("unknown"!==u.type){if(u.eventId){const y=yield g.auth._redirectUserForId(u.eventId);if(y)return g.user=y,d().call(g,u);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,_.A)(function*(){})()}cleanUp(){}}function b0(){return(b0=(0,_.A)(function*(p,u){const d=Yg(u),g=Yi(p);if(!(yield g._isAvailable()))return!1;const y="true"===(yield g._get(d));return yield g._remove(d),y})).apply(this,arguments)}function C0(p,u){return T0.apply(this,arguments)}function T0(){return(T0=(0,_.A)(function*(p,u){return Yi(p)._set(Yg(u),"true")})).apply(this,arguments)}function Nh(p,u){Ac.set(p._key(),u)}function Yi(p){return Bt(p._redirectPersistence)}function Yg(p){return Hr(Sk,p.config.apiKey,p.name)}function qC(p,u,d){return function KC(p,u,d){return Oh.apply(this,arguments)}(p,u,d)}function Oh(){return(Oh=(0,_.A)(function*(p,u,d){const g=Gn(p);k(p,u,ja),yield g._initializationPromise;const y=Ia(g,d);return yield C0(y,g),y._openRedirect(g,u,"signInViaRedirect")})).apply(this,arguments)}function A0(p,u,d){return function QC(p,u,d){return Zu.apply(this,arguments)}(p,u,d)}function Zu(){return(Zu=(0,_.A)(function*(p,u,d){const g=(0,C.Ku)(p);k(g.auth,u,ja),yield g.auth._initializationPromise;const y=Ia(g.auth,d);yield C0(y,g.auth);const A=yield Yn(g);return y._openRedirect(g.auth,u,"reauthViaRedirect",A)})).apply(this,arguments)}function YC(p,u,d){return function Ws(p,u,d){return Fh.apply(this,arguments)}(p,u,d)}function Fh(){return(Fh=(0,_.A)(function*(p,u,d){const g=(0,C.Ku)(p);k(g.auth,u,ja),yield g.auth._initializationPromise;const y=Ia(g.auth,d);yield ph(!1,g,u.providerId),yield C0(y,g.auth);const A=yield Yn(g);return y._openRedirect(g.auth,u,"linkViaRedirect",A)})).apply(this,arguments)}function Lh(){return(Lh=(0,_.A)(function*(p,u){return yield Gn(p)._initializationPromise,Vh(p,u,!1)})).apply(this,arguments)}function Vh(p,u){return S0.apply(this,arguments)}function S0(){return(S0=(0,_.A)(function*(p,u,d=!1){const g=Gn(p),y=Ia(g,u),W=yield new w0(g,y,d).execute();return W&&!d&&(delete W.user._redirectEventId,yield g._persistUserIfCurrent(W.user),yield g._setRedirectUser(null,u)),W})).apply(this,arguments)}function Yn(p){return ed.apply(this,arguments)}function ed(){return(ed=(0,_.A)(function*(p){const u=zs(`${p.uid}:::`);return p._redirectEventId=u,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),u})).apply(this,arguments)}class Li{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(u,g)&&(d=!0,this.sendToConsumer(u,g),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function Sc(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Dc(p);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=u,d=!0)),d}sendToConsumer(u,d){var g;if(u.error&&!Dc(u)){const y=(null===(g=u.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(_e(this.auth,y))}else d.onAuthEvent(u)}isEventForConsumer(u,d){const g=null===d.eventId||!!u.eventId&&u.eventId===d.eventId;return d.filter.includes(u.type)&&g}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(R0(u))}saveEventToCache(u){this.cachedEventUids.add(R0(u)),this.lastProcessedEventTime=Date.now()}}function R0(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(u=>u).join("-")}function Dc({type:p,error:u}){return"unknown"===p&&"auth/no-auth-event"===(null==u?void 0:u.code)}function ho(p){return Xg.apply(this,arguments)}function Xg(){return(Xg=(0,_.A)(function*(p,u={}){return he(p,"GET","/v1/projects",u)})).apply(this,arguments)}const Jg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XC=/^https?/;function Bh(){return(Bh=(0,_.A)(function*(p){if(p.config.emulator)return;const{authorizedDomains:u}=yield ho(p);for(const d of u)try{if(JC(d))return}catch{}Ge(p,"unauthorized-domain")})).apply(this,arguments)}function JC(p){const u=se(),{protocol:d,hostname:g}=new URL(u);if(p.startsWith("chrome-extension://")){const W=new URL(p);return""===W.hostname&&""===g?"chrome-extension:"===d&&p.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===d&&W.hostname===g}if(!XC.test(d))return!1;if(Jg.test(p))return g===p;const y=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+y+"|"+y+")$","i").test(g)}const x0=new Ve(3e4,6e4);function $h(){const p=Jr().___jsl;if(null!=p&&p.H)for(const u of Object.keys(p.H))if(p.H[u].r=p.H[u].r||[],p.H[u].L=p.H[u].L||[],p.H[u].r=[...p.H[u].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let Qa=null;const em=new Ve(5e3,15e3),Fl="__/auth/iframe",en="emulator/auth/iframe",P0={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZC(p){const u=p.config;S(u.authDomain,p,"auth-domain-config-required");const d=u.emulator?q(u,en):`https://${p.config.authDomain}/${Fl}`,g={apiKey:u.apiKey,appName:p.name,v:L.SDK_VERSION},y=xk.get(p.config.apiHost);y&&(g.eid=y);const A=p._getFrameworks();return A.length&&(g.fw=A.join(",")),`${d}?${(0,C.Am)(g).slice(1)}`}function tm(){return tm=(0,_.A)(function*(p){const u=yield function Uh(p){return Qa=Qa||function Zg(p){return new Promise((u,d)=>{var g,y,A;function W(){$h(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{$h(),d(_e(p,"network-request-failed"))},timeout:x0.get()})}if(null!==(y=null===(g=Jr().gapi)||void 0===g?void 0:g.iframes)&&void 0!==y&&y.Iframe)u(gapi.iframes.getContext());else{if(null===(A=Jr().gapi)||void 0===A||!A.load){const ge=Sl("iframefcb");return Jr()[ge]=()=>{gapi.load?W():d(_e(p,"network-request-failed"))},qt(`${function dc(){return ms.gapiScript}()}?onload=${ge}`).catch(He=>d(He))}W()}}).catch(u=>{throw Qa=null,u})}(p),Qa}(p),d=Jr().gapi;return S(d,p,"internal-error"),u.open({where:document.body,url:ZC(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:P0,dontclear:!0},g=>new Promise(function(){var y=(0,_.A)(function*(A,W){yield g.restyle({setHideOnLeave:!1});const ge=_e(p,"network-request-failed"),He=Jr().setTimeout(()=>{W(ge)},em.get());function yt(){Jr().clearTimeout(He),A(g)}g.ping(yt).then(yt,()=>{W(ge)})});return function(A,W){return y.apply(this,arguments)}}()))}),tm.apply(this,arguments)}const M0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class k0{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Cn="__/auth/handler",rr="emulator/auth/handler",ir=encodeURIComponent("fac");function Wn(p,u,d,g,y,A){return jh.apply(this,arguments)}function jh(){return(jh=(0,_.A)(function*(p,u,d,g,y,A){S(p.config.authDomain,p,"auth-domain-config-required"),S(p.config.apiKey,p,"invalid-api-key");const W={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:g,v:L.SDK_VERSION,eventId:y};if(u instanceof ja){u.setDefaultLanguage(p.languageCode),W.providerId=u.providerId||"",(0,C.Im)(u.getCustomParameters())||(W.customParameters=JSON.stringify(u.getCustomParameters()));for(const[kt,lt]of Object.entries(A||{}))W[kt]=lt}if(u instanceof Bu){const kt=u.getScopes().filter(lt=>""!==lt);kt.length>0&&(W.scopes=kt.join(","))}p.tenantId&&(W.tid=p.tenantId);const ge=W;for(const kt of Object.keys(ge))void 0===ge[kt]&&delete ge[kt];const He=yield p._getAppCheckToken(),yt=He?`#${ir}=${encodeURIComponent(He)}`:"";return`${function nd({config:p}){return p.emulator?q(p,rr):`https://${p.authDomain}/${Cn}`}(p)}?${(0,C.Am)(ge).slice(1)}${yt}`})).apply(this,arguments)}const Zo="webStorageSupport",zh=class nm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ki,this._completeRedirectFn=Vh,this._overrideRedirectResult=Nh}_openPopup(u,d,g,y){var A=this;return(0,_.A)(function*(){var W;K(null===(W=A.eventManagers[u._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const ge=yield Wn(u,d,g,se(),y);return function iT(p,u,d,g=500,y=600){const A=Math.max((window.screen.availHeight-y)/2,0).toString(),W=Math.max((window.screen.availWidth-g)/2,0).toString();let ge="";const He=Object.assign(Object.assign({},M0),{width:g.toString(),height:y.toString(),top:A,left:W}),yt=(0,C.ZQ)().toLowerCase();d&&(ge=Vs(yt)?"_blank":d),hi(yt)&&(u=u||"http://localhost",He.scrollbars="yes");const kt=Object.entries(He).reduce((Lr,[es,vm])=>`${Lr}${es}=${vm},`,"");if(function fn(p=(0,C.ZQ)()){var u;return Gt(p)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(yt)&&"_self"!==ge)return function $e(p,u){const d=document.createElement("a");d.href=p,d.target=u;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(u||"",ge),new k0(null);const lt=window.open(u||"",ge,kt);S(lt,p,"popup-blocked");try{lt.focus()}catch{}return new k0(lt)}(u,ge,zs())})()}_openRedirect(u,d,g,y){var A=this;return(0,_.A)(function*(){return yield A._originValidation(u),function ri(p){Jr().location.href=p}(yield Wn(u,d,g,se(),y)),new Promise(()=>{})})()}_initialize(u){const d=u._key();if(this.eventManagers[d]){const{manager:y,promise:A}=this.eventManagers[d];return y?Promise.resolve(y):(K(A,"If manager is not set, promise should be"),A)}const g=this.initAndGetManager(u);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(u){var d=this;return(0,_.A)(function*(){const g=yield function eT(p){return tm.apply(this,arguments)}(u),y=new Li(u);return g.register("authEvent",A=>(S(null==A?void 0:A.authEvent,u,"invalid-auth-event"),{status:y.onEvent(A.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[u._key()]={manager:y},d.iframes[u._key()]=g,y})()}_isIframeWebStorageSupported(u,d){this.iframes[u._key()].send(Zo,{type:Zo},y=>{var A;const W=null===(A=null==y?void 0:y[0])||void 0===A?void 0:A[Zo];void 0!==W&&d(!!W),Ge(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function qs(p){return Bh.apply(this,arguments)}(u)),this.originValidationPromises[d]}get _shouldInitProactively(){return Kn()||Qi()||Gt()}};class N0{constructor(u){this.factorId=u}_process(u,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(u,d.credential,g);case"signin":return this._finalizeSignIn(u,d.credential);default:return $("unexpected MultiFactorSessionType")}}}class O0 extends N0{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new O0(u)}_finalizeEnroll(u,d,g){return function bh(p,u){return he(p,"POST","/v2/accounts/mfaEnrollment:finalize",Ie(p,u))}(u,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,d){return function qu(p,u){return he(p,"POST","/v2/accounts/mfaSignIn:finalize",Ie(p,u))}(u,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let F0=(()=>{class p{constructor(){}static assertion(d){return O0._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var Ks="@firebase/auth";class V0{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var d=this;return(0,_.A)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const d=this.auth.onIdTokenChanged(g=>{u((null==g?void 0:g.stsTokenManager.accessToken)||null)});this.internalListeners.set(u,d),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const d=this.internalListeners.get(u);d&&(this.internalListeners.delete(u),d(),this.updateProactiveRefresh())}assertAuthConfigured(){S(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ea(){return window}(0,C.XA)("authIdTokenMaxAge"),function jn(p){ms=p}({loadJS:p=>new Promise((u,d)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=u,g.onerror=y=>{const A=_e("internal-error");A.customData=y,d(A)},g.type="text/javascript",g.charset="UTF-8",function B0(){var p,u;return null!==(u=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==u?u:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function sT(p){(0,L._registerComponent)(new M.uA("auth",(u,{options:d})=>{const g=u.getProvider("app").getImmediate(),y=u.getProvider("heartbeat"),A=u.getProvider("app-check-internal"),{apiKey:W,authDomain:ge}=g.options;S(W&&!W.includes(":"),"invalid-api-key",{appName:g.name});const He={apiKey:W,authDomain:ge,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gs(p)},yt=new Yt(g,y,A,He);return function je(p,u){const d=(null==u?void 0:u.persistence)||[],g=(Array.isArray(d)?d:[d]).map(Bt);null!=u&&u.errorMap&&p._updateErrorMap(u.errorMap),p._initializeWithPersistence(g,null==u?void 0:u.popupRedirectResolver)}(yt,d),yt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,d,g)=>{u.getProvider("auth-internal").initialize()})),(0,L._registerComponent)(new M.uA("auth-internal",u=>{const d=Gn(u.getProvider("auth").getImmediate());return new V0(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,L.registerVersion)(Ks,"1.6.2",function oT(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,L.registerVersion)(Ks,"1.6.2","esm2017")}("Browser");function Wh(){return Wh=(0,_.A)(function*(p,u,d){var g;const{BuildInfo:y}=Ea();K(u.sessionId,"AuthEvent did not contain a session ID");const A=yield function lT(p){return sm.apply(this,arguments)}(u.sessionId),W={};return Gt()?W.ibi=y.packageName:we()?W.apn=y.packageName:Ge(p,"operation-not-supported-in-this-environment"),y.displayName&&(W.appDisplayName=y.displayName),W.sessionId=A,Wn(p,d,u.type,void 0,null!==(g=u.eventId)&&void 0!==g?g:void 0,W)}),Wh.apply(this,arguments)}function rd(){return(rd=(0,_.A)(function*(p){const{BuildInfo:u}=Ea(),d={};Gt()?d.iosBundleId=u.packageName:we()?d.androidPackageName=u.packageName:Ge(p,"operation-not-supported-in-this-environment"),yield ho(p,d)})).apply(this,arguments)}function wa(){return(wa=(0,_.A)(function*(p,u,d){const{cordova:g}=Ea();let y=()=>{};try{yield new Promise((A,W)=>{let ge=null;function He(){var lt;A();const Lr=null===(lt=g.plugins.browsertab)||void 0===lt?void 0:lt.close;"function"==typeof Lr&&Lr(),"function"==typeof(null==d?void 0:d.close)&&d.close()}function yt(){ge||(ge=window.setTimeout(()=>{W(_e(p,"redirect-cancelled-by-user"))},2e3))}function kt(){"visible"===(null==document?void 0:document.visibilityState)&&yt()}u.addPassiveListener(He),document.addEventListener("resume",yt,!1),we()&&document.addEventListener("visibilitychange",kt,!1),y=()=>{u.removePassiveListener(He),document.removeEventListener("resume",yt,!1),document.removeEventListener("visibilitychange",kt,!1),ge&&window.clearTimeout(ge)}})}finally{y()}})).apply(this,arguments)}function sm(){return(sm=(0,_.A)(function*(p){const u=function cT(p){if(K(/[0-9a-zA-Z]+/.test(p),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(p);const u=new ArrayBuffer(p.length),d=new Uint8Array(u);for(let g=0;g<p.length;g++)d[g]=p.charCodeAt(g);return d}(p),d=yield crypto.subtle.digest("SHA-256",u);return Array.from(new Uint8Array(d)).map(y=>y.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class z0 extends Li{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(u=>{this.resolveInialized=u})}addPassiveListener(u){this.passiveListeners.add(u)}removePassiveListener(u){this.passiveListeners.delete(u)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(u){return this.resolveInialized(),this.passiveListeners.forEach(d=>d(u)),super.onEvent(u)}initialized(){var u=this;return(0,_.A)(function*(){yield u.initPromise})()}}function ws(p){return am.apply(this,arguments)}function am(){return(am=(0,_.A)(function*(p){const u=yield xc()._get(od(p));return u&&(yield xc()._remove(od(p))),u})).apply(this,arguments)}function Kh(){const p=[];for(let d=0;d<20;d++){const g=Math.floor(62*Math.random());p.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(g))}return p.join("")}function xc(){return Bt(Ah)}function od(p){return Hr("authEvent",p.config.apiKey,p.name)}function Qh(p){if(null==p||!p.includes("?"))return{};const[u,...d]=p.split("?");return(0,C.I9)(d.join("?"))}const dT=class sd{constructor(){this._redirectPersistence=ki,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Vh,this._overrideRedirectResult=Nh}_initialize(u){var d=this;return(0,_.A)(function*(){const g=u._key();let y=d.eventManagers.get(g);return y||(y=new z0(u),d.eventManagers.set(g,y),d.attachCallbackListeners(u,y)),y})()}_openPopup(u){Ge(u,"operation-not-supported-in-this-environment")}_openRedirect(u,d,g,y){var A=this;return(0,_.A)(function*(){!function fr(p){var u,d,g,y,A,W,ge,He,yt,kt;const lt=Ea();S("function"==typeof(null===(u=null==lt?void 0:lt.universalLinks)||void 0===u?void 0:u.subscribe),p,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),S(typeof(null===(d=null==lt?void 0:lt.BuildInfo)||void 0===d?void 0:d.packageName)<"u",p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),S("function"==typeof(null===(A=null===(y=null===(g=null==lt?void 0:lt.cordova)||void 0===g?void 0:g.plugins)||void 0===y?void 0:y.browsertab)||void 0===A?void 0:A.openUrl),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),S("function"==typeof(null===(He=null===(ge=null===(W=null==lt?void 0:lt.cordova)||void 0===W?void 0:W.plugins)||void 0===ge?void 0:ge.browsertab)||void 0===He?void 0:He.isAvailable),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),S("function"==typeof(null===(kt=null===(yt=null==lt?void 0:lt.cordova)||void 0===yt?void 0:yt.InAppBrowser)||void 0===kt?void 0:kt.open),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(u);const W=yield A._initialize(u);yield W.initialized(),W.resetRedirect(),function WC(){Ac.clear()}(),yield A._originValidation(u);const ge=function H0(p,u,d=null){return{type:u,eventId:d,urlResponse:null,sessionId:Kh(),postBody:null,tenantId:p.tenantId,error:_e(p,"no-auth-event")}}(u,g,y);yield function id(p,u){return xc()._set(od(p),u)}(u,ge);const He=yield function U0(p,u,d){return Wh.apply(this,arguments)}(u,ge,d),yt=yield function aT(p){const{cordova:u}=Ea();return new Promise(d=>{u.plugins.browsertab.isAvailable(g=>{let y=null;g?u.plugins.browsertab.openUrl(p):y=u.InAppBrowser.open(p,function $t(p=(0,C.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}()?"_blank":"_system","location=yes"),d(y)})})}(He);return function Vi(p,u,d){return wa.apply(this,arguments)}(u,W,yt)})()}_isIframeWebStorageSupported(u,d){throw new Error("Method not implemented.")}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function j0(p){return rd.apply(this,arguments)}(u)),this.originValidationPromises[d]}attachCallbackListeners(u,d){const{universalLinks:g,handleOpenURL:y,BuildInfo:A}=Ea(),W=setTimeout((0,_.A)(function*(){yield ws(u),d.onEvent(Yh())}),500),ge=function(){var kt=(0,_.A)(function*(lt){clearTimeout(W);const Lr=yield ws(u);let es=null;Lr&&null!=lt&&lt.url&&(es=function qh(p,u){var d,g;const y=function W0(p){const u=Qh(p),d=u.link?decodeURIComponent(u.link):void 0,g=Qh(d).link,y=u.deep_link_id?decodeURIComponent(u.deep_link_id):void 0;return Qh(y).link||y||g||d||p}(u);if(y.includes("/__/auth/callback")){const A=Qh(y),W=A.firebaseError?function G0(p){try{return JSON.parse(p)}catch{return null}}(decodeURIComponent(A.firebaseError)):null,ge=null===(g=null===(d=null==W?void 0:W.code)||void 0===d?void 0:d.split("auth/"))||void 0===g?void 0:g[1],He=ge?_e(ge):null;return He?{type:p.type,eventId:p.eventId,tenantId:p.tenantId,error:He,urlResponse:null,sessionId:null,postBody:null}:{type:p.type,eventId:p.eventId,tenantId:p.tenantId,sessionId:p.sessionId,urlResponse:y,postBody:null}}return null}(Lr,lt.url)),d.onEvent(es||Yh())});return function(Lr){return kt.apply(this,arguments)}}();typeof g<"u"&&"function"==typeof g.subscribe&&g.subscribe(null,ge);const He=y,yt=`${A.packageName.toLowerCase()}://`;Ea().handleOpenURL=function(){var kt=(0,_.A)(function*(lt){if(lt.toLowerCase().startsWith(yt)&&ge({url:lt}),"function"==typeof He)try{He(lt)}catch(Lr){console.error(Lr)}});return function(lt){return kt.apply(this,arguments)}}()}};function Yh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function Xh(){var p;return(null===(p=null==self?void 0:self.location)||void 0===p?void 0:p.protocol)||null}function Mc(p=(0,C.ZQ)()){return!("file:"!==Xh()&&"ionic:"!==Xh()&&"capacitor:"!==Xh()||!p.toLowerCase().match(/iphone|ipad|ipod|android/))}function mT(){try{const p=self.localStorage,u=zs();if(p)return p.setItem(u,"1"),p.removeItem(u),!function Jh(p=(0,C.ZQ)()){return function ad(){return(0,C.lT)()&&11===(null==document?void 0:document.documentMode)}()||function cm(p=(0,C.ZQ)()){return/Edge\/\d+/.test(p)}(p)}()||(0,C.zW)()}catch{return Zh()&&(0,C.zW)()}return!1}function Zh(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ef(){return(function lm(){return"http:"===Xh()||"https:"===Xh()}()||(0,C.sr)()||Mc())&&!function gT(){return(0,C.lV)()||(0,C.Ll)()}()&&mT()&&!Zh()}function q0(){return Mc()&&typeof document<"u"}function um(){return(um=(0,_.A)(function*(){return!!q0()&&new Promise(p=>{const u=setTimeout(()=>{p(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(u),p(!0)})})})).apply(this,arguments)}const Xi={LOCAL:"local",NONE:"none",SESSION:"session"},kc=S,ld="persistence";function hm(p){return nf.apply(this,arguments)}function nf(){return(nf=(0,_.A)(function*(p){yield p._initializationPromise;const u=fm(),d=Hr(ld,p.config.apiKey,p.name);u&&u.setItem(d,p._getPersistence())})).apply(this,arguments)}function fm(){var p;try{return(null===(p=function tf(){return typeof window<"u"?window:null}())||void 0===p?void 0:p.sessionStorage)||null}catch{return null}}const Q0=S;class Ya{constructor(){this.browserResolver=Bt(zh),this.cordovaResolver=Bt(dT),this.underlyingResolver=null,this._redirectPersistence=ki,this._completeRedirectFn=Vh,this._overrideRedirectResult=Nh}_initialize(u){var d=this;return(0,_.A)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(u)})()}_openPopup(u,d,g,y){var A=this;return(0,_.A)(function*(){return yield A.selectUnderlyingResolver(),A.assertedUnderlyingResolver._openPopup(u,d,g,y)})()}_openRedirect(u,d,g,y){var A=this;return(0,_.A)(function*(){return yield A.selectUnderlyingResolver(),A.assertedUnderlyingResolver._openRedirect(u,d,g,y)})()}_isIframeWebStorageSupported(u,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(u,d)}_originValidation(u){return this.assertedUnderlyingResolver._originValidation(u)}get _shouldInitProactively(){return q0()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Q0(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var u=this;return(0,_.A)(function*(){if(u.underlyingResolver)return;const d=yield function Qs(){return um.apply(this,arguments)}();u.underlyingResolver=d?u.cordovaResolver:u.browserResolver})()}}function cd(p){return p.unwrap()}function _T(p){return pm(p)}function pm(p){const{_tokenResponse:u}=p instanceof C.g?p.customData:p;if(!u)return null;if(!(p instanceof C.g)&&"temporaryProof"in u&&"phoneNumber"in u)return Ju.credentialFromResult(p);const d=u.providerId;if(!d||d===Ce.PASSWORD)return null;let g;switch(d){case Ce.GOOGLE:g=$u;break;case Ce.FACEBOOK:g=fh;break;case Ce.GITHUB:g=Hy;break;case Ce.TWITTER:g=Wy;break;default:const{oauthIdToken:y,oauthAccessToken:A,oauthTokenSecret:W,pendingToken:ge,nonce:He}=u;return A||W||y||ge?ge?d.startsWith("saml.")?pc._create(d,ge):mi._fromParams({providerId:d,signInMethod:d,pendingToken:ge,idToken:y,accessToken:A}):new Us(d).credential({idToken:y,accessToken:A,rawNonce:He}):null}return p instanceof C.g?g.credentialFromError(p):g.credentialFromResult(p)}function ii(p,u){return u.catch(d=>{throw d instanceof C.g&&function Y0(p,u){var d;const g=null===(d=u.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===(null==u?void 0:u.code))u.resolver=new vT(p,function LC(p,u){var d;const g=(0,C.Ku)(p),y=u;return S(u.customData.operationType,g,"argument-error"),S(null===(d=y.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),va._fromError(g,y)}(p,u));else if(g){const y=pm(u),A=u;y&&(A.credential=y,A.tenantId=g.tenantId||void 0,A.email=g.email||void 0,A.phoneNumber=g.phoneNumber||void 0)}}(p,d),d}).then(d=>{const y=d.user;return{operationType:d.operationType,credential:_T(d),additionalUserInfo:a0(d),user:Vn.getOrCreate(y)}})}function Xa(p,u){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,_.A)(function*(p,u){const d=yield u;return{verificationId:d.verificationId,confirm:g=>ii(p,d.confirm(g))}})).apply(this,arguments)}class vT{constructor(u,d){this.resolver=d,this.auth=function Ll(p){return p.wrapped()}(u)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(u){return ii(cd(this.auth),this.resolver.resolveSignIn(u))}}class Vn{constructor(u){this._delegate=u,this.multiFactor=function Gg(p){const u=(0,C.Ku)(p);return Ga.has(u)||Ga.set(u,Xr._fromUser(u)),Ga.get(u)}(u)}static getOrCreate(u){return Vn.USER_MAP.has(u)||Vn.USER_MAP.set(u,new Vn(u)),Vn.USER_MAP.get(u)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(u){return this._delegate.getIdTokenResult(u)}getIdToken(u){return this._delegate.getIdToken(u)}linkAndRetrieveDataWithCredential(u){return this.linkWithCredential(u)}linkWithCredential(u){var d=this;return(0,_.A)(function*(){return ii(d.auth,Uu(d._delegate,u))})()}linkWithPhoneNumber(u,d){var g=this;return(0,_.A)(function*(){return Xa(g.auth,function Fi(p,u,d){return vi.apply(this,arguments)}(g._delegate,u,d))})()}linkWithPopup(u){var d=this;return(0,_.A)(function*(){return ii(d.auth,function Dk(p,u,d){return I0.apply(this,arguments)}(d._delegate,u,Ya))})()}linkWithRedirect(u){var d=this;return(0,_.A)(function*(){return yield hm(Gn(d.auth)),YC(d._delegate,u,Ya)})()}reauthenticateAndRetrieveDataWithCredential(u){return this.reauthenticateWithCredential(u)}reauthenticateWithCredential(u){var d=this;return(0,_.A)(function*(){return ii(d.auth,mh(d._delegate,u))})()}reauthenticateWithPhoneNumber(u,d){return Xa(this.auth,function Wg(p,u,d){return ya.apply(this,arguments)}(this._delegate,u,d))}reauthenticateWithPopup(u){return ii(this.auth,function Ak(p,u,d){return y0.apply(this,arguments)}(this._delegate,u,Ya))}reauthenticateWithRedirect(u){var d=this;return(0,_.A)(function*(){return yield hm(Gn(d.auth)),A0(d._delegate,u,Ya)})()}sendEmailVerification(u){return function MC(p,u){return Og.apply(this,arguments)}(this._delegate,u)}unlink(u){var d=this;return(0,_.A)(function*(){return yield function AC(p,u){return Mg.apply(this,arguments)}(d._delegate,u),d})()}updateEmail(u){return function NC(p,u){return Bg((0,C.Ku)(p),u,null)}(this._delegate,u)}updatePassword(u){return function Jo(p,u){return Bg((0,C.Ku)(p),null,u)}(this._delegate,u)}updatePhoneNumber(u){return function qg(p,u){return Kg.apply(this,arguments)}(this._delegate,u)}updateProfile(u){return function et(p,u){return Vg.apply(this,arguments)}(this._delegate,u)}verifyBeforeUpdateEmail(u,d){return function o0(p,u,d){return Fg.apply(this,arguments)}(this._delegate,u,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Vn.USER_MAP=new WeakMap;const Vl=S;let X0=(()=>{class p{constructor(d,g){if(this.app=d,g.isInitialized())return this._delegate=g.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:y}=d.options;Vl(y,"invalid-api-key",{appName:d.name}),Vl(y,"invalid-api-key",{appName:d.name});const A=typeof window<"u"?Ya:void 0;this._delegate=g.initialize({options:{persistence:ba(y,d.name),popupRedirectResolver:A}}),this._delegate._updateErrorMap(ye),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Vn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,g){!function Re(p,u,d){const g=Gn(p);S(g._canInitEmulator,g,"emulator-config-failed"),S(/^https?:\/\//.test(u),g,"invalid-emulator-scheme");const y=!(null==d||!d.disableWarnings),A=at(u),{host:W,port:ge}=function st(p){const u=at(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(u.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",y=/^(\[[^\]]+\])(:|$)/.exec(g);if(y){const A=y[1];return{host:A,port:dt(g.substr(A.length+1))}}{const[A,W]=g.split(":");return{host:A,port:dt(W)}}}(u);g.config.emulator={url:`${A}//${W}${null===ge?"":`:${ge}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:W,port:ge,protocol:A.replace(":",""),options:Object.freeze({disableWarnings:y})}),y||function Mt(){function p(){const u=document.createElement("p"),d=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}(this._delegate,d,g)}applyActionCode(d){return function ys(p,u){return ar.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return t0(this._delegate,d)}confirmPasswordReset(d,g){return function vh(p,u,d){return Ic.apply(this,arguments)}(this._delegate,d,g)}createUserWithEmailAndPassword(d,g){var y=this;return(0,_.A)(function*(){return ii(y._delegate,function Gu(p,u,d){return Ih.apply(this,arguments)}(y._delegate,d,g))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function PC(p,u){return Ng.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function SC(p,u){const d=fc.parseLink(u);return"EMAIL_SIGNIN"===(null==d?void 0:d.operation)}(0,d)}getRedirectResult(){var d=this;return(0,_.A)(function*(){Vl(ef(),d._delegate,"operation-not-supported-in-this-environment");const g=yield function D0(p,u){return Lh.apply(this,arguments)}(d._delegate,Ya);return g?ii(d._delegate,Promise.resolve(g)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function hT(p,u){Gn(p)._logFramework(u)}(this._delegate,d)}onAuthStateChanged(d,g,y){const{next:A,error:W,complete:ge}=gm(d,g,y);return this._delegate.onAuthStateChanged(A,W,ge)}onIdTokenChanged(d,g,y){const{next:A,error:W,complete:ge}=gm(d,g,y);return this._delegate.onIdTokenChanged(A,W,ge)}sendSignInLinkToEmail(d,g){return function DC(p,u,d){return Wu.apply(this,arguments)}(this._delegate,d,g)}sendPasswordResetEmail(d,g){return function e0(p,u,d){return zu.apply(this,arguments)}(this._delegate,d,g||void 0)}setPersistence(d){var g=this;return(0,_.A)(function*(){let y;switch(function dm(p,u){kc(Object.values(Xi).includes(u),p,"invalid-persistence-type"),(0,C.lV)()?kc(u!==Xi.SESSION,p,"unsupported-persistence-type"):(0,C.Ll)()?kc(u===Xi.NONE,p,"unsupported-persistence-type"):Zh()?kc(u===Xi.NONE||u===Xi.LOCAL&&(0,C.zW)(),p,"unsupported-persistence-type"):kc(u===Xi.NONE||mT(),p,"unsupported-persistence-type")}(g._delegate,d),d){case Xi.SESSION:y=ki;break;case Xi.LOCAL:y=(yield Bt(Oi)._isAvailable())?Oi:Ah;break;case Xi.NONE:y=xt;break;default:return Ge("argument-error",{appName:g._delegate.name})}return g._delegate.setPersistence(y)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return ii(this._delegate,function Ye(p){return gc.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return ii(this._delegate,ma(this._delegate,d))}signInWithCustomToken(d){return ii(this._delegate,function Po(p,u){return ju.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,g){return ii(this._delegate,function r0(p,u,d){return ma((0,C.Ku)(p),hh.credential(u,d)).catch(function(){var g=(0,_.A)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&Pn(p),y});return function(y){return g.apply(this,arguments)}}())}(this._delegate,d,g))}signInWithEmailLink(d,g){return ii(this._delegate,function RC(p,u,d){return ko.apply(this,arguments)}(this._delegate,d,g))}signInWithPhoneNumber(d,g){return Xa(this._delegate,function Gr(p,u,d){return Xu.apply(this,arguments)}(this._delegate,d,g))}signInWithPopup(d){var g=this;return(0,_.A)(function*(){return Vl(ef(),g._delegate,"operation-not-supported-in-this-environment"),ii(g._delegate,function Tk(p,u,d){return v0.apply(this,arguments)}(g._delegate,d,Ya))})()}signInWithRedirect(d){var g=this;return(0,_.A)(function*(){return Vl(ef(),g._delegate,"operation-not-supported-in-this-environment"),yield hm(g._delegate),qC(g._delegate,d,Ya)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function n0(p,u){return yh.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return p.Persistence=Xi,p})();function gm(p,u,d){let g=p;"function"!=typeof p&&({next:g,error:u,complete:d}=p);const y=g;return{next:W=>y(W&&Vn.getOrCreate(W)),error:u,complete:d}}function ba(p,u){const d=function K0(p,u){const d=fm();if(!d)return[];const g=Hr(ld,p,u);switch(d.getItem(g)){case Xi.NONE:return[xt];case Xi.LOCAL:return[Oi,ki];case Xi.SESSION:return[ki];default:return[]}}(p,u);if(typeof self<"u"&&!d.includes(Oi)&&d.push(Oi),typeof window<"u")for(const g of[Ah,ki])d.includes(g)||d.push(g);return d.includes(xt)||d.push(xt),d}class mm{constructor(){this.providerId="phone",this._delegate=new Ju(cd(V.A.auth()))}static credential(u,d){return Ju.credential(u,d)}verifyPhoneNumber(u,d){return this._delegate.verifyPhoneNumber(u,d)}unwrap(){return this._delegate}}mm.PHONE_SIGN_IN_METHOD=Ju.PHONE_SIGN_IN_METHOD,mm.PROVIDER_ID=Ju.PROVIDER_ID;const J0=S;class _m{constructor(u,d,g=V.A.app()){var y;J0(null===(y=g.options)||void 0===y?void 0:y.apiKey,"invalid-api-key",{appName:g.name}),this._delegate=new Gs(g.auth(),u,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Z0(p){p.INTERNAL.registerComponent(new M.uA("auth-compat",u=>{const d=u.getProvider("app-compat").getImmediate(),g=u.getProvider("auth");return new X0(d,g)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:hh,FacebookAuthProvider:fh,GithubAuthProvider:Hy,GoogleAuthProvider:$u,OAuthProvider:Us,SAMLAuthProvider:fa,PhoneAuthProvider:mm,PhoneMultiFactorGenerator:F0,RecaptchaVerifier:_m,TwitterAuthProvider:Wy,Auth:X0,AuthCredential:Lt,Error:C.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),p.registerVersion("@firebase/auth-compat","0.5.4")}(V.A)},467:(Nt,le,F)=>{"use strict";function _(C,L,G,H,M,ie,Ce){try{var ee=C[ie](Ce),X=ee.value}catch(de){return void G(de)}ee.done?L(X):Promise.resolve(X).then(H,M)}function V(C){return function(){var L=this,G=arguments;return new Promise(function(H,M){var ie=C.apply(L,G);function Ce(X){_(ie,H,M,Ce,ee,"next",X)}function ee(X){_(ie,H,M,Ce,ee,"throw",X)}Ce(void 0)})}}F.d(le,{A:()=>V})},1635:(Nt,le,F)=>{"use strict";function L(q,B){var j={};for(var ce in q)Object.prototype.hasOwnProperty.call(q,ce)&&B.indexOf(ce)<0&&(j[ce]=q[ce]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var Ie=0;for(ce=Object.getOwnPropertySymbols(q);Ie<ce.length;Ie++)B.indexOf(ce[Ie])<0&&Object.prototype.propertyIsEnumerable.call(q,ce[Ie])&&(j[ce[Ie]]=q[ce[Ie]])}return j}function G(q,B,j,ce){var it,Ie=arguments.length,he=Ie<3?B:null===ce?ce=Object.getOwnPropertyDescriptor(B,j):ce;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)he=Reflect.decorate(q,B,j,ce);else for(var gt=q.length-1;gt>=0;gt--)(it=q[gt])&&(he=(Ie<3?it(he):Ie>3?it(B,j,he):it(B,j))||he);return Ie>3&&he&&Object.defineProperty(B,j,he),he}function de(q,B,j,ce){return new(j||(j=Promise))(function(he,it){function gt(Vt){try{ut(ce.next(Vt))}catch(un){it(un)}}function ot(Vt){try{ut(ce.throw(Vt))}catch(un){it(un)}}function ut(Vt){Vt.done?he(Vt.value):function Ie(he){return he instanceof j?he:new j(function(it){it(he)})}(Vt.value).then(gt,ot)}ut((ce=ce.apply(q,B||[])).next())})}function Oe(q){return this instanceof Oe?(this.v=q,this):new Oe(q)}function Ge(q,B,j){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,ce=j.apply(q,B||[]),he=[];return Ie={},it("next"),it("throw"),it("return"),Ie[Symbol.asyncIterator]=function(){return this},Ie;function it(Dt){ce[Dt]&&(Ie[Dt]=function(mn){return new Promise(function(Ht,Be){he.push([Dt,mn,Ht,Be])>1||gt(Dt,mn)})})}function gt(Dt,mn){try{!function ot(Dt){Dt.value instanceof Oe?Promise.resolve(Dt.value.v).then(ut,Vt):un(he[0][2],Dt)}(ce[Dt](mn))}catch(Ht){un(he[0][3],Ht)}}function ut(Dt){gt("next",Dt)}function Vt(Dt){gt("throw",Dt)}function un(Dt,mn){Dt(mn),he.shift(),he.length&&gt(he[0][0],he[0][1])}}function Fe(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,B=q[Symbol.asyncIterator];return B?B.call(q):(q=function ke(q){var B="function"==typeof Symbol&&Symbol.iterator,j=B&&q[B],ce=0;if(j)return j.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&ce>=q.length&&(q=void 0),{value:q&&q[ce++],done:!q}}};throw new TypeError(B?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),j={},ce("next"),ce("throw"),ce("return"),j[Symbol.asyncIterator]=function(){return this},j);function ce(he){j[he]=q[he]&&function(it){return new Promise(function(gt,ot){!function Ie(he,it,gt,ot){Promise.resolve(ot).then(function(ut){he({value:ut,done:gt})},it)}(gt,ot,(it=q[he](it)).done,it.value)})}}}F.d(le,{AQ:()=>Ge,Cg:()=>G,N3:()=>Oe,Tt:()=>L,sH:()=>de,xN:()=>Fe}),"function"==typeof SuppressedError&&SuppressedError}},Nt=>{Nt(Nt.s=4984)}]);